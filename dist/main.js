!function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";var i,r,n,a;s.r(e),function(t){t.Subscribed="SUBSCRIBED",t.Error="ERROR",t.Pending="PENDING",t.Warning="WARNING",t.Unsubscribed="UNSUBSCRIBED"}(i||(i={})),function(t){t.Ready="READY",t.Down="DOWN",t.Warming="WARMUP",t.Error="ERROR"}(r||(r={})),function(t){t.VarNotExist="VAR-NOT-EXIST",t.WontSubcribe="WONT-SUB",t.CantSubcribe="CANT-SUB",t.CantUnSubcribe="CANT-UNSUB",t.BadValue="BAD-VALUE",t.NoNetwork="NO-NETWORK",t.NetError="NET-ERROR",t.Unauthorized="UNAUTHORIZED",t.BadReq="BAD-REQUEST",t.ServerError="SERVER-ERROR",t.NotFound="NOT-FOUND",t.BadData="BAD-DATA",t.EngineNotExist="NO-ENGINE",t.UnknownError="UKNOWN"}(n||(n={})),function(t){t.Write="WRITE",t.Read="READ",t.Subscribe="SUBSCRIBE",t.Unsubscribe="UNSUBSCRIBE",t.Update="UPDATE",t.Init="INITIALIZE",t.Unknown="UNKNOWN"}(a||(a={}));class o{constructor(t,e,s="",i=""){if("string"!=typeof e)throw TypeError("Code must be a string");if("string"!=typeof t)throw TypeError("sysName must be a string");this.code=e,this.timestamp_ms=Date.now(),this.systemName=t,this.action=i||"",this.targetName=s||"",this.ack=!1,this.message=this.buildDefaultMessage()}buildDefaultMessage(){let t=`Error in system (${this.systemName})`;return""!==this.action&&(t+=` during ${this.action}`),""!==this.targetName&&(t+=` on target (${this.targetName})`),t+=`. Error Code: ${this.code}.`}}class l{constructor(t){this.system=t.system,this.name=t.name,this.value=null,this.status=null}}class h{constructor(t,e,s,i=null){this.error=null,this.success=t,this.name=e,this.value=i,this.system=s}setError(t,e=""){this.error={code:t,message:e}}}var c=(t,e)=>{const s=["sort","reverse","splice","pop","unshift","shift","push"];let i=!1;const r={get(t,e,s){try{return"prototype"===e?Reflect.get(t,e,s):new Proxy(t[e],r)}catch(i){return Reflect.get(t,e,s)}},defineProperty(t,s,r){const n=Reflect.defineProperty(t,s,r);return i||e(),n},deleteProperty(t,s){const r=Reflect.deleteProperty(t,s);return i||e(),r},apply(t,r,n){if(s.includes(t.name)){i=!0;const s=Reflect.apply(t,r,n);return e(),i=!1,s}return Reflect.apply(t,r,n)}};return new Proxy(t,r)},d=!1,u=!1;const p=new Map;class m{constructor(t){if(this.name=t,this.callbackMap=new Map,"string"!=typeof this.name)throw Error("Variable name must be a string.")}lock_callbacks(){if(d)throw this.unlock_callbacks(),Error("Forbidden multiple-update during an update callback loop.");d=!0}unlock_callbacks(){d=!1}_call_watchers(t){for(let e of this.callbackMap.values())void 0===t?e():e(t)}attachWatcher(t,e){if(null==t)throw Error("Target is undefined.");this.callbackMap.set(t,e)}detachWatcher(t){if(null==t)throw Error("Target is undefined.");this.callbackMap.delete(t)}}class _ extends m{constructor(t,e){super(t),"function"==typeof e&&(this.usrDefined_transition=e)}usrDefined_transition(t){}applyTransition(t){this.lock_callbacks();try{u=!0,this.usrDefined_transition(t),u=!1,this._call_watchers(t);for(let t of p.values())t()}catch(t){throw p.clear(),this.unlock_callbacks(),new Error(t.message)}p.clear(),this.unlock_callbacks()}}class y extends m{constructor(t,e){super(t),this.type=typeof e,this.default_val=e,this._err_on_value="Wrong type assignment to state variable: "+this.name,this._valueProxy=void 0,this._auto_valueProxy=void 0,this.allowStandaloneAssign=!0,this.transitionMap=new Map;if(!["string","object","number","boolean"].includes(this.type))throw TypeError(this._err_on_value);this._val=this.GET()||this.CREATE(this.default_val),this._set_proxies()}_set_proxies(){"object"===this.type&&"object"==typeof this._val&&(this._valueProxy=c(this._val,this.updateWatcherIfAllowed.bind(this)),this._auto_valueProxy=c(this._val,this._markForWatchersUpdate.bind(this)))}set value(t){this._checkIsAllowed(),this._val=t,this._set_proxies(),u?this._markForWatchersUpdate():this.updateWatchers()}get value(){return u?"object"===this.type?this._auto_valueProxy:this._val:"object"===this.type?this._valueProxy:this._val}CREATE(t){if(typeof t!==this.type)throw TypeError(this._err_on_value);{let e="string"!==this.type?JSON.stringify(t):t;localStorage.setItem(this.name,e)}return t}UPDATE_DATA(){if(typeof this._val!==this.type)throw u&&(u=!1),d&&this.unlock_callbacks(),TypeError(this._err_on_value);{let t="string"!==this.type?JSON.stringify(this._val):this._val;localStorage.setItem(this.name,t)}}RESET(){this.value=this.default_val}GET(){let t=localStorage.getItem(this.name);if(null===t)return t;if("string"!==this.type&&typeof(t=JSON.parse(t))!==this.type)throw TypeError("State variable: "+this.name+" is corrupted, returns type "+typeof t+" expecting "+this.type);return t}_markForWatchersUpdate(){this.UPDATE_DATA(),p.set(this,this._call_watchers.bind(this))}_checkIsAllowed(){if(!this.allowStandaloneAssign&&!u)throw u&&(u=!1),"StateVariable "+this.name+" is not allowed assignment outside a state transition"}updateWatcherIfAllowed(){this._checkIsAllowed(),this.updateWatchers()}updateWatchers(){this.lock_callbacks();try{this.UPDATE_DATA(),this._call_watchers()}catch(t){throw this.unlock_callbacks(),new Error(t.message)}this.unlock_callbacks()}addTransition(t,e){let s=new _(t);"function"==typeof e&&(s.usrDefined_transition=e.bind(this),this.transitionMap.set(t,s),this.allowStandaloneAssign=!1)}applyTransition(t,e){if(!this.transitionMap.has(t))throw Error(`Transition ${t} not found`);this.transitionMap.get(t).applyTransition(e)}}class g extends m{sendMessage(t){this._call_watchers(t)}}let f=(t,e)=>(class extends e{constructor(){super(),this._transitionMap=new Map,this._messageMap=new Map,this._extractTransitions(),this._addGetterSetters()}_extractTransitions(){for(let e=0;e<t.length;e++){let s=t[e];if(s instanceof y)for(let e of s.transitionMap.values())t.push(e)}}applyTransition(t,e){if(!this._transitionMap.has(t))throw Error(`Transition ${t} not found`);this._transitionMap.get(t)(e)}sendMessageOnChannel(t,e){if(!this._messageMap.has(t))throw Error(`Message channel ${t} not found`);this._messageMap.get(t)(e)}_addGetterSetters(){for(let e of t)if(e instanceof y)"object"===e.type&&(this[`_${e.name}Proxy`]=c(e._val,()=>{throw`${e.name} cannot be assigned from a custom element`})),Object.defineProperty(this,e.name,{set:t=>{throw`${e.name} cannot be assigned from a custom element`},get:()=>"object"===e.type?this[`_${e.name}Proxy`]:e._val});else if(e instanceof g)this._messageMap.set(e.name,e.sendMessage.bind(e));else{if(!(e instanceof _))throw TypeError("Accept only StateVariable, StateTransition or Message.");this._transitionMap.set(e.name,e.applyTransition.bind(e))}}disconnectedCallback(){void 0!==super.disconnectedCallback&&super.disconnectedCallback();for(let e of t)e.detachWatcher(this)}});let b=(t,e)=>(class extends(f(t,e)){connectedCallback(){void 0!==super.connectedCallback&&super.connectedCallback();for(let e of t)e instanceof g?this[`gotMessage_${e.name}`]&&e.attachWatcher(this,this[`gotMessage_${e.name}`].bind(this)):e.attachWatcher(this,this._stateRequestUpdate(e.name).bind(this))}_stateRequestUpdate(t){return function(){this[`on_${t}_update`]&&this[`on_${t}_update`](),this.requestUpdate()}}});const{replace:v}="",S=/[&<>'"]/g,w={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},E=t=>w[t],x=t=>v.call(t,S,E);class N extends y{constructor(){super("datatree",{}),this.addTransition("create",this._create),this.addTransition("update",this._update),this.addTransition("multiupdate",this._multiupdate)}GetVar(t){return this.ExistVar(t)?this.value[t.system][t.name]:null}Create(t){this.applyTransition("create",t)}UpdateStatus(t,e){let s=new l(t);s.status=e,this.applyTransition("update",s)}Update(t){Array.isArray(t)?this.applyTransition("multiupdate",t):this.applyTransition("update",t)}_create(t){if(t&&"string"==typeof t.system&&"string"==typeof t.name){t.system=x(t.system),t.name=x(t.name);let e={status:null,value:null};e.status=i.Pending,this.value.hasOwnProperty(t.system)||(this.value[t.system]={}),this.value[t.system][t.name]=e}}_multiupdate(t){t.forEach(t=>{this._update(t)})}_update(t){this._checkVarType(t);let e=this.GetVar(t);if(!e)throw new Error("Requested Variable does not exist: "+t.name);"string"==typeof t.value&&(t.value=x(t.value)),t.status&&(e.status=x(t.status)),null!==t.value&&void 0!==t.value&&(e.value=t.value)}_checkVarType(t){if(!t)throw new TypeError("Variable cannot be null");if("string"!=typeof t.name)throw new TypeError("Variable Name must be a string")}ExistVar(t){return("string"==typeof t.system||"string"==typeof t.name)&&(!!this.value.hasOwnProperty(t.system)&&!!this.value[t.system].hasOwnProperty(t.name))}}class P extends y{constructor(t){super(t,[]),this.errorExpiry_days=7,this.addTransition("create",this._create),this.addTransition("ack",this._ack),this.addTransition("clean",this._cleanup),this.swipe_interval_ID=window.setInterval(()=>{this.applyTransition("clean")},1e4)}GetAll(){return this.value}setSwipeInterval(t){clearInterval(this.swipe_interval_ID),this.swipe_interval_ID=window.setInterval(()=>{this.applyTransition("clean")},t)}Create(t){if(!(t instanceof o))throw TypeError("input must be a 'systemError' instance.");this.applyTransition("create",t)}_create(t){let e={code:x(t.code),message:x(t.message),systemName:x(t.systemName),targetName:x(t.targetName),action:x(t.action),timestamp_ms:t.timestamp_ms,ack:t.ack};this.value.push(e)}Acknoweldge(t){this.applyTransition("ack",t)}_ack(t){let e=this.value[t];if(!e)throw Error(`Error ID '${t}' does not exist`);e.ack=!0}GetUnack(){return this.value.filter(t=>!t.ack)}CleanAll(){this.applyTransition("clean",!0)}_cleanup(t){if(0===this.value.lenght)return;if(t)return void(this.value=[]);let e=this.value.filter(t=>t.timestamp_ms+864e5*this.errorExpiry_days>Date.now());e.length<this.value.length&&(this.value=e)}}var T=new class{constructor(){this.dataTree=new N,this.errorTray=new P("errortray"),this.dataEngines=new Map,this.status=r.Down,this._initPromise=new Promise(t=>{this._initResolve=t}),this._defaultEngine=null}AddEngine(t){let e=x(t.name);this.dataEngines.set(e,t),null===this._defaultEngine&&(this._defaultEngine=t)}SetDefeultEngine(t){this.dataEngines.has(t.name)||this.AddEngine(t),this._defaultEngine=t}GetEngine(t){if("string"!=typeof t)throw Error("Engine Name must be a string");return"default"===t.toLocaleLowerCase()?this._defaultEngine:this.dataEngines.get(t)}async Subscribe(t,e){if("string"!=typeof e.name||"string"!=typeof e.system)throw Error("CANNOT SUBSCRIBE variable "+e.name);await this.isInitialized(),e.name=x(e.name),e.system=x(e.system);let s=this.GetEngine(t);if(!s)throw this.dataTree.Create(e),this.dataTree.UpdateStatus(e,i.Error),this.CreateAndDispatchError(e.system,n.EngineNotExist,"",a.Subscribe),new Error(`Engine '${t}' does not exist.`);this.dataTree.ExistVar(e)?s.isVarSubscribed(e)||this.dataTree.UpdateStatus(e,i.Pending):this.dataTree.Create(e),s.RequestSubscription(e)}async Unsubscribe(t,e){if("string"!=typeof e.name||"string"!=typeof e.system)throw Error("CANNOT UNSUBSCRIBE variable "+e.name);await this.isInitialized();let s=this.GetEngine(t);if(!s)throw this.CreateAndDispatchError(e.system,n.EngineNotExist,"",a.Unsubscribe),new Error(`Engine '${t}' does not exist.`);s.RequestUnsubscription(e)}Update(t){this.dataTree.Update(t)}async Read(t,e){if("object"!=typeof e)throw new TypeError("'system' must be a string and 'vars' an array of strings");await this.isInitialized();let s=this.GetEngine(t);if(s){let t=await s.Read(e);return s.UpdateVars(t,i.Subscribed,a.Read),t}throw this.CreateAndDispatchError(t,n.EngineNotExist,"",a.Read),new Error(`Engine '${t}' does not exist.`)}async Write(t,e,s){if("object"!=typeof e||"object"!=typeof s)throw new TypeError("'system' must be a string and 'vars' and values cannot be null");await this.isInitialized();let r=this.GetEngine(t);if(r){let t=e.map(t=>{let e=new l(t);return e.status=i.Pending,e});this.dataTree.Update(t);let n=await r.Write(e,s);return r.UpdateVars(n,i.Subscribed,a.Write),n}throw this.CreateAndDispatchError(t,n.EngineNotExist,"",a.Write),new Error(`Engine '${t}' does not exist.`)}DispatchError(t){this.errorTray.Create(t)}CreateAndDispatchError(t,e,s="",i=""){let r=new o(t,e,s,i);this.DispatchError(r)}async Init(){this._initResolve(),this.status=r.Warming;let t=[];Array.from(this.dataEngines.values()).forEach(e=>t.push(e._init())),await Promise.all(t),this.status=r.Ready}isInitialized(){return this._initPromise}};class C{constructor(t){this.manager=T,this.status=r.Down,this.toBeSubscribed=new Map,this.toBeUnsubscribed=new Set,this.subscribedVar=new Map,this.sub_timerID=null,this.unsub_timerID=null,this.aggregationTime_ms=10,this.name=t||"DataEngine",this.VarDispatchErrorCases=[n.VarNotExist,n.WontSubcribe,n.Unauthorized,n.UnknownError,n.CantUnSubcribe],this.VarErrorNoActCases=[n.BadValue,n.CantUnSubcribe,n.Unauthorized],this.VarErrorUnsubCases=[n.CantSubcribe,n.NoNetwork]}serializeSysObject(t){return"string"!=typeof t.name||t.name.includes(":")||"string"!=typeof t.system||t.system.includes(":")?null:t.system+":"+t.name}deserializeSysObject(t){let e=t.split(":");return 2!==e.length?null:{system:e[0],name:e[1]}}RequestSubscription(t){let e=this.serializeSysObject(t);if(null===e)throw Error("CANNOT SUBSCRIBE variable "+t.name);if(this.subscribedVar.has(e)){let t=this.subscribedVar.get(e);return void this.subscribedVar.set(e,t+1)}let s=this.toBeSubscribed.get(e)||0;this.toBeSubscribed.set(e,s+1),this.status!==r.Down&&this.status!==r.Warming&&(this.sub_timerID&&clearTimeout(this.sub_timerID),this.sub_timerID=window.setTimeout(this._subcribe.bind(this),this.aggregationTime_ms))}RequestUnsubscription(t){let e=this.serializeSysObject(t);if(null===e||!this.subscribedVar.has(e))throw Error("CANNOT UNSUBSCRIBE variable "+t.name);let s=this.subscribedVar.get(e);s>1?this.subscribedVar.set(e,s-1):(this.toBeUnsubscribed.add(e),this.unsub_timerID&&clearTimeout(this.unsub_timerID),this.unsub_timerID=window.setTimeout(this._unsubcribe.bind(this),this.aggregationTime_ms))}async _subcribe(){let t=Array.from(this.toBeSubscribed.keys()).map(t=>this.deserializeSysObject(t)),e=await this.Subscribe(t);this.updateSubscriberLists(e),this.UpdateVars(e,i.Subscribed,a.Subscribe)}updateSubscriberLists(t){for(let e of t){let t=this.serializeSysObject(e);if(e.success){let e=this.toBeSubscribed.get(t);e+=this.subscribedVar.get(t)||0,this.subscribedVar.set(t,e),this.toBeSubscribed.delete(t)}else{let s=e.error?e.error.code:n.UnknownError;s!==n.NoNetwork&&s!==n.CantSubcribe&&this.toBeSubscribed.delete(t)}}}isVarSubscribed(t){let e=this.serializeSysObject(t);return this.subscribedVar.has(e)}UpdateVars(t,e,s=""){let r=[];for(let a of t){let t=new l(a);if(a.success)t.status=e,null!==a.value&&void 0!==a.value&&(t.value=a.value);else{let e=a.error?a.error.code:n.UnknownError;if(this.VarDispatchErrorCases.includes(e)&&this.manager.CreateAndDispatchError(a.system,e,a.name,s),this.VarErrorUnsubCases.includes(e))t.status=i.Unsubscribed;else if(this.VarErrorNoActCases.includes(e)){let e=this.manager.dataTree.GetVar(a);t.status=e.status===i.Pending?i.Subscribed:null}else t.status=i.Error}r.push(t)}this.manager.Update(r)}async _unsubcribe(){let t=Array.from(this.toBeUnsubscribed).map(t=>this.deserializeSysObject(t)),e=await this.Unsubscribe(t);for(let t of e){let e=this.serializeSysObject(t);t.success&&this.subscribedVar.delete(e),this.toBeUnsubscribed.delete(e)}this.UpdateVars(e,i.Unsubscribed,a.Unsubscribe)}async _init(){this.status=r.Warming;let t=await this.Initialize();if(t.success)this.status=r.Ready;else{this.status=r.Error;let e=t.error?t.error.code:n.UnknownError,s=new o(this.name,e,this.name,a.Init);this.manager.DispatchError(s)}this.toBeSubscribed.size>0&&this._subcribe()}UpdateData(t){this.manager.Update(t)}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const A="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,U=(t,e,s=null)=>{for(;e!==s;){const s=e.nextSibling;t.removeChild(e),e=s}},k=`{{lit-${String(Math.random()).slice(2)}}}`,V=`\x3c!--${k}--\x3e`,R=new RegExp(`${k}|${V}`),O="$lit$";class M{constructor(t,e){this.parts=[],this.element=e;const s=[],i=[],r=document.createTreeWalker(e.content,133,null,!1);let n=0,a=-1,o=0;const{strings:l,values:{length:h}}=t;for(;o<h;){const t=r.nextNode();if(null!==t){if(a++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:s}=e;let i=0;for(let t=0;t<s;t++)I(e[t].name,O)&&i++;for(;i-- >0;){const e=l[o],s=W.exec(e)[2],i=s.toLowerCase()+O,r=t.getAttribute(i);t.removeAttribute(i);const n=r.split(R);this.parts.push({type:"attribute",index:a,name:s,strings:n}),o+=n.length-1}}"TEMPLATE"===t.tagName&&(i.push(t),r.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(k)>=0){const i=t.parentNode,r=e.split(R),n=r.length-1;for(let e=0;e<n;e++){let s,n=r[e];if(""===n)s=B();else{const t=W.exec(n);null!==t&&I(t[2],O)&&(n=n.slice(0,t.index)+t[1]+t[2].slice(0,-O.length)+t[3]),s=document.createTextNode(n)}i.insertBefore(s,t),this.parts.push({type:"node",index:++a})}""===r[n]?(i.insertBefore(B(),t),s.push(t)):t.data=r[n],o+=n}}else if(8===t.nodeType)if(t.data===k){const e=t.parentNode;null!==t.previousSibling&&a!==n||(a++,e.insertBefore(B(),t)),n=a,this.parts.push({type:"node",index:a}),null===t.nextSibling?t.data="":(s.push(t),a--),o++}else{let e=-1;for(;-1!==(e=t.data.indexOf(k,e+1));)this.parts.push({type:"node",index:-1}),o++}}else r.currentNode=i.pop()}for(const t of s)t.parentNode.removeChild(t)}}const I=(t,e)=>{const s=t.length-e.length;return s>=0&&t.slice(s)===e},D=t=>-1!==t.index,B=()=>document.createComment(""),W=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=\/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,j=133;function $(t,e){const{element:{content:s},parts:i}=t,r=document.createTreeWalker(s,j,null,!1);let n=z(i),a=i[n],o=-1,l=0;const h=[];let c=null;for(;r.nextNode();){o++;const t=r.currentNode;for(t.previousSibling===c&&(c=null),e.has(t)&&(h.push(t),null===c&&(c=t)),null!==c&&l++;void 0!==a&&a.index===o;)a.index=null!==c?-1:a.index-l,a=i[n=z(i,n)]}h.forEach(t=>t.parentNode.removeChild(t))}const q=t=>{let e=11===t.nodeType?0:1;const s=document.createTreeWalker(t,j,null,!1);for(;s.nextNode();)e++;return e},z=(t,e=-1)=>{for(let s=e+1;s<t.length;s++){const e=t[s];if(D(e))return s}return-1};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const F=new WeakMap,L=t=>"function"==typeof t&&F.has(t),H={},G={};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class J{constructor(t,e,s){this.__parts=[],this.template=t,this.processor=e,this.options=s}update(t){let e=0;for(const s of this.__parts)void 0!==s&&s.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=A?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],s=this.template.parts,i=document.createTreeWalker(t,133,null,!1);let r,n=0,a=0,o=i.nextNode();for(;n<s.length;)if(r=s[n],D(r)){for(;a<r.index;)a++,"TEMPLATE"===o.nodeName&&(e.push(o),i.currentNode=o.content),null===(o=i.nextNode())&&(i.currentNode=e.pop(),o=i.nextNode());if("node"===r.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(o.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(o,r.name,r.strings,this.options));n++}else this.__parts.push(void 0),n++;return A&&(document.adoptNode(t),customElements.upgrade(t)),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const K=` ${k} `;class Z{constructor(t,e,s,i){this.strings=t,this.values=e,this.type=s,this.processor=i}getHTML(){const t=this.strings.length-1;let e="",s=!1;for(let i=0;i<t;i++){const t=this.strings[i],r=t.lastIndexOf("\x3c!--");s=(r>-1||s)&&-1===t.indexOf("--\x3e",r+1);const n=W.exec(t);e+=null===n?t+(s?K:V):t.substr(0,n.index)+n[1]+n[2]+O+n[3]+k}return e+=this.strings[t]}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const Q=t=>null===t||!("object"==typeof t||"function"==typeof t),X=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class Y{constructor(t,e,s){this.dirty=!0,this.element=t,this.name=e,this.strings=s,this.parts=[];for(let t=0;t<s.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new tt(this)}_getValue(){const t=this.strings,e=t.length-1;let s="";for(let i=0;i<e;i++){s+=t[i];const e=this.parts[i];if(void 0!==e){const t=e.value;if(Q(t)||!X(t))s+="string"==typeof t?t:String(t);else for(const e of t)s+="string"==typeof e?e:String(e)}}return s+=t[e]}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class tt{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===H||Q(t)&&t===this.value||(this.value=t,L(t)||(this.committer.dirty=!0))}commit(){for(;L(this.value);){const t=this.value;this.value=H,t(this)}this.value!==H&&this.committer.commit()}}class et{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(B()),this.endNode=t.appendChild(B())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=B()),t.__insert(this.endNode=B())}insertAfterPart(t){t.__insert(this.startNode=B()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;L(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=H,t(this)}const t=this.__pendingValue;t!==H&&(Q(t)?t!==this.value&&this.__commitText(t):t instanceof Z?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):X(t)?this.__commitIterable(t):t===G?(this.value=G,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,s="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=s:this.__commitNode(document.createTextNode(s)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof J&&this.value.template===e)this.value.update(t.values);else{const s=new J(e,t.processor,this.options),i=s._clone();s.update(t.values),this.__commitNode(i),this.value=s}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let s,i=0;for(const r of t)void 0===(s=e[i])&&(s=new et(this.options),e.push(s),0===i?s.appendIntoPart(this):s.insertAfterPart(e[i-1])),s.setValue(r),s.commit(),i++;i<e.length&&(e.length=i,this.clear(s&&s.endNode))}clear(t=this.startNode){U(this.startNode.parentNode,t.nextSibling,this.endNode)}}class st{constructor(t,e,s){if(this.value=void 0,this.__pendingValue=void 0,2!==s.length||""!==s[0]||""!==s[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=s}setValue(t){this.__pendingValue=t}commit(){for(;L(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=H,t(this)}if(this.__pendingValue===H)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=H}}class it extends Y{constructor(t,e,s){super(t,e,s),this.single=2===s.length&&""===s[0]&&""===s[1]}_createPart(){return new rt(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class rt extends tt{}let nt=!1;(()=>{try{const t={get capture(){return nt=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class at{constructor(t,e,s){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=s,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;L(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=H,t(this)}if(this.__pendingValue===H)return;const t=this.__pendingValue,e=this.value,s=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),i=null!=t&&(null==e||s);s&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),i&&(this.__options=ot(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=H}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const ot=t=>t&&(nt?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function lt(t){let e=ht.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},ht.set(t.type,e));let s=e.stringsArray.get(t.strings);if(void 0!==s)return s;const i=t.strings.join(k);return void 0===(s=e.keyString.get(i))&&(s=new M(t,t.getTemplateElement()),e.keyString.set(i,s)),e.stringsArray.set(t.strings,s),s}const ht=new Map,ct=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const dt=new
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class{handleAttributeExpressions(t,e,s,i){const r=e[0];return"."===r?new it(t,e.slice(1),s).parts:"@"===r?[new at(t,e.slice(1),i.eventContext)]:"?"===r?[new st(t,e.slice(1),s)]:new Y(t,e,s).parts}handleTextExpression(t){return new et(t)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const ut=(t,...e)=>new Z(t,e,"html",dt),pt=(t,e)=>`${t}--${e}`;let mt=!0;void 0===window.ShadyCSS?mt=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),mt=!1);const _t=t=>e=>{const s=pt(e.type,t);let i=ht.get(s);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},ht.set(s,i));let r=i.stringsArray.get(e.strings);if(void 0!==r)return r;const n=e.strings.join(k);if(void 0===(r=i.keyString.get(n))){const s=e.getTemplateElement();mt&&window.ShadyCSS.prepareTemplateDom(s,t),r=new M(e,s),i.keyString.set(n,r)}return i.stringsArray.set(e.strings,r),r},yt=["html","svg"],gt=new Set,ft=(t,e,s)=>{gt.add(t);const i=s?s.element:document.createElement("template"),r=e.querySelectorAll("style"),{length:n}=r;if(0===n)return void window.ShadyCSS.prepareTemplateStyles(i,t);const a=document.createElement("style");for(let t=0;t<n;t++){const e=r[t];e.parentNode.removeChild(e),a.textContent+=e.textContent}(t=>{yt.forEach(e=>{const s=ht.get(pt(e,t));void 0!==s&&s.keyString.forEach(t=>{const{element:{content:e}}=t,s=new Set;Array.from(e.querySelectorAll("style")).forEach(t=>{s.add(t)}),$(t,s)})})})(t);const o=i.content;s?function(t,e,s=null){const{element:{content:i},parts:r}=t;if(null==s)return void i.appendChild(e);const n=document.createTreeWalker(i,j,null,!1);let a=z(r),o=0,l=-1;for(;n.nextNode();)for(l++,n.currentNode===s&&(o=q(e),s.parentNode.insertBefore(e,s));-1!==a&&r[a].index===l;){if(o>0){for(;-1!==a;)r[a].index+=o,a=z(r,a);return}a=z(r,a)}}(s,a,o.firstChild):o.insertBefore(a,o.firstChild),window.ShadyCSS.prepareTemplateStyles(i,t);const l=o.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==l)e.insertBefore(l.cloneNode(!0),e.firstChild);else if(s){o.insertBefore(a,o.firstChild);const t=new Set;t.add(a),$(s,t)}};window.JSCompiler_renameProperty=(t,e)=>t;const bt={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},vt=(t,e)=>e!==t&&(e==e||t==t),St={attribute:!0,type:String,converter:bt,reflect:!1,hasChanged:vt},wt=1,Et=4,xt=8,Nt=16,Pt="finalized";class Tt extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((e,s)=>{const i=this._attributeNameForProperty(s,e);void 0!==i&&(this._attributeToPropertyMap.set(i,s),t.push(i))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((t,e)=>this._classProperties.set(e,t))}}static createProperty(t,e=St){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const s="symbol"==typeof t?Symbol():`__${t}`,i=this.getPropertyDescriptor(t,s,e);void 0!==i&&Object.defineProperty(this.prototype,t,i)}static getPropertyDescriptor(t,e,s){return{get(){return this[e]},set(s){const i=this[t];this[e]=s,this._requestUpdate(t,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||St}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty(Pt)||t.finalize(),this[Pt]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const s of e)this.createProperty(s,t[s])}}static _attributeNameForProperty(t,e){const s=e.attribute;return!1===s?void 0:"string"==typeof s?s:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,s=vt){return s(t,e)}static _propertyValueFromAttribute(t,e){const s=e.type,i=e.converter||bt,r="function"==typeof i?i:i.fromAttribute;return r?r(t,s):t}static _propertyValueToAttribute(t,e){if(void 0===e.reflect)return;const s=e.type,i=e.converter;return(i&&i.toAttribute||bt.toAttribute)(t,s)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,e)=>{if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,e)=>this[e]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,s){e!==s&&this._attributeToProperty(t,s)}_propertyToAttribute(t,e,s=St){const i=this.constructor,r=i._attributeNameForProperty(t,s);if(void 0!==r){const t=i._propertyValueToAttribute(e,s);if(void 0===t)return;this._updateState=this._updateState|xt,null==t?this.removeAttribute(r):this.setAttribute(r,t),this._updateState=this._updateState&~xt}}_attributeToProperty(t,e){if(this._updateState&xt)return;const s=this.constructor,i=s._attributeToPropertyMap.get(t);if(void 0!==i){const t=s.getPropertyOptions(i);this._updateState=this._updateState|Nt,this[i]=s._propertyValueFromAttribute(e,t),this._updateState=this._updateState&~Nt}}_requestUpdate(t,e){let s=!0;if(void 0!==t){const i=this.constructor,r=i.getPropertyOptions(t);i._valueHasChanged(this[t],e,r.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==r.reflect||this._updateState&Nt||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,r))):s=!1}!this._hasRequestedUpdate&&s&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this._requestUpdate(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=this._updateState|Et;try{await this._updatePromise}catch(t){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return this._updateState&Et}get hasUpdated(){return this._updateState&wt}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{(t=this.shouldUpdate(e))?this.update(e):this._markUpdated()}catch(e){throw t=!1,this._markUpdated(),e}t&&(this._updateState&wt||(this._updateState=this._updateState|wt,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~Et}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((t,e)=>this._propertyToAttribute(e,this[e],t)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}Tt[Pt]=!0;
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Ct="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,At=Symbol();class Ut{constructor(t,e){if(e!==At)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return void 0===this._styleSheet&&(Ct?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const kt=(t,...e)=>{const s=e.reduce((e,s,i)=>e+(t=>{if(t instanceof Ut)return t.cssText;if("number"==typeof t)return t;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${t}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(s)+t[i+1],t[0]);return new Ut(s,At)};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litElementVersions||(window.litElementVersions=[])).push("2.3.1");const Vt={};class Rt extends Tt{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(void 0===t)this._styles=[];else if(Array.isArray(t)){const e=(t,s)=>t.reduceRight((t,s)=>Array.isArray(s)?e(s,t):(t.add(s),t),s),s=e(t,new Set),i=[];s.forEach(t=>i.unshift(t)),this._styles=i}else this._styles=[t]}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?Ct?this.renderRoot.adoptedStyleSheets=t.map(t=>t.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(t=>t.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){const e=this.render();super.update(t),e!==Vt&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(t=>{const e=document.createElement("style");e.textContent=t.cssText,this.renderRoot.appendChild(e)}))}render(){return Vt}}Rt.finalized=!0,Rt.render=(t,e,s)=>{if(!s||"object"!=typeof s||!s.scopeName)throw new Error("The `scopeName` option is required.");const i=s.scopeName,r=ct.has(e),n=mt&&11===e.nodeType&&!!e.host,a=n&&!gt.has(i),o=a?document.createDocumentFragment():e;if(((t,e,s)=>{let i=ct.get(e);void 0===i&&(U(e,e.firstChild),ct.set(e,i=new et(Object.assign({templateFactory:lt},s))),i.appendInto(e)),i.setValue(t),i.commit()})(t,o,Object.assign({templateFactory:_t(i)},s)),a){const t=ct.get(o);ct.delete(o);const s=t.value instanceof J?t.value.template:void 0;ft(i,o,s),U(e,e.firstChild),e.appendChild(o),ct.set(e,t)}!r&&n&&window.ShadyCSS.styleElement(e.host)};class Ot extends(b([T.dataTree,T.errorTray],Rt)){constructor(){super(),this.name="",this.system="default",this.engine="default",this._init=!1,this.service_manager=T}static get properties(){return{name:{type:String},system:{type:String},engine:{type:String},status:{type:String}}}get value(){if(this._init)return this.service_manager.dataTree.ExistVar(this)?this.datatree[this.system][this.name].value:null}get status(){return this._init?this.service_manager.dataTree.ExistVar(this)?this.datatree[this.system][this.name].status:i.Error:i.Pending}set status(t){if("string"!=typeof t)return;if(!this.service_manager.dataTree.ExistVar(this))return;const e=this.getAttribute("status");e===t&&e===this.status||this.DataUpdate(null,t)}on_datatree_update(){this.getAttribute("status")!==this.status&&this.setAttribute("status",this.status)}connectedCallback(){super.connectedCallback(),T.Subscribe(this.engine,this).then(()=>{this._init=!0})}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),T.Unsubscribe(this.engine,this)}async Write(t){return await this.WriteMultiple([this],[t])}async WriteMultiple(t,e){return await T.Write(this.engine,t,e)}async Read(){return this.ReadMultiple([this])}async ReadMultiple(t){return await T.Read(this.engine,t)}DataUpdate(t,e){let s=new l(this);s.status=e,s.value=t,this.DataUpdateMultiple(s)}DataUpdateMultiple(t){T.Update(t)}}customElements.define("x-loader",class extends Rt{static get styles(){return kt`
            :host{
                display:block;
            }
            path{
                stroke: var(--color, #3498db);
            }
            .loader {
                animation: spin var(--speed,0.7s) linear infinite;
            }

            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
        `}render(){return ut`
        <svg class="loader" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
            <path style="fill: none; stroke-width: 75;" d="M 238 38 C 362.264 38 463 138.736 463 263"></path>
        </svg>
        `}});customElements.define("status-switch",class extends Ot{static get styles(){return kt`
        
            :host{
                display: block;
            }
            * {
                display : none;
            }
            x-loader{
                --color : var(--loaderColor);
            }

            [show]{
                display:block;
            }
        `}render(){return ut`
        <x-loader ?show="${this.status===i.Pending}" > </x-loader>
        <slot  ?show="${this.status===i.Subscribed}" name="sub"></slot>
        <slot  ?show="${this.status===i.Unsubscribed}" name="unsub"> </slot>
        <slot  ?show="${this.status===i.Error}" name="error"> </slot>
        `}});customElements.define("bool-color",class extends Ot{static get styles(){return kt`
            :host{
                display:block;
                cursor : pointer;
            }
            *{
                display : none;
            }
            slot {
                cursor : pointer;
            }
            :host([status="ERROR"]) > slot{
                cursor : not-allowed ;
            }
            :host([status="UNSUBSCRIBED"]) > slot{
                cursor : not-allowed ;
            }
            :host([read-only]) > slot{
                cursor : auto ;
            }
            [show]{
                display:block;
            }
            [val="on"]::slotted(*){
                stroke : blue;
                fill : green;
            }
            [val="off"]::slotted(*){
                stroke : blue;
                fill : gray;
            }
            :host([status="ERROR"]) > ::slotted(*){
                stroke : black;
                fill : red;
            }
            :host([status="UNSUBSCRIBED"]) > ::slotted(*){
                stroke : yellow;
            }
        `}render(){return ut`
            <slot val="${this.value?"on":"off"}" 
                  @click="${this.onclick}"
                  ?show="${this.status!==i.Pending}"> Empty Slot</slot>
            <x-loader ?show="${this.status===i.Pending}"></x-loader>
        `}onclick(){let t=this.status;if(this.hasAttribute("read-only")||t===i.Error||t===i.Pending||t===i.Unsubscribed)return;let e=!this.value;this.Write(e)}});
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const Mt="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,It=(t,e,s=null)=>{for(;e!==s;){const s=e.nextSibling;t.removeChild(e),e=s}},Dt=`{{lit-${String(Math.random()).slice(2)}}}`,Bt=`\x3c!--${Dt}--\x3e`,Wt=new RegExp(`${Dt}|${Bt}`),jt="$lit$";class $t{constructor(t,e){this.parts=[],this.element=e;const s=[],i=[],r=document.createTreeWalker(e.content,133,null,!1);let n=0,a=-1,o=0;const{strings:l,values:{length:h}}=t;for(;o<h;){const t=r.nextNode();if(null!==t){if(a++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:s}=e;let i=0;for(let t=0;t<s;t++)qt(e[t].name,jt)&&i++;for(;i-- >0;){const e=l[o],s=Lt.exec(e)[2],i=s.toLowerCase()+jt,r=t.getAttribute(i);t.removeAttribute(i);const n=r.split(Wt);this.parts.push({type:"attribute",index:a,name:s,strings:n}),o+=n.length-1}}"TEMPLATE"===t.tagName&&(i.push(t),r.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(Dt)>=0){const i=t.parentNode,r=e.split(Wt),n=r.length-1;for(let e=0;e<n;e++){let s,n=r[e];if(""===n)s=Ft();else{const t=Lt.exec(n);null!==t&&qt(t[2],jt)&&(n=n.slice(0,t.index)+t[1]+t[2].slice(0,-jt.length)+t[3]),s=document.createTextNode(n)}i.insertBefore(s,t),this.parts.push({type:"node",index:++a})}""===r[n]?(i.insertBefore(Ft(),t),s.push(t)):t.data=r[n],o+=n}}else if(8===t.nodeType)if(t.data===Dt){const e=t.parentNode;null!==t.previousSibling&&a!==n||(a++,e.insertBefore(Ft(),t)),n=a,this.parts.push({type:"node",index:a}),null===t.nextSibling?t.data="":(s.push(t),a--),o++}else{let e=-1;for(;-1!==(e=t.data.indexOf(Dt,e+1));)this.parts.push({type:"node",index:-1}),o++}}else r.currentNode=i.pop()}for(const t of s)t.parentNode.removeChild(t)}}const qt=(t,e)=>{const s=t.length-e.length;return s>=0&&t.slice(s)===e},zt=t=>-1!==t.index,Ft=()=>document.createComment(""),Lt=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=\/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,Ht=133;function Gt(t,e){const{element:{content:s},parts:i}=t,r=document.createTreeWalker(s,Ht,null,!1);let n=Kt(i),a=i[n],o=-1,l=0;const h=[];let c=null;for(;r.nextNode();){o++;const t=r.currentNode;for(t.previousSibling===c&&(c=null),e.has(t)&&(h.push(t),null===c&&(c=t)),null!==c&&l++;void 0!==a&&a.index===o;)a.index=null!==c?-1:a.index-l,a=i[n=Kt(i,n)]}h.forEach(t=>t.parentNode.removeChild(t))}const Jt=t=>{let e=11===t.nodeType?0:1;const s=document.createTreeWalker(t,Ht,null,!1);for(;s.nextNode();)e++;return e},Kt=(t,e=-1)=>{for(let s=e+1;s<t.length;s++){const e=t[s];if(zt(e))return s}return-1};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const Zt=new WeakMap,Qt=t=>"function"==typeof t&&Zt.has(t),Xt={},Yt={};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class te{constructor(t,e,s){this.__parts=[],this.template=t,this.processor=e,this.options=s}update(t){let e=0;for(const s of this.__parts)void 0!==s&&s.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=Mt?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],s=this.template.parts,i=document.createTreeWalker(t,133,null,!1);let r,n=0,a=0,o=i.nextNode();for(;n<s.length;)if(r=s[n],zt(r)){for(;a<r.index;)a++,"TEMPLATE"===o.nodeName&&(e.push(o),i.currentNode=o.content),null===(o=i.nextNode())&&(i.currentNode=e.pop(),o=i.nextNode());if("node"===r.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(o.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(o,r.name,r.strings,this.options));n++}else this.__parts.push(void 0),n++;return Mt&&(document.adoptNode(t),customElements.upgrade(t)),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const ee=` ${Dt} `;class se{constructor(t,e,s,i){this.strings=t,this.values=e,this.type=s,this.processor=i}getHTML(){const t=this.strings.length-1;let e="",s=!1;for(let i=0;i<t;i++){const t=this.strings[i],r=t.lastIndexOf("\x3c!--");s=(r>-1||s)&&-1===t.indexOf("--\x3e",r+1);const n=Lt.exec(t);e+=null===n?t+(s?ee:Bt):t.substr(0,n.index)+n[1]+n[2]+jt+n[3]+Dt}return e+=this.strings[t]}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const ie=t=>null===t||!("object"==typeof t||"function"==typeof t),re=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class ne{constructor(t,e,s){this.dirty=!0,this.element=t,this.name=e,this.strings=s,this.parts=[];for(let t=0;t<s.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new ae(this)}_getValue(){const t=this.strings,e=t.length-1;let s="";for(let i=0;i<e;i++){s+=t[i];const e=this.parts[i];if(void 0!==e){const t=e.value;if(ie(t)||!re(t))s+="string"==typeof t?t:String(t);else for(const e of t)s+="string"==typeof e?e:String(e)}}return s+=t[e]}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class ae{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===Xt||ie(t)&&t===this.value||(this.value=t,Qt(t)||(this.committer.dirty=!0))}commit(){for(;Qt(this.value);){const t=this.value;this.value=Xt,t(this)}this.value!==Xt&&this.committer.commit()}}class oe{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(Ft()),this.endNode=t.appendChild(Ft())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=Ft()),t.__insert(this.endNode=Ft())}insertAfterPart(t){t.__insert(this.startNode=Ft()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;Qt(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=Xt,t(this)}const t=this.__pendingValue;t!==Xt&&(ie(t)?t!==this.value&&this.__commitText(t):t instanceof se?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):re(t)?this.__commitIterable(t):t===Yt?(this.value=Yt,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,s="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=s:this.__commitNode(document.createTextNode(s)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof te&&this.value.template===e)this.value.update(t.values);else{const s=new te(e,t.processor,this.options),i=s._clone();s.update(t.values),this.__commitNode(i),this.value=s}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let s,i=0;for(const r of t)void 0===(s=e[i])&&(s=new oe(this.options),e.push(s),0===i?s.appendIntoPart(this):s.insertAfterPart(e[i-1])),s.setValue(r),s.commit(),i++;i<e.length&&(e.length=i,this.clear(s&&s.endNode))}clear(t=this.startNode){It(this.startNode.parentNode,t.nextSibling,this.endNode)}}class le{constructor(t,e,s){if(this.value=void 0,this.__pendingValue=void 0,2!==s.length||""!==s[0]||""!==s[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=s}setValue(t){this.__pendingValue=t}commit(){for(;Qt(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=Xt,t(this)}if(this.__pendingValue===Xt)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=Xt}}class he extends ne{constructor(t,e,s){super(t,e,s),this.single=2===s.length&&""===s[0]&&""===s[1]}_createPart(){return new ce(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class ce extends ae{}let de=!1;(()=>{try{const t={get capture(){return de=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class ue{constructor(t,e,s){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=s,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;Qt(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=Xt,t(this)}if(this.__pendingValue===Xt)return;const t=this.__pendingValue,e=this.value,s=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),i=null!=t&&(null==e||s);s&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),i&&(this.__options=pe(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=Xt}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const pe=t=>t&&(de?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function me(t){let e=_e.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},_e.set(t.type,e));let s=e.stringsArray.get(t.strings);if(void 0!==s)return s;const i=t.strings.join(Dt);return void 0===(s=e.keyString.get(i))&&(s=new $t(t,t.getTemplateElement()),e.keyString.set(i,s)),e.stringsArray.set(t.strings,s),s}const _e=new Map,ye=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const ge=new
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class{handleAttributeExpressions(t,e,s,i){const r=e[0];return"."===r?new he(t,e.slice(1),s).parts:"@"===r?[new ue(t,e.slice(1),i.eventContext)]:"?"===r?[new le(t,e.slice(1),s)]:new ne(t,e,s).parts}handleTextExpression(t){return new oe(t)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const fe=(t,...e)=>new se(t,e,"html",ge),be=(t,e)=>`${t}--${e}`;let ve=!0;void 0===window.ShadyCSS?ve=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),ve=!1);const Se=t=>e=>{const s=be(e.type,t);let i=_e.get(s);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},_e.set(s,i));let r=i.stringsArray.get(e.strings);if(void 0!==r)return r;const n=e.strings.join(Dt);if(void 0===(r=i.keyString.get(n))){const s=e.getTemplateElement();ve&&window.ShadyCSS.prepareTemplateDom(s,t),r=new $t(e,s),i.keyString.set(n,r)}return i.stringsArray.set(e.strings,r),r},we=["html","svg"],Ee=new Set,xe=(t,e,s)=>{Ee.add(t);const i=s?s.element:document.createElement("template"),r=e.querySelectorAll("style"),{length:n}=r;if(0===n)return void window.ShadyCSS.prepareTemplateStyles(i,t);const a=document.createElement("style");for(let t=0;t<n;t++){const e=r[t];e.parentNode.removeChild(e),a.textContent+=e.textContent}(t=>{we.forEach(e=>{const s=_e.get(be(e,t));void 0!==s&&s.keyString.forEach(t=>{const{element:{content:e}}=t,s=new Set;Array.from(e.querySelectorAll("style")).forEach(t=>{s.add(t)}),Gt(t,s)})})})(t);const o=i.content;s?function(t,e,s=null){const{element:{content:i},parts:r}=t;if(null==s)return void i.appendChild(e);const n=document.createTreeWalker(i,Ht,null,!1);let a=Kt(r),o=0,l=-1;for(;n.nextNode();)for(l++,n.currentNode===s&&(o=Jt(e),s.parentNode.insertBefore(e,s));-1!==a&&r[a].index===l;){if(o>0){for(;-1!==a;)r[a].index+=o,a=Kt(r,a);return}a=Kt(r,a)}}(s,a,o.firstChild):o.insertBefore(a,o.firstChild),window.ShadyCSS.prepareTemplateStyles(i,t);const l=o.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==l)e.insertBefore(l.cloneNode(!0),e.firstChild);else if(s){o.insertBefore(a,o.firstChild);const t=new Set;t.add(a),Gt(s,t)}};window.JSCompiler_renameProperty=(t,e)=>t;const Ne={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},Pe=(t,e)=>e!==t&&(e==e||t==t),Te={attribute:!0,type:String,converter:Ne,reflect:!1,hasChanged:Pe},Ce=1,Ae=4,Ue=8,ke=16,Ve="finalized";class Re extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((e,s)=>{const i=this._attributeNameForProperty(s,e);void 0!==i&&(this._attributeToPropertyMap.set(i,s),t.push(i))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((t,e)=>this._classProperties.set(e,t))}}static createProperty(t,e=Te){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const s="symbol"==typeof t?Symbol():`__${t}`,i=this.getPropertyDescriptor(t,s,e);void 0!==i&&Object.defineProperty(this.prototype,t,i)}static getPropertyDescriptor(t,e,s){return{get(){return this[e]},set(s){const i=this[t];this[e]=s,this._requestUpdate(t,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||Te}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty(Ve)||t.finalize(),this[Ve]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const s of e)this.createProperty(s,t[s])}}static _attributeNameForProperty(t,e){const s=e.attribute;return!1===s?void 0:"string"==typeof s?s:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,s=Pe){return s(t,e)}static _propertyValueFromAttribute(t,e){const s=e.type,i=e.converter||Ne,r="function"==typeof i?i:i.fromAttribute;return r?r(t,s):t}static _propertyValueToAttribute(t,e){if(void 0===e.reflect)return;const s=e.type,i=e.converter;return(i&&i.toAttribute||Ne.toAttribute)(t,s)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,e)=>{if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,e)=>this[e]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,s){e!==s&&this._attributeToProperty(t,s)}_propertyToAttribute(t,e,s=Te){const i=this.constructor,r=i._attributeNameForProperty(t,s);if(void 0!==r){const t=i._propertyValueToAttribute(e,s);if(void 0===t)return;this._updateState=this._updateState|Ue,null==t?this.removeAttribute(r):this.setAttribute(r,t),this._updateState=this._updateState&~Ue}}_attributeToProperty(t,e){if(this._updateState&Ue)return;const s=this.constructor,i=s._attributeToPropertyMap.get(t);if(void 0!==i){const t=s.getPropertyOptions(i);this._updateState=this._updateState|ke,this[i]=s._propertyValueFromAttribute(e,t),this._updateState=this._updateState&~ke}}_requestUpdate(t,e){let s=!0;if(void 0!==t){const i=this.constructor,r=i.getPropertyOptions(t);i._valueHasChanged(this[t],e,r.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==r.reflect||this._updateState&ke||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,r))):s=!1}!this._hasRequestedUpdate&&s&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this._requestUpdate(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=this._updateState|Ae;try{await this._updatePromise}catch(t){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return this._updateState&Ae}get hasUpdated(){return this._updateState&Ce}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{(t=this.shouldUpdate(e))?this.update(e):this._markUpdated()}catch(e){throw t=!1,this._markUpdated(),e}t&&(this._updateState&Ce||(this._updateState=this._updateState|Ce,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~Ae}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((t,e)=>this._propertyToAttribute(e,this[e],t)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}Re[Ve]=!0;
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const Oe="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Me=Symbol();class Ie{constructor(t,e){if(e!==Me)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return void 0===this._styleSheet&&(Oe?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const De=(t,...e)=>{const s=e.reduce((e,s,i)=>e+(t=>{if(t instanceof Ie)return t.cssText;if("number"==typeof t)return t;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${t}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(s)+t[i+1],t[0]);return new Ie(s,Me)};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litElementVersions||(window.litElementVersions=[])).push("2.3.1");const Be={};class We extends Re{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(void 0===t)this._styles=[];else if(Array.isArray(t)){const e=(t,s)=>t.reduceRight((t,s)=>Array.isArray(s)?e(s,t):(t.add(s),t),s),s=e(t,new Set),i=[];s.forEach(t=>i.unshift(t)),this._styles=i}else this._styles=[t]}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?Oe?this.renderRoot.adoptedStyleSheets=t.map(t=>t.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(t=>t.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){const e=this.render();super.update(t),e!==Be&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(t=>{const e=document.createElement("style");e.textContent=t.cssText,this.renderRoot.appendChild(e)}))}render(){return Be}}We.finalized=!0,We.render=(t,e,s)=>{if(!s||"object"!=typeof s||!s.scopeName)throw new Error("The `scopeName` option is required.");const i=s.scopeName,r=ye.has(e),n=ve&&11===e.nodeType&&!!e.host,a=n&&!Ee.has(i),o=a?document.createDocumentFragment():e;if(((t,e,s)=>{let i=ye.get(e);void 0===i&&(It(e,e.firstChild),ye.set(e,i=new oe(Object.assign({templateFactory:me},s))),i.appendInto(e)),i.setValue(t),i.commit()})(t,o,Object.assign({templateFactory:Se(i)},s)),a){const t=ye.get(o);ye.delete(o);const s=t.value instanceof te?t.value.template:void 0;xe(i,o,s),It(e,e.firstChild),e.appendChild(o),ye.set(e,t)}!r&&n&&window.ShadyCSS.styleElement(e.host)};customElements.define("pvr-icon",class extends We{render(){return fe`
        <svg viewBox="251.36 1.721 53.863 51.142" xmlns="http://www.w3.org/2000/svg">
            <g>
            <g>
                <polygon  points="278.2,37.2 253,22.6 253,51.7" style="stroke-miterlimit: 10;"></polygon>
                <polygon  points="278.8,37.2 304,51.7 304,22.6" style="stroke-miterlimit: 10;"></polygon>
            </g>
            <circle cx="278.8" cy="37.2" r="9.6" style="stroke-miterlimit: 10;"></circle>
            <rect x="266.8" y="3.2" class="st0" width="23.9" height="13.9" style="stroke-miterlimit: 10;"></rect>
            <rect x="271.8" y="3.2" class="st3" width="13.9" height="13.9" style="fill:none; stroke-miterlimit: 10;"></rect>
            <line x1="278.8" y1="27.6" x2="278.8" y2="10.1" style="stroke-miterlimit: 10;"></line>
            <line x1="271.8" y1="10.1" x2="285.7" y2="10.1" style="stroke-miterlimit: 10;"></line>
            </g>
        </svg>
        `}});customElements.define("pvd-icon",class extends We{render(){return fe`
        <svg viewBox="140.37 3.264 54.407 50.055" xmlns="http://www.w3.org/2000/svg">
            <g>
            <g>
                <polygon  points="167.1,37.2 141.9,22.6 141.9,51.7" style="stroke-miterlimit: 10;"></polygon>
                <polygon  points="167.7,37.2 192.9,51.7 192.9,22.6" style="stroke-miterlimit: 10;"></polygon>
            </g>
            <circle  cx="167.7" cy="37.2" r="9.6" style="stroke-miterlimit: 10;"></circle>
            <line  x1="167.7" y1="27.6" x2="167.7" y2="12.3" style="stroke-miterlimit: 10;"></line>
            <path  d="M175.4,12.3c0-4.2-3.4-7.7-7.7-7.7S160,8,160,12.3H175.4z" style="stroke-miterlimit: 10;"></path>
            </g>
        </svg>
        `}});customElements.define("valve-pr",class extends We{constructor(){super(),this.name="",this.system="default",this.engine="default"}static get properties(){return{name:{type:String},system:{type:String},engine:{type:String}}}static get styles(){return De`
            :host{
                display:flex;
                flex-direction:column;
                align-items:center;
            }
            div{
                font-family: 'Roboto', sans-serif;
                border : solid 1px gray;
                border-radius: 0.5rem;
                padding:0.3rem;
                margin-bottom : 0.2rem;
                width:100%;
                text-align:center;
            }
            div[err]{
                color : red;
            }
        `}render(){return fe`
            <div>
            <strong >${this.name}</strong>
            </div>
            <bool-color name="${this.name}"  engine="${this.engine}" system="${this.system}"> 
                <pvr-icon></pvr-icon>
            </bool-color>
        `}});let je=new class extends C{constructor(){super(...arguments),this.var_types=new Map}async Initialize(){return{success:!0}}_updateVariables(){let t=[];this.var_types.forEach((e,s)=>{if("number"===e){let e=Math.floor(100*Math.random());t.push(new h(!0,s,"default",e))}}),0!==t.length&&this.UpdateVars(t,i.Subscribed,a.Read)}async Subscribe(t){let e=[];return t.forEach(t=>{let s=document.querySelector(`[name="${t.name}"]`);if("string"!=typeof t.name||""===t.name)return void e.push(new h(!1,t.name,t.system));let i=0;s.tagName.toLowerCase().includes("bool")?(i=Math.random()>.5,this.var_types.set(t.name,"bool")):(i=Math.floor(100*Math.random()),this.var_types.set(t.name,"number")),e.push(new h(!0,t.name,t.system,i))}),e}async Unsubscribe(t){return t.map(t=>new h(!0,t.name,t.system))}async Write(t,e){let s=[];for(let i=0;i<t.length;i++)s.push(new h(!0,t[i].name,t[i].system,e[i]));return s}async Read(t){throw new Error("Method not implemented.")}}("std");T.AddEngine(je),T.Init()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4uL2phc2htaS9kaXN0L0RhdGFNb2RlbHMvVHlwZXMuanMiLCJ3ZWJwYWNrOi8vLy4uL2phc2htaS9ub2RlX21vZHVsZXMvaW1wZXJhLWpzL2J1aWxkL29uQ2hhbmdlLmpzIiwid2VicGFjazovLy8uLi9qYXNobWkvbm9kZV9tb2R1bGVzL2ltcGVyYS1qcy9idWlsZC9pbXBlcmEuanMiLCJ3ZWJwYWNrOi8vLy4uL2phc2htaS9ub2RlX21vZHVsZXMvaHRtbC1lc2NhcGVyL2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi4vamFzaG1pL2Rpc3QvRGF0YU1vZGVscy9EYXRhVHJlZS5qcyIsIndlYnBhY2s6Ly8vLi4vamFzaG1pL2Rpc3QvRGF0YU1vZGVscy9FcnJvclRyYXkuanMiLCJ3ZWJwYWNrOi8vLy4uL2phc2htaS9kaXN0L1NlcnZpY2VNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uLi9qYXNobWkvZGlzdC9EYXRhQ29tbXNFbmdpbmUuanMiLCJ3ZWJwYWNrOi8vLy4uL2phc2htaS9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL2RvbS5qcyIsIndlYnBhY2s6Ly8vLi4vamFzaG1pL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvdGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vLy4uL2phc2htaS9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL21vZGlmeS10ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi4vamFzaG1pL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvZGlyZWN0aXZlLmpzIiwid2VicGFjazovLy8uLi9qYXNobWkvbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9wYXJ0LmpzIiwid2VicGFjazovLy8uLi9qYXNobWkvbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi90ZW1wbGF0ZS1pbnN0YW5jZS5qcyIsIndlYnBhY2s6Ly8vLi4vamFzaG1pL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvdGVtcGxhdGUtcmVzdWx0LmpzIiwid2VicGFjazovLy8uLi9qYXNobWkvbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9wYXJ0cy5qcyIsIndlYnBhY2s6Ly8vLi4vamFzaG1pL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvdGVtcGxhdGUtZmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi4vamFzaG1pL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvcmVuZGVyLmpzIiwid2VicGFjazovLy8uLi9qYXNobWkvbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9kZWZhdWx0LXRlbXBsYXRlLXByb2Nlc3Nvci5qcyIsIndlYnBhY2s6Ly8vLi4vamFzaG1pL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saXQtaHRtbC5qcyIsIndlYnBhY2s6Ly8vLi4vamFzaG1pL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvc2hhZHktcmVuZGVyLmpzIiwid2VicGFjazovLy8uLi9qYXNobWkvbm9kZV9tb2R1bGVzL2xpdC1lbGVtZW50L2xpYi91cGRhdGluZy1lbGVtZW50LmpzIiwid2VicGFjazovLy8uLi9qYXNobWkvbm9kZV9tb2R1bGVzL2xpdC1lbGVtZW50L2xpYi9jc3MtdGFnLmpzIiwid2VicGFjazovLy8uLi9qYXNobWkvbm9kZV9tb2R1bGVzL2xpdC1lbGVtZW50L2xpdC1lbGVtZW50LmpzIiwid2VicGFjazovLy8uLi9qYXNobWkvZGlzdC9ITUlfRUxFTUVOVFMvSE1JZWxlbWVudC5qcyIsIndlYnBhY2s6Ly8vLi4vamFzaG1pL2Rpc3QvSE1JX0VMRU1FTlRTL2xvYWRlci5qcyIsIndlYnBhY2s6Ly8vLi4vamFzaG1pL2Rpc3QvSE1JX0VMRU1FTlRTL3N0YXR1c1N3aXRjaC5qcyIsIndlYnBhY2s6Ly8vLi4vamFzaG1pL2Rpc3QvSE1JX0VMRU1FTlRTL2Jvb2xDb2xvclN3aXRjaC5qcyIsIndlYnBhY2s6Ly8vLi4vdmFsdmVzL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvZG9tLmpzIiwid2VicGFjazovLy8uLi92YWx2ZXMvbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi90ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi4vdmFsdmVzL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvbW9kaWZ5LXRlbXBsYXRlLmpzIiwid2VicGFjazovLy8uLi92YWx2ZXMvbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9kaXJlY3RpdmUuanMiLCJ3ZWJwYWNrOi8vLy4uL3ZhbHZlcy9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3BhcnQuanMiLCJ3ZWJwYWNrOi8vLy4uL3ZhbHZlcy9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3RlbXBsYXRlLWluc3RhbmNlLmpzIiwid2VicGFjazovLy8uLi92YWx2ZXMvbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi90ZW1wbGF0ZS1yZXN1bHQuanMiLCJ3ZWJwYWNrOi8vLy4uL3ZhbHZlcy9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3BhcnRzLmpzIiwid2VicGFjazovLy8uLi92YWx2ZXMvbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi90ZW1wbGF0ZS1mYWN0b3J5LmpzIiwid2VicGFjazovLy8uLi92YWx2ZXMvbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vLy4uL3ZhbHZlcy9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL2RlZmF1bHQtdGVtcGxhdGUtcHJvY2Vzc29yLmpzIiwid2VicGFjazovLy8uLi92YWx2ZXMvbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpdC1odG1sLmpzIiwid2VicGFjazovLy8uLi92YWx2ZXMvbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9zaGFkeS1yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vLy4uL3ZhbHZlcy9ub2RlX21vZHVsZXMvbGl0LWVsZW1lbnQvbGliL3VwZGF0aW5nLWVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4uL3ZhbHZlcy9ub2RlX21vZHVsZXMvbGl0LWVsZW1lbnQvbGliL2Nzcy10YWcuanMiLCJ3ZWJwYWNrOi8vLy4uL3ZhbHZlcy9ub2RlX21vZHVsZXMvbGl0LWVsZW1lbnQvbGl0LWVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4uL3ZhbHZlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi4vamFzaG1pL2Rpc3QvRW5naW5lcy9mYWtlRGF0YUVuZ2luZS5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlZhclN0YXR1c0NvZGVzIiwiU2VydmljZVN0YXR1c0NvZGVzIiwiRXJyb3JDb2RlcyIsIkFjdGlvbnMiLCJzeXN0ZW1FcnJvciIsIltvYmplY3QgT2JqZWN0XSIsInN5c05hbWUiLCJDb2RlIiwidGFyZ2V0IiwiQWN0aW9uIiwiVHlwZUVycm9yIiwidGhpcyIsImNvZGUiLCJ0aW1lc3RhbXBfbXMiLCJEYXRlIiwibm93Iiwic3lzdGVtTmFtZSIsImFjdGlvbiIsInRhcmdldE5hbWUiLCJhY2siLCJtZXNzYWdlIiwiYnVpbGREZWZhdWx0TWVzc2FnZSIsInN5c3RlbVZhcmlhYmxlIiwic3lzX29iaiIsInN5c3RlbSIsInN0YXR1cyIsIlZhclJlc3BvbnNlIiwiU3VjY2VzcyIsIl9uYW1lIiwiX3N5c3RlbSIsIl92YWx1ZSIsImVycm9yIiwic3VjY2VzcyIsIkVycm9yQ29kZSIsIk1lc3NhZ2UiLCJvbkNoYW5nZSIsIkJMQUNLTElTVCIsImJsb2NrZWQiLCJoYW5kbGVyIiwicmVjZWl2ZXIiLCJSZWZsZWN0IiwiUHJveHkiLCJlcnIiLCJkZXNjcmlwdG9yIiwicmVzIiwiZGVsZXRlUHJvcGVydHkiLCJ0aGlzQXJnIiwiYXJndW1lbnRzTGlzdCIsImluY2x1ZGVzIiwiYXBwbHkiLCJfaXNDYWxsYmFja19sb2NrZWQiLCJfdW5kZXJfdHJhbnNpdGlvbiIsIl90cmFuc2l0aW9uc19jYWxsYmFja01hcCIsIk1hcCIsIkJhc2VTdGF0ZSIsIk5BTUUiLCJjYWxsYmFja01hcCIsIkVycm9yIiwidW5sb2NrX2NhbGxiYWNrcyIsImlucHV0IiwidXBkYXRlX2NhbGxiYWNrIiwidmFsdWVzIiwidW5kZWZpbmVkIiwiY2FsbGJhY2siLCJzZXQiLCJkZWxldGUiLCJTdGF0ZVRyYW5zaXRpb24iLCJmdW5jIiwic3VwZXIiLCJ1c3JEZWZpbmVkX3RyYW5zaXRpb24iLCJsb2NrX2NhbGxiYWNrcyIsIl9jYWxsX3dhdGNoZXJzIiwidXBkX2NhbGxiYWNrIiwiZSIsImNsZWFyIiwiaW1wZXJhX1N0YXRlVmFyaWFibGUiLCJERUZBVUxUIiwidHlwZSIsImRlZmF1bHRfdmFsIiwiX2Vycl9vbl92YWx1ZSIsIl92YWx1ZVByb3h5IiwiX2F1dG9fdmFsdWVQcm94eSIsImFsbG93U3RhbmRhbG9uZUFzc2lnbiIsInRyYW5zaXRpb25NYXAiLCJfdmFsIiwiR0VUIiwiQ1JFQVRFIiwiX3NldF9wcm94aWVzIiwidXBkYXRlV2F0Y2hlcklmQWxsb3dlZCIsIl9tYXJrRm9yV2F0Y2hlcnNVcGRhdGUiLCJ2YWwiLCJfY2hlY2tJc0FsbG93ZWQiLCJ1cGRhdGVXYXRjaGVycyIsIm1lIiwicHVzaF92YXIiLCJKU09OIiwic3RyaW5naWZ5IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInJldHVybl92YWwiLCJnZXRJdGVtIiwicGFyc2UiLCJVUERBVEVfREFUQSIsImhhcyIsImFwcGx5VHJhbnNpdGlvbiIsImJhc2VNaXhpbiIsImxpc3RPZkNvbXBvbmVudHMiLCJiYXNlQ2xhc3MiLCJfdHJhbnNpdGlvbk1hcCIsIl9tZXNzYWdlTWFwIiwiX2V4dHJhY3RUcmFuc2l0aW9ucyIsIl9hZGRHZXR0ZXJTZXR0ZXJzIiwiaXRyIiwibGVuZ3RoIiwiY29tcCIsInB1c2giLCJwYXlsb2FkIiwic3RhdGVfY29tcCIsInNlbmRNZXNzYWdlIiwiZGlzY29ubmVjdGVkQ2FsbGJhY2siLCJkZXRhY2hXYXRjaGVyIiwibGl0U3RhdGVzTWl4aW4iLCJjb25uZWN0ZWRDYWxsYmFjayIsImF0dGFjaFdhdGNoZXIiLCJfc3RhdGVSZXF1ZXN0VXBkYXRlIiwidmFyTmFtZSIsInJlcXVlc3RVcGRhdGUiLCJyZXBsYWNlIiwiY2EiLCJlc2NhIiwiJiIsIjwiLCI+IiwiJyIsIlwiIiwicGUiLCJlc21fZXNjYXBlIiwiZXMiLCJEYXRhVHJlZV9EYXRhVHJlZSIsImFkZFRyYW5zaXRpb24iLCJfY3JlYXRlIiwiX3VwZGF0ZSIsIl9tdWx0aXVwZGF0ZSIsInZhcklEIiwiRXhpc3RWYXIiLCJfc3RhdHVzIiwidXBkX3ZhciIsInZhcmlhYmxlcyIsIkFycmF5IiwiaXNBcnJheSIsIm5ld192YXIiLCJQZW5kaW5nIiwic3lzX3ZhcnMiLCJmb3JFYWNoIiwiaW5wdXRfdmFyIiwiX2NoZWNrVmFyVHlwZSIsInN5c192YXIiLCJHZXRWYXIiLCJ2IiwiRXJyb3JUcmF5X0Vycm9yVHJheSIsImVycm9yRXhwaXJ5X2RheXMiLCJfYWNrIiwiX2NsZWFudXAiLCJzd2lwZV9pbnRlcnZhbF9JRCIsIndpbmRvdyIsInNldEludGVydmFsIiwiaW50ZXJ2YWxfbXMiLCJjbGVhckludGVydmFsIiwiSUQiLCJpZHgiLCJmaWx0ZXIiLCJjbGVhbkFsbCIsImxlbmdodCIsImZpbHRlcmVkX2Vycm9ycyIsIk1hbmFnZXIiLCJkYXRhVHJlZSIsImVycm9yVHJheSIsImRhdGFFbmdpbmVzIiwiRG93biIsIl9pbml0UHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiX2luaXRSZXNvbHZlIiwiX2RlZmF1bHRFbmdpbmUiLCJlbmdpbmUiLCJzdWJzeXN0ZW1OYW1lIiwiQWRkRW5naW5lIiwiZW5naW5lX25hbWUiLCJ0b0xvY2FsZUxvd2VyQ2FzZSIsImlzSW5pdGlhbGl6ZWQiLCJHZXRFbmdpbmUiLCJDcmVhdGUiLCJVcGRhdGVTdGF0dXMiLCJDcmVhdGVBbmREaXNwYXRjaEVycm9yIiwiRW5naW5lTm90RXhpc3QiLCJTdWJzY3JpYmUiLCJpc1ZhclN1YnNjcmliZWQiLCJSZXF1ZXN0U3Vic2NyaXB0aW9uIiwiVW5zdWJzY3JpYmUiLCJSZXF1ZXN0VW5zdWJzY3JpcHRpb24iLCJkYXRhIiwiVXBkYXRlIiwidmFycyIsInJlc3AiLCJSZWFkIiwiVXBkYXRlVmFycyIsIlN1YnNjcmliZWQiLCJtYXAiLCJ4IiwiV3JpdGUiLCJEaXNwYXRjaEVycm9yIiwiV2FybWluZyIsInByb21zIiwiZnJvbSIsIl9pbml0IiwiYWxsIiwiUmVhZHkiLCJEYXRhQ29tbXNFbmdpbmVfRGF0YUNvbW1zRW5naW5lIiwiRW5naW5lTmFtZSIsIm1hbmFnZXIiLCJ0b0JlU3Vic2NyaWJlZCIsInRvQmVVbnN1YnNjcmliZWQiLCJTZXQiLCJzdWJzY3JpYmVkVmFyIiwic3ViX3RpbWVySUQiLCJ1bnN1Yl90aW1lcklEIiwiYWdncmVnYXRpb25UaW1lX21zIiwiVmFyRGlzcGF0Y2hFcnJvckNhc2VzIiwiVmFyTm90RXhpc3QiLCJXb250U3ViY3JpYmUiLCJVbmF1dGhvcml6ZWQiLCJVbmtub3duRXJyb3IiLCJDYW50VW5TdWJjcmliZSIsIlZhckVycm9yTm9BY3RDYXNlcyIsIkJhZFZhbHVlIiwiVmFyRXJyb3JVbnN1YkNhc2VzIiwiQ2FudFN1YmNyaWJlIiwiTm9OZXR3b3JrIiwidG1wIiwic3BsaXQiLCJzZXJfb2JqIiwic2VyaWFsaXplU3lzT2JqZWN0IiwiY291bnQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiX3N1YmNyaWJlIiwiYWRkIiwiX3Vuc3ViY3JpYmUiLCJ0YXJnZXRzIiwia2V5cyIsImRlc2VyaWFsaXplU3lzT2JqZWN0IiwicmVzcG9uc2UiLCJ1cGRhdGVTdWJzY3JpYmVyTGlzdHMiLCJyc3AiLCJ2YXJfaWQiLCJpZCIsIm9rX3N0YXR1cyIsInZhcl91cGQiLCJ2YXJfaWR4IiwiVW5zdWJzY3JpYmVkIiwiX3ZhciIsIkluaXRpYWxpemUiLCJJbml0Iiwic2l6ZSIsImlzQ0VQb2x5ZmlsbCIsImN1c3RvbUVsZW1lbnRzIiwicG9seWZpbGxXcmFwRmx1c2hDYWxsYmFjayIsInJlbW92ZU5vZGVzIiwiY29udGFpbmVyIiwic3RhcnQiLCJlbmQiLCJuZXh0U2libGluZyIsInJlbW92ZUNoaWxkIiwibWFya2VyIiwiU3RyaW5nIiwiTWF0aCIsInJhbmRvbSIsInNsaWNlIiwibm9kZU1hcmtlciIsIm1hcmtlclJlZ2V4IiwiUmVnRXhwIiwiYm91bmRBdHRyaWJ1dGVTdWZmaXgiLCJUZW1wbGF0ZSIsInJlc3VsdCIsImVsZW1lbnQiLCJwYXJ0cyIsIm5vZGVzVG9SZW1vdmUiLCJzdGFjayIsIndhbGtlciIsImRvY3VtZW50IiwiY3JlYXRlVHJlZVdhbGtlciIsImNvbnRlbnQiLCJsYXN0UGFydEluZGV4IiwiaW5kZXgiLCJwYXJ0SW5kZXgiLCJzdHJpbmdzIiwibm9kZSIsIm5leHROb2RlIiwibm9kZVR5cGUiLCJoYXNBdHRyaWJ1dGVzIiwiYXR0cmlidXRlcyIsImVuZHNXaXRoIiwic3RyaW5nRm9yUGFydCIsImxhc3RBdHRyaWJ1dGVOYW1lUmVnZXgiLCJleGVjIiwiYXR0cmlidXRlTG9va3VwTmFtZSIsInRvTG93ZXJDYXNlIiwiYXR0cmlidXRlVmFsdWUiLCJnZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzdGF0aWNzIiwidGFnTmFtZSIsImN1cnJlbnROb2RlIiwiaW5kZXhPZiIsInBhcmVudCIsInBhcmVudE5vZGUiLCJsYXN0SW5kZXgiLCJpbnNlcnQiLCJjcmVhdGVNYXJrZXIiLCJtYXRjaCIsImNyZWF0ZVRleHROb2RlIiwiaW5zZXJ0QmVmb3JlIiwicHJldmlvdXNTaWJsaW5nIiwicG9wIiwic3RyIiwic3VmZml4IiwiaXNUZW1wbGF0ZVBhcnRBY3RpdmUiLCJwYXJ0IiwiY3JlYXRlQ29tbWVudCIsIndhbGtlck5vZGVGaWx0ZXIiLCJyZW1vdmVOb2Rlc0Zyb21UZW1wbGF0ZSIsInRlbXBsYXRlIiwibmV4dEFjdGl2ZUluZGV4SW5UZW1wbGF0ZVBhcnRzIiwibm9kZUluZGV4IiwicmVtb3ZlQ291bnQiLCJub2Rlc1RvUmVtb3ZlSW5UZW1wbGF0ZSIsImN1cnJlbnRSZW1vdmluZ05vZGUiLCJjb3VudE5vZGVzIiwic3RhcnRJbmRleCIsImRpcmVjdGl2ZXMiLCJXZWFrTWFwIiwiaXNEaXJlY3RpdmUiLCJub0NoYW5nZSIsIm5vdGhpbmciLCJ0ZW1wbGF0ZV9pbnN0YW5jZV9UZW1wbGF0ZUluc3RhbmNlIiwicHJvY2Vzc29yIiwib3B0aW9ucyIsIl9fcGFydHMiLCJzZXRWYWx1ZSIsImNvbW1pdCIsImZyYWdtZW50IiwiY2xvbmVOb2RlIiwiaW1wb3J0Tm9kZSIsIm5vZGVOYW1lIiwiaGFuZGxlVGV4dEV4cHJlc3Npb24iLCJpbnNlcnRBZnRlck5vZGUiLCJoYW5kbGVBdHRyaWJ1dGVFeHByZXNzaW9ucyIsImFkb3B0Tm9kZSIsInVwZ3JhZGUiLCJjb21tZW50TWFya2VyIiwidGVtcGxhdGVfcmVzdWx0X1RlbXBsYXRlUmVzdWx0IiwiaHRtbCIsImlzQ29tbWVudEJpbmRpbmciLCJjb21tZW50T3BlbiIsImxhc3RJbmRleE9mIiwiYXR0cmlidXRlTWF0Y2giLCJzdWJzdHIiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiZ2V0SFRNTCIsImlzUHJpbWl0aXZlIiwiaXNJdGVyYWJsZSIsIml0ZXJhdG9yIiwiQXR0cmlidXRlQ29tbWl0dGVyIiwiZGlydHkiLCJfY3JlYXRlUGFydCIsInBhcnRzX0F0dHJpYnV0ZVBhcnQiLCJ0ZXh0Iiwic2V0QXR0cmlidXRlIiwiX2dldFZhbHVlIiwiY29tbWl0dGVyIiwiZGlyZWN0aXZlIiwicGFydHNfTm9kZVBhcnQiLCJfX3BlbmRpbmdWYWx1ZSIsInN0YXJ0Tm9kZSIsImFwcGVuZENoaWxkIiwiZW5kTm9kZSIsInJlZiIsIl9faW5zZXJ0IiwiX19jb21taXRUZXh0IiwiX19jb21taXRUZW1wbGF0ZVJlc3VsdCIsIk5vZGUiLCJfX2NvbW1pdE5vZGUiLCJfX2NvbW1pdEl0ZXJhYmxlIiwidmFsdWVBc1N0cmluZyIsInRlbXBsYXRlRmFjdG9yeSIsInVwZGF0ZSIsImluc3RhbmNlIiwiX2Nsb25lIiwiaXRlbVBhcnRzIiwiaXRlbVBhcnQiLCJpdGVtIiwiYXBwZW5kSW50b1BhcnQiLCJpbnNlcnRBZnRlclBhcnQiLCJwYXJ0c19Cb29sZWFuQXR0cmlidXRlUGFydCIsIlByb3BlcnR5Q29tbWl0dGVyIiwic2luZ2xlIiwiUHJvcGVydHlQYXJ0IiwiZXZlbnRPcHRpb25zU3VwcG9ydGVkIiwiY2FwdHVyZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2UiLCJwYXJ0c19FdmVudFBhcnQiLCJldmVudE5hbWUiLCJldmVudENvbnRleHQiLCJfX2JvdW5kSGFuZGxlRXZlbnQiLCJoYW5kbGVFdmVudCIsIm5ld0xpc3RlbmVyIiwib2xkTGlzdGVuZXIiLCJzaG91bGRSZW1vdmVMaXN0ZW5lciIsIm9uY2UiLCJwYXNzaXZlIiwic2hvdWxkQWRkTGlzdGVuZXIiLCJfX29wdGlvbnMiLCJnZXRPcHRpb25zIiwiZXZlbnQiLCJ0ZW1wbGF0ZUNhY2hlIiwidGVtcGxhdGVDYWNoZXMiLCJzdHJpbmdzQXJyYXkiLCJrZXlTdHJpbmciLCJqb2luIiwiZ2V0VGVtcGxhdGVFbGVtZW50IiwicmVuZGVyX3BhcnRzIiwiZGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yIiwicHJlZml4IiwibGl0X2h0bWxfaHRtbCIsImdldFRlbXBsYXRlQ2FjaGVLZXkiLCJzY29wZU5hbWUiLCJjb21wYXRpYmxlU2hhZHlDU1NWZXJzaW9uIiwiU2hhZHlDU1MiLCJwcmVwYXJlVGVtcGxhdGVEb20iLCJjb25zb2xlIiwid2FybiIsInNoYWR5VGVtcGxhdGVGYWN0b3J5IiwiY2FjaGVLZXkiLCJURU1QTEFURV9UWVBFUyIsInNoYWR5UmVuZGVyU2V0IiwicHJlcGFyZVRlbXBsYXRlU3R5bGVzIiwicmVuZGVyZWRET00iLCJ0ZW1wbGF0ZUVsZW1lbnQiLCJzdHlsZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29uZGVuc2VkU3R5bGUiLCJzdHlsZSIsInRleHRDb250ZW50IiwidGVtcGxhdGVzIiwicmVtb3ZlU3R5bGVzRnJvbUxpdFRlbXBsYXRlcyIsInJlZk5vZGUiLCJpbnNlcnRDb3VudCIsIndhbGtlckluZGV4IiwiaW5zZXJ0Tm9kZUludG9UZW1wbGF0ZSIsImZpcnN0Q2hpbGQiLCJxdWVyeVNlbGVjdG9yIiwibmF0aXZlU2hhZG93IiwicmVtb3ZlcyIsIkpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkiLCJwcm9wIiwiX29iaiIsImRlZmF1bHRDb252ZXJ0ZXIiLCJCb29sZWFuIiwiTnVtYmVyIiwibm90RXF1YWwiLCJvbGQiLCJkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbiIsImF0dHJpYnV0ZSIsImNvbnZlcnRlciIsInJlZmxlY3QiLCJoYXNDaGFuZ2VkIiwiU1RBVEVfSEFTX1VQREFURUQiLCJTVEFURV9VUERBVEVfUkVRVUVTVEVEIiwiU1RBVEVfSVNfUkVGTEVDVElOR19UT19BVFRSSUJVVEUiLCJTVEFURV9JU19SRUZMRUNUSU5HX1RPX1BST1BFUlRZIiwiZmluYWxpemVkIiwiVXBkYXRpbmdFbGVtZW50IiwiSFRNTEVsZW1lbnQiLCJfdXBkYXRlU3RhdGUiLCJfaW5zdGFuY2VQcm9wZXJ0aWVzIiwiX3VwZGF0ZVByb21pc2UiLCJfZW5hYmxlVXBkYXRpbmdSZXNvbHZlciIsIl9jaGFuZ2VkUHJvcGVydGllcyIsIl9yZWZsZWN0aW5nUHJvcGVydGllcyIsImluaXRpYWxpemUiLCJvYnNlcnZlZEF0dHJpYnV0ZXMiLCJmaW5hbGl6ZSIsIl9jbGFzc1Byb3BlcnRpZXMiLCJhdHRyIiwiX2F0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eSIsIl9hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwIiwic3VwZXJQcm9wZXJ0aWVzIiwiZ2V0UHJvdG90eXBlT2YiLCJrIiwiX2Vuc3VyZUNsYXNzUHJvcGVydGllcyIsIm5vQWNjZXNzb3IiLCJnZXRQcm9wZXJ0eURlc2NyaXB0b3IiLCJfb3B0aW9ucyIsIm9sZFZhbHVlIiwiX3JlcXVlc3RVcGRhdGUiLCJjb25maWd1cmFibGUiLCJzdXBlckN0b3IiLCJwcm9wcyIsInByb3BlcnRpZXMiLCJwcm9wS2V5cyIsImdldE93blByb3BlcnR5TmFtZXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJjcmVhdGVQcm9wZXJ0eSIsImZyb21BdHRyaWJ1dGUiLCJ0b0F0dHJpYnV0ZSIsIl9zYXZlSW5zdGFuY2VQcm9wZXJ0aWVzIiwiY29uc3RydWN0b3IiLCJfdiIsImVuYWJsZVVwZGF0aW5nIiwiX2F0dHJpYnV0ZVRvUHJvcGVydHkiLCJjdG9yIiwiYXR0clZhbHVlIiwiX3Byb3BlcnR5VmFsdWVUb0F0dHJpYnV0ZSIsInByb3BOYW1lIiwiZ2V0UHJvcGVydHlPcHRpb25zIiwiX3Byb3BlcnR5VmFsdWVGcm9tQXR0cmlidXRlIiwic2hvdWxkUmVxdWVzdFVwZGF0ZSIsIl92YWx1ZUhhc0NoYW5nZWQiLCJfaGFzUmVxdWVzdGVkVXBkYXRlIiwiX2VucXVldWVVcGRhdGUiLCJ1cGRhdGVDb21wbGV0ZSIsInBlcmZvcm1VcGRhdGUiLCJoYXNVcGRhdGVkIiwiX2FwcGx5SW5zdGFuY2VQcm9wZXJ0aWVzIiwic2hvdWxkVXBkYXRlIiwiY2hhbmdlZFByb3BlcnRpZXMiLCJfbWFya1VwZGF0ZWQiLCJmaXJzdFVwZGF0ZWQiLCJ1cGRhdGVkIiwiX2dldFVwZGF0ZUNvbXBsZXRlIiwiX3Byb3BlcnR5VG9BdHRyaWJ1dGUiLCJzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHMiLCJEb2N1bWVudCIsIkNTU1N0eWxlU2hlZXQiLCJjb25zdHJ1Y3Rpb25Ub2tlbiIsIkNTU1Jlc3VsdCIsImNzc1RleHQiLCJzYWZlVG9rZW4iLCJzdHlsZVNoZWV0IiwiX3N0eWxlU2hlZXQiLCJyZXBsYWNlU3luYyIsImNzcyIsInJlZHVjZSIsImFjYyIsInRleHRGcm9tQ1NTUmVzdWx0IiwicmVuZGVyTm90SW1wbGVtZW50ZWQiLCJsaXRfZWxlbWVudF9MaXRFbGVtZW50IiwidXNlclN0eWxlcyIsImdldFN0eWxlcyIsIl9zdHlsZXMiLCJhZGRTdHlsZXMiLCJyZWR1Y2VSaWdodCIsInVuc2hpZnQiLCJfZ2V0VW5pcXVlU3R5bGVzIiwicmVuZGVyUm9vdCIsImNyZWF0ZVJlbmRlclJvb3QiLCJTaGFkb3dSb290IiwiYWRvcHRTdHlsZXMiLCJhdHRhY2hTaGFkb3ciLCJhZG9wdGVkU3R5bGVTaGVldHMiLCJfbmVlZHNTaGltQWRvcHRlZFN0eWxlU2hlZXRzIiwiU2NvcGluZ1NoaW0iLCJwcmVwYXJlQWRvcHRlZENzc1RleHQiLCJsb2NhbE5hbWUiLCJzdHlsZUVsZW1lbnQiLCJ0ZW1wbGF0ZVJlc3VsdCIsInJlbmRlciIsImhhc1JlbmRlcmVkIiwibmVlZHNTY29waW5nIiwiaG9zdCIsImZpcnN0U2NvcGVSZW5kZXIiLCJyZW5kZXJDb250YWluZXIiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiYXNzaWduIiwiYXBwZW5kSW50byIsIkhNSWVsZW1lbnRfaG1pRWxlbWVudCIsInNlcnZpY2VfbWFuYWdlciIsImRhdGF0cmVlIiwiU3RhdHVzIiwib2xkX3ZhbCIsIkRhdGFVcGRhdGUiLCJ0aGVuIiwiV3JpdGVNdWx0aXBsZSIsIlJlYWRNdWx0aXBsZSIsIlZhbHVlIiwic3lzVmFyIiwiRGF0YVVwZGF0ZU11bHRpcGxlIiwic3lzdmFyIiwiZGVmaW5lIiwib25jbGljayIsInN0cyIsImhhc0F0dHJpYnV0ZSIsInRvZ2dsZSIsImRvbV9pc0NFUG9seWZpbGwiLCJkb21fcmVtb3ZlTm9kZXMiLCJ0ZW1wbGF0ZV9tYXJrZXIiLCJ0ZW1wbGF0ZV9ub2RlTWFya2VyIiwidGVtcGxhdGVfbWFya2VyUmVnZXgiLCJ0ZW1wbGF0ZV9ib3VuZEF0dHJpYnV0ZVN1ZmZpeCIsInRlbXBsYXRlX1RlbXBsYXRlIiwidGVtcGxhdGVfZW5kc1dpdGgiLCJ0ZW1wbGF0ZV9sYXN0QXR0cmlidXRlTmFtZVJlZ2V4IiwidGVtcGxhdGVfY3JlYXRlTWFya2VyIiwidGVtcGxhdGVfaXNUZW1wbGF0ZVBhcnRBY3RpdmUiLCJtb2RpZnlfdGVtcGxhdGVfd2Fsa2VyTm9kZUZpbHRlciIsIm1vZGlmeV90ZW1wbGF0ZV9yZW1vdmVOb2Rlc0Zyb21UZW1wbGF0ZSIsIm1vZGlmeV90ZW1wbGF0ZV9uZXh0QWN0aXZlSW5kZXhJblRlbXBsYXRlUGFydHMiLCJtb2RpZnlfdGVtcGxhdGVfY291bnROb2RlcyIsImRpcmVjdGl2ZV9kaXJlY3RpdmVzIiwiZGlyZWN0aXZlX2lzRGlyZWN0aXZlIiwicGFydF9ub0NoYW5nZSIsInBhcnRfbm90aGluZyIsImxpYl90ZW1wbGF0ZV9pbnN0YW5jZV9UZW1wbGF0ZUluc3RhbmNlIiwidGVtcGxhdGVfcmVzdWx0X2NvbW1lbnRNYXJrZXIiLCJsaWJfdGVtcGxhdGVfcmVzdWx0X1RlbXBsYXRlUmVzdWx0IiwicGFydHNfaXNQcmltaXRpdmUiLCJwYXJ0c19pc0l0ZXJhYmxlIiwicGFydHNfQXR0cmlidXRlQ29tbWl0dGVyIiwibGliX3BhcnRzX0F0dHJpYnV0ZVBhcnQiLCJsaWJfcGFydHNfTm9kZVBhcnQiLCJsaWJfcGFydHNfQm9vbGVhbkF0dHJpYnV0ZVBhcnQiLCJwYXJ0c19Qcm9wZXJ0eUNvbW1pdHRlciIsInBhcnRzX1Byb3BlcnR5UGFydCIsInBhcnRzX2V2ZW50T3B0aW9uc1N1cHBvcnRlZCIsImxpYl9wYXJ0c19FdmVudFBhcnQiLCJwYXJ0c19nZXRPcHRpb25zIiwidGVtcGxhdGVfZmFjdG9yeV90ZW1wbGF0ZUZhY3RvcnkiLCJ0ZW1wbGF0ZV9mYWN0b3J5X3RlbXBsYXRlQ2FjaGVzIiwibGliX3JlbmRlcl9wYXJ0cyIsImRlZmF1bHRfdGVtcGxhdGVfcHJvY2Vzc29yX2RlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvciIsImxpdF9odG1sX2xpdF9odG1sX2h0bWwiLCJzaGFkeV9yZW5kZXJfZ2V0VGVtcGxhdGVDYWNoZUtleSIsInNoYWR5X3JlbmRlcl9jb21wYXRpYmxlU2hhZHlDU1NWZXJzaW9uIiwic2hhZHlfcmVuZGVyX3NoYWR5VGVtcGxhdGVGYWN0b3J5Iiwic2hhZHlfcmVuZGVyX1RFTVBMQVRFX1RZUEVTIiwic2hhZHlfcmVuZGVyX3NoYWR5UmVuZGVyU2V0Iiwic2hhZHlfcmVuZGVyX3ByZXBhcmVUZW1wbGF0ZVN0eWxlcyIsInNoYWR5X3JlbmRlcl9yZW1vdmVTdHlsZXNGcm9tTGl0VGVtcGxhdGVzIiwibW9kaWZ5X3RlbXBsYXRlX2luc2VydE5vZGVJbnRvVGVtcGxhdGUiLCJ1cGRhdGluZ19lbGVtZW50X2RlZmF1bHRDb252ZXJ0ZXIiLCJ1cGRhdGluZ19lbGVtZW50X25vdEVxdWFsIiwidXBkYXRpbmdfZWxlbWVudF9kZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbiIsInVwZGF0aW5nX2VsZW1lbnRfU1RBVEVfSEFTX1VQREFURUQiLCJ1cGRhdGluZ19lbGVtZW50X1NUQVRFX1VQREFURV9SRVFVRVNURUQiLCJ1cGRhdGluZ19lbGVtZW50X1NUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fQVRUUklCVVRFIiwidXBkYXRpbmdfZWxlbWVudF9TVEFURV9JU19SRUZMRUNUSU5HX1RPX1BST1BFUlRZIiwidXBkYXRpbmdfZWxlbWVudF9maW5hbGl6ZWQiLCJ1cGRhdGluZ19lbGVtZW50X1VwZGF0aW5nRWxlbWVudCIsImNzc190YWdfc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzIiwiY3NzX3RhZ19jb25zdHJ1Y3Rpb25Ub2tlbiIsImNzc190YWdfQ1NTUmVzdWx0IiwiY3NzX3RhZ19jc3MiLCJjc3NfdGFnX3RleHRGcm9tQ1NTUmVzdWx0IiwibGl0X2VsZW1lbnRfcmVuZGVyTm90SW1wbGVtZW50ZWQiLCJsaXRfZWxlbWVudF9saXRfZWxlbWVudF9MaXRFbGVtZW50IiwicmVuZGVyX3JlbmRlciIsImluZGV4X2VuZ2luZSIsImFyZ3VtZW50cyIsInZhcl90eXBlcyIsInVw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QSxLQUFBdUwsRUFBQXZMLEtBRUEsWUFEQW9PLEVBQUF4RixLQUFBLElBQThCekYsR0FBVyxFQUFBb0ksRUFBQXZMLEtBQUF1TCxFQUFBdEksU0FHekMsSUFBQWtFLEVBQUEsRUFDQXdrQixFQUFBM1csUUFBQUwsY0FBQWxRLFNBQUEsU0FDQTBDLEVBQUF5TCxLQUFBQyxTQUFBLEdBQ0F6USxLQUFBb3BCLFVBQUEvbEIsSUFBQThGLEVBQUF2TCxLQUFBLFVBR0FtSCxFQUFBeUwsS0FBQThZLE1BQUEsSUFBQTlZLEtBQUFDLFVBQ0F6USxLQUFBb3BCLFVBQUEvbEIsSUFBQThGLEVBQUF2TCxLQUFBLFdBRUFvTyxFQUFBeEYsS0FBQSxJQUEwQnpGLEdBQVcsRUFBQW9JLEVBQUF2TCxLQUFBdUwsRUFBQXRJLE9BQUFrRSxNQUVyQ2lILEVBRUF0TSxrQkFBQThJLEdBQ0EsT0FBQUEsRUFBQTRELElBQUFqRCxHQUFBLElBQXNDcEksR0FBVyxFQUFBb0ksRUFBQXZMLEtBQUF1TCxFQUFBdEksU0FFakRuQixZQUFBbVAsRUFBQTNMLEdBQ0EsSUFBQThJLEVBQUEsR0FDQSxRQUFBM08sRUFBQSxFQUF1QkEsRUFBQXdSLEVBQUF2SSxPQUFvQmpKLElBQzNDMk8sRUFBQXhGLEtBQUEsSUFBMEJ6RixHQUFXLEVBQUE4TixFQUFBeFIsR0FBQU8sS0FBQWlSLEVBQUF4UixHQUFBd0QsT0FBQXFDLEVBQUE3RixLQUVyQyxPQUFBMk8sRUFFQXRNLFdBQUFtUCxHQUNBLFVBQUEvTCxNQUFBLDZCRDlDK0IsT0FFL0JxSCxFQUFPWSxVQUFXbWUsSUFDbEIvZSxFQUFPd0YiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8qKlxuICogRGVmYXVsdCBTdGF0dXMgQ29kZXMgZm9yIHN5c3RlbVZhcmlhYmxlcywgZGVmaW5lIHRoZSBVSSBhcHBlcmVhbmNlIGFuZCBiZWhhdmlvdXIgb2YgdGhlIHZhcmlhYmxlLlxuICogVGhleSBhcmUgc2ltcGxlIHN0cmluZ3MgYW5kIGNhbiBiZSBleHRlbmRlZCB3aXRoIGN1c3RvbSBzdGF0dXNlcy5cbiAqL1xuZXhwb3J0IHZhciBWYXJTdGF0dXNDb2RlcztcbihmdW5jdGlvbiAoVmFyU3RhdHVzQ29kZXMpIHtcbiAgICAvKiogVGhlIHZhcmlhYmxlIGlzIHN1YnNjcmliZWQgZm9yIHJlY2VpdmluZyB1cGRhdGVzLiBUaGlzIGlzIHRoZSBkZWZhdWx0IFwiQUxMIEdPT0RcIi4gKi9cbiAgICBWYXJTdGF0dXNDb2Rlc1tcIlN1YnNjcmliZWRcIl0gPSBcIlNVQlNDUklCRURcIjtcbiAgICAvKipTb21ldGhpbmcgd2VudCB3cm9uZyBpbiByZXRyaWV2aW5nIHRoZSB2YXJpYWJsZSBzZXJ2ZXJzaWRlLCBsaWtlIGZvciBleGFtcGxlIHRoZSB2YXJpYWJsZSBkb2VzIG5vdCBleGlzdCBvclxuICAgICAqIGlzIGNvcnJ1cHRlZCwgaW4gZ2VuZXJhbCBhbiBhY3Rpb24gYnkgdGhlIGFkbWluIG11c3QgYmUgdGFrZW4gdG8gZml4IHRoaXMuIFRoZSB1c2VyIHNob3VsZCBub3QgYmUgYWJsZSB0b1xuICAgICAqIGludGVyYWN0IHdpdGggdGhlIGl0ZW0uIFRoZSB2YXJpYWJsZSBpcyBub3Qgc3Vic2NyaWJlZC4gSXRzIHZhbHVlLCBpZiBhbnksIHNob3VsZCBub3QgYmUgdHJ1c3RlZC5cbiAgICAgKi9cbiAgICBWYXJTdGF0dXNDb2Rlc1tcIkVycm9yXCJdID0gXCJFUlJPUlwiO1xuICAgIC8qKkxvYWRpbmcuLi4gVGhlIHZhcmlhYmxlIGlzIHdhaXRpbmcgdG8gYmUgd3JpdHRlbiBvciBiZWluZyBzdWJzY3JpYmVkLiBVc2VmdWxsIHRvIHNob3cgc29tZSByZWxhdGVkIFVJLiAqL1xuICAgIFZhclN0YXR1c0NvZGVzW1wiUGVuZGluZ1wiXSA9IFwiUEVORElOR1wiO1xuICAgIC8qKlRoZSB2YXJpYWJsZSB2YWx1ZSBpcyB3aXRoaW4gc29tZSBcIkRBTkdFUlwiIHpvbmUuIFVzZWQgdG8gc2hvdyB2YXJpYWJsZSByZWxhdGVkIGFsYXJtcy4gKi9cbiAgICBWYXJTdGF0dXNDb2Rlc1tcIldhcm5pbmdcIl0gPSBcIldBUk5JTkdcIjtcbiAgICAvKipUaGUgdmFyaWFibGUgaXMgb2ssIGJ1dCB3aWxsIG5vdCByZWNlaXZlIHVwZGF0ZXMgZm9yIHNvbWUgcmVhc29ucywgZm9yIGV4YW1wbGUgbm8gbmV0d29yay5cbiAgICAgKiBPbmUgY2FuIHRydXN0IHRoZSB2YXJpYWJsZSB2YWx1ZSBhcyBpdHMgbGFzdCB1cGRhdGVkIHZhbHVlLiovXG4gICAgVmFyU3RhdHVzQ29kZXNbXCJVbnN1YnNjcmliZWRcIl0gPSBcIlVOU1VCU0NSSUJFRFwiO1xufSkoVmFyU3RhdHVzQ29kZXMgfHwgKFZhclN0YXR1c0NvZGVzID0ge30pKTtcbmV4cG9ydCB2YXIgU2VydmljZVN0YXR1c0NvZGVzO1xuKGZ1bmN0aW9uIChTZXJ2aWNlU3RhdHVzQ29kZXMpIHtcbiAgICAvKipFbmdpbmUgUnVubmluZywgYWxsIG9rICovXG4gICAgU2VydmljZVN0YXR1c0NvZGVzW1wiUmVhZHlcIl0gPSBcIlJFQURZXCI7XG4gICAgLyoqRW5naW5lIGlzIHN0aWxsIGRvd24sIG5vIHN1YnNjcmlwdGlvbiBjYW4gYmUgbWFkZSwgYnV0IG5vIGVycm9yIHdhcyByYWlzZWQuICovXG4gICAgU2VydmljZVN0YXR1c0NvZGVzW1wiRG93blwiXSA9IFwiRE9XTlwiO1xuICAgIC8qKldhaXRpbmcgZm9yIGluaXRpYWxpemF0aW9uIHRvIGNvbXBsZXRlICovXG4gICAgU2VydmljZVN0YXR1c0NvZGVzW1wiV2FybWluZ1wiXSA9IFwiV0FSTVVQXCI7XG4gICAgLyoqRW5naW5lIGNvdWxkIG5vdCBiZSBpbml0aWFsaXplZC4gKi9cbiAgICBTZXJ2aWNlU3RhdHVzQ29kZXNbXCJFcnJvclwiXSA9IFwiRVJST1JcIjtcbn0pKFNlcnZpY2VTdGF0dXNDb2RlcyB8fCAoU2VydmljZVN0YXR1c0NvZGVzID0ge30pKTtcbmV4cG9ydCB2YXIgRXJyb3JDb2RlcztcbihmdW5jdGlvbiAoRXJyb3JDb2Rlcykge1xuICAgIC8qKlZhcmlhYmxlIHdhcyBub3QgZm91bmQgaW4gc2VydmVyICovXG4gICAgRXJyb3JDb2Rlc1tcIlZhck5vdEV4aXN0XCJdID0gXCJWQVItTk9ULUVYSVNUXCI7XG4gICAgRXJyb3JDb2Rlc1tcIldvbnRTdWJjcmliZVwiXSA9IFwiV09OVC1TVUJcIjtcbiAgICBFcnJvckNvZGVzW1wiQ2FudFN1YmNyaWJlXCJdID0gXCJDQU5ULVNVQlwiO1xuICAgIEVycm9yQ29kZXNbXCJDYW50VW5TdWJjcmliZVwiXSA9IFwiQ0FOVC1VTlNVQlwiO1xuICAgIC8qKlByb3ZpZGVkIFdyaXRlIFJlcXVlc3QgdmFsdWUgaGFzIHdyb25nIHR5cGUgb3IgY291bGQgbm90IGJlIHVuZGVyc3Rvb2QgKi9cbiAgICBFcnJvckNvZGVzW1wiQmFkVmFsdWVcIl0gPSBcIkJBRC1WQUxVRVwiO1xuICAgIC8qKk5ldHdvcmsgaXMgZG93biwgY2Fubm90IHJldHJpZXZlIHZhbHVlcyAqL1xuICAgIEVycm9yQ29kZXNbXCJOb05ldHdvcmtcIl0gPSBcIk5PLU5FVFdPUktcIjtcbiAgICBFcnJvckNvZGVzW1wiTmV0RXJyb3JcIl0gPSBcIk5FVC1FUlJPUlwiO1xuICAgIC8qKkFjdGlvbiBjYW5ub3QgYmUgcGVyZm9ybWVkLCB1c2VyIGhhcyBubyByaWdodHMuICovXG4gICAgRXJyb3JDb2Rlc1tcIlVuYXV0aG9yaXplZFwiXSA9IFwiVU5BVVRIT1JJWkVEXCI7XG4gICAgLyoqSFRUUCA0MDAgZXJyb3Igb24gcmVxdWVzdCAqL1xuICAgIEVycm9yQ29kZXNbXCJCYWRSZXFcIl0gPSBcIkJBRC1SRVFVRVNUXCI7XG4gICAgLyoqU2VydmVyc2lkZSBidWc/IEhUVFAgNTAwKi9cbiAgICBFcnJvckNvZGVzW1wiU2VydmVyRXJyb3JcIl0gPSBcIlNFUlZFUi1FUlJPUlwiO1xuICAgIC8qKlJldHVybiBmcm9tIGEgSFRUUCA0MDQgKi9cbiAgICBFcnJvckNvZGVzW1wiTm90Rm91bmRcIl0gPSBcIk5PVC1GT1VORFwiO1xuICAgIEVycm9yQ29kZXNbXCJCYWREYXRhXCJdID0gXCJCQUQtREFUQVwiO1xuICAgIEVycm9yQ29kZXNbXCJFbmdpbmVOb3RFeGlzdFwiXSA9IFwiTk8tRU5HSU5FXCI7XG4gICAgRXJyb3JDb2Rlc1tcIlVua25vd25FcnJvclwiXSA9IFwiVUtOT1dOXCI7XG59KShFcnJvckNvZGVzIHx8IChFcnJvckNvZGVzID0ge30pKTtcbmV4cG9ydCB2YXIgQWN0aW9ucztcbihmdW5jdGlvbiAoQWN0aW9ucykge1xuICAgIEFjdGlvbnNbXCJXcml0ZVwiXSA9IFwiV1JJVEVcIjtcbiAgICBBY3Rpb25zW1wiUmVhZFwiXSA9IFwiUkVBRFwiO1xuICAgIEFjdGlvbnNbXCJTdWJzY3JpYmVcIl0gPSBcIlNVQlNDUklCRVwiO1xuICAgIEFjdGlvbnNbXCJVbnN1YnNjcmliZVwiXSA9IFwiVU5TVUJTQ1JJQkVcIjtcbiAgICBBY3Rpb25zW1wiVXBkYXRlXCJdID0gXCJVUERBVEVcIjtcbiAgICBBY3Rpb25zW1wiSW5pdFwiXSA9IFwiSU5JVElBTElaRVwiO1xuICAgIEFjdGlvbnNbXCJVbmtub3duXCJdID0gXCJVTktOT1dOXCI7XG59KShBY3Rpb25zIHx8IChBY3Rpb25zID0ge30pKTtcbi8qKlxuICogRGVzY3JpYmUgYSBzeXN0ZW0gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIGEgcmVxdWVzdGVkIEFjdGlvbiAobGlrZSBzdWJzY3JpYmUsIHdyaXRlLCBldGMuKS5cbiAqIEBwcm9wIHtzdHJpbmd9ICBjb2RlIC0gRXJyb3IgY29kZSBhcyBkZWZpbmVkIGluIEVycm9yQ29kZXNcbiAqIEBwcm9wIHtzdHJpbmd9ICBtZXNzYWdlICAtIFRoZSBlcnJvciBtZXNzYWdlICh0aGlzIGJ5IGRlZmF1bHQgd2lsbCBhdXRvIGJ1aWxkIGl0c2VsZiksIGJ1dCB5b3UgY2FuIG92ZXJyaWRlIGl0LlxuICogQHByb3Age3N0cmluZ30gIHN5c3RlbU5hbWUgIC0gU3lzdGVtIG5hbWVcbiAqIEBwcm9wIHtzdHJpbmd9ICB0YXJnZXROYW1lICAtIFRhcmdldCBvZiB0aGUgQWN0aW9uIHRoYXQgZ2VuZXJhdGVkIHRoZSBlcnJvciwgZm9yIGV4YW1wbGUgdGhlIGNhbGxlciBvZiBhIHdyaXRlIG1ldGhvZC5cbiAqIEBwcm9wIHtzdHJpbmd9ICBhY3Rpb24gICAgICAtIEFjdGlvbiBDb2RlIGFzIGRlZmluZWQgaW4gXCJBY3Rpb25zXCIsIHdoYXQgd2FzIGdvaW5nIHRvIGJlIHBlcmZvcm1lZC5cbiAqIEBwcm9wIHtudW1iZXJ9ICB0aW1lc3RhbXBfbXMgLSBUaW1lIHRoZSBlcnJvciBvY2N1cnJlZCwgYnkgZGVmYXVsdCBpcyBEYXRlLk5vdygpXG4gKiBAcHJvcCB7Ym9vbGVhbn0gYWNrICAgICAgICAgIC0gSWYgdGhlIGVycm9yIHdhcyBhY2tub3dsZWRnZWQgYnkgdXNlciBvciBub3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBzeXN0ZW1FcnJvciB7XG4gICAgLyoqXG4gICAgICogU3RhbmRhcmQgY29uc3RydWN0b3IsIGJ5IGRlZmF1bHQgd2lsbCBhdXRvLWJ1aWxkIHRoZSBlcnJvciBtZXNzYWdlIGFuZCB3aWxsIHNldCB0aW1lc3RhbXAgdG8gTm93LlxuICAgICAqIEBwYXJhbSBzeXNOYW1lIFN5c3RlbSBuYW1lIGZvciBleGFtcGxlIGFuIGVuZ2luZSBuYW1lXG4gICAgICogQHBhcmFtIENvZGUgRXJyb3IgY29kZSBhcyBpbiBcIkVycm9yQ29kZXNcIlxuICAgICAqIEBwYXJhbSB0YXJnZXQgKG9wdGlvbmFsKSBuYW1lIG9mIHdobyBpcyBpbiBmYXVsdCwgbGlrZSBmb3IgZXhhbXBsZSBhIHZhcmlhYmxlIG5hbWUuXG4gICAgICogQHBhcmFtIEFjdGlvbiAob3B0aW9uYWwpIEFjdGlvbiBDb2RlIG9mIHdoYXQgd2FzIGdvaW5nIHRvIGJlIHBlcmZvcm1lZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzeXNOYW1lLCBDb2RlLCB0YXJnZXQgPSBcIlwiLCBBY3Rpb24gPSBcIlwiKSB7XG4gICAgICAgIC8vIGlmKCEoZXJyICYmIHR5cGVvZiBlcnIuY29kZSA9PT0gXCJzdHJpbmdcIikpIHRocm93IFR5cGVFcnJvcihcIkVyciBtdXN0IGJlIHZhbGlkIGFuZCBvZiAnYmFzaWNFcnJvcicgdHlwZToge2NvZGU6c3RyaW5nLG1lc3NhZ2U/OnN0cmluZ31cIik7XG4gICAgICAgIGlmICh0eXBlb2YgQ29kZSAhPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIkNvZGUgbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgICAgICAgaWYgKHR5cGVvZiBzeXNOYW1lICE9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwic3lzTmFtZSBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuICAgICAgICAvL3RoaXMuY29kZSA9IGVyci5jb2RlO1xuICAgICAgICB0aGlzLmNvZGUgPSBDb2RlO1xuICAgICAgICB0aGlzLnRpbWVzdGFtcF9tcyA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMuc3lzdGVtTmFtZSA9IHN5c05hbWU7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gQWN0aW9uIHx8IFwiXCI7XG4gICAgICAgIHRoaXMudGFyZ2V0TmFtZSA9IHRhcmdldCB8fCBcIlwiO1xuICAgICAgICB0aGlzLmFjayA9IGZhbHNlO1xuICAgICAgICAvL3RoaXMubWVzc2FnZSA9IGVyci5tZXNzYWdlID8gZXJyLm1lc3NhZ2UgOiB0aGlzLmJ1aWxkRGVmYXVsdE1lc3NhZ2UoKTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gdGhpcy5idWlsZERlZmF1bHRNZXNzYWdlKCk7XG4gICAgfVxuICAgIGJ1aWxkRGVmYXVsdE1lc3NhZ2UoKSB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gYEVycm9yIGluIHN5c3RlbSAoJHt0aGlzLnN5c3RlbU5hbWV9KWA7XG4gICAgICAgIGlmICh0aGlzLmFjdGlvbiAhPT0gXCJcIilcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYCBkdXJpbmcgJHt0aGlzLmFjdGlvbn1gO1xuICAgICAgICBpZiAodGhpcy50YXJnZXROYW1lICE9PSBcIlwiKVxuICAgICAgICAgICAgbWVzc2FnZSArPSBgIG9uIHRhcmdldCAoJHt0aGlzLnRhcmdldE5hbWV9KWA7XG4gICAgICAgIG1lc3NhZ2UgKz0gYC4gRXJyb3IgQ29kZTogJHt0aGlzLmNvZGV9LmA7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBzeXN0ZW1BbGFybSBleHRlbmRzIHN5c3RlbUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihzeXNOYW1lLCBDb2RlLCB0YXJnZXQsIEFjdGlvbiA9IFwiXCIpIHtcbiAgICAgICAgc3VwZXIoc3lzTmFtZSwgQ29kZSwgdGFyZ2V0LCBBY3Rpb24pO1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICB9XG4gICAgYnVpbGREZWZhdWx0TWVzc2FnZSgpIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBgQWxhcm0gaW4gc3lzdGVtICgke3RoaXMuc3lzdGVtTmFtZX0pYDtcbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uICE9PSBcIlwiKVxuICAgICAgICAgICAgbWVzc2FnZSArPSBgIGR1cmluZyAke3RoaXMuYWN0aW9ufWA7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldE5hbWUgIT09IFwiXCIpXG4gICAgICAgICAgICBtZXNzYWdlICs9IGAgb24gdGFyZ2V0ICgke3RoaXMudGFyZ2V0TmFtZX0pYDtcbiAgICAgICAgbWVzc2FnZSArPSBgLiBBbGFybSBDb2RlOiAke3RoaXMuY29kZX0uYDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfVxufVxuLyoqXG4gKiBEZWZpbmVzIGEgZ2VuZXJpYyB2YXJpYWJsZSBib3VuZCB0byBhIHNwZWNpZmljIHN5c3RlbS5cbiAqIFRoZSBcInZhbHVlXCIgbXVzdCBiZSBhIEpTT04gY29tcGF0aWJsZSBvYmplY3QsIHNpbmNlIHRoZXNlIHZhbHVlcyBhcmVcbiAqIHBlcnNpc3RlZCBpbiBsb2NhbHN0b3JhZ2UuIFNvIGFueXRoaW5nIGlzIGdvb2QgYnV0IGZ1bmN0aW9ucy5cbiAqL1xuZXhwb3J0IGNsYXNzIHN5c3RlbVZhcmlhYmxlIHtcbiAgICAvLyBba2V5OnN0cmluZ10gOiBhbnkgXG4gICAgY29uc3RydWN0b3Ioc3lzX29iaikge1xuICAgICAgICB0aGlzLnN5c3RlbSA9IHN5c19vYmouc3lzdGVtO1xuICAgICAgICB0aGlzLm5hbWUgPSBzeXNfb2JqLm5hbWU7XG4gICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IG51bGw7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0aGF0IGltcGxlbWV0cyBhIGdlbmVyYWwgcmVzcG9uc2UgdG8gYWN0aW9ucyB0aGF0IGludm9sdmUgdmFyaWFibGUgcmVhZCwgd3JpdGUsIHN1YnNjcmliZSwgZXRjLlxuICogQHByb3Age2Jvb2xlYW59IHN1Y2Nlc3MgIC0gd2VhdGhlciB0aGUgcmVxdWVzdCBoYWQgc3VjY2VzcyBvciBub3RcbiAqIEBwcm9wIHtvYmplY3R9ICBlcnJvciAgLSBpZiBzdWNjZXNzIGlzIGZhbHNlIHRoZW4gdGhpcyBtdXN0IG5vdCBiZSBudWxsLCBjb250YWluIGVycm9yIGNvZGUgYW5kIGVycm9yIG1lc3NhZ2Uob3B0aW9uYWwpLlxuICogQHByb3Age3N0cmluZ30gbmFtZSAtIG5hbWUgb2YgdGhlIHZhcmlhYmxlLlxuICogQHByb3Age3N0cmluZ30gIHN5c3RlbSAgLSAgc3lzdGVtIG5hbWUgcmVsYXRlZCB0byB0aGUgdmFyaWFibGUuXG4gKiBAcHJvcCB7YW55fSAgdmFsdWUgIC0gIHRoZSB2YWx1ZSBvZiB0aGUgdmFyaWFibGUgKGNhbiBiZSBhbiBvYmplY3QgaWYgc3VwcG9ydGVkKS5cbiAqIEBtZXRob2Qgc2V0RXJyb3IgLSBoZWxwZXIgdG8gc2V0IHRoZSBcImVycm9yXCIgcHJvcGVydHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBWYXJSZXNwb25zZSB7XG4gICAgY29uc3RydWN0b3IoU3VjY2VzcywgX25hbWUsIF9zeXN0ZW0sIF92YWx1ZSA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgICAgIHRoaXMuc3VjY2VzcyA9IFN1Y2Nlc3M7XG4gICAgICAgIHRoaXMubmFtZSA9IF9uYW1lO1xuICAgICAgICB0aGlzLnZhbHVlID0gX3ZhbHVlO1xuICAgICAgICB0aGlzLnN5c3RlbSA9IF9zeXN0ZW07XG4gICAgfVxuICAgIHNldEVycm9yKEVycm9yQ29kZSwgTWVzc2FnZSA9IFwiXCIpIHtcbiAgICAgICAgdGhpcy5lcnJvciA9IHtcbiAgICAgICAgICAgIGNvZGU6IEVycm9yQ29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IE1lc3NhZ2VcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCIvKk1JVCBMaWNlbnNlXG5cbk9uQ2hhbmdlOiAgQ29weXJpZ2h0IChjKSBTaW5kcmUgU29yaHVzIDxzaW5kcmVzb3JodXNAZ21haWwuY29tPiAsIHdpdGggbWFqb3IgaW1wcm92ZW1lbnQgYnkgUm9kcmlnbyBTb2zDrXMgKGh0dHBzOi8vZ2l0aHViLmNvbS9zb3JvZHJpZ28pXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4qL1xuZXhwb3J0IGRlZmF1bHQgKG9iamVjdCwgb25DaGFuZ2UpID0+IHtcbiAgICBjb25zdCBCTEFDS0xJU1QgPSBbXG4gICAgICAgICdzb3J0JyxcbiAgICAgICAgJ3JldmVyc2UnLFxuICAgICAgICAnc3BsaWNlJyxcbiAgICAgICAgJ3BvcCcsXG4gICAgICAgICd1bnNoaWZ0JyxcbiAgICAgICAgJ3NoaWZ0JyxcbiAgICAgICAgJ3B1c2gnXG4gICAgXTtcbiAgICBsZXQgYmxvY2tlZCA9IGZhbHNlO1xuICAgIGNvbnN0IGhhbmRsZXIgPSB7XG4gICAgICAgIGdldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlcikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydHkgPT09IFwicHJvdG90eXBlXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlcik7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3h5KHRhcmdldFtwcm9wZXJ0eV0sIGhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHksIGRlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcik7XG4gICAgICAgICAgICBpZiAoIWJsb2NrZWQpIHtcbiAgICAgICAgICAgICAgICBvbkNoYW5nZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSxcbiAgICAgICAgZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSkge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5KTtcbiAgICAgICAgICAgIGlmICghYmxvY2tlZCkge1xuICAgICAgICAgICAgICAgIG9uQ2hhbmdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9LFxuICAgICAgICBhcHBseSh0YXJnZXQsIHRoaXNBcmcsIGFyZ3VtZW50c0xpc3QpIHtcbiAgICAgICAgICAgIGlmIChCTEFDS0xJU1QuaW5jbHVkZXModGFyZ2V0Lm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgYmxvY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gUmVmbGVjdC5hcHBseSh0YXJnZXQsIHRoaXNBcmcsIGFyZ3VtZW50c0xpc3QpO1xuICAgICAgICAgICAgICAgIG9uQ2hhbmdlKCk7XG4gICAgICAgICAgICAgICAgYmxvY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5hcHBseSh0YXJnZXQsIHRoaXNBcmcsIGFyZ3VtZW50c0xpc3QpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gbmV3IFByb3h5KG9iamVjdCwgaGFuZGxlcik7XG59O1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEZJTklTSEVEIG9uQ2hhbmdlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuIiwiaW1wb3J0IG9uQ2hhbmdlUHJveHkgZnJvbSBcIi4vb25DaGFuZ2UuanNcIjtcbnZhciBfaXNDYWxsYmFja19sb2NrZWQgPSBmYWxzZTtcbnZhciBfdW5kZXJfdHJhbnNpdGlvbiA9IGZhbHNlO1xuY29uc3QgX3RyYW5zaXRpb25zX2NhbGxiYWNrTWFwID0gbmV3IE1hcCgpO1xuY2xhc3MgQmFzZVN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihOQU1FKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IE5BTUU7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIGlmICh0eXBlb2YgKHRoaXMubmFtZSkgIT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIlZhcmlhYmxlIG5hbWUgbXVzdCBiZSBhIHN0cmluZy5cIik7XG4gICAgfVxuICAgIGxvY2tfY2FsbGJhY2tzKCkge1xuICAgICAgICBpZiAoX2lzQ2FsbGJhY2tfbG9ja2VkKSB7XG4gICAgICAgICAgICB0aGlzLnVubG9ja19jYWxsYmFja3MoKTtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdGb3JiaWRkZW4gbXVsdGlwbGUtdXBkYXRlIGR1cmluZyBhbiB1cGRhdGUgY2FsbGJhY2sgbG9vcC4nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBfaXNDYWxsYmFja19sb2NrZWQgPSB0cnVlO1xuICAgIH1cbiAgICB1bmxvY2tfY2FsbGJhY2tzKCkge1xuICAgICAgICBfaXNDYWxsYmFja19sb2NrZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgX2NhbGxfd2F0Y2hlcnMoaW5wdXQpIHtcbiAgICAgICAgZm9yIChsZXQgdXBkYXRlX2NhbGxiYWNrIG9mIHRoaXMuY2FsbGJhY2tNYXAudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHVwZGF0ZV9jYWxsYmFjaygpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHVwZGF0ZV9jYWxsYmFjayhpbnB1dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0YWNoIGEgY2FsbGJhY2sgdG8gYmUgZmlyZWQgd2hlbiB0aGlzIHN0YXRlVmFyaWFibGUgKG9yIFRyYW5zaXRpb24pIGNoYW5nZXMgKGlzIGRpc3BhdGNoZWQpLlxuICAgICAqIEBwYXJhbSB0YXJnZXQgRWxlbWVudCB0aGF0IGhvbGRzIHRoZSBjYWxsYmFja1xuICAgICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gbmVlZHMgdG8gYmUgYm91bmQgdG8gdGhlIGVsZW1lbnQgaWYgdXNpbmcgKip0aGlzKipcbiAgICAgKi9cbiAgICBhdHRhY2hXYXRjaGVyKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gbnVsbCB8fCB0YXJnZXQgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiVGFyZ2V0IGlzIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIC8vIGFkZCBlbGVtZW50IHRvIHRoZSB3YXRjaGVyIGxpc3RcbiAgICAgICAgdGhpcy5jYWxsYmFja01hcC5zZXQodGFyZ2V0LCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGVsZW1lbnQgZnJvbSB0aGUgd2F0Y2hlciBsaXN0XG4gICAgICogQHBhcmFtIHRhcmdldCBlbGVtZW50IHRvIGJlIHJlbW92ZWRcbiAgICAgKi9cbiAgICBkZXRhY2hXYXRjaGVyKHRhcmdldCkge1xuICAgICAgICBpZiAodGFyZ2V0ID09PSBudWxsIHx8IHRhcmdldCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJUYXJnZXQgaXMgdW5kZWZpbmVkLlwiKTtcbiAgICAgICAgLy8gcmVtb3ZlIGVsZW1lbnQgZnJvbSB3YXRjaGVyIGxpc3RcbiAgICAgICAgdGhpcy5jYWxsYmFja01hcC5kZWxldGUodGFyZ2V0KTtcbiAgICB9XG59XG4vKipcbiAqIEEgc3RhdGVUcmFuc2l0aW9uIGlzIGEgZ2xvYmFsIGZ1bmN0aW9uIHRoYXQgaXMgbWVhbnQgdG8gYXBwbHkgc2ltdWx0YW5lb3VzbHkgYW4gb3ZlcmFsbCBzdGF0ZSBjaGFuZ2UsXG4gKiB0aGlzIGNhbiBiZSBtYWRlIG9mIGp1c3Qgb25lIHZhcmlhYmxlIGNoYW5nZSBvciBtdWx0aXBsZSBzdGF0ZVZhcmlhYmxlcyBjaGFuZ2VzIGF0IHRoZSBzYW1lIHRpbWUsIHNvIHRoYXQgdGhlIGluaXRpYWwgYW5kIGZpbmFsXG4gKiBzdGF0ZXMgYXJlIGFsd2F5cyB3ZWxsIGRlZmluZWQsIGl0IGd1YXJhbnRlZXMgdGhhdCBVSSB1cGRhdGVzIGFyZSBtYWRlIGF0IHRyYW5zaXRpb24gY29tcGxldGlvbiAoZmluYWwgc3RhdGUpIG9ubHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdGF0ZVRyYW5zaXRpb24gZXh0ZW5kcyBCYXNlU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKE5BTUUsIGZ1bmMpIHtcbiAgICAgICAgc3VwZXIoTkFNRSk7XG4gICAgICAgIGlmICh0eXBlb2YgZnVuYyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgdGhpcy51c3JEZWZpbmVkX3RyYW5zaXRpb24gPSBmdW5jO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVc2VyIGRlZmluZWQgdHJhbnNpdGlvbiB0byBiZSBvdmVyd3JpdHRlbi5cbiAgICAgKiBAcGFyYW0gaW5wdXQgQW55IG1lYW5pbmdmdWxsIGRhdGEuXG4gICAgICovXG4gICAgdXNyRGVmaW5lZF90cmFuc2l0aW9uKGlucHV0KSB7IH1cbiAgICAvKipcbiAgICAgKiBGaXJlcyB0aGUgdXNlciBkZWZpbmVkIHRyYW5zaXRpb24gYW5kIGNhbGxzIHRoZSBjYWxsYmFja3Mgb2YgYWxsIHdhdGNoZXJzLlxuICAgICAqIEBwYXJhbSBpbnB1dCBkYXRhIHRvIGJlIHBhc3NlZCB0byB0aGUgdXNlciBkZWZpbmVkIHRyYW5zaXRpb25cbiAgICAgKi9cbiAgICBhcHBseVRyYW5zaXRpb24oaW5wdXQpIHtcbiAgICAgICAgdGhpcy5sb2NrX2NhbGxiYWNrcygpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgX3VuZGVyX3RyYW5zaXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy51c3JEZWZpbmVkX3RyYW5zaXRpb24oaW5wdXQpO1xuICAgICAgICAgICAgX3VuZGVyX3RyYW5zaXRpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIGxvb3Agb3ZlciB3YXRjaGVycyBjYWxsYmFja3Mgb2YgdGhlIFN0YXRlVHJhbnNpdGlvblxuICAgICAgICAgICAgdGhpcy5fY2FsbF93YXRjaGVycyhpbnB1dCk7XG4gICAgICAgICAgICAvLyBsb29wIG92ZXIgYXV0b21hdGljYWxseSBhZGRlZCBTdGF0ZVZhcmlhYmxlIGNhbGxiYWNrcyB0byBfdHJhbnNpdGlvbnNfY2FsbGJhY2tNYXBcbiAgICAgICAgICAgIGZvciAobGV0IHVwZF9jYWxsYmFjayBvZiBfdHJhbnNpdGlvbnNfY2FsbGJhY2tNYXAudmFsdWVzKCkpIHtcbiAgICAgICAgICAgICAgICB1cGRfY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgX3RyYW5zaXRpb25zX2NhbGxiYWNrTWFwLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnVubG9ja19jYWxsYmFja3MoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIF90cmFuc2l0aW9uc19jYWxsYmFja01hcC5jbGVhcigpO1xuICAgICAgICB0aGlzLnVubG9ja19jYWxsYmFja3MoKTtcbiAgICB9XG59XG4vKipcbiAqIEEgU3RhdGVWYXJpYWJsZSBob2xkIHRoZSBzdGF0ZSBvZiB0aGUgQXBwLCBpdHMgY29udGVudCBjYW4gYmUgYSBTdHJpbmcsIE9iamVjdCwgTnVtYmVyIGFuZCBCb29sZWFuLiBJdHMgKipERUZBVUxUKipcbiAqIHZhbHVlIGlzIHBhc3NlZCBhdCBjcmVhdGlvbiB0aW1lIGFuZCBkZWZpbmVzIHRoZSB0eXBlIG9mIHRoZSB2YXJpYWJsZSwgdGhlIHR5cGUgY2Fubm90IGJlIGNoYW5nZWQgbGF0ZXIuXG4gKiBBIFN0YXRlVmFyaWFibGUgaXMgYXV0b21hdGljYWxseSBzdG9yZWQgaW4gKipsb2NhbFN0b3JhZ2UqKi5cbiAqIEBwYXJhbSAgdmFsdWUgLSBSZXR1cm5zIGEgcHJveHkgdG8gdGhlIGNvbnRlbnQgb2YgdGhlIHN0YXRlVmFyaWFibGUsIHdoZW5ldmVyIGl0IGlzIHNldCAoZGlyZWN0bHkgb3IgaW5kaXJlY3RseSB1c2luZyBBcnJheS5wdXNoXG4gKiBmb3IgZXhhbXBsZSkgd2lsbCBydW4gdGhlIGNhbGxiYWNrIGZvciBhbGwgd2F0Y2hlcnMuUHJveHkgdG8gdGhlIGNvbnRlbnQgb2Ygc3RhdGVWYXJpYWJsZVxuICogQHBhcmFtICBhbGxvd1N0YW5kYWxvbmVBc3NpZ24gLSBFbmFibGUvRGlzYWJsZSBhc3NpZ25tZW50IG91dHNpZGUgb2YgYSBzdGF0ZVRyYW5zaXRpb24gKGRlZmF1bHQgdHJ1ZSlcbiAqL1xuZXhwb3J0IGNsYXNzIFN0YXRlVmFyaWFibGUgZXh0ZW5kcyBCYXNlU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKE5BTUUsIERFRkFVTFQpIHtcbiAgICAgICAgc3VwZXIoTkFNRSk7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGVvZiAoREVGQVVMVCk7XG4gICAgICAgIHRoaXMuZGVmYXVsdF92YWwgPSBERUZBVUxUO1xuICAgICAgICB0aGlzLl9lcnJfb25fdmFsdWUgPSAnV3JvbmcgdHlwZSBhc3NpZ25tZW50IHRvIHN0YXRlIHZhcmlhYmxlOiAnICsgdGhpcy5uYW1lO1xuICAgICAgICB0aGlzLl92YWx1ZVByb3h5ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9hdXRvX3ZhbHVlUHJveHkgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYWxsb3dTdGFuZGFsb25lQXNzaWduID0gdHJ1ZTtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAvLyBTYW5pdHkgY2hlY2tzXG4gICAgICAgIGxldCB3aGl0ZV9saXN0X3R5cGVzID0gW1wic3RyaW5nXCIsIFwib2JqZWN0XCIsIFwibnVtYmVyXCIsIFwiYm9vbGVhblwiXTtcbiAgICAgICAgaWYgKCF3aGl0ZV9saXN0X3R5cGVzLmluY2x1ZGVzKHRoaXMudHlwZSkpXG4gICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IodGhpcy5fZXJyX29uX3ZhbHVlKTtcbiAgICAgICAgLy8gc2V0IGRlZmF1bHQgdmFyaWFibGUgaWYgbm9uZVxuICAgICAgICB0aGlzLl92YWwgPSB0aGlzLkdFVCgpIHx8IHRoaXMuQ1JFQVRFKHRoaXMuZGVmYXVsdF92YWwpO1xuICAgICAgICAvLyBwcm94eVxuICAgICAgICB0aGlzLl9zZXRfcHJveGllcygpO1xuICAgIH1cbiAgICBfc2V0X3Byb3hpZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mICh0aGlzLl92YWwpID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aGlzLl92YWx1ZVByb3h5ID0gb25DaGFuZ2VQcm94eSh0aGlzLl92YWwsIHRoaXMudXBkYXRlV2F0Y2hlcklmQWxsb3dlZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuX2F1dG9fdmFsdWVQcm94eSA9IG9uQ2hhbmdlUHJveHkodGhpcy5fdmFsLCB0aGlzLl9tYXJrRm9yV2F0Y2hlcnNVcGRhdGUuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0IHZhbHVlKHZhbCkge1xuICAgICAgICB0aGlzLl9jaGVja0lzQWxsb3dlZCgpO1xuICAgICAgICB0aGlzLl92YWwgPSB2YWw7XG4gICAgICAgIHRoaXMuX3NldF9wcm94aWVzKCk7XG4gICAgICAgIGlmIChfdW5kZXJfdHJhbnNpdGlvbilcbiAgICAgICAgICAgIHRoaXMuX21hcmtGb3JXYXRjaGVyc1VwZGF0ZSgpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVdhdGNoZXJzKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgaWYgKF91bmRlcl90cmFuc2l0aW9uKVxuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnR5cGUgPT09IFwib2JqZWN0XCIpID8gdGhpcy5fYXV0b192YWx1ZVByb3h5IDogdGhpcy5fdmFsO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMudHlwZSA9PT0gXCJvYmplY3RcIikgPyB0aGlzLl92YWx1ZVByb3h5IDogdGhpcy5fdmFsO1xuICAgIH1cbiAgICBDUkVBVEUobWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiAobWUpID09PSB0aGlzLnR5cGUpIHtcbiAgICAgICAgICAgIGxldCBwdXNoX3ZhciA9ICh0aGlzLnR5cGUgIT09ICdzdHJpbmcnKSA/IEpTT04uc3RyaW5naWZ5KG1lKSA6IG1lO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5uYW1lLCBwdXNoX3Zhcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKHRoaXMuX2Vycl9vbl92YWx1ZSk7XG4gICAgICAgIHJldHVybiBtZTtcbiAgICB9XG4gICAgVVBEQVRFX0RBVEEoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgKHRoaXMuX3ZhbCkgPT09IHRoaXMudHlwZSkge1xuICAgICAgICAgICAgbGV0IHB1c2hfdmFyID0gKHRoaXMudHlwZSAhPT0gJ3N0cmluZycpID8gSlNPTi5zdHJpbmdpZnkodGhpcy5fdmFsKSA6IHRoaXMuX3ZhbDtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMubmFtZSwgcHVzaF92YXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKF91bmRlcl90cmFuc2l0aW9uKVxuICAgICAgICAgICAgICAgIF91bmRlcl90cmFuc2l0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoX2lzQ2FsbGJhY2tfbG9ja2VkKVxuICAgICAgICAgICAgICAgIHRoaXMudW5sb2NrX2NhbGxiYWNrcygpO1xuICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKHRoaXMuX2Vycl9vbl92YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUkVTRVQoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmRlZmF1bHRfdmFsO1xuICAgIH1cbiAgICBHRVQoKSB7XG4gICAgICAgIGxldCByZXR1cm5fdmFsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5uYW1lKTtcbiAgICAgICAgaWYgKHJldHVybl92YWwgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuX3ZhbDtcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybl92YWwgPSBKU09OLnBhcnNlKHJldHVybl92YWwpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiAocmV0dXJuX3ZhbCkgIT09IHRoaXMudHlwZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCJTdGF0ZSB2YXJpYWJsZTogXCIgKyB0aGlzLm5hbWUgKyBcIiBpcyBjb3JydXB0ZWQsIHJldHVybnMgdHlwZSBcIiArIHR5cGVvZiAocmV0dXJuX3ZhbCkgKyBcIiBleHBlY3RpbmcgXCIgKyB0aGlzLnR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXR1cm5fdmFsO1xuICAgIH1cbiAgICBfbWFya0ZvcldhdGNoZXJzVXBkYXRlKCkge1xuICAgICAgICB0aGlzLlVQREFURV9EQVRBKCk7XG4gICAgICAgIF90cmFuc2l0aW9uc19jYWxsYmFja01hcC5zZXQodGhpcywgdGhpcy5fY2FsbF93YXRjaGVycy5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgX2NoZWNrSXNBbGxvd2VkKCkge1xuICAgICAgICBpZiAoIXRoaXMuYWxsb3dTdGFuZGFsb25lQXNzaWduICYmICFfdW5kZXJfdHJhbnNpdGlvbikge1xuICAgICAgICAgICAgaWYgKF91bmRlcl90cmFuc2l0aW9uKVxuICAgICAgICAgICAgICAgIF91bmRlcl90cmFuc2l0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICB0aHJvdyBcIlN0YXRlVmFyaWFibGUgXCIgKyB0aGlzLm5hbWUgKyBcIiBpcyBub3QgYWxsb3dlZCBhc3NpZ25tZW50IG91dHNpZGUgYSBzdGF0ZSB0cmFuc2l0aW9uXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlV2F0Y2hlcklmQWxsb3dlZCgpIHtcbiAgICAgICAgdGhpcy5fY2hlY2tJc0FsbG93ZWQoKTtcbiAgICAgICAgdGhpcy51cGRhdGVXYXRjaGVycygpO1xuICAgIH1cbiAgICB1cGRhdGVXYXRjaGVycygpIHtcbiAgICAgICAgdGhpcy5sb2NrX2NhbGxiYWNrcygpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5VUERBVEVfREFUQSgpO1xuICAgICAgICAgICAgLy8gbG9vcCBvdmVyIHdhdGNoZXJzIGNhbGxiYWNrc1xuICAgICAgICAgICAgdGhpcy5fY2FsbF93YXRjaGVycygpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgdG8gdW5sb2NrIGluIGNhc2Ugb2YgZXJyb3JcbiAgICAgICAgICAgIHRoaXMudW5sb2NrX2NhbGxiYWNrcygpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGUubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51bmxvY2tfY2FsbGJhY2tzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIHRyYW5zaXRpb24gdG8gdGhpcyBzdGF0ZVZhcmlhYmxlLCBhZnRlciB0aGF0IHRoZSB2YXJpYWJsZSBjYW4gb25seSBiZSBjaGFuZ2VkIHRyb3VnaCBkZWZpbmVkIHN0YXRlVHJhbnNpdGlvbi5cbiAgICAgKiBAcGFyYW0gbmFtZSBVc2VkIHRvIGlkZW50aWZ5IHRoZSB0cmFuc2l0aW9uXG4gICAgICogQHBhcmFtIGZ1bmMgRGVmaW5pdGlvbiBvZiB0aGUgdmFyaWFibGUgdXBkYXRlLCAqKnRoaXMqKiBpcyBib3VuZCB0byB0aGUgdmFyaWFibGUuXG4gICAgICovXG4gICAgYWRkVHJhbnNpdGlvbihuYW1lLCBmdW5jKSB7XG4gICAgICAgIGxldCB0ID0gbmV3IFN0YXRlVHJhbnNpdGlvbihuYW1lKTtcbiAgICAgICAgaWYgKHR5cGVvZiAoZnVuYykgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdC51c3JEZWZpbmVkX3RyYW5zaXRpb24gPSBmdW5jLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25NYXAuc2V0KG5hbWUsIHQpO1xuICAgICAgICAgICAgdGhpcy5hbGxvd1N0YW5kYWxvbmVBc3NpZ24gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaXJlcyBvbmUgb2YgdGhlIHVzZXIgZGVmaW5lZCB0cmFuc2l0aW9uIHJlbGF0ZWQgdG8gdGhpcyBzdGF0ZVZhcmlhYmxlLlxuICAgICAqIEBwYXJhbSBuYW1lIElkZW50aWZpZXIgb2YgdGhlIHRyYW5zaXRpb24uXG4gICAgICogQHBhcmFtIGlucHV0IFBheWxvYWQgdG8gYmUgcGFzc2VkIHRvIHRoZSB0cmFuc2l0aW9uLCBpZiBhbnkuXG4gICAgICovXG4gICAgYXBwbHlUcmFuc2l0aW9uKG5hbWUsIGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb25NYXAuaGFzKG5hbWUpKVxuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uTWFwLmdldChuYW1lKS5hcHBseVRyYW5zaXRpb24oaW5wdXQpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgVHJhbnNpdGlvbiAke25hbWV9IG5vdCBmb3VuZGApO1xuICAgIH1cbn1cbi8qKlxuICogQSBNZXNzYWdlIGRvZXMgbm90IGNoYW5nZSB0aGUgc3RhdGUgb2YgdGhlIGFwcCBhbmQgaXMgbm90IHBlcnNpc3RlZCBpbiBhbnkgd2F5LCBpdCB1c2VkIHRvIGV4Y2hhbmdlIHBheWxvYWRzIGJldHdlZW4gY3VzdG9tLWVsZW1lbnRzLlxuICogQSBjdXN0b20tZWxlbWVudCBjYW4gbGlzdGVuIGZvciBhIHNwZWNpZmljIG1lc3NhZ2UsIHJldHJpZXZlIGl0cyBwYXlsb2FkIGFuZCBmaXJlIGEgY2FsbGJhY2sgd2hlbiB0aGlzIGhhcHBlbnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBNZXNzYWdlIGV4dGVuZHMgQmFzZVN0YXRlIHtcbiAgICBzZW5kTWVzc2FnZShpbnB1dCkge1xuICAgICAgICB0aGlzLl9jYWxsX3dhdGNoZXJzKGlucHV0KTtcbiAgICB9XG59XG5sZXQgYmFzZU1peGluID0gKGxpc3RPZkNvbXBvbmVudHMsIGJhc2VDbGFzcykgPT4gY2xhc3MgZXh0ZW5kcyBiYXNlQ2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl90cmFuc2l0aW9uTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9tZXNzYWdlTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9leHRyYWN0VHJhbnNpdGlvbnMoKTtcbiAgICAgICAgdGhpcy5fYWRkR2V0dGVyU2V0dGVycygpO1xuICAgIH1cbiAgICBfZXh0cmFjdFRyYW5zaXRpb25zKCkge1xuICAgICAgICBmb3IgKGxldCBpdHIgPSAwOyBpdHIgPCBsaXN0T2ZDb21wb25lbnRzLmxlbmd0aDsgaXRyKyspIHtcbiAgICAgICAgICAgIGxldCBjb21wID0gbGlzdE9mQ29tcG9uZW50c1tpdHJdO1xuICAgICAgICAgICAgaWYgKGNvbXAgaW5zdGFuY2VvZiBTdGF0ZVZhcmlhYmxlKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdCBvZiBjb21wLnRyYW5zaXRpb25NYXAudmFsdWVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdE9mQ29tcG9uZW50cy5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhcHBseVRyYW5zaXRpb24obmFtZSwgaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RyYW5zaXRpb25NYXAuaGFzKG5hbWUpKVxuICAgICAgICAgICAgdGhpcy5fdHJhbnNpdGlvbk1hcC5nZXQobmFtZSkoaW5wdXQpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgVHJhbnNpdGlvbiAke25hbWV9IG5vdCBmb3VuZGApO1xuICAgIH1cbiAgICBzZW5kTWVzc2FnZU9uQ2hhbm5lbChuYW1lLCBwYXlsb2FkKSB7XG4gICAgICAgIGlmICh0aGlzLl9tZXNzYWdlTWFwLmhhcyhuYW1lKSlcbiAgICAgICAgICAgIHRoaXMuX21lc3NhZ2VNYXAuZ2V0KG5hbWUpKHBheWxvYWQpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWVzc2FnZSBjaGFubmVsICR7bmFtZX0gbm90IGZvdW5kYCk7XG4gICAgfVxuICAgIF9hZGRHZXR0ZXJTZXR0ZXJzKCkge1xuICAgICAgICBmb3IgKGxldCBzdGF0ZV9jb21wIG9mIGxpc3RPZkNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZV9jb21wIGluc3RhbmNlb2YgU3RhdGVWYXJpYWJsZSkge1xuICAgICAgICAgICAgICAgIC8vIGFkZGluZyBwcm94eVxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZV9jb21wLnR5cGUgPT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIHRoaXNbYF8ke3N0YXRlX2NvbXAubmFtZX1Qcm94eWBdID0gb25DaGFuZ2VQcm94eShzdGF0ZV9jb21wLl92YWwsICgpID0+IHsgdGhyb3cgYCR7c3RhdGVfY29tcC5uYW1lfSBjYW5ub3QgYmUgYXNzaWduZWQgZnJvbSBhIGN1c3RvbSBlbGVtZW50YDsgfSk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIHN0YXRlX2NvbXAubmFtZSwge1xuICAgICAgICAgICAgICAgICAgICBzZXQ6ICh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGAke3N0YXRlX2NvbXAubmFtZX0gY2Fubm90IGJlIGFzc2lnbmVkIGZyb20gYSBjdXN0b20gZWxlbWVudGA7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGdldDogKCkgPT4geyByZXR1cm4gKHN0YXRlX2NvbXAudHlwZSA9PT0gXCJvYmplY3RcIikgPyB0aGlzW2BfJHtzdGF0ZV9jb21wLm5hbWV9UHJveHlgXSA6IHN0YXRlX2NvbXAuX3ZhbDsgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGVfY29tcCBpbnN0YW5jZW9mIE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9tZXNzYWdlTWFwLnNldChzdGF0ZV9jb21wLm5hbWUsIHN0YXRlX2NvbXAuc2VuZE1lc3NhZ2UuYmluZChzdGF0ZV9jb21wKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzdGF0ZV9jb21wIGluc3RhbmNlb2YgU3RhdGVUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhbnNpdGlvbk1hcC5zZXQoc3RhdGVfY29tcC5uYW1lLCBzdGF0ZV9jb21wLmFwcGx5VHJhbnNpdGlvbi5iaW5kKHN0YXRlX2NvbXApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIkFjY2VwdCBvbmx5IFN0YXRlVmFyaWFibGUsIFN0YXRlVHJhbnNpdGlvbiBvciBNZXNzYWdlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgaWYgKHN1cGVyWydkaXNjb25uZWN0ZWRDYWxsYmFjayddICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgc3RhdGVfY29tcCBvZiBsaXN0T2ZDb21wb25lbnRzKSB7XG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgICAgIHN0YXRlX2NvbXAuZGV0YWNoV2F0Y2hlcih0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG4vKipcbiAqIFRoaXMgaXMgYSBtaXhpbiB0byBiZSBhcHBsaWVkIHRvIGEgZ2VuZXJpYyB3ZWItY29tcG9uZW50LiBGb3IgYW55ICoqc3RhdGVWYXJpYWJsZXMqKiBpbiB0aGUgbGlzdCB3aWxsIGFkZCB0byB0aGUgZWxlbWVudCBhIHJlYWQtb25seSBwcm9wZXJ0eVxuICogbmFtZWQgYXMgdGhlIHN0YXRlVmFyaWFibGUuIEl0IHdpbGwgYWRkIGFuICoqYXBwbHlUcmFuc2l0aW9uKiogbWV0aG9kIHRvIGRpc3BhdGNoIHRoZSBhZGRlZFxuICogdHJhbnNpdGlvbiAoZWl0aGVyIG9mIGEgc3RhdGVWYXJpYWJsZSBvciBvZiBhIGdsb2JhbCBzdGF0ZVRyYW5zaXRpb24pLiBDYWxsYmFja3MgdG8gcmVhY3Qgb24gc3RhdGVWYXJpYWJsZSBjaGFuZ2UgbmVlZHMgdG8gYmUgb3ZlcndyaXR0ZW4gYnkgdGhlIHVzZXJcbiAqIGFuZCBoYXZlIGEgcHJlZGVmaWVuZCBuYW1pbmcgc2NoZW1lOiAqKm9uX1wic3RhdGVWYXJOYW1lXCJfdXBkYXRlKiouIENhbGxiYWNrcyB0byByZWFjdCB0byB0cmFuc2l0aW9ucyBhcmUgaW5zdGVhZCBjYWxsZWQgKipvbl9cInN0YXRlVHJhbnNpdGlvbk5hbWVcIioqLFxuICogaW4gdGhlIGxhdHRlciBjYXNlIGFsc28gdGhlIHRyYW5zaXRpb24gaW5wdXQgZGF0YSBhcmUgcGFzc2VkLiBGb3IgYW55ICoqTWVzc2FnZSoqIGluIHRoZSBsaXN0IGEgKipnb3RNZXNzYWdlX1wibWVzc2FnZU5hbWVcIioqIGNhbGxiYWNrIGlzIGFkZGVkIHRvIHJlYWN0XG4gKiB0byBtZXNzYWdlIGV4Y2hhbmdlLCB0aGlzIGNhbGxiYWNrIHBhc3NlcyBhcyBpbnB1dCB0aGUgbWVzc2FnZSBwYXlsb2FkLlxuICogQHBhcmFtIGxpc3RPZkNvbXBvbmVudHMgaXMgYSBsaXN0IG9mIFN0YXRlVmFyaWFibGVzIGFuZCBTdGF0ZVRyYW5zaXRpb24gdG8gYWRkIHRvIHRoZSB3ZWItY29tcG9uZW50XG4gKiBAcGFyYW0gYmFzZUNsYXNzIFRoZSBjbGFzcyBvbiB3aGljaCB0aGUgbWl4aW4gaXMgYXBwbGllZFxuICovXG5leHBvcnQgdmFyIHN0YXRlc01peGluID0gKGxpc3RPZkNvbXBvbmVudHMsIGJhc2VDbGFzcykgPT4gY2xhc3MgZXh0ZW5kcyBiYXNlTWl4aW4obGlzdE9mQ29tcG9uZW50cywgYmFzZUNsYXNzKSB7XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIGlmIChzdXBlclsnY29ubmVjdGVkQ2FsbGJhY2snXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHdhdGNoIGRlZmF1bHQgc3RhdGUgdmFyaWFibGVzXG4gICAgICAgIGZvciAobGV0IHN0YXRlX2NvbXAgb2YgbGlzdE9mQ29tcG9uZW50cykge1xuICAgICAgICAgICAgaWYgKHN0YXRlX2NvbXAgaW5zdGFuY2VvZiBNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXNbYGdvdE1lc3NhZ2VfJHtzdGF0ZV9jb21wLm5hbWV9YF0pXG4gICAgICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBzdGF0ZV9jb21wLmF0dGFjaFdhdGNoZXIodGhpcywgdGhpc1tgZ290TWVzc2FnZV8ke3N0YXRlX2NvbXAubmFtZX1gXS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlX2NvbXAgaW5zdGFuY2VvZiBTdGF0ZVRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpc1tgb25fJHtzdGF0ZV9jb21wLm5hbWV9YF0pXG4gICAgICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBzdGF0ZV9jb21wLmF0dGFjaFdhdGNoZXIodGhpcywgdGhpc1tgb25fJHtzdGF0ZV9jb21wLm5hbWV9YF0uYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzW2Bvbl8ke3N0YXRlX2NvbXAubmFtZX1fdXBkYXRlYF0pIHtcbiAgICAgICAgICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICBzdGF0ZV9jb21wLmF0dGFjaFdhdGNoZXIodGhpcywgdGhpc1tgb25fJHtzdGF0ZV9jb21wLm5hbWV9X3VwZGF0ZWBdLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgIHRoaXNbYG9uXyR7c3RhdGVfY29tcC5uYW1lfV91cGRhdGVgXSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbi8qKlxuICogVGhpcyBpcyBhIG1peGluIHRvIGJlIGFwcGxpZWQgdG8gTGl0LUVsZW1lbnQgd2ViLWNvbXBvbmVudHMuIEZvciBhbnkgc3RhdGVWYXJpYWJsZXMgaW4gdGhlIGxpc3Qgd2lsbCBhZGQgYSByZWFkLW9ubHkgcHJvcGVydHlcbiAqIHRvIHRoZSBlbGVtZW50IG5hbWVkIGFzIHRoZSBzdGF0ZVZhcmlhYmxlLiBJdCB3aWxsIGFkZCBhbiAqKmFwcGx5VHJhbnNpdGlvbioqIG1ldGhvZCB0byBkaXNwYXRjaCB0aGUgYWRkZWRcbiAqIHRyYW5zaXRpb24gKGVpdGhlciBvZiBhIHN0YXRlVmFyaWFibGUgb3Igb2YgYSBnbG9iYWwgc3RhdGVUcmFuc2l0aW9uKS4gRm9yIGVhY2ggY2hhbmdlIG9mIGEgc3RhdGVWYXJpYWJsZSBvciBkaXNwYXRjaCBvZlxuICogYW55IG9mIHRoZSBzdGF0ZVRyYW5zaXRpb24gYSByZW5kZXIgcmVxdWVzdCBpcyBjYWxsZWQuIEEgaG9vayBmdW5jdGlvbiBpcyBhZGRlZCBmb3IgZWFjaCBzdGF0ZVZhcmlhYmxlIHdpdGggbmFtZSAqKidvbl9WYXJOYW1lX3VwZGF0ZScqKixcbiAqIGlmIHRoaXMgZnVuY3Rpb24gaXMgZGVmaW5lZCBieSB0aGUgdXNlciB0aGVuIGl0IHdpbGwgYmUgcnVuIGJlZm9yZSB0aGUgcmVuZGVyLlxuICogRm9yIGFueSAqKk1lc3NhZ2UqKiBpbiB0aGUgbGlzdCBpdCB3aWxsIGFkZCBhICoqZ290TWVzc2FnZV9cIm1lc3NhZ2VOYW1lXCIqKiBtZXRob2QgdG8gcmVhY3RcbiAqIHRvIG1lc3NhZ2UgZXhjaGFuZ2UsIHRoaXMgbWV0aG9kIHBhc3NlcyBhcyBpbnB1dCB0aGUgbWVzc2FnZSBwYXlsb2FkLlxuICogQHBhcmFtIGxpc3RPZkNvbXBvbmVudHMgaXMgYSBsaXN0IG9mIFN0YXRlVmFyaWFibGVzIGFuZCBTdGF0ZVRyYW5zaXRpb24gdG8gYWRkIHRvIHRoZSB3ZWItY29tcG9uZW50XG4gKiBAcGFyYW0gYmFzZUNsYXNzIFRoZSBjbGFzcyBvbiB3aGljaCB0aGUgbWl4aW4gaXMgYXBwbGllZFxuICovXG5leHBvcnQgbGV0IGxpdFN0YXRlc01peGluID0gKGxpc3RPZkNvbXBvbmVudHMsIGJhc2VDbGFzcykgPT4gY2xhc3MgZXh0ZW5kcyBiYXNlTWl4aW4obGlzdE9mQ29tcG9uZW50cywgYmFzZUNsYXNzKSB7XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIGlmIChzdXBlclsnY29ubmVjdGVkQ2FsbGJhY2snXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IHN0YXRlX2NvbXAgb2YgbGlzdE9mQ29tcG9uZW50cykge1xuICAgICAgICAgICAgaWYgKHN0YXRlX2NvbXAgaW5zdGFuY2VvZiBNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXNbYGdvdE1lc3NhZ2VfJHtzdGF0ZV9jb21wLm5hbWV9YF0pXG4gICAgICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBzdGF0ZV9jb21wLmF0dGFjaFdhdGNoZXIodGhpcywgdGhpc1tgZ290TWVzc2FnZV8ke3N0YXRlX2NvbXAubmFtZX1gXS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIHN0YXRlX2NvbXAuYXR0YWNoV2F0Y2hlcih0aGlzLCB0aGlzLl9zdGF0ZVJlcXVlc3RVcGRhdGUoc3RhdGVfY29tcC5uYW1lKS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfc3RhdGVSZXF1ZXN0VXBkYXRlKHZhck5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzW2Bvbl8ke3Zhck5hbWV9X3VwZGF0ZWBdKVxuICAgICAgICAgICAgICAgIHRoaXNbYG9uXyR7dmFyTmFtZX1fdXBkYXRlYF0oKTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgpO1xuICAgICAgICB9O1xuICAgIH1cbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAoQykgMjAxNy1wcmVzZW50IGJ5IEFuZHJlYSBHaWFtbWFyY2hpIC0gQFdlYlJlZmxlY3Rpb25cbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gKiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4gKiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4gKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4gKiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbiAqIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuICogVEhFIFNPRlRXQVJFLlxuICovXG5cbmNvbnN0IHtyZXBsYWNlfSA9ICcnO1xuXG4vLyBlc2NhcGVcbmNvbnN0IGVzID0gLyYoPzphbXB8IzM4fGx0fCM2MHxndHwjNjJ8YXBvc3wjMzl8cXVvdHwjMzQpOy9nO1xuY29uc3QgY2EgPSAvWyY8PidcIl0vZztcblxuY29uc3QgZXNjYSA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJz4nOiAnJmd0OycsXG4gIFwiJ1wiOiAnJiMzOTsnLFxuICAnXCInOiAnJnF1b3Q7J1xufTtcbmNvbnN0IHBlID0gbSA9PiBlc2NhW21dO1xuXG5leHBvcnQgY29uc3QgZXNjYXBlID0gZXMgPT4gcmVwbGFjZS5jYWxsKGVzLCBjYSwgcGUpO1xuXG5cbi8vIHVuZXNjYXBlXG5jb25zdCB1bmVzID0ge1xuICAnJmFtcDsnOiAnJicsXG4gICcmIzM4Oyc6ICcmJyxcbiAgJyZsdDsnOiAnPCcsXG4gICcmIzYwOyc6ICc8JyxcbiAgJyZndDsnOiAnPicsXG4gICcmIzYyOyc6ICc+JyxcbiAgJyZhcG9zOyc6IFwiJ1wiLFxuICAnJiMzOTsnOiBcIidcIixcbiAgJyZxdW90Oyc6ICdcIicsXG4gICcmIzM0Oyc6ICdcIidcbn07XG5jb25zdCBjYXBlID0gbSA9PiB1bmVzW21dO1xuXG5leHBvcnQgY29uc3QgdW5lc2NhcGUgPSB1biA9PiByZXBsYWNlLmNhbGwodW4sIGVzLCBjYXBlKTtcbiIsImltcG9ydCB7IFN0YXRlVmFyaWFibGUgfSBmcm9tIFwiaW1wZXJhLWpzXCI7XG5pbXBvcnQgeyBzeXN0ZW1WYXJpYWJsZSwgVmFyU3RhdHVzQ29kZXMgfSBmcm9tIFwiLi9UeXBlcy5qc1wiO1xuaW1wb3J0IHsgZXNjYXBlIGFzIGVzY2FwZUh0bWwgfSBmcm9tICdodG1sLWVzY2FwZXInO1xuLy8gTk9URTpcbi8vIFRoZXJlIGFyZSBwbGVudHkgb2Ygd2F5IG9mIGRvaW5nIHRoaXMsIGhlcmUgd2UgY2hvc2UgdG8gaGF2ZSBhIHNpbmdsZSBcbi8vIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHdob2xlIEFwcCBzdGF0ZS4gSWYgb25lIGhhdmUgbWFueSB2YXIgYW5kIG1hbnlcbi8vIHN1YnN5c3RlbXMgaXQgY2FuIGJlIGhlYXZ5IHRvIHdyaXRlIGluIGxvY2Fsc3RvcmFnZSBhbGwgdGhlIHRpbWUuIEl0IFxuLy8gY291bGQgYmUgbW9yZSBlZmZpY2llbnQgaWYgc3BsaXQgaW5zdGVhZCBwZXIgc3Vic3lzdGVtIChvciBldmVuIHBlciBcbi8vIHNpbmdsZSB2YXJpYWJsZXMpLCB0byBkbyBzbyBJbXBlcmEtSlMgbmVlZHMgdGhlIGFkZGl0aW9uYWwgY2FwYWJpbGl0eSBcbi8vIG9mIGF0dGFjaGluZyBhIHN0YXRlVmFyIHRvIGFuIGFscmVhZHkgaW5zdGFudGlhdGVkIG9iamVjdCwgd2l0aG91dCB1c2luZyBcbi8vIGEgbWl4aW4uIFNlZSBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL1dlYkNvbXBvbmVudEhlbHBlcnMvSW1wZXJhSlMvaXNzdWVzLzhcbi8qKlxuICogQ2xhc3MgdGhhdCBjb250YWlucyBhbGwgdGhlIHZhcmlhYmxlIG9mIHRoZSBBcHAgZm9yIGFsbCB0aGUgc3Vic3lzdGVtLlxuICogSXQgaXMgY29ubmVjdGVkIGF1dG9tYXRpY2FsbHkgdG8gVUkgZWxlbWVudCBhbmQgc2NoZWR1bGUgdXBkYXRlcyBvbiB0aGVtLlxuICovXG5leHBvcnQgY2xhc3MgRGF0YVRyZWUgZXh0ZW5kcyBTdGF0ZVZhcmlhYmxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoXCJkYXRhdHJlZVwiLCB7fSk7XG4gICAgICAgIHRoaXMuYWRkVHJhbnNpdGlvbihcImNyZWF0ZVwiLCB0aGlzLl9jcmVhdGUpO1xuICAgICAgICB0aGlzLmFkZFRyYW5zaXRpb24oXCJ1cGRhdGVcIiwgdGhpcy5fdXBkYXRlKTtcbiAgICAgICAgdGhpcy5hZGRUcmFuc2l0aW9uKFwibXVsdGl1cGRhdGVcIiwgdGhpcy5fbXVsdGl1cGRhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgdmFsdWUgYW5kIHN0YXR1cyBvZiB0aGUgcmVsYXRlZCBzdGF0ZVZhcmlhYmxlLlxuICAgICAqIEl0IHJldHVybnMgYSBwcm94eSB0byB0aGUgcmVhbCBzdGF0ZVZhcmlhYmxlLCB0aGlzIGlzIHJlYWRvbmx5LCBhcyBhIHByb3RlY3Rpb25cbiAgICAgKiBpdCB3aWxsIHRocm93IGlmIHlvdSB0cnkgdG8gYXNzaWduIGEgdmFsdWUuXG4gICAgICogQHBhcmFtIHZhcklEIGlkZW50aWZpZXIgb2YgdGhlIHZhcmlhYmxlLCBhbiBvYmplY3Qgd2l0aCB7bmFtZSxzeXN0ZW19XG4gICAgICovXG4gICAgR2V0VmFyKHZhcklEKSB7XG4gICAgICAgIGlmICh0aGlzLkV4aXN0VmFyKHZhcklEKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVbdmFySUQuc3lzdGVtXVt2YXJJRC5uYW1lXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgQ3JlYXRlKHZhcklEKSB7XG4gICAgICAgIHRoaXMuYXBwbHlUcmFuc2l0aW9uKFwiY3JlYXRlXCIsIHZhcklEKTtcbiAgICB9XG4gICAgVXBkYXRlU3RhdHVzKHZhcklELCBfc3RhdHVzKSB7XG4gICAgICAgIGxldCB1cGRfdmFyID0gbmV3IHN5c3RlbVZhcmlhYmxlKHZhcklEKTtcbiAgICAgICAgdXBkX3Zhci5zdGF0dXMgPSBfc3RhdHVzO1xuICAgICAgICB0aGlzLmFwcGx5VHJhbnNpdGlvbihcInVwZGF0ZVwiLCB1cGRfdmFyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXQgdXBhZHRlcyB3aXRoIHRoZSB2YXJpYWJsZSBvciB0aGUgbGlzdCBvZiB2YXJpYWJsZXMuXG4gICAgICogVGhpcyB3aWxsIGF1dG9tYXRpY2FsbHkgY2FsbCBVSSB1cGRhdGUgb2YgYWxsIGNvbm5lY3RlZCBlbGVtZW50cy5cbiAgICAgKiBAcGFyYW0gdmFyaWFibGVzIGEgbGlzdCBvciBhIHNpbmdsZSBzeXN0ZW1WYXJpYWJsZSBvYmplY3Qge25hbWUsc3lzdGVtLHN0YXR1cyx2YWx1ZX1cbiAgICAgKi9cbiAgICBVcGRhdGUodmFyaWFibGVzKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhcmlhYmxlcykpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUcmFuc2l0aW9uKFwibXVsdGl1cGRhdGVcIiwgdmFyaWFibGVzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUcmFuc2l0aW9uKFwidXBkYXRlXCIsIHZhcmlhYmxlcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2NyZWF0ZSh2YXJJRCkge1xuICAgICAgICBpZiAodmFySUQgJiYgdHlwZW9mIHZhcklELnN5c3RlbSA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgdmFySUQubmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdmFySUQuc3lzdGVtID0gZXNjYXBlSHRtbCh2YXJJRC5zeXN0ZW0pO1xuICAgICAgICAgICAgdmFySUQubmFtZSA9IGVzY2FwZUh0bWwodmFySUQubmFtZSk7XG4gICAgICAgICAgICBsZXQgbmV3X3ZhciA9IHsgc3RhdHVzOiBudWxsLCB2YWx1ZTogbnVsbCB9OyAvL25ldyBzeXN0ZW1WYXJpYWJsZSh2YXJJRC5uYW1lLCB2YXJJRC5zeXN0ZW0pO1xuICAgICAgICAgICAgbmV3X3Zhci5zdGF0dXMgPSBWYXJTdGF0dXNDb2Rlcy5QZW5kaW5nO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnZhbHVlLmhhc093blByb3BlcnR5KHZhcklELnN5c3RlbSkpXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZVt2YXJJRC5zeXN0ZW1dID0ge307XG4gICAgICAgICAgICB0aGlzLnZhbHVlW3ZhcklELnN5c3RlbV1bdmFySUQubmFtZV0gPSBuZXdfdmFyO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9tdWx0aXVwZGF0ZShzeXNfdmFycykge1xuICAgICAgICBzeXNfdmFycy5mb3JFYWNoKGlucHV0X3ZhciA9PiB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGUoaW5wdXRfdmFyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF91cGRhdGUodmFySUQpIHtcbiAgICAgICAgdGhpcy5fY2hlY2tWYXJUeXBlKHZhcklEKTtcbiAgICAgICAgbGV0IHN5c192YXIgPSB0aGlzLkdldFZhcih2YXJJRCk7XG4gICAgICAgIGlmICghc3lzX3ZhcilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlcXVlc3RlZCBWYXJpYWJsZSBkb2VzIG5vdCBleGlzdDogXCIgKyB2YXJJRC5uYW1lKTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YXJJRC52YWx1ZSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICB2YXJJRC52YWx1ZSA9IGVzY2FwZUh0bWwodmFySUQudmFsdWUpO1xuICAgICAgICBpZiAodmFySUQuc3RhdHVzKVxuICAgICAgICAgICAgc3lzX3Zhci5zdGF0dXMgPSBlc2NhcGVIdG1sKHZhcklELnN0YXR1cyk7XG4gICAgICAgIC8vIGNhcmVmdWxsIGhlcmUgYXMgdmFsdWUgY2FuIGFsc28gYmUgZmFsc2UgZm9yIGEgYm9vbGVhbiwgc28gaWYodmFySUQudmFsdWUpIGRvZXMgbm90IHdvcmtcbiAgICAgICAgaWYgKHZhcklELnZhbHVlICE9PSBudWxsICYmIHZhcklELnZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzeXNfdmFyLnZhbHVlID0gdmFySUQudmFsdWU7XG4gICAgfVxuICAgIF9jaGVja1ZhclR5cGUodikge1xuICAgICAgICBpZiAoIXYpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVmFyaWFibGUgY2Fubm90IGJlIG51bGxcIik7XG4gICAgICAgIGlmICh0eXBlb2Ygdi5uYW1lICE9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlZhcmlhYmxlIE5hbWUgbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSB2YXJpYWJsZSBleGlzdCBpbiB0aGUgY3VycmVudCBzdGF0ZSB0cmVlXG4gICAgICogQHBhcmFtIHZhcklEIGlkZW50aWZpZXIgb2YgdGhlIHZhcmlhYmxlLCBhbiBvYmplY3Qgd2l0aCB7bmFtZSxzeXN0ZW19XG4gICAgICovXG4gICAgRXhpc3RWYXIodmFySUQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YXJJRC5zeXN0ZW0gIT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIHZhcklELm5hbWUgIT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghdGhpcy52YWx1ZS5oYXNPd25Qcm9wZXJ0eSh2YXJJRC5zeXN0ZW0pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIXRoaXMudmFsdWVbdmFySUQuc3lzdGVtXS5oYXNPd25Qcm9wZXJ0eSh2YXJJRC5uYW1lKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU3RhdGVWYXJpYWJsZSB9IGZyb20gJ2ltcGVyYS1qcyc7XG5pbXBvcnQgeyBzeXN0ZW1FcnJvciwgc3lzdGVtQWxhcm0gfSBmcm9tICcuL1R5cGVzLmpzJztcbmltcG9ydCB7IGVzY2FwZSBhcyBodG1sRXNjYXBlIH0gZnJvbSAnaHRtbC1lc2NhcGVyJztcbmV4cG9ydCBjbGFzcyBFcnJvclRyYXkgZXh0ZW5kcyBTdGF0ZVZhcmlhYmxlIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgICAgIHN1cGVyKG5hbWUsIFtdKTtcbiAgICAgICAgdGhpcy5lcnJvckV4cGlyeV9kYXlzID0gNztcbiAgICAgICAgdGhpcy5hZGRUcmFuc2l0aW9uKFwiY3JlYXRlXCIsIHRoaXMuX2NyZWF0ZSk7XG4gICAgICAgIHRoaXMuYWRkVHJhbnNpdGlvbihcImFja1wiLCB0aGlzLl9hY2spO1xuICAgICAgICB0aGlzLmFkZFRyYW5zaXRpb24oXCJjbGVhblwiLCB0aGlzLl9jbGVhbnVwKTtcbiAgICAgICAgdGhpcy5zd2lwZV9pbnRlcnZhbF9JRCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7IHRoaXMuYXBwbHlUcmFuc2l0aW9uKFwiY2xlYW5cIik7IH0sIDEwMDAwKTtcbiAgICB9XG4gICAgR2V0QWxsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9XG4gICAgc2V0U3dpcGVJbnRlcnZhbChpbnRlcnZhbF9tcykge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuc3dpcGVfaW50ZXJ2YWxfSUQpO1xuICAgICAgICB0aGlzLnN3aXBlX2ludGVydmFsX0lEID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHsgdGhpcy5hcHBseVRyYW5zaXRpb24oXCJjbGVhblwiKTsgfSwgaW50ZXJ2YWxfbXMpO1xuICAgIH1cbiAgICBDcmVhdGUoZXJyb3IpIHtcbiAgICAgICAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBzeXN0ZW1FcnJvcikpXG4gICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCJpbnB1dCBtdXN0IGJlIGEgJ3N5c3RlbUVycm9yJyBpbnN0YW5jZS5cIik7XG4gICAgICAgIHRoaXMuYXBwbHlUcmFuc2l0aW9uKFwiY3JlYXRlXCIsIGVycm9yKTtcbiAgICB9XG4gICAgX2NyZWF0ZShlcnJvcikge1xuICAgICAgICBsZXQgZXJyID0ge1xuICAgICAgICAgICAgY29kZTogaHRtbEVzY2FwZShlcnJvci5jb2RlKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGh0bWxFc2NhcGUoZXJyb3IubWVzc2FnZSksXG4gICAgICAgICAgICBzeXN0ZW1OYW1lOiBodG1sRXNjYXBlKGVycm9yLnN5c3RlbU5hbWUpLFxuICAgICAgICAgICAgdGFyZ2V0TmFtZTogaHRtbEVzY2FwZShlcnJvci50YXJnZXROYW1lKSxcbiAgICAgICAgICAgIGFjdGlvbjogaHRtbEVzY2FwZShlcnJvci5hY3Rpb24pLFxuICAgICAgICAgICAgdGltZXN0YW1wX21zOiBlcnJvci50aW1lc3RhbXBfbXMsXG4gICAgICAgICAgICBhY2s6IGVycm9yLmFja1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnZhbHVlLnB1c2goZXJyKTtcbiAgICB9XG4gICAgQWNrbm93ZWxkZ2UoSUQpIHtcbiAgICAgICAgdGhpcy5hcHBseVRyYW5zaXRpb24oXCJhY2tcIiwgSUQpO1xuICAgIH1cbiAgICBfYWNrKElEKSB7XG4gICAgICAgIGxldCBpZHggPSB0aGlzLnZhbHVlW0lEXTtcbiAgICAgICAgaWYgKCFpZHgpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgRXJyb3IgSUQgJyR7SUR9JyBkb2VzIG5vdCBleGlzdGApO1xuICAgICAgICBpZHguYWNrID0gdHJ1ZTtcbiAgICB9XG4gICAgR2V0VW5hY2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmZpbHRlcigoZXJyKSA9PiB7IHJldHVybiAhZXJyLmFjazsgfSk7XG4gICAgfVxuICAgIENsZWFuQWxsKCkge1xuICAgICAgICB0aGlzLmFwcGx5VHJhbnNpdGlvbihcImNsZWFuXCIsIHRydWUpO1xuICAgIH1cbiAgICBfY2xlYW51cChjbGVhbkFsbCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5naHQgPT09IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChjbGVhbkFsbCkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkYXlfaW5fbXMgPSA4NjQwMDAwMDtcbiAgICAgICAgbGV0IGZpbHRlcmVkX2Vycm9ycyA9IHRoaXMudmFsdWUuZmlsdGVyKChlcnIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoZXJyLnRpbWVzdGFtcF9tcyArIGRheV9pbl9tcyAqIHRoaXMuZXJyb3JFeHBpcnlfZGF5cykgPiBEYXRlLm5vdygpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGZpbHRlcmVkX2Vycm9ycy5sZW5ndGggPCB0aGlzLnZhbHVlLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBmaWx0ZXJlZF9lcnJvcnM7XG4gICAgfVxufVxuLy8gZml4XG5leHBvcnQgY2xhc3MgQWxhcm1UcmF5IGV4dGVuZHMgRXJyb3JUcmF5IHtcbiAgICBDcmVhdGUoYWxhcm0pIHtcbiAgICAgICAgaWYgKCEoYWxhcm0gaW5zdGFuY2VvZiBzeXN0ZW1BbGFybSkpXG4gICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCJpbnB1dCBtdXN0IGJlIGEgJ3N5c3RlbUFsYXJtJyBpbnN0YW5jZS5cIik7XG4gICAgICAgIHRoaXMuYXBwbHlUcmFuc2l0aW9uKFwiY3JlYXRlXCIsIGFsYXJtKTtcbiAgICB9XG4gICAgX2NyZWF0ZShhbGFybSkge1xuICAgICAgICBsZXQgZXJyID0ge1xuICAgICAgICAgICAgY29kZTogaHRtbEVzY2FwZShhbGFybS5jb2RlKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGh0bWxFc2NhcGUoYWxhcm0ubWVzc2FnZSksXG4gICAgICAgICAgICBzeXN0ZW1OYW1lOiBodG1sRXNjYXBlKGFsYXJtLnN5c3RlbU5hbWUpLFxuICAgICAgICAgICAgdGFyZ2V0TmFtZTogaHRtbEVzY2FwZShhbGFybS50YXJnZXROYW1lKSxcbiAgICAgICAgICAgIGFjdGlvbjogaHRtbEVzY2FwZShhbGFybS5hY3Rpb24pLFxuICAgICAgICAgICAgdGltZXN0YW1wX21zOiBhbGFybS50aW1lc3RhbXBfbXMsXG4gICAgICAgICAgICBhY2s6IGFsYXJtLmFjayxcbiAgICAgICAgICAgIGlzQWN0aXZlOiBhbGFybS5pc0FjdGl2ZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnZhbHVlLnB1c2goZXJyKTtcbiAgICB9XG4gICAgVXBkYXRlT3JDcmVhdGUoKSB7XG4gICAgICAgIC8vIGNoZWNrIGlmIGFuIGFsYXJtIGV4aXN0IGFuZCB1cGRhdGVzIGl0IGlmIG5vdCBjcmVhdGUgbmV3LlxuICAgICAgICAvLyB1cGRhdGU6XG4gICAgICAgIC8vIC0gaWYgaXNBY3RpdmUgPT09IG5ld0lzQWN0aXZlIGNvbnNpZGVyZWQgc2FtZSBhbGFybSwgZG8gbm90aGluZ1xuICAgICAgICAvLyAtIGlmIGlzIGFjdGl2ZSBnb2VzIGRvd24gZm9yIG1vcmUgdGhhbiAzIGN5Y2xlcyAtPiBhbmQgdGhlbiBnb2VzIHVwIGFnYWluIGNvbnNpZGVyIGl0IG5ldyBhbGFybVxuICAgICAgICAvLyAtIGlmIGlzIGFjayBkb24ndCBwb3AgaXQgdXAgYWdhaW5cbiAgICAgICAgLy8gdGhpcyBuZWVkcyBhIG5ldyB0cmFuc2l0aW9uXG4gICAgfVxuICAgIEdldEFjdGl2ZUFsYXJtcygpIHtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBzeXN0ZW1WYXJpYWJsZSwgU2VydmljZVN0YXR1c0NvZGVzLCBWYXJTdGF0dXNDb2Rlcywgc3lzdGVtRXJyb3IsIEFjdGlvbnMsIEVycm9yQ29kZXMgfSBmcm9tICcuL0RhdGFNb2RlbHMvVHlwZXMuanMnO1xuaW1wb3J0IHsgRGF0YVRyZWUgfSBmcm9tICcuL0RhdGFNb2RlbHMvRGF0YVRyZWUuanMnO1xuaW1wb3J0IHsgZXNjYXBlIGFzIGVzY2FwZUh0bWwgfSBmcm9tICdodG1sLWVzY2FwZXInO1xuaW1wb3J0IHsgRXJyb3JUcmF5IH0gZnJvbSAnLi9EYXRhTW9kZWxzL0Vycm9yVHJheS5qcyc7XG5leHBvcnQgY2xhc3MgU2VydmljZU1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmRhdGFUcmVlID0gbmV3IERhdGFUcmVlKCk7XG4gICAgICAgIHRoaXMuZXJyb3JUcmF5ID0gbmV3IEVycm9yVHJheShcImVycm9ydHJheVwiKTtcbiAgICAgICAgdGhpcy5kYXRhRW5naW5lcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBTZXJ2aWNlU3RhdHVzQ29kZXMuRG93bjtcbiAgICAgICAgdGhpcy5faW5pdFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faW5pdFJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fZGVmYXVsdEVuZ2luZSA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHN1YnN5c3RlbU5hbWVcbiAgICAgKiBAcGFyYW0gZW5naW5lXG4gICAgICovXG4gICAgQWRkRW5naW5lKGVuZ2luZSkge1xuICAgICAgICBsZXQgc3Vic3lzdGVtTmFtZSA9IGVzY2FwZUh0bWwoZW5naW5lLm5hbWUpO1xuICAgICAgICB0aGlzLmRhdGFFbmdpbmVzLnNldChzdWJzeXN0ZW1OYW1lLCBlbmdpbmUpO1xuICAgICAgICBpZiAodGhpcy5fZGVmYXVsdEVuZ2luZSA9PT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMuX2RlZmF1bHRFbmdpbmUgPSBlbmdpbmU7XG4gICAgfVxuICAgIFNldERlZmV1bHRFbmdpbmUoZW5naW5lKSB7XG4gICAgICAgIGlmICghdGhpcy5kYXRhRW5naW5lcy5oYXMoZW5naW5lLm5hbWUpKVxuICAgICAgICAgICAgdGhpcy5BZGRFbmdpbmUoZW5naW5lKTtcbiAgICAgICAgdGhpcy5fZGVmYXVsdEVuZ2luZSA9IGVuZ2luZTtcbiAgICB9XG4gICAgR2V0RW5naW5lKGVuZ2luZV9uYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZW5naW5lX25hbWUgIT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkVuZ2luZSBOYW1lIG11c3QgYmUgYSBzdHJpbmdcIik7XG4gICAgICAgIGlmIChlbmdpbmVfbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBcImRlZmF1bHRcIilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWZhdWx0RW5naW5lO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhRW5naW5lcy5nZXQoZW5naW5lX25hbWUpO1xuICAgIH1cbiAgICBhc3luYyBTdWJzY3JpYmUoZW5naW5lX25hbWUsIHRhcmdldCkge1xuICAgICAgICBpZiAodHlwZW9mIHRhcmdldC5uYW1lICE9PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB0YXJnZXQuc3lzdGVtICE9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJDQU5OT1QgU1VCU0NSSUJFIHZhcmlhYmxlIFwiICsgdGFyZ2V0Lm5hbWUpO1xuICAgICAgICBhd2FpdCB0aGlzLmlzSW5pdGlhbGl6ZWQoKTtcbiAgICAgICAgdGFyZ2V0Lm5hbWUgPSBlc2NhcGVIdG1sKHRhcmdldC5uYW1lKTtcbiAgICAgICAgdGFyZ2V0LnN5c3RlbSA9IGVzY2FwZUh0bWwodGFyZ2V0LnN5c3RlbSk7XG4gICAgICAgIGxldCBlbmdpbmUgPSB0aGlzLkdldEVuZ2luZShlbmdpbmVfbmFtZSk7XG4gICAgICAgIGlmIChlbmdpbmUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFUcmVlLkV4aXN0VmFyKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVuZ2luZS5pc1ZhclN1YnNjcmliZWQodGFyZ2V0KSkgLy8gdmFyIGV4aXN0IGZyb20gbG9jYWxzdG9yYWdlIGJ1dCBub3QgeWV0IHN1YnNjcmliZWRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhVHJlZS5VcGRhdGVTdGF0dXModGFyZ2V0LCBWYXJTdGF0dXNDb2Rlcy5QZW5kaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFUcmVlLkNyZWF0ZSh0YXJnZXQpO1xuICAgICAgICAgICAgZW5naW5lLlJlcXVlc3RTdWJzY3JpcHRpb24odGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVRyZWUuQ3JlYXRlKHRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLmRhdGFUcmVlLlVwZGF0ZVN0YXR1cyh0YXJnZXQsIFZhclN0YXR1c0NvZGVzLkVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuQ3JlYXRlQW5kRGlzcGF0Y2hFcnJvcih0YXJnZXQuc3lzdGVtLCBFcnJvckNvZGVzLkVuZ2luZU5vdEV4aXN0LCBcIlwiLCBBY3Rpb25zLlN1YnNjcmliZSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVuZ2luZSAnJHtlbmdpbmVfbmFtZX0nIGRvZXMgbm90IGV4aXN0LmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIFVuc3Vic2NyaWJlKGVuZ2luZV9uYW1lLCB0YXJnZXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXQubmFtZSAhPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdGFyZ2V0LnN5c3RlbSAhPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiQ0FOTk9UIFVOU1VCU0NSSUJFIHZhcmlhYmxlIFwiICsgdGFyZ2V0Lm5hbWUpO1xuICAgICAgICBhd2FpdCB0aGlzLmlzSW5pdGlhbGl6ZWQoKTtcbiAgICAgICAgbGV0IGVuZ2luZSA9IHRoaXMuR2V0RW5naW5lKGVuZ2luZV9uYW1lKTtcbiAgICAgICAgaWYgKGVuZ2luZSkge1xuICAgICAgICAgICAgZW5naW5lLlJlcXVlc3RVbnN1YnNjcmlwdGlvbih0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5DcmVhdGVBbmREaXNwYXRjaEVycm9yKHRhcmdldC5zeXN0ZW0sIEVycm9yQ29kZXMuRW5naW5lTm90RXhpc3QsIFwiXCIsIEFjdGlvbnMuVW5zdWJzY3JpYmUpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFbmdpbmUgJyR7ZW5naW5lX25hbWV9JyBkb2VzIG5vdCBleGlzdC5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBVcGRhdGUoZGF0YSkge1xuICAgICAgICB0aGlzLmRhdGFUcmVlLlVwZGF0ZShkYXRhKTtcbiAgICB9XG4gICAgYXN5bmMgUmVhZChlbmdpbmVfbmFtZSwgdmFycykge1xuICAgICAgICBpZiAodHlwZW9mIHZhcnMgIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiJ3N5c3RlbScgbXVzdCBiZSBhIHN0cmluZyBhbmQgJ3ZhcnMnIGFuIGFycmF5IG9mIHN0cmluZ3NcIik7XG4gICAgICAgIGF3YWl0IHRoaXMuaXNJbml0aWFsaXplZCgpO1xuICAgICAgICBsZXQgZW5naW5lID0gdGhpcy5HZXRFbmdpbmUoZW5naW5lX25hbWUpO1xuICAgICAgICBpZiAoZW5naW5lKSB7XG4gICAgICAgICAgICBsZXQgcmVzcCA9IGF3YWl0IGVuZ2luZS5SZWFkKHZhcnMpO1xuICAgICAgICAgICAgLy8gTWF5YmUgaGVyZSB3ZSBuZWVkIHNvbWV0aGluZyBsaWtlIFNUQVRVUyBPSyAtIGlmIHdhcyBpbiBlcnJvciBpdCBpcyBub3QgY2xlYXIgdGhhdCBpdCB3b3VsZCBiZSBzdWJzY3JpYmVkXG4gICAgICAgICAgICAvLyBzZWUgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL0phUy1ITUkvamFzaG1pL2lzc3Vlcy8yXG4gICAgICAgICAgICBlbmdpbmUuVXBkYXRlVmFycyhyZXNwLCBWYXJTdGF0dXNDb2Rlcy5TdWJzY3JpYmVkLCBBY3Rpb25zLlJlYWQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3A7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLkNyZWF0ZUFuZERpc3BhdGNoRXJyb3IoZW5naW5lX25hbWUsIEVycm9yQ29kZXMuRW5naW5lTm90RXhpc3QsIFwiXCIsIEFjdGlvbnMuUmVhZCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVuZ2luZSAnJHtlbmdpbmVfbmFtZX0nIGRvZXMgbm90IGV4aXN0LmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIFdyaXRlKGVuZ2luZV9uYW1lLCB2YXJzLCB2YWx1ZXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YXJzICE9PSBcIm9iamVjdFwiIHx8XG4gICAgICAgICAgICB0eXBlb2YgdmFsdWVzICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIidzeXN0ZW0nIG11c3QgYmUgYSBzdHJpbmcgYW5kICd2YXJzJyBhbmQgdmFsdWVzIGNhbm5vdCBiZSBudWxsXCIpO1xuICAgICAgICBhd2FpdCB0aGlzLmlzSW5pdGlhbGl6ZWQoKTtcbiAgICAgICAgbGV0IGVuZ2luZSA9IHRoaXMuR2V0RW5naW5lKGVuZ2luZV9uYW1lKTtcbiAgICAgICAgaWYgKGVuZ2luZSkge1xuICAgICAgICAgICAgbGV0IHN5c192YXJzID0gdmFycy5tYXAodiA9PiB7IGxldCB4ID0gbmV3IHN5c3RlbVZhcmlhYmxlKHYpOyB4LnN0YXR1cyA9IFZhclN0YXR1c0NvZGVzLlBlbmRpbmc7IHJldHVybiB4OyB9KTtcbiAgICAgICAgICAgIHRoaXMuZGF0YVRyZWUuVXBkYXRlKHN5c192YXJzKTtcbiAgICAgICAgICAgIGxldCByZXNwID0gYXdhaXQgZW5naW5lLldyaXRlKHZhcnMsIHZhbHVlcyk7XG4gICAgICAgICAgICAvLyBNYXliZSBoZXJlIHdlIG5lZWQgc29tZXRoaW5nIGxpa2UgU1RBVFVTIE9LIC0gaWYgd2FzIGluIGVycm9yIGl0IGlzIG5vdCBjbGVhciB0aGF0IGl0IHdvdWxkIGJlIHN1YnNjcmliZWRcbiAgICAgICAgICAgIC8vIHNlZSBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vSmFTLUhNSS9qYXNobWkvaXNzdWVzLzJcbiAgICAgICAgICAgIGVuZ2luZS5VcGRhdGVWYXJzKHJlc3AsIFZhclN0YXR1c0NvZGVzLlN1YnNjcmliZWQsIEFjdGlvbnMuV3JpdGUpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3A7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLkNyZWF0ZUFuZERpc3BhdGNoRXJyb3IoZW5naW5lX25hbWUsIEVycm9yQ29kZXMuRW5naW5lTm90RXhpc3QsIFwiXCIsIEFjdGlvbnMuV3JpdGUpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFbmdpbmUgJyR7ZW5naW5lX25hbWV9JyBkb2VzIG5vdCBleGlzdC5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBEaXNwYXRjaEVycm9yKGVycm9yKSB7XG4gICAgICAgIHRoaXMuZXJyb3JUcmF5LkNyZWF0ZShlcnJvcik7XG4gICAgfVxuICAgIENyZWF0ZUFuZERpc3BhdGNoRXJyb3Ioc3lzdGVtLCBjb2RlLCB0YXJnZXQgPSBcIlwiLCBhY3Rpb24gPSBcIlwiKSB7XG4gICAgICAgIGxldCBlcnJvciA9IG5ldyBzeXN0ZW1FcnJvcihzeXN0ZW0sIGNvZGUsIHRhcmdldCwgYWN0aW9uKTtcbiAgICAgICAgdGhpcy5EaXNwYXRjaEVycm9yKGVycm9yKTtcbiAgICB9XG4gICAgYXN5bmMgSW5pdCgpIHtcbiAgICAgICAgLy8gc2lnbmFsIHRoYXQgYWxsIHRoZSBlbmdpbmVzIGFyZSBhZGRlZCwgY2FuIHN0YXJ0IFxuICAgICAgICAvLyBhZGRpbmcgdmFyaWFibGVzIHRvIHN1YnNjcmlwdGlvbiBsaXN0XG4gICAgICAgIHRoaXMuX2luaXRSZXNvbHZlKCk7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gU2VydmljZVN0YXR1c0NvZGVzLldhcm1pbmc7XG4gICAgICAgIGxldCBwcm9tcyA9IFtdO1xuICAgICAgICBBcnJheS5mcm9tKHRoaXMuZGF0YUVuZ2luZXMudmFsdWVzKCkpLmZvckVhY2goZW5naW5lID0+IHByb21zLnB1c2goZW5naW5lLl9pbml0KCkpKTtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbXMpO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IFNlcnZpY2VTdGF0dXNDb2Rlcy5SZWFkeTtcbiAgICB9XG4gICAgaXNJbml0aWFsaXplZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luaXRQcm9taXNlO1xuICAgIH1cbn1cbi8vIEEgYml0IHVnbHksIGJ1dCB3ZSBtdXN0IGhhdmUgYSBkYXRhIGluc3RhbmNlIHRoYXQgaXMgc2hhcmVkIFxuLy8gYXV0b21hdGljYWxseSBiZXR3ZWVuIHRoZSB1aS1lbGVtZW50c1xuZXhwb3J0IHZhciBNYW5hZ2VyID0gbmV3IFNlcnZpY2VNYW5hZ2VyKCk7XG4iLCJpbXBvcnQgeyBNYW5hZ2VyIH0gZnJvbSAnLi9TZXJ2aWNlTWFuYWdlci5qcyc7XG5pbXBvcnQgeyBTZXJ2aWNlU3RhdHVzQ29kZXMsIHN5c3RlbVZhcmlhYmxlLCBBY3Rpb25zLCBWYXJTdGF0dXNDb2RlcywgRXJyb3JDb2Rlcywgc3lzdGVtRXJyb3IgfSBmcm9tICcuL0RhdGFNb2RlbHMvVHlwZXMuanMnO1xuLyoqQWJzdHJhY3QgY2xhc3MgZGVmaW5pbmcgYSBDb211bmljYXRpb24gRW5naW5lIGZvciBkYXRhIEkvTyB3aXRoIGEgc2VydmVyLiovXG5leHBvcnQgY2xhc3MgRGF0YUNvbW1zRW5naW5lIHtcbiAgICBjb25zdHJ1Y3RvcihFbmdpbmVOYW1lKSB7XG4gICAgICAgIHRoaXMubWFuYWdlciA9IE1hbmFnZXI7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gU2VydmljZVN0YXR1c0NvZGVzLkRvd247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWYXJpYWJsZXMgd2FpdGluZyB0byBiZSBzdWJzY3JpYmVkIGZvciB1cGRhdGVzLiBJdCBpcyBhIGtleS1udW1iZXIgbWFwLlxuICAgICAgICAgKiBUaGUgbnVtYmVyIHJlcHJlc2VudCBob3cgbWFueSBVSSBlbGVtZW50IHRpbWVzIHJlcXVlc3RlZCB1cGRhdGVzIGZyb20gdGhhdCB2YXJpYWJsZS5cbiAgICAgICAgICogVmFyaWFibGVzIGFyZSBwdXJnZWQgb25jZSBzdWJzY3JpYmVkLiBJZiBzdWJzY3JpcHRpb24gZmFpbHMgd2l0aCBcIk5PLU5FVFwiXG4gICAgICAgICAqIG9yIFwiQ0FOVC1TVUJcIiBlcnJvciB0aGUgdmFyIGlzIGtlcHQgZm9yIGxhdGVyIHN1YnNjcmlwdGlvbixcbiAgICAgICAgICogaWYgZmFpbHMgd2l0aCBcIldPTlQtU1VCXCIgb3IgXCJOT1QtRVhJU1RcIiBpdCB3aWxsIGJlIHB1cmdlZCBmcm9tIGxpc3QuXG4gICAgICAgICovXG4gICAgICAgIHRoaXMudG9CZVN1YnNjcmliZWQgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMaXN0IG9mIFZhcmlhYmxlcyB3YWl0aW5nIHRvIGJlIHVuc3Vic2NyaWJlZCBmcm9tIHVwZGF0ZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRvQmVVbnN1YnNjcmliZWQgPSBuZXcgU2V0KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMaXN0IG9mIFZhcmlhYmxlcyBjdXJyZW50bHkgc3Vic2NyaWJlZCBmb3IgdXBkYXRlcy4gSXQgaXMgYSBrZXktbnVtYmVyIG1hcC5cbiAgICAgICAgICogVGhlIG51bWJlciByZXByZXNlbnQgdGhlIG51bWJlciBvZiBVSS1lbGVtZW50cyByZWdpc3RlcmVkIHdpdGggdGhlIHNhbWUgdmFyaWFibGUsXG4gICAgICAgICAqIHVzdWFsbHkgb25lLCBidXQgZm9yIHNwZWNpYWwgY2FzZXMgY291bGQgYmUgbW9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlZFZhciA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5zdWJfdGltZXJJRCA9IG51bGw7XG4gICAgICAgIHRoaXMudW5zdWJfdGltZXJJRCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaW1lIHRoZSBzeXN0ZW0gd2lsbCB3YWl0IGJlZm9yZSBzZW5kaW5nIHN1YnNjcnVpcHRpb24vdW5zdWJzY3JpcHRpb24sIHNvIHRoYXQgdmFyaWFibGVcbiAgICAgICAgICogY2FuIGJlIGFnZ3JlZ2F0ZWQgYW5kIG1ha2UgbW9yZWVmZmljaWVudCBuZXR3b3JrIGNhbGxzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hZ2dyZWdhdGlvblRpbWVfbXMgPSAxMDtcbiAgICAgICAgdGhpcy5uYW1lID0gRW5naW5lTmFtZSB8fCBcIkRhdGFFbmdpbmVcIjtcbiAgICAgICAgdGhpcy5WYXJEaXNwYXRjaEVycm9yQ2FzZXMgPSBbXG4gICAgICAgICAgICBFcnJvckNvZGVzLlZhck5vdEV4aXN0LCBFcnJvckNvZGVzLldvbnRTdWJjcmliZSwgRXJyb3JDb2Rlcy5VbmF1dGhvcml6ZWQsXG4gICAgICAgICAgICBFcnJvckNvZGVzLlVua25vd25FcnJvciwgRXJyb3JDb2Rlcy5DYW50VW5TdWJjcmliZVxuICAgICAgICBdO1xuICAgICAgICB0aGlzLlZhckVycm9yTm9BY3RDYXNlcyA9IFtFcnJvckNvZGVzLkJhZFZhbHVlLCBFcnJvckNvZGVzLkNhbnRVblN1YmNyaWJlLFxuICAgICAgICAgICAgRXJyb3JDb2Rlcy5VbmF1dGhvcml6ZWRdO1xuICAgICAgICB0aGlzLlZhckVycm9yVW5zdWJDYXNlcyA9IFtFcnJvckNvZGVzLkNhbnRTdWJjcmliZSwgRXJyb3JDb2Rlcy5Ob05ldHdvcmtdO1xuICAgIH1cbiAgICBzZXJpYWxpemVTeXNPYmplY3QodGFyZ2V0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0Lm5hbWUgIT09IFwic3RyaW5nXCIgfHwgdGFyZ2V0Lm5hbWUuaW5jbHVkZXMoXCI6XCIpIHx8XG4gICAgICAgICAgICB0eXBlb2YgdGFyZ2V0LnN5c3RlbSAhPT0gXCJzdHJpbmdcIiB8fCB0YXJnZXQuc3lzdGVtLmluY2x1ZGVzKFwiOlwiKSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gKHRhcmdldC5zeXN0ZW0gKyBcIjpcIiArIHRhcmdldC5uYW1lKTtcbiAgICB9XG4gICAgZGVzZXJpYWxpemVTeXNPYmplY3QodGFyZ2V0KSB7XG4gICAgICAgIGxldCB0bXAgPSB0YXJnZXQuc3BsaXQoXCI6XCIpO1xuICAgICAgICBpZiAodG1wLmxlbmd0aCAhPT0gMilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4geyBzeXN0ZW06IHRtcFswXSwgbmFtZTogdG1wWzFdIH07XG4gICAgfVxuICAgIFJlcXVlc3RTdWJzY3JpcHRpb24odGFyZ2V0KSB7XG4gICAgICAgIGxldCBzZXJfb2JqID0gdGhpcy5zZXJpYWxpemVTeXNPYmplY3QodGFyZ2V0KTtcbiAgICAgICAgaWYgKHNlcl9vYmogPT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkNBTk5PVCBTVUJTQ1JJQkUgdmFyaWFibGUgXCIgKyB0YXJnZXQubmFtZSk7XG4gICAgICAgIGlmICh0aGlzLnN1YnNjcmliZWRWYXIuaGFzKHNlcl9vYmopKSB7XG4gICAgICAgICAgICAvLyBjYXNlIGFscmVhZHkgc3Vic2NyaWJlZCwganVzdCBidW1wIHRoZSBudW1iZXIgb2Ygc3Vic2NyaWJlZCB2YXJcbiAgICAgICAgICAgIGxldCBpZHggPSB0aGlzLnN1YnNjcmliZWRWYXIuZ2V0KHNlcl9vYmopO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVkVmFyLnNldChzZXJfb2JqLCBpZHggKyAxKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY291bnQgPSB0aGlzLnRvQmVTdWJzY3JpYmVkLmdldChzZXJfb2JqKSB8fCAwO1xuICAgICAgICB0aGlzLnRvQmVTdWJzY3JpYmVkLnNldChzZXJfb2JqLCBjb3VudCArIDEpO1xuICAgICAgICAvLyB0aGlzIGNhc2UganVzdCBmaWxsIHRoZSBzdWJzY3JpYmVsaXN0LHdpbGxiZSBzdWJtaXR0ZWQgYWZ0ZXIgaW5pdFxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IFNlcnZpY2VTdGF0dXNDb2Rlcy5Eb3duIHx8XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9PT0gU2VydmljZVN0YXR1c0NvZGVzLldhcm1pbmcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLnN1Yl90aW1lcklEKVxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc3ViX3RpbWVySUQpO1xuICAgICAgICB0aGlzLnN1Yl90aW1lcklEID0gd2luZG93LnNldFRpbWVvdXQodGhpcy5fc3ViY3JpYmUuYmluZCh0aGlzKSwgdGhpcy5hZ2dyZWdhdGlvblRpbWVfbXMpO1xuICAgIH1cbiAgICBSZXF1ZXN0VW5zdWJzY3JpcHRpb24odGFyZ2V0KSB7XG4gICAgICAgIGxldCBzZXJfb2JqID0gdGhpcy5zZXJpYWxpemVTeXNPYmplY3QodGFyZ2V0KTtcbiAgICAgICAgaWYgKHNlcl9vYmogPT09IG51bGwgfHwgIXRoaXMuc3Vic2NyaWJlZFZhci5oYXMoc2VyX29iaikpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkNBTk5PVCBVTlNVQlNDUklCRSB2YXJpYWJsZSBcIiArIHRhcmdldC5uYW1lKTtcbiAgICAgICAgbGV0IGNvdW50ID0gdGhpcy5zdWJzY3JpYmVkVmFyLmdldChzZXJfb2JqKTtcbiAgICAgICAgaWYgKGNvdW50ID4gMSkge1xuICAgICAgICAgICAgLy8gdGhlIHZhcmlhYmxlIG5lZWRzIHRvIHJlbWFpbiBzdWJzY3JpYmVkIHVudGlsbCB0aGVyZSBcbiAgICAgICAgICAgIC8vIGFyZSByZWxhdGVkIFVJIGVsZW1lbnQgY29ubmVjdGVkXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliZWRWYXIuc2V0KHNlcl9vYmosIGNvdW50IC0gMSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b0JlVW5zdWJzY3JpYmVkLmFkZChzZXJfb2JqKTtcbiAgICAgICAgaWYgKHRoaXMudW5zdWJfdGltZXJJRClcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnVuc3ViX3RpbWVySUQpO1xuICAgICAgICB0aGlzLnVuc3ViX3RpbWVySUQgPSB3aW5kb3cuc2V0VGltZW91dCh0aGlzLl91bnN1YmNyaWJlLmJpbmQodGhpcyksIHRoaXMuYWdncmVnYXRpb25UaW1lX21zKTtcbiAgICB9XG4gICAgYXN5bmMgX3N1YmNyaWJlKCkge1xuICAgICAgICBsZXQgdGFyZ2V0cyA9IEFycmF5LmZyb20odGhpcy50b0JlU3Vic2NyaWJlZC5rZXlzKCkpLm1hcCh0ID0+IHRoaXMuZGVzZXJpYWxpemVTeXNPYmplY3QodCkpO1xuICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLlN1YnNjcmliZSh0YXJnZXRzKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdWJzY3JpYmVyTGlzdHMocmVzcG9uc2UpO1xuICAgICAgICB0aGlzLlVwZGF0ZVZhcnMocmVzcG9uc2UsIFZhclN0YXR1c0NvZGVzLlN1YnNjcmliZWQsIEFjdGlvbnMuU3Vic2NyaWJlKTtcbiAgICB9XG4gICAgdXBkYXRlU3Vic2NyaWJlckxpc3RzKHJlc3BvbnNlKSB7XG4gICAgICAgIGZvciAobGV0IHJzcCBvZiByZXNwb25zZSkge1xuICAgICAgICAgICAgbGV0IHZhcl9pZCA9IHRoaXMuc2VyaWFsaXplU3lzT2JqZWN0KHJzcCk7XG4gICAgICAgICAgICBpZiAocnNwLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBsZXQgY291bnQgPSB0aGlzLnRvQmVTdWJzY3JpYmVkLmdldCh2YXJfaWQpO1xuICAgICAgICAgICAgICAgIGNvdW50ICs9ICh0aGlzLnN1YnNjcmliZWRWYXIuZ2V0KHZhcl9pZCkgfHwgMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVkVmFyLnNldCh2YXJfaWQsIGNvdW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvQmVTdWJzY3JpYmVkLmRlbGV0ZSh2YXJfaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvZGUgPSByc3AuZXJyb3IgPyByc3AuZXJyb3IuY29kZSA6IEVycm9yQ29kZXMuVW5rbm93bkVycm9yO1xuICAgICAgICAgICAgICAgIC8vIGtlZXAgaW4gbGlzdCBmb3IgbmV4dCB0cnkgbGF0ZXIgaW4gY2FzZSBvZiB0aGVzZSBlcnJvcnNcbiAgICAgICAgICAgICAgICBpZiAoY29kZSAhPT0gRXJyb3JDb2Rlcy5Ob05ldHdvcmsgJiYgY29kZSAhPT0gRXJyb3JDb2Rlcy5DYW50U3ViY3JpYmUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9CZVN1YnNjcmliZWQuZGVsZXRlKHZhcl9pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNWYXJTdWJzY3JpYmVkKHZhcklEKSB7XG4gICAgICAgIGxldCBpZCA9IHRoaXMuc2VyaWFsaXplU3lzT2JqZWN0KHZhcklEKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlZFZhci5oYXMoaWQpO1xuICAgIH1cbiAgICBVcGRhdGVWYXJzKHJlc3BvbnNlLCBva19zdGF0dXMsIGFjdGlvbiA9IFwiXCIpIHtcbiAgICAgICAgbGV0IHZhcl91cGQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgcnNwIG9mIHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBsZXQgdmFyX2lkeCA9IG5ldyBzeXN0ZW1WYXJpYWJsZShyc3ApO1xuICAgICAgICAgICAgaWYgKHJzcC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgdmFyX2lkeC5zdGF0dXMgPSBva19zdGF0dXM7XG4gICAgICAgICAgICAgICAgaWYgKHJzcC52YWx1ZSAhPT0gbnVsbCAmJiByc3AudmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgdmFyX2lkeC52YWx1ZSA9IHJzcC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBjb2RlID0gcnNwLmVycm9yID8gcnNwLmVycm9yLmNvZGUgOiBFcnJvckNvZGVzLlVua25vd25FcnJvcjtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5WYXJEaXNwYXRjaEVycm9yQ2FzZXMuaW5jbHVkZXMoY29kZSkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFuYWdlci5DcmVhdGVBbmREaXNwYXRjaEVycm9yKHJzcC5zeXN0ZW0sIGNvZGUsIHJzcC5uYW1lLCBhY3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLlZhckVycm9yVW5zdWJDYXNlcy5pbmNsdWRlcyhjb2RlKSlcbiAgICAgICAgICAgICAgICAgICAgdmFyX2lkeC5zdGF0dXMgPSBWYXJTdGF0dXNDb2Rlcy5VbnN1YnNjcmliZWQ7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5WYXJFcnJvck5vQWN0Q2FzZXMuaW5jbHVkZXMoY29kZSkpIC8vIG5vIG1vZGlmeSBzdGF0dXMsIHVubGVzcyBpcyBcInBlbmRpbmdcIlxuICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBfdmFyID0gdGhpcy5tYW5hZ2VyLmRhdGFUcmVlLkdldFZhcihyc3ApO1xuICAgICAgICAgICAgICAgICAgICB2YXJfaWR4LnN0YXR1cyA9IF92YXIuc3RhdHVzID09PSBWYXJTdGF0dXNDb2Rlcy5QZW5kaW5nID8gVmFyU3RhdHVzQ29kZXMuU3Vic2NyaWJlZCA6IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdmFyX2lkeC5zdGF0dXMgPSBWYXJTdGF0dXNDb2Rlcy5FcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhcl91cGQucHVzaCh2YXJfaWR4KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hbmFnZXIuVXBkYXRlKHZhcl91cGQpO1xuICAgIH1cbiAgICBhc3luYyBfdW5zdWJjcmliZSgpIHtcbiAgICAgICAgbGV0IHRhcmdldHMgPSBBcnJheS5mcm9tKHRoaXMudG9CZVVuc3Vic2NyaWJlZCkubWFwKHQgPT4gdGhpcy5kZXNlcmlhbGl6ZVN5c09iamVjdCh0KSk7XG4gICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuVW5zdWJzY3JpYmUodGFyZ2V0cyk7XG4gICAgICAgIGZvciAobGV0IHJzcCBvZiByZXNwb25zZSkge1xuICAgICAgICAgICAgbGV0IHZhcl9pZCA9IHRoaXMuc2VyaWFsaXplU3lzT2JqZWN0KHJzcCk7XG4gICAgICAgICAgICBpZiAocnNwLnN1Y2Nlc3MpXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVkVmFyLmRlbGV0ZSh2YXJfaWQpO1xuICAgICAgICAgICAgdGhpcy50b0JlVW5zdWJzY3JpYmVkLmRlbGV0ZSh2YXJfaWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuVXBkYXRlVmFycyhyZXNwb25zZSwgVmFyU3RhdHVzQ29kZXMuVW5zdWJzY3JpYmVkLCBBY3Rpb25zLlVuc3Vic2NyaWJlKTtcbiAgICB9XG4gICAgYXN5bmMgX2luaXQoKSB7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gU2VydmljZVN0YXR1c0NvZGVzLldhcm1pbmc7XG4gICAgICAgIGxldCByZXNwID0gYXdhaXQgdGhpcy5Jbml0aWFsaXplKCk7XG4gICAgICAgIGlmIChyZXNwLnN1Y2Nlc3MpXG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IFNlcnZpY2VTdGF0dXNDb2Rlcy5SZWFkeTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IFNlcnZpY2VTdGF0dXNDb2Rlcy5FcnJvcjtcbiAgICAgICAgICAgIGxldCBjb2RlID0gcmVzcC5lcnJvciA/IHJlc3AuZXJyb3IuY29kZSA6IEVycm9yQ29kZXMuVW5rbm93bkVycm9yO1xuICAgICAgICAgICAgbGV0IGVyciA9IG5ldyBzeXN0ZW1FcnJvcih0aGlzLm5hbWUsIGNvZGUsIHRoaXMubmFtZSwgQWN0aW9ucy5Jbml0KTtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5EaXNwYXRjaEVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudG9CZVN1YnNjcmliZWQuc2l6ZSA+IDApXG4gICAgICAgICAgICB0aGlzLl9zdWJjcmliZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBY3Rpb24gVXBkYXRlLiBJdCB1cGRhdGVzIGEgbGlzdCBvZiB2YXJpYWJsZSB2YWx1ZXMgYW5kIHN0YXR1c2VzIGluIHRoZSBEYXRhTWFuYWdlci5cbiAgICAgKiBUaGUgdXBkYXRlcyB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZGlzcGF0Y2hlZCB0byBhbGwgVUkgY29tcG9uZW50IGNvbm5lY3RlZCB0byB0aG9zZSB2YXJpYWJsZXMuXG4gICAgICogQHBhcmFtIGRhdGEgQSBsaXN0IG9mIHZhcmlhYmxlIHVwZGF0ZXMsIHByb3BlcnRpZXMgKGxpa2Ugc3RhdHVzIG9yIHZhbHVlKSB0aGF0IGFyZSBudWxsIHdpbGwgbm90IGJlIHVwZGF0ZWQuXG4gICAgICovXG4gICAgVXBkYXRlRGF0YShkYXRhKSB7XG4gICAgICAgIHRoaXMubWFuYWdlci5VcGRhdGUoZGF0YSk7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBUcnVlIGlmIHRoZSBjdXN0b20gZWxlbWVudHMgcG9seWZpbGwgaXMgaW4gdXNlLlxuICovXG5leHBvcnQgY29uc3QgaXNDRVBvbHlmaWxsID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB3aW5kb3cuY3VzdG9tRWxlbWVudHMgIT0gbnVsbCAmJlxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5wb2x5ZmlsbFdyYXBGbHVzaENhbGxiYWNrICE9PVxuICAgICAgICB1bmRlZmluZWQ7XG4vKipcbiAqIFJlcGFyZW50cyBub2Rlcywgc3RhcnRpbmcgZnJvbSBgc3RhcnRgIChpbmNsdXNpdmUpIHRvIGBlbmRgIChleGNsdXNpdmUpLFxuICogaW50byBhbm90aGVyIGNvbnRhaW5lciAoY291bGQgYmUgdGhlIHNhbWUgY29udGFpbmVyKSwgYmVmb3JlIGBiZWZvcmVgLiBJZlxuICogYGJlZm9yZWAgaXMgbnVsbCwgaXQgYXBwZW5kcyB0aGUgbm9kZXMgdG8gdGhlIGNvbnRhaW5lci5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlcGFyZW50Tm9kZXMgPSAoY29udGFpbmVyLCBzdGFydCwgZW5kID0gbnVsbCwgYmVmb3JlID0gbnVsbCkgPT4ge1xuICAgIHdoaWxlIChzdGFydCAhPT0gZW5kKSB7XG4gICAgICAgIGNvbnN0IG4gPSBzdGFydC5uZXh0U2libGluZztcbiAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShzdGFydCwgYmVmb3JlKTtcbiAgICAgICAgc3RhcnQgPSBuO1xuICAgIH1cbn07XG4vKipcbiAqIFJlbW92ZXMgbm9kZXMsIHN0YXJ0aW5nIGZyb20gYHN0YXJ0YCAoaW5jbHVzaXZlKSB0byBgZW5kYCAoZXhjbHVzaXZlKSwgZnJvbVxuICogYGNvbnRhaW5lcmAuXG4gKi9cbmV4cG9ydCBjb25zdCByZW1vdmVOb2RlcyA9IChjb250YWluZXIsIHN0YXJ0LCBlbmQgPSBudWxsKSA9PiB7XG4gICAgd2hpbGUgKHN0YXJ0ICE9PSBlbmQpIHtcbiAgICAgICAgY29uc3QgbiA9IHN0YXJ0Lm5leHRTaWJsaW5nO1xuICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoc3RhcnQpO1xuICAgICAgICBzdGFydCA9IG47XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvbS5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIEFuIGV4cHJlc3Npb24gbWFya2VyIHdpdGggZW1iZWRkZWQgdW5pcXVlIGtleSB0byBhdm9pZCBjb2xsaXNpb24gd2l0aFxuICogcG9zc2libGUgdGV4dCBpbiB0ZW1wbGF0ZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBtYXJrZXIgPSBge3tsaXQtJHtTdHJpbmcoTWF0aC5yYW5kb20oKSkuc2xpY2UoMil9fX1gO1xuLyoqXG4gKiBBbiBleHByZXNzaW9uIG1hcmtlciB1c2VkIHRleHQtcG9zaXRpb25zLCBtdWx0aS1iaW5kaW5nIGF0dHJpYnV0ZXMsIGFuZFxuICogYXR0cmlidXRlcyB3aXRoIG1hcmt1cC1saWtlIHRleHQgdmFsdWVzLlxuICovXG5leHBvcnQgY29uc3Qgbm9kZU1hcmtlciA9IGA8IS0tJHttYXJrZXJ9LS0+YDtcbmV4cG9ydCBjb25zdCBtYXJrZXJSZWdleCA9IG5ldyBSZWdFeHAoYCR7bWFya2VyfXwke25vZGVNYXJrZXJ9YCk7XG4vKipcbiAqIFN1ZmZpeCBhcHBlbmRlZCB0byBhbGwgYm91bmQgYXR0cmlidXRlIG5hbWVzLlxuICovXG5leHBvcnQgY29uc3QgYm91bmRBdHRyaWJ1dGVTdWZmaXggPSAnJGxpdCQnO1xuLyoqXG4gKiBBbiB1cGRhdGFibGUgVGVtcGxhdGUgdGhhdCB0cmFja3MgdGhlIGxvY2F0aW9uIG9mIGR5bmFtaWMgcGFydHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZSB7XG4gICAgY29uc3RydWN0b3IocmVzdWx0LCBlbGVtZW50KSB7XG4gICAgICAgIHRoaXMucGFydHMgPSBbXTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgY29uc3Qgbm9kZXNUb1JlbW92ZSA9IFtdO1xuICAgICAgICBjb25zdCBzdGFjayA9IFtdO1xuICAgICAgICAvLyBFZGdlIG5lZWRzIGFsbCA0IHBhcmFtZXRlcnMgcHJlc2VudDsgSUUxMSBuZWVkcyAzcmQgcGFyYW1ldGVyIHRvIGJlIG51bGxcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihlbGVtZW50LmNvbnRlbnQsIDEzMyAvKiBOb2RlRmlsdGVyLlNIT1dfe0VMRU1FTlR8Q09NTUVOVHxURVhUfSAqLywgbnVsbCwgZmFsc2UpO1xuICAgICAgICAvLyBLZWVwcyB0cmFjayBvZiB0aGUgbGFzdCBpbmRleCBhc3NvY2lhdGVkIHdpdGggYSBwYXJ0LiBXZSB0cnkgdG8gZGVsZXRlXG4gICAgICAgIC8vIHVubmVjZXNzYXJ5IG5vZGVzLCBidXQgd2UgbmV2ZXIgd2FudCB0byBhc3NvY2lhdGUgdHdvIGRpZmZlcmVudCBwYXJ0c1xuICAgICAgICAvLyB0byB0aGUgc2FtZSBpbmRleC4gVGhleSBtdXN0IGhhdmUgYSBjb25zdGFudCBub2RlIGJldHdlZW4uXG4gICAgICAgIGxldCBsYXN0UGFydEluZGV4ID0gMDtcbiAgICAgICAgbGV0IGluZGV4ID0gLTE7XG4gICAgICAgIGxldCBwYXJ0SW5kZXggPSAwO1xuICAgICAgICBjb25zdCB7IHN0cmluZ3MsIHZhbHVlczogeyBsZW5ndGggfSB9ID0gcmVzdWx0O1xuICAgICAgICB3aGlsZSAocGFydEluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gd2Fsa2VyLm5leHROb2RlKCk7XG4gICAgICAgICAgICBpZiAobm9kZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIFdlJ3ZlIGV4aGF1c3RlZCB0aGUgY29udGVudCBpbnNpZGUgYSBuZXN0ZWQgdGVtcGxhdGUgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAvLyBCZWNhdXNlIHdlIHN0aWxsIGhhdmUgcGFydHMgKHRoZSBvdXRlciBmb3ItbG9vcCksIHdlIGtub3c6XG4gICAgICAgICAgICAgICAgLy8gLSBUaGVyZSBpcyBhIHRlbXBsYXRlIGluIHRoZSBzdGFja1xuICAgICAgICAgICAgICAgIC8vIC0gVGhlIHdhbGtlciB3aWxsIGZpbmQgYSBuZXh0Tm9kZSBvdXRzaWRlIHRoZSB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAxIC8qIE5vZGUuRUxFTUVOVF9OT0RFICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlcygpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBhdHRyaWJ1dGVzO1xuICAgICAgICAgICAgICAgICAgICAvLyBQZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05hbWVkTm9kZU1hcCxcbiAgICAgICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlcyBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgcmV0dXJuZWQgaW4gZG9jdW1lbnQgb3JkZXIuXG4gICAgICAgICAgICAgICAgICAgIC8vIEluIHBhcnRpY3VsYXIsIEVkZ2UvSUUgY2FuIHJldHVybiB0aGVtIG91dCBvZiBvcmRlciwgc28gd2UgY2Fubm90XG4gICAgICAgICAgICAgICAgICAgIC8vIGFzc3VtZSBhIGNvcnJlc3BvbmRlbmNlIGJldHdlZW4gcGFydCBpbmRleCBhbmQgYXR0cmlidXRlIGluZGV4LlxuICAgICAgICAgICAgICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kc1dpdGgoYXR0cmlidXRlc1tpXS5uYW1lLCBib3VuZEF0dHJpYnV0ZVN1ZmZpeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChjb3VudC0tID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSB0ZW1wbGF0ZSBsaXRlcmFsIHNlY3Rpb24gbGVhZGluZyB1cCB0byB0aGUgZmlyc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4cHJlc3Npb24gaW4gdGhpcyBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ0ZvclBhcnQgPSBzdHJpbmdzW3BhcnRJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGxhc3RBdHRyaWJ1dGVOYW1lUmVnZXguZXhlYyhzdHJpbmdGb3JQYXJ0KVsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBbGwgYm91bmQgYXR0cmlidXRlcyBoYXZlIGhhZCBhIHN1ZmZpeCBhZGRlZCBpblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGVtcGxhdGVSZXN1bHQjZ2V0SFRNTCB0byBvcHQgb3V0IG9mIHNwZWNpYWwgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGluZy4gVG8gbG9vayB1cCB0aGUgYXR0cmlidXRlIHZhbHVlIHdlIGFsc28gbmVlZCB0byBhZGRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBzdWZmaXguXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVMb29rdXBOYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpICsgYm91bmRBdHRyaWJ1dGVTdWZmaXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVWYWx1ZSA9IG5vZGUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZUxvb2t1cE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlTG9va3VwTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0aWNzID0gYXR0cmlidXRlVmFsdWUuc3BsaXQobWFya2VyUmVnZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJ0cy5wdXNoKHsgdHlwZTogJ2F0dHJpYnV0ZScsIGluZGV4LCBuYW1lLCBzdHJpbmdzOiBzdGF0aWNzIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFydEluZGV4ICs9IHN0YXRpY3MubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm9kZS50YWdOYW1lID09PSAnVEVNUExBVEUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IG5vZGUuY29udGVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09PSAzIC8qIE5vZGUuVEVYVF9OT0RFICovKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5vZGUuZGF0YTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5pbmRleE9mKG1hcmtlcikgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ3MgPSBkYXRhLnNwbGl0KG1hcmtlclJlZ2V4KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdEluZGV4ID0gc3RyaW5ncy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIG5ldyB0ZXh0IG5vZGUgZm9yIGVhY2ggbGl0ZXJhbCBzZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZXNlIG5vZGVzIGFyZSBhbHNvIHVzZWQgYXMgdGhlIG1hcmtlcnMgZm9yIG5vZGUgcGFydHNcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYXN0SW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluc2VydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzID0gc3RyaW5nc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydCA9IGNyZWF0ZU1hcmtlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBsYXN0QXR0cmlidXRlTmFtZVJlZ2V4LmV4ZWMocyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoICE9PSBudWxsICYmIGVuZHNXaXRoKG1hdGNoWzJdLCBib3VuZEF0dHJpYnV0ZVN1ZmZpeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHMuc2xpY2UoMCwgbWF0Y2guaW5kZXgpICsgbWF0Y2hbMV0gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hbMl0uc2xpY2UoMCwgLWJvdW5kQXR0cmlidXRlU3VmZml4Lmxlbmd0aCkgKyBtYXRjaFszXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGluc2VydCwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2goeyB0eXBlOiAnbm9kZScsIGluZGV4OiArK2luZGV4IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlJ3Mgbm8gdGV4dCwgd2UgbXVzdCBpbnNlcnQgYSBjb21tZW50IHRvIG1hcmsgb3VyIHBsYWNlLlxuICAgICAgICAgICAgICAgICAgICAvLyBFbHNlLCB3ZSBjYW4gdHJ1c3QgaXQgd2lsbCBzdGljayBhcm91bmQgYWZ0ZXIgY2xvbmluZy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmluZ3NbbGFzdEluZGV4XSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY3JlYXRlTWFya2VyKCksIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXNUb1JlbW92ZS5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5kYXRhID0gc3RyaW5nc1tsYXN0SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBwYXJ0IGZvciBlYWNoIG1hdGNoIGZvdW5kXG4gICAgICAgICAgICAgICAgICAgIHBhcnRJbmRleCArPSBsYXN0SW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gOCAvKiBOb2RlLkNPTU1FTlRfTk9ERSAqLykge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLmRhdGEgPT09IG1hcmtlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBhIG5ldyBtYXJrZXIgbm9kZSB0byBiZSB0aGUgc3RhcnROb2RlIG9mIHRoZSBQYXJ0IGlmIGFueSBvZlxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZm9sbG93aW5nIGFyZSB0cnVlOlxuICAgICAgICAgICAgICAgICAgICAvLyAgKiBXZSBkb24ndCBoYXZlIGEgcHJldmlvdXNTaWJsaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vICAqIFRoZSBwcmV2aW91c1NpYmxpbmcgaXMgYWxyZWFkeSB0aGUgc3RhcnQgb2YgYSBwcmV2aW91cyBwYXJ0XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLnByZXZpb3VzU2libGluZyA9PT0gbnVsbCB8fCBpbmRleCA9PT0gbGFzdFBhcnRJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY3JlYXRlTWFya2VyKCksIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxhc3RQYXJ0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJ0cy5wdXNoKHsgdHlwZTogJ25vZGUnLCBpbmRleCB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhIG5leHRTaWJsaW5nLCBrZWVwIHRoaXMgbm9kZSBzbyB3ZSBoYXZlIGFuIGVuZC5cbiAgICAgICAgICAgICAgICAgICAgLy8gRWxzZSwgd2UgY2FuIHJlbW92ZSBpdCB0byBzYXZlIGZ1dHVyZSBjb3N0cy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUubmV4dFNpYmxpbmcgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuZGF0YSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXNUb1JlbW92ZS5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgtLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICgoaSA9IG5vZGUuZGF0YS5pbmRleE9mKG1hcmtlciwgaSArIDEpKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbW1lbnQgbm9kZSBoYXMgYSBiaW5kaW5nIG1hcmtlciBpbnNpZGUsIG1ha2UgYW4gaW5hY3RpdmUgcGFydFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGJpbmRpbmcgd29uJ3Qgd29yaywgYnV0IHN1YnNlcXVlbnQgYmluZGluZ3Mgd2lsbFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyAoanVzdGluZmFnbmFuaSk6IGNvbnNpZGVyIHdoZXRoZXIgaXQncyBldmVuIHdvcnRoIGl0IHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIGJpbmRpbmdzIGluIGNvbW1lbnRzIHdvcmtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFydHMucHVzaCh7IHR5cGU6ICdub2RlJywgaW5kZXg6IC0xIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFydEluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVtb3ZlIHRleHQgYmluZGluZyBub2RlcyBhZnRlciB0aGUgd2FsayB0byBub3QgZGlzdHVyYiB0aGUgVHJlZVdhbGtlclxuICAgICAgICBmb3IgKGNvbnN0IG4gb2Ygbm9kZXNUb1JlbW92ZSkge1xuICAgICAgICAgICAgbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pO1xuICAgICAgICB9XG4gICAgfVxufVxuY29uc3QgZW5kc1dpdGggPSAoc3RyLCBzdWZmaXgpID0+IHtcbiAgICBjb25zdCBpbmRleCA9IHN0ci5sZW5ndGggLSBzdWZmaXgubGVuZ3RoO1xuICAgIHJldHVybiBpbmRleCA+PSAwICYmIHN0ci5zbGljZShpbmRleCkgPT09IHN1ZmZpeDtcbn07XG5leHBvcnQgY29uc3QgaXNUZW1wbGF0ZVBhcnRBY3RpdmUgPSAocGFydCkgPT4gcGFydC5pbmRleCAhPT0gLTE7XG4vLyBBbGxvd3MgYGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJycpYCB0byBiZSByZW5hbWVkIGZvciBhXG4vLyBzbWFsbCBtYW51YWwgc2l6ZS1zYXZpbmdzLlxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1hcmtlciA9ICgpID0+IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJycpO1xuLyoqXG4gKiBUaGlzIHJlZ2V4IGV4dHJhY3RzIHRoZSBhdHRyaWJ1dGUgbmFtZSBwcmVjZWRpbmcgYW4gYXR0cmlidXRlLXBvc2l0aW9uXG4gKiBleHByZXNzaW9uLiBJdCBkb2VzIHRoaXMgYnkgbWF0Y2hpbmcgdGhlIHN5bnRheCBhbGxvd2VkIGZvciBhdHRyaWJ1dGVzXG4gKiBhZ2FpbnN0IHRoZSBzdHJpbmcgbGl0ZXJhbCBkaXJlY3RseSBwcmVjZWRpbmcgdGhlIGV4cHJlc3Npb24sIGFzc3VtaW5nIHRoYXRcbiAqIHRoZSBleHByZXNzaW9uIGlzIGluIGFuIGF0dHJpYnV0ZS12YWx1ZSBwb3NpdGlvbi5cbiAqXG4gKiBTZWUgYXR0cmlidXRlcyBpbiB0aGUgSFRNTCBzcGVjOlxuICogaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L3N5bnRheC5odG1sI2VsZW1lbnRzLWF0dHJpYnV0ZXNcbiAqXG4gKiBcIiBcXHgwOVxceDBhXFx4MGNcXHgwZFwiIGFyZSBIVE1MIHNwYWNlIGNoYXJhY3RlcnM6XG4gKiBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvaW5mcmFzdHJ1Y3R1cmUuaHRtbCNzcGFjZS1jaGFyYWN0ZXJzXG4gKlxuICogXCJcXDAtXFx4MUZcXHg3Ri1cXHg5RlwiIGFyZSBVbmljb2RlIGNvbnRyb2wgY2hhcmFjdGVycywgd2hpY2ggaW5jbHVkZXMgZXZlcnlcbiAqIHNwYWNlIGNoYXJhY3RlciBleGNlcHQgXCIgXCIuXG4gKlxuICogU28gYW4gYXR0cmlidXRlIGlzOlxuICogICogVGhlIG5hbWU6IGFueSBjaGFyYWN0ZXIgZXhjZXB0IGEgY29udHJvbCBjaGFyYWN0ZXIsIHNwYWNlIGNoYXJhY3RlciwgKCcpLFxuICogICAgKFwiKSwgXCI+XCIsIFwiPVwiLCBvciBcIi9cIlxuICogICogRm9sbG93ZWQgYnkgemVybyBvciBtb3JlIHNwYWNlIGNoYXJhY3RlcnNcbiAqICAqIEZvbGxvd2VkIGJ5IFwiPVwiXG4gKiAgKiBGb2xsb3dlZCBieSB6ZXJvIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVyc1xuICogICogRm9sbG93ZWQgYnk6XG4gKiAgICAqIEFueSBjaGFyYWN0ZXIgZXhjZXB0IHNwYWNlLCAoJyksIChcIiksIFwiPFwiLCBcIj5cIiwgXCI9XCIsIChgKSwgb3JcbiAqICAgICogKFwiKSB0aGVuIGFueSBub24tKFwiKSwgb3JcbiAqICAgICogKCcpIHRoZW4gYW55IG5vbi0oJylcbiAqL1xuZXhwb3J0IGNvbnN0IGxhc3RBdHRyaWJ1dGVOYW1lUmVnZXggPSBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4vKFsgXFx4MDlcXHgwYVxceDBjXFx4MGRdKShbXlxcMC1cXHgxRlxceDdGLVxceDlGIFwiJz49L10rKShbIFxceDA5XFx4MGFcXHgwY1xceDBkXSo9WyBcXHgwOVxceDBhXFx4MGNcXHgwZF0qKD86W14gXFx4MDlcXHgwYVxceDBjXFx4MGRcIidgPD49XSp8XCJbXlwiXSp8J1teJ10qKSkkLztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRlbXBsYXRlLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogQG1vZHVsZSBzaGFkeS1yZW5kZXJcbiAqL1xuaW1wb3J0IHsgaXNUZW1wbGF0ZVBhcnRBY3RpdmUgfSBmcm9tICcuL3RlbXBsYXRlLmpzJztcbmNvbnN0IHdhbGtlck5vZGVGaWx0ZXIgPSAxMzMgLyogTm9kZUZpbHRlci5TSE9XX3tFTEVNRU5UfENPTU1FTlR8VEVYVH0gKi87XG4vKipcbiAqIFJlbW92ZXMgdGhlIGxpc3Qgb2Ygbm9kZXMgZnJvbSBhIFRlbXBsYXRlIHNhZmVseS4gSW4gYWRkaXRpb24gdG8gcmVtb3ZpbmdcbiAqIG5vZGVzIGZyb20gdGhlIFRlbXBsYXRlLCB0aGUgVGVtcGxhdGUgcGFydCBpbmRpY2VzIGFyZSB1cGRhdGVkIHRvIG1hdGNoXG4gKiB0aGUgbXV0YXRlZCBUZW1wbGF0ZSBET00uXG4gKlxuICogQXMgdGhlIHRlbXBsYXRlIGlzIHdhbGtlZCB0aGUgcmVtb3ZhbCBzdGF0ZSBpcyB0cmFja2VkIGFuZFxuICogcGFydCBpbmRpY2VzIGFyZSBhZGp1c3RlZCBhcyBuZWVkZWQuXG4gKlxuICogZGl2XG4gKiAgIGRpdiMxIChyZW1vdmUpIDwtLSBzdGFydCByZW1vdmluZyAocmVtb3Zpbmcgbm9kZSBpcyBkaXYjMSlcbiAqICAgICBkaXZcbiAqICAgICAgIGRpdiMyIChyZW1vdmUpICA8LS0gY29udGludWUgcmVtb3ZpbmcgKHJlbW92aW5nIG5vZGUgaXMgc3RpbGwgZGl2IzEpXG4gKiAgICAgICAgIGRpdlxuICogZGl2IDwtLSBzdG9wIHJlbW92aW5nIHNpbmNlIHByZXZpb3VzIHNpYmxpbmcgaXMgdGhlIHJlbW92aW5nIG5vZGUgKGRpdiMxLFxuICogcmVtb3ZlZCA0IG5vZGVzKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlTm9kZXNGcm9tVGVtcGxhdGUodGVtcGxhdGUsIG5vZGVzVG9SZW1vdmUpIHtcbiAgICBjb25zdCB7IGVsZW1lbnQ6IHsgY29udGVudCB9LCBwYXJ0cyB9ID0gdGVtcGxhdGU7XG4gICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihjb250ZW50LCB3YWxrZXJOb2RlRmlsdGVyLCBudWxsLCBmYWxzZSk7XG4gICAgbGV0IHBhcnRJbmRleCA9IG5leHRBY3RpdmVJbmRleEluVGVtcGxhdGVQYXJ0cyhwYXJ0cyk7XG4gICAgbGV0IHBhcnQgPSBwYXJ0c1twYXJ0SW5kZXhdO1xuICAgIGxldCBub2RlSW5kZXggPSAtMTtcbiAgICBsZXQgcmVtb3ZlQ291bnQgPSAwO1xuICAgIGNvbnN0IG5vZGVzVG9SZW1vdmVJblRlbXBsYXRlID0gW107XG4gICAgbGV0IGN1cnJlbnRSZW1vdmluZ05vZGUgPSBudWxsO1xuICAgIHdoaWxlICh3YWxrZXIubmV4dE5vZGUoKSkge1xuICAgICAgICBub2RlSW5kZXgrKztcbiAgICAgICAgY29uc3Qgbm9kZSA9IHdhbGtlci5jdXJyZW50Tm9kZTtcbiAgICAgICAgLy8gRW5kIHJlbW92YWwgaWYgc3RlcHBlZCBwYXN0IHRoZSByZW1vdmluZyBub2RlXG4gICAgICAgIGlmIChub2RlLnByZXZpb3VzU2libGluZyA9PT0gY3VycmVudFJlbW92aW5nTm9kZSkge1xuICAgICAgICAgICAgY3VycmVudFJlbW92aW5nTm9kZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQSBub2RlIHRvIHJlbW92ZSB3YXMgZm91bmQgaW4gdGhlIHRlbXBsYXRlXG4gICAgICAgIGlmIChub2Rlc1RvUmVtb3ZlLmhhcyhub2RlKSkge1xuICAgICAgICAgICAgbm9kZXNUb1JlbW92ZUluVGVtcGxhdGUucHVzaChub2RlKTtcbiAgICAgICAgICAgIC8vIFRyYWNrIG5vZGUgd2UncmUgcmVtb3ZpbmdcbiAgICAgICAgICAgIGlmIChjdXJyZW50UmVtb3ZpbmdOb2RlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFJlbW92aW5nTm9kZSA9IG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiByZW1vdmluZywgaW5jcmVtZW50IGNvdW50IGJ5IHdoaWNoIHRvIGFkanVzdCBzdWJzZXF1ZW50IHBhcnQgaW5kaWNlc1xuICAgICAgICBpZiAoY3VycmVudFJlbW92aW5nTm9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmVtb3ZlQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAocGFydCAhPT0gdW5kZWZpbmVkICYmIHBhcnQuaW5kZXggPT09IG5vZGVJbmRleCkge1xuICAgICAgICAgICAgLy8gSWYgcGFydCBpcyBpbiBhIHJlbW92ZWQgbm9kZSBkZWFjdGl2YXRlIGl0IGJ5IHNldHRpbmcgaW5kZXggdG8gLTEgb3JcbiAgICAgICAgICAgIC8vIGFkanVzdCB0aGUgaW5kZXggYXMgbmVlZGVkLlxuICAgICAgICAgICAgcGFydC5pbmRleCA9IGN1cnJlbnRSZW1vdmluZ05vZGUgIT09IG51bGwgPyAtMSA6IHBhcnQuaW5kZXggLSByZW1vdmVDb3VudDtcbiAgICAgICAgICAgIC8vIGdvIHRvIHRoZSBuZXh0IGFjdGl2ZSBwYXJ0LlxuICAgICAgICAgICAgcGFydEluZGV4ID0gbmV4dEFjdGl2ZUluZGV4SW5UZW1wbGF0ZVBhcnRzKHBhcnRzLCBwYXJ0SW5kZXgpO1xuICAgICAgICAgICAgcGFydCA9IHBhcnRzW3BhcnRJbmRleF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgbm9kZXNUb1JlbW92ZUluVGVtcGxhdGUuZm9yRWFjaCgobikgPT4gbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pKTtcbn1cbmNvbnN0IGNvdW50Tm9kZXMgPSAobm9kZSkgPT4ge1xuICAgIGxldCBjb3VudCA9IChub2RlLm5vZGVUeXBlID09PSAxMSAvKiBOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUgKi8pID8gMCA6IDE7XG4gICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihub2RlLCB3YWxrZXJOb2RlRmlsdGVyLCBudWxsLCBmYWxzZSk7XG4gICAgd2hpbGUgKHdhbGtlci5uZXh0Tm9kZSgpKSB7XG4gICAgICAgIGNvdW50Kys7XG4gICAgfVxuICAgIHJldHVybiBjb3VudDtcbn07XG5jb25zdCBuZXh0QWN0aXZlSW5kZXhJblRlbXBsYXRlUGFydHMgPSAocGFydHMsIHN0YXJ0SW5kZXggPSAtMSkgPT4ge1xuICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4ICsgMTsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1tpXTtcbiAgICAgICAgaWYgKGlzVGVtcGxhdGVQYXJ0QWN0aXZlKHBhcnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG59O1xuLyoqXG4gKiBJbnNlcnRzIHRoZSBnaXZlbiBub2RlIGludG8gdGhlIFRlbXBsYXRlLCBvcHRpb25hbGx5IGJlZm9yZSB0aGUgZ2l2ZW5cbiAqIHJlZk5vZGUuIEluIGFkZGl0aW9uIHRvIGluc2VydGluZyB0aGUgbm9kZSBpbnRvIHRoZSBUZW1wbGF0ZSwgdGhlIFRlbXBsYXRlXG4gKiBwYXJ0IGluZGljZXMgYXJlIHVwZGF0ZWQgdG8gbWF0Y2ggdGhlIG11dGF0ZWQgVGVtcGxhdGUgRE9NLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zZXJ0Tm9kZUludG9UZW1wbGF0ZSh0ZW1wbGF0ZSwgbm9kZSwgcmVmTm9kZSA9IG51bGwpIHtcbiAgICBjb25zdCB7IGVsZW1lbnQ6IHsgY29udGVudCB9LCBwYXJ0cyB9ID0gdGVtcGxhdGU7XG4gICAgLy8gSWYgdGhlcmUncyBubyByZWZOb2RlLCB0aGVuIHB1dCBub2RlIGF0IGVuZCBvZiB0ZW1wbGF0ZS5cbiAgICAvLyBObyBwYXJ0IGluZGljZXMgbmVlZCB0byBiZSBzaGlmdGVkIGluIHRoaXMgY2FzZS5cbiAgICBpZiAocmVmTm9kZSA9PT0gbnVsbCB8fCByZWZOb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKGNvbnRlbnQsIHdhbGtlck5vZGVGaWx0ZXIsIG51bGwsIGZhbHNlKTtcbiAgICBsZXQgcGFydEluZGV4ID0gbmV4dEFjdGl2ZUluZGV4SW5UZW1wbGF0ZVBhcnRzKHBhcnRzKTtcbiAgICBsZXQgaW5zZXJ0Q291bnQgPSAwO1xuICAgIGxldCB3YWxrZXJJbmRleCA9IC0xO1xuICAgIHdoaWxlICh3YWxrZXIubmV4dE5vZGUoKSkge1xuICAgICAgICB3YWxrZXJJbmRleCsrO1xuICAgICAgICBjb25zdCB3YWxrZXJOb2RlID0gd2Fsa2VyLmN1cnJlbnROb2RlO1xuICAgICAgICBpZiAod2Fsa2VyTm9kZSA9PT0gcmVmTm9kZSkge1xuICAgICAgICAgICAgaW5zZXJ0Q291bnQgPSBjb3VudE5vZGVzKG5vZGUpO1xuICAgICAgICAgICAgcmVmTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCByZWZOb2RlKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAocGFydEluZGV4ICE9PSAtMSAmJiBwYXJ0c1twYXJ0SW5kZXhdLmluZGV4ID09PSB3YWxrZXJJbmRleCkge1xuICAgICAgICAgICAgLy8gSWYgd2UndmUgaW5zZXJ0ZWQgdGhlIG5vZGUsIHNpbXBseSBhZGp1c3QgYWxsIHN1YnNlcXVlbnQgcGFydHNcbiAgICAgICAgICAgIGlmIChpbnNlcnRDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAocGFydEluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJ0c1twYXJ0SW5kZXhdLmluZGV4ICs9IGluc2VydENvdW50O1xuICAgICAgICAgICAgICAgICAgICBwYXJ0SW5kZXggPSBuZXh0QWN0aXZlSW5kZXhJblRlbXBsYXRlUGFydHMocGFydHMsIHBhcnRJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnRJbmRleCA9IG5leHRBY3RpdmVJbmRleEluVGVtcGxhdGVQYXJ0cyhwYXJ0cywgcGFydEluZGV4KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vZGlmeS10ZW1wbGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5jb25zdCBkaXJlY3RpdmVzID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuICogQnJhbmRzIGEgZnVuY3Rpb24gYXMgYSBkaXJlY3RpdmUgZmFjdG9yeSBmdW5jdGlvbiBzbyB0aGF0IGxpdC1odG1sIHdpbGwgY2FsbFxuICogdGhlIGZ1bmN0aW9uIGR1cmluZyB0ZW1wbGF0ZSByZW5kZXJpbmcsIHJhdGhlciB0aGFuIHBhc3NpbmcgYXMgYSB2YWx1ZS5cbiAqXG4gKiBBIF9kaXJlY3RpdmVfIGlzIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIFBhcnQgYXMgYW4gYXJndW1lbnQuIEl0IGhhcyB0aGVcbiAqIHNpZ25hdHVyZTogYChwYXJ0OiBQYXJ0KSA9PiB2b2lkYC5cbiAqXG4gKiBBIGRpcmVjdGl2ZSBfZmFjdG9yeV8gaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGFyZ3VtZW50cyBmb3IgZGF0YSBhbmRcbiAqIGNvbmZpZ3VyYXRpb24gYW5kIHJldHVybnMgYSBkaXJlY3RpdmUuIFVzZXJzIG9mIGRpcmVjdGl2ZSB1c3VhbGx5IHJlZmVyIHRvXG4gKiB0aGUgZGlyZWN0aXZlIGZhY3RvcnkgYXMgdGhlIGRpcmVjdGl2ZS4gRm9yIGV4YW1wbGUsIFwiVGhlIHJlcGVhdCBkaXJlY3RpdmVcIi5cbiAqXG4gKiBVc3VhbGx5IGEgdGVtcGxhdGUgYXV0aG9yIHdpbGwgaW52b2tlIGEgZGlyZWN0aXZlIGZhY3RvcnkgaW4gdGhlaXIgdGVtcGxhdGVcbiAqIHdpdGggcmVsZXZhbnQgYXJndW1lbnRzLCB3aGljaCB3aWxsIHRoZW4gcmV0dXJuIGEgZGlyZWN0aXZlIGZ1bmN0aW9uLlxuICpcbiAqIEhlcmUncyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBgcmVwZWF0KClgIGRpcmVjdGl2ZSBmYWN0b3J5IHRoYXQgdGFrZXMgYW5cbiAqIGFycmF5IGFuZCBhIGZ1bmN0aW9uIHRvIHJlbmRlciBhbiBpdGVtOlxuICpcbiAqIGBgYGpzXG4gKiBodG1sYDx1bD48JHtyZXBlYXQoaXRlbXMsIChpdGVtKSA9PiBodG1sYDxsaT4ke2l0ZW19PC9saT5gKX08L3VsPmBcbiAqIGBgYFxuICpcbiAqIFdoZW4gYHJlcGVhdGAgaXMgaW52b2tlZCwgaXQgcmV0dXJucyBhIGRpcmVjdGl2ZSBmdW5jdGlvbiB0aGF0IGNsb3NlcyBvdmVyXG4gKiBgaXRlbXNgIGFuZCB0aGUgdGVtcGxhdGUgZnVuY3Rpb24uIFdoZW4gdGhlIG91dGVyIHRlbXBsYXRlIGlzIHJlbmRlcmVkLCB0aGVcbiAqIHJldHVybiBkaXJlY3RpdmUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggdGhlIFBhcnQgZm9yIHRoZSBleHByZXNzaW9uLlxuICogYHJlcGVhdGAgdGhlbiBwZXJmb3JtcyBpdCdzIGN1c3RvbSBsb2dpYyB0byByZW5kZXIgbXVsdGlwbGUgaXRlbXMuXG4gKlxuICogQHBhcmFtIGYgVGhlIGRpcmVjdGl2ZSBmYWN0b3J5IGZ1bmN0aW9uLiBNdXN0IGJlIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFcbiAqIGZ1bmN0aW9uIG9mIHRoZSBzaWduYXR1cmUgYChwYXJ0OiBQYXJ0KSA9PiB2b2lkYC4gVGhlIHJldHVybmVkIGZ1bmN0aW9uIHdpbGxcbiAqIGJlIGNhbGxlZCB3aXRoIHRoZSBwYXJ0IG9iamVjdC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGltcG9ydCB7ZGlyZWN0aXZlLCBodG1sfSBmcm9tICdsaXQtaHRtbCc7XG4gKlxuICogY29uc3QgaW1tdXRhYmxlID0gZGlyZWN0aXZlKCh2KSA9PiAocGFydCkgPT4ge1xuICogICBpZiAocGFydC52YWx1ZSAhPT0gdikge1xuICogICAgIHBhcnQuc2V0VmFsdWUodilcbiAqICAgfVxuICogfSk7XG4gKi9cbmV4cG9ydCBjb25zdCBkaXJlY3RpdmUgPSAoZikgPT4gKCguLi5hcmdzKSA9PiB7XG4gICAgY29uc3QgZCA9IGYoLi4uYXJncyk7XG4gICAgZGlyZWN0aXZlcy5zZXQoZCwgdHJ1ZSk7XG4gICAgcmV0dXJuIGQ7XG59KTtcbmV4cG9ydCBjb25zdCBpc0RpcmVjdGl2ZSA9IChvKSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBvID09PSAnZnVuY3Rpb24nICYmIGRpcmVjdGl2ZXMuaGFzKG8pO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpcmVjdGl2ZS5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIEEgc2VudGluZWwgdmFsdWUgdGhhdCBzaWduYWxzIHRoYXQgYSB2YWx1ZSB3YXMgaGFuZGxlZCBieSBhIGRpcmVjdGl2ZSBhbmRcbiAqIHNob3VsZCBub3QgYmUgd3JpdHRlbiB0byB0aGUgRE9NLlxuICovXG5leHBvcnQgY29uc3Qgbm9DaGFuZ2UgPSB7fTtcbi8qKlxuICogQSBzZW50aW5lbCB2YWx1ZSB0aGF0IHNpZ25hbHMgYSBOb2RlUGFydCB0byBmdWxseSBjbGVhciBpdHMgY29udGVudC5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vdGhpbmcgPSB7fTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnQuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBAbW9kdWxlIGxpdC1odG1sXG4gKi9cbmltcG9ydCB7IGlzQ0VQb2x5ZmlsbCB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGlzVGVtcGxhdGVQYXJ0QWN0aXZlIH0gZnJvbSAnLi90ZW1wbGF0ZS5qcyc7XG4vKipcbiAqIEFuIGluc3RhbmNlIG9mIGEgYFRlbXBsYXRlYCB0aGF0IGNhbiBiZSBhdHRhY2hlZCB0byB0aGUgRE9NIGFuZCB1cGRhdGVkXG4gKiB3aXRoIG5ldyB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZUluc3RhbmNlIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZSwgcHJvY2Vzc29yLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX19wYXJ0cyA9IFtdO1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIHRoaXMucHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cbiAgICB1cGRhdGUodmFsdWVzKSB7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHRoaXMuX19wYXJ0cykge1xuICAgICAgICAgICAgaWYgKHBhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBhcnQuc2V0VmFsdWUodmFsdWVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgdGhpcy5fX3BhcnRzKSB7XG4gICAgICAgICAgICBpZiAocGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcGFydC5jb21taXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfY2xvbmUoKSB7XG4gICAgICAgIC8vIFRoZXJlIGFyZSBhIG51bWJlciBvZiBzdGVwcyBpbiB0aGUgbGlmZWN5Y2xlIG9mIGEgdGVtcGxhdGUgaW5zdGFuY2Unc1xuICAgICAgICAvLyBET00gZnJhZ21lbnQ6XG4gICAgICAgIC8vICAxLiBDbG9uZSAtIGNyZWF0ZSB0aGUgaW5zdGFuY2UgZnJhZ21lbnRcbiAgICAgICAgLy8gIDIuIEFkb3B0IC0gYWRvcHQgaW50byB0aGUgbWFpbiBkb2N1bWVudFxuICAgICAgICAvLyAgMy4gUHJvY2VzcyAtIGZpbmQgcGFydCBtYXJrZXJzIGFuZCBjcmVhdGUgcGFydHNcbiAgICAgICAgLy8gIDQuIFVwZ3JhZGUgLSB1cGdyYWRlIGN1c3RvbSBlbGVtZW50c1xuICAgICAgICAvLyAgNS4gVXBkYXRlIC0gc2V0IG5vZGUsIGF0dHJpYnV0ZSwgcHJvcGVydHksIGV0Yy4sIHZhbHVlc1xuICAgICAgICAvLyAgNi4gQ29ubmVjdCAtIGNvbm5lY3QgdG8gdGhlIGRvY3VtZW50LiBPcHRpb25hbCBhbmQgb3V0c2lkZSBvZiB0aGlzXG4gICAgICAgIC8vICAgICBtZXRob2QuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFdlIGhhdmUgYSBmZXcgY29uc3RyYWludHMgb24gdGhlIG9yZGVyaW5nIG9mIHRoZXNlIHN0ZXBzOlxuICAgICAgICAvLyAgKiBXZSBuZWVkIHRvIHVwZ3JhZGUgYmVmb3JlIHVwZGF0aW5nLCBzbyB0aGF0IHByb3BlcnR5IHZhbHVlcyB3aWxsIHBhc3NcbiAgICAgICAgLy8gICAgdGhyb3VnaCBhbnkgcHJvcGVydHkgc2V0dGVycy5cbiAgICAgICAgLy8gICogV2Ugd291bGQgbGlrZSB0byBwcm9jZXNzIGJlZm9yZSB1cGdyYWRpbmcgc28gdGhhdCB3ZSdyZSBzdXJlIHRoYXQgdGhlXG4gICAgICAgIC8vICAgIGNsb25lZCBmcmFnbWVudCBpcyBpbmVydCBhbmQgbm90IGRpc3R1cmJlZCBieSBzZWxmLW1vZGlmeWluZyBET00uXG4gICAgICAgIC8vICAqIFdlIHdhbnQgY3VzdG9tIGVsZW1lbnRzIHRvIHVwZ3JhZGUgZXZlbiBpbiBkaXNjb25uZWN0ZWQgZnJhZ21lbnRzLlxuICAgICAgICAvL1xuICAgICAgICAvLyBHaXZlbiB0aGVzZSBjb25zdHJhaW50cywgd2l0aCBmdWxsIGN1c3RvbSBlbGVtZW50cyBzdXBwb3J0IHdlIHdvdWxkXG4gICAgICAgIC8vIHByZWZlciB0aGUgb3JkZXI6IENsb25lLCBQcm9jZXNzLCBBZG9wdCwgVXBncmFkZSwgVXBkYXRlLCBDb25uZWN0XG4gICAgICAgIC8vXG4gICAgICAgIC8vIEJ1dCBTYWZhcmkgZG9lcyBub3QgaW1wbGVtZW50IEN1c3RvbUVsZW1lbnRSZWdpc3RyeSN1cGdyYWRlLCBzbyB3ZVxuICAgICAgICAvLyBjYW4gbm90IGltcGxlbWVudCB0aGF0IG9yZGVyIGFuZCBzdGlsbCBoYXZlIHVwZ3JhZGUtYmVmb3JlLXVwZGF0ZSBhbmRcbiAgICAgICAgLy8gdXBncmFkZSBkaXNjb25uZWN0ZWQgZnJhZ21lbnRzLiBTbyB3ZSBpbnN0ZWFkIHNhY3JpZmljZSB0aGVcbiAgICAgICAgLy8gcHJvY2Vzcy1iZWZvcmUtdXBncmFkZSBjb25zdHJhaW50LCBzaW5jZSBpbiBDdXN0b20gRWxlbWVudHMgdjEgZWxlbWVudHNcbiAgICAgICAgLy8gbXVzdCBub3QgbW9kaWZ5IHRoZWlyIGxpZ2h0IERPTSBpbiB0aGUgY29uc3RydWN0b3IuIFdlIHN0aWxsIGhhdmUgaXNzdWVzXG4gICAgICAgIC8vIHdoZW4gY28tZXhpc3Rpbmcgd2l0aCBDRXYwIGVsZW1lbnRzIGxpa2UgUG9seW1lciAxLCBhbmQgd2l0aCBwb2x5ZmlsbHNcbiAgICAgICAgLy8gdGhhdCBkb24ndCBzdHJpY3RseSBhZGhlcmUgdG8gdGhlIG5vLW1vZGlmaWNhdGlvbiBydWxlIGJlY2F1c2Ugc2hhZG93XG4gICAgICAgIC8vIERPTSwgd2hpY2ggbWF5IGJlIGNyZWF0ZWQgaW4gdGhlIGNvbnN0cnVjdG9yLCBpcyBlbXVsYXRlZCBieSBiZWluZyBwbGFjZWRcbiAgICAgICAgLy8gaW4gdGhlIGxpZ2h0IERPTS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gVGhlIHJlc3VsdGluZyBvcmRlciBpcyBvbiBuYXRpdmUgaXM6IENsb25lLCBBZG9wdCwgVXBncmFkZSwgUHJvY2VzcyxcbiAgICAgICAgLy8gVXBkYXRlLCBDb25uZWN0LiBkb2N1bWVudC5pbXBvcnROb2RlKCkgcGVyZm9ybXMgQ2xvbmUsIEFkb3B0LCBhbmQgVXBncmFkZVxuICAgICAgICAvLyBpbiBvbmUgc3RlcC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gVGhlIEN1c3RvbSBFbGVtZW50cyB2MSBwb2x5ZmlsbCBzdXBwb3J0cyB1cGdyYWRlKCksIHNvIHRoZSBvcmRlciB3aGVuXG4gICAgICAgIC8vIHBvbHlmaWxsZWQgaXMgdGhlIG1vcmUgaWRlYWw6IENsb25lLCBQcm9jZXNzLCBBZG9wdCwgVXBncmFkZSwgVXBkYXRlLFxuICAgICAgICAvLyBDb25uZWN0LlxuICAgICAgICBjb25zdCBmcmFnbWVudCA9IGlzQ0VQb2x5ZmlsbCA/XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlLmVsZW1lbnQuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkgOlxuICAgICAgICAgICAgZG9jdW1lbnQuaW1wb3J0Tm9kZSh0aGlzLnRlbXBsYXRlLmVsZW1lbnQuY29udGVudCwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgICAgIGNvbnN0IHBhcnRzID0gdGhpcy50ZW1wbGF0ZS5wYXJ0cztcbiAgICAgICAgLy8gRWRnZSBuZWVkcyBhbGwgNCBwYXJhbWV0ZXJzIHByZXNlbnQ7IElFMTEgbmVlZHMgM3JkIHBhcmFtZXRlciB0byBiZSBudWxsXG4gICAgICAgIGNvbnN0IHdhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIoZnJhZ21lbnQsIDEzMyAvKiBOb2RlRmlsdGVyLlNIT1dfe0VMRU1FTlR8Q09NTUVOVHxURVhUfSAqLywgbnVsbCwgZmFsc2UpO1xuICAgICAgICBsZXQgcGFydEluZGV4ID0gMDtcbiAgICAgICAgbGV0IG5vZGVJbmRleCA9IDA7XG4gICAgICAgIGxldCBwYXJ0O1xuICAgICAgICBsZXQgbm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpO1xuICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBub2RlcyBhbmQgcGFydHMgb2YgYSB0ZW1wbGF0ZVxuICAgICAgICB3aGlsZSAocGFydEluZGV4IDwgcGFydHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBwYXJ0ID0gcGFydHNbcGFydEluZGV4XTtcbiAgICAgICAgICAgIGlmICghaXNUZW1wbGF0ZVBhcnRBY3RpdmUocGFydCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fcGFydHMucHVzaCh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIHBhcnRJbmRleCsrO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUHJvZ3Jlc3MgdGhlIHRyZWUgd2Fsa2VyIHVudGlsIHdlIGZpbmQgb3VyIG5leHQgcGFydCdzIG5vZGUuXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgbXVsdGlwbGUgcGFydHMgbWF5IHNoYXJlIHRoZSBzYW1lIG5vZGUgKGF0dHJpYnV0ZSBwYXJ0c1xuICAgICAgICAgICAgLy8gb24gYSBzaW5nbGUgZWxlbWVudCksIHNvIHRoaXMgbG9vcCBtYXkgbm90IHJ1biBhdCBhbGwuXG4gICAgICAgICAgICB3aGlsZSAobm9kZUluZGV4IDwgcGFydC5pbmRleCkge1xuICAgICAgICAgICAgICAgIG5vZGVJbmRleCsrO1xuICAgICAgICAgICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09PSAnVEVNUExBVEUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IG5vZGUuY29udGVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChub2RlID0gd2Fsa2VyLm5leHROb2RlKCkpID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlJ3ZlIGV4aGF1c3RlZCB0aGUgY29udGVudCBpbnNpZGUgYSBuZXN0ZWQgdGVtcGxhdGUgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAgICAgLy8gQmVjYXVzZSB3ZSBzdGlsbCBoYXZlIHBhcnRzICh0aGUgb3V0ZXIgZm9yLWxvb3ApLCB3ZSBrbm93OlxuICAgICAgICAgICAgICAgICAgICAvLyAtIFRoZXJlIGlzIGEgdGVtcGxhdGUgaW4gdGhlIHN0YWNrXG4gICAgICAgICAgICAgICAgICAgIC8vIC0gVGhlIHdhbGtlciB3aWxsIGZpbmQgYSBuZXh0Tm9kZSBvdXRzaWRlIHRoZSB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdlJ3ZlIGFycml2ZWQgYXQgb3VyIHBhcnQncyBub2RlLlxuICAgICAgICAgICAgaWYgKHBhcnQudHlwZSA9PT0gJ25vZGUnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFydCA9IHRoaXMucHJvY2Vzc29yLmhhbmRsZVRleHRFeHByZXNzaW9uKHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcGFydC5pbnNlcnRBZnRlck5vZGUobm9kZS5wcmV2aW91c1NpYmxpbmcpO1xuICAgICAgICAgICAgICAgIHRoaXMuX19wYXJ0cy5wdXNoKHBhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3BhcnRzLnB1c2goLi4udGhpcy5wcm9jZXNzb3IuaGFuZGxlQXR0cmlidXRlRXhwcmVzc2lvbnMobm9kZSwgcGFydC5uYW1lLCBwYXJ0LnN0cmluZ3MsIHRoaXMub3B0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFydEluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ0VQb2x5ZmlsbCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRvcHROb2RlKGZyYWdtZW50KTtcbiAgICAgICAgICAgIGN1c3RvbUVsZW1lbnRzLnVwZ3JhZGUoZnJhZ21lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmcmFnbWVudDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZW1wbGF0ZS1pbnN0YW5jZS5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIEBtb2R1bGUgbGl0LWh0bWxcbiAqL1xuaW1wb3J0IHsgcmVwYXJlbnROb2RlcyB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGJvdW5kQXR0cmlidXRlU3VmZml4LCBsYXN0QXR0cmlidXRlTmFtZVJlZ2V4LCBtYXJrZXIsIG5vZGVNYXJrZXIgfSBmcm9tICcuL3RlbXBsYXRlLmpzJztcbmNvbnN0IGNvbW1lbnRNYXJrZXIgPSBgICR7bWFya2VyfSBgO1xuLyoqXG4gKiBUaGUgcmV0dXJuIHR5cGUgb2YgYGh0bWxgLCB3aGljaCBob2xkcyBhIFRlbXBsYXRlIGFuZCB0aGUgdmFsdWVzIGZyb21cbiAqIGludGVycG9sYXRlZCBleHByZXNzaW9ucy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRlbXBsYXRlUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3RvcihzdHJpbmdzLCB2YWx1ZXMsIHR5cGUsIHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLnN0cmluZ3MgPSBzdHJpbmdzO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlcztcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5wcm9jZXNzb3IgPSBwcm9jZXNzb3I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgb2YgSFRNTCB1c2VkIHRvIGNyZWF0ZSBhIGA8dGVtcGxhdGU+YCBlbGVtZW50LlxuICAgICAqL1xuICAgIGdldEhUTUwoKSB7XG4gICAgICAgIGNvbnN0IGwgPSB0aGlzLnN0cmluZ3MubGVuZ3RoIC0gMTtcbiAgICAgICAgbGV0IGh0bWwgPSAnJztcbiAgICAgICAgbGV0IGlzQ29tbWVudEJpbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLnN0cmluZ3NbaV07XG4gICAgICAgICAgICAvLyBGb3IgZWFjaCBiaW5kaW5nIHdlIHdhbnQgdG8gZGV0ZXJtaW5lIHRoZSBraW5kIG9mIG1hcmtlciB0byBpbnNlcnRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIHRlbXBsYXRlIHNvdXJjZSBiZWZvcmUgaXQncyBwYXJzZWQgYnkgdGhlIGJyb3dzZXIncyBIVE1MXG4gICAgICAgICAgICAvLyBwYXJzZXIuIFRoZSBtYXJrZXIgdHlwZSBpcyBiYXNlZCBvbiB3aGV0aGVyIHRoZSBleHByZXNzaW9uIGlzIGluIGFuXG4gICAgICAgICAgICAvLyBhdHRyaWJ1dGUsIHRleHQsIG9yIGNvbW1lbnQgcG9zaXRpb24uXG4gICAgICAgICAgICAvLyAgICogRm9yIG5vZGUtcG9zaXRpb24gYmluZGluZ3Mgd2UgaW5zZXJ0IGEgY29tbWVudCB3aXRoIHRoZSBtYXJrZXJcbiAgICAgICAgICAgIC8vICAgICBzZW50aW5lbCBhcyBpdHMgdGV4dCBjb250ZW50LCBsaWtlIDwhLS17e2xpdC1ndWlkfX0tLT4uXG4gICAgICAgICAgICAvLyAgICogRm9yIGF0dHJpYnV0ZSBiaW5kaW5ncyB3ZSBpbnNlcnQganVzdCB0aGUgbWFya2VyIHNlbnRpbmVsIGZvciB0aGVcbiAgICAgICAgICAgIC8vICAgICBmaXJzdCBiaW5kaW5nLCBzbyB0aGF0IHdlIHN1cHBvcnQgdW5xdW90ZWQgYXR0cmlidXRlIGJpbmRpbmdzLlxuICAgICAgICAgICAgLy8gICAgIFN1YnNlcXVlbnQgYmluZGluZ3MgY2FuIHVzZSBhIGNvbW1lbnQgbWFya2VyIGJlY2F1c2UgbXVsdGktYmluZGluZ1xuICAgICAgICAgICAgLy8gICAgIGF0dHJpYnV0ZXMgbXVzdCBiZSBxdW90ZWQuXG4gICAgICAgICAgICAvLyAgICogRm9yIGNvbW1lbnQgYmluZGluZ3Mgd2UgaW5zZXJ0IGp1c3QgdGhlIG1hcmtlciBzZW50aW5lbCBzbyB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gICAgIGNsb3NlIHRoZSBjb21tZW50LlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgY29kZSBzY2FucyB0aGUgdGVtcGxhdGUgc291cmNlLCBidXQgaXMgKm5vdCogYW4gSFRNTFxuICAgICAgICAgICAgLy8gcGFyc2VyLiBXZSBkb24ndCBuZWVkIHRvIHRyYWNrIHRoZSB0cmVlIHN0cnVjdHVyZSBvZiB0aGUgSFRNTCwgb25seVxuICAgICAgICAgICAgLy8gd2hldGhlciBhIGJpbmRpbmcgaXMgaW5zaWRlIGEgY29tbWVudCwgYW5kIGlmIG5vdCwgaWYgaXQgYXBwZWFycyB0byBiZVxuICAgICAgICAgICAgLy8gdGhlIGZpcnN0IGJpbmRpbmcgaW4gYW4gYXR0cmlidXRlLlxuICAgICAgICAgICAgY29uc3QgY29tbWVudE9wZW4gPSBzLmxhc3RJbmRleE9mKCc8IS0tJyk7XG4gICAgICAgICAgICAvLyBXZSdyZSBpbiBjb21tZW50IHBvc2l0aW9uIGlmIHdlIGhhdmUgYSBjb21tZW50IG9wZW4gd2l0aCBubyBmb2xsb3dpbmdcbiAgICAgICAgICAgIC8vIGNvbW1lbnQgY2xvc2UuIEJlY2F1c2UgPC0tIGNhbiBhcHBlYXIgaW4gYW4gYXR0cmlidXRlIHZhbHVlIHRoZXJlIGNhblxuICAgICAgICAgICAgLy8gYmUgZmFsc2UgcG9zaXRpdmVzLlxuICAgICAgICAgICAgaXNDb21tZW50QmluZGluZyA9IChjb21tZW50T3BlbiA+IC0xIHx8IGlzQ29tbWVudEJpbmRpbmcpICYmXG4gICAgICAgICAgICAgICAgcy5pbmRleE9mKCctLT4nLCBjb21tZW50T3BlbiArIDEpID09PSAtMTtcbiAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIGFuIGF0dHJpYnV0ZS1saWtlIHNlcXVlbmNlIHByZWNlZGluZyB0aGVcbiAgICAgICAgICAgIC8vIGV4cHJlc3Npb24uIFRoaXMgY2FuIG1hdGNoIFwibmFtZT12YWx1ZVwiIGxpa2Ugc3RydWN0dXJlcyBpbiB0ZXh0LFxuICAgICAgICAgICAgLy8gY29tbWVudHMsIGFuZCBhdHRyaWJ1dGUgdmFsdWVzLCBzbyB0aGVyZSBjYW4gYmUgZmFsc2UtcG9zaXRpdmVzLlxuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlTWF0Y2ggPSBsYXN0QXR0cmlidXRlTmFtZVJlZ2V4LmV4ZWMocyk7XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlTWF0Y2ggPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSdyZSBvbmx5IGluIHRoaXMgYnJhbmNoIGlmIHdlIGRvbid0IGhhdmUgYSBhdHRyaWJ1dGUtbGlrZVxuICAgICAgICAgICAgICAgIC8vIHByZWNlZGluZyBzZXF1ZW5jZS4gRm9yIGNvbW1lbnRzLCB0aGlzIGd1YXJkcyBhZ2FpbnN0IHVudXN1YWxcbiAgICAgICAgICAgICAgICAvLyBhdHRyaWJ1dGUgdmFsdWVzIGxpa2UgPGRpdiBmb289XCI8IS0tJHsnYmFyJ31cIj4uIENhc2VzIGxpa2VcbiAgICAgICAgICAgICAgICAvLyA8IS0tIGZvbz0keydiYXInfS0tPiBhcmUgaGFuZGxlZCBjb3JyZWN0bHkgaW4gdGhlIGF0dHJpYnV0ZSBicmFuY2hcbiAgICAgICAgICAgICAgICAvLyBiZWxvdy5cbiAgICAgICAgICAgICAgICBodG1sICs9IHMgKyAoaXNDb21tZW50QmluZGluZyA/IGNvbW1lbnRNYXJrZXIgOiBub2RlTWFya2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEZvciBhdHRyaWJ1dGVzIHdlIHVzZSBqdXN0IGEgbWFya2VyIHNlbnRpbmVsLCBhbmQgYWxzbyBhcHBlbmQgYVxuICAgICAgICAgICAgICAgIC8vICRsaXQkIHN1ZmZpeCB0byB0aGUgbmFtZSB0byBvcHQtb3V0IG9mIGF0dHJpYnV0ZS1zcGVjaWZpYyBwYXJzaW5nXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBJRSBhbmQgRWRnZSBkbyBmb3Igc3R5bGUgYW5kIGNlcnRhaW4gU1ZHIGF0dHJpYnV0ZXMuXG4gICAgICAgICAgICAgICAgaHRtbCArPSBzLnN1YnN0cigwLCBhdHRyaWJ1dGVNYXRjaC5pbmRleCkgKyBhdHRyaWJ1dGVNYXRjaFsxXSArXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU1hdGNoWzJdICsgYm91bmRBdHRyaWJ1dGVTdWZmaXggKyBhdHRyaWJ1dGVNYXRjaFszXSArXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBodG1sICs9IHRoaXMuc3RyaW5nc1tsXTtcbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfVxuICAgIGdldFRlbXBsYXRlRWxlbWVudCgpIHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSB0aGlzLmdldEhUTUwoKTtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlO1xuICAgIH1cbn1cbi8qKlxuICogQSBUZW1wbGF0ZVJlc3VsdCBmb3IgU1ZHIGZyYWdtZW50cy5cbiAqXG4gKiBUaGlzIGNsYXNzIHdyYXBzIEhUTUwgaW4gYW4gYDxzdmc+YCB0YWcgaW4gb3JkZXIgdG8gcGFyc2UgaXRzIGNvbnRlbnRzIGluIHRoZVxuICogU1ZHIG5hbWVzcGFjZSwgdGhlbiBtb2RpZmllcyB0aGUgdGVtcGxhdGUgdG8gcmVtb3ZlIHRoZSBgPHN2Zz5gIHRhZyBzbyB0aGF0XG4gKiBjbG9uZXMgb25seSBjb250YWluZXIgdGhlIG9yaWdpbmFsIGZyYWdtZW50LlxuICovXG5leHBvcnQgY2xhc3MgU1ZHVGVtcGxhdGVSZXN1bHQgZXh0ZW5kcyBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgZ2V0SFRNTCgpIHtcbiAgICAgICAgcmV0dXJuIGA8c3ZnPiR7c3VwZXIuZ2V0SFRNTCgpfTwvc3ZnPmA7XG4gICAgfVxuICAgIGdldFRlbXBsYXRlRWxlbWVudCgpIHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBzdXBlci5nZXRUZW1wbGF0ZUVsZW1lbnQoKTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IHRlbXBsYXRlLmNvbnRlbnQ7XG4gICAgICAgIGNvbnN0IHN2Z0VsZW1lbnQgPSBjb250ZW50LmZpcnN0Q2hpbGQ7XG4gICAgICAgIGNvbnRlbnQucmVtb3ZlQ2hpbGQoc3ZnRWxlbWVudCk7XG4gICAgICAgIHJlcGFyZW50Tm9kZXMoY29udGVudCwgc3ZnRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRlbXBsYXRlLXJlc3VsdC5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIEBtb2R1bGUgbGl0LWh0bWxcbiAqL1xuaW1wb3J0IHsgaXNEaXJlY3RpdmUgfSBmcm9tICcuL2RpcmVjdGl2ZS5qcyc7XG5pbXBvcnQgeyByZW1vdmVOb2RlcyB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IG5vQ2hhbmdlLCBub3RoaW5nIH0gZnJvbSAnLi9wYXJ0LmpzJztcbmltcG9ydCB7IFRlbXBsYXRlSW5zdGFuY2UgfSBmcm9tICcuL3RlbXBsYXRlLWluc3RhbmNlLmpzJztcbmltcG9ydCB7IFRlbXBsYXRlUmVzdWx0IH0gZnJvbSAnLi90ZW1wbGF0ZS1yZXN1bHQuanMnO1xuaW1wb3J0IHsgY3JlYXRlTWFya2VyIH0gZnJvbSAnLi90ZW1wbGF0ZS5qcyc7XG5leHBvcnQgY29uc3QgaXNQcmltaXRpdmUgPSAodmFsdWUpID0+IHtcbiAgICByZXR1cm4gKHZhbHVlID09PSBudWxsIHx8XG4gICAgICAgICEodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpKTtcbn07XG5leHBvcnQgY29uc3QgaXNJdGVyYWJsZSA9ICh2YWx1ZSkgPT4ge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSB8fFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAhISh2YWx1ZSAmJiB2YWx1ZVtTeW1ib2wuaXRlcmF0b3JdKTtcbn07XG4vKipcbiAqIFdyaXRlcyBhdHRyaWJ1dGUgdmFsdWVzIHRvIHRoZSBET00gZm9yIGEgZ3JvdXAgb2YgQXR0cmlidXRlUGFydHMgYm91bmQgdG8gYVxuICogc2luZ2xlIGF0dHJpYnV0ZS4gVGhlIHZhbHVlIGlzIG9ubHkgc2V0IG9uY2UgZXZlbiBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgcGFydHNcbiAqIGZvciBhbiBhdHRyaWJ1dGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdHRyaWJ1dGVDb21taXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MpIHtcbiAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuc3RyaW5ncyA9IHN0cmluZ3M7XG4gICAgICAgIHRoaXMucGFydHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmdzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5wYXJ0c1tpXSA9IHRoaXMuX2NyZWF0ZVBhcnQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2luZ2xlIHBhcnQuIE92ZXJyaWRlIHRoaXMgdG8gY3JlYXRlIGEgZGlmZmVybnQgdHlwZSBvZiBwYXJ0LlxuICAgICAqL1xuICAgIF9jcmVhdGVQYXJ0KCkge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZVBhcnQodGhpcyk7XG4gICAgfVxuICAgIF9nZXRWYWx1ZSgpIHtcbiAgICAgICAgY29uc3Qgc3RyaW5ncyA9IHRoaXMuc3RyaW5ncztcbiAgICAgICAgY29uc3QgbCA9IHN0cmluZ3MubGVuZ3RoIC0gMTtcbiAgICAgICAgbGV0IHRleHQgPSAnJztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHRleHQgKz0gc3RyaW5nc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnQgPSB0aGlzLnBhcnRzW2ldO1xuICAgICAgICAgICAgaWYgKHBhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSBwYXJ0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChpc1ByaW1pdGl2ZSh2KSB8fCAhaXNJdGVyYWJsZSh2KSkge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IHR5cGVvZiB2ID09PSAnc3RyaW5nJyA/IHYgOiBTdHJpbmcodik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygdikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSB0eXBlb2YgdCA9PT0gJ3N0cmluZycgPyB0IDogU3RyaW5nKHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRleHQgKz0gc3RyaW5nc1tsXTtcbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlydHkpIHtcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUodGhpcy5uYW1lLCB0aGlzLl9nZXRWYWx1ZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQSBQYXJ0IHRoYXQgY29udHJvbHMgYWxsIG9yIHBhcnQgb2YgYW4gYXR0cmlidXRlIHZhbHVlLlxuICovXG5leHBvcnQgY2xhc3MgQXR0cmlidXRlUGFydCB7XG4gICAgY29uc3RydWN0b3IoY29tbWl0dGVyKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY29tbWl0dGVyID0gY29tbWl0dGVyO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgIT09IG5vQ2hhbmdlICYmICghaXNQcmltaXRpdmUodmFsdWUpIHx8IHZhbHVlICE9PSB0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgLy8gSWYgdGhlIHZhbHVlIGlzIGEgbm90IGEgZGlyZWN0aXZlLCBkaXJ0eSB0aGUgY29tbWl0dGVyIHNvIHRoYXQgaXQnbGxcbiAgICAgICAgICAgIC8vIGNhbGwgc2V0QXR0cmlidXRlLiBJZiB0aGUgdmFsdWUgaXMgYSBkaXJlY3RpdmUsIGl0J2xsIGRpcnR5IHRoZVxuICAgICAgICAgICAgLy8gY29tbWl0dGVyIGlmIGl0IGNhbGxzIHNldFZhbHVlKCkuXG4gICAgICAgICAgICBpZiAoIWlzRGlyZWN0aXZlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWl0dGVyLmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21taXQoKSB7XG4gICAgICAgIHdoaWxlIChpc0RpcmVjdGl2ZSh0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aXZlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBub0NoYW5nZTtcbiAgICAgICAgICAgIGRpcmVjdGl2ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gbm9DaGFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbW1pdHRlci5jb21taXQoKTtcbiAgICB9XG59XG4vKipcbiAqIEEgUGFydCB0aGF0IGNvbnRyb2xzIGEgbG9jYXRpb24gd2l0aGluIGEgTm9kZSB0cmVlLiBMaWtlIGEgUmFuZ2UsIE5vZGVQYXJ0XG4gKiBoYXMgc3RhcnQgYW5kIGVuZCBsb2NhdGlvbnMgYW5kIGNhbiBzZXQgYW5kIHVwZGF0ZSB0aGUgTm9kZXMgYmV0d2VlbiB0aG9zZVxuICogbG9jYXRpb25zLlxuICpcbiAqIE5vZGVQYXJ0cyBzdXBwb3J0IHNldmVyYWwgdmFsdWUgdHlwZXM6IHByaW1pdGl2ZXMsIE5vZGVzLCBUZW1wbGF0ZVJlc3VsdHMsXG4gKiBhcyB3ZWxsIGFzIGFycmF5cyBhbmQgaXRlcmFibGVzIG9mIHRob3NlIHR5cGVzLlxuICovXG5leHBvcnQgY2xhc3MgTm9kZVBhcnQge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwZW5kcyB0aGlzIHBhcnQgaW50byBhIGNvbnRhaW5lci5cbiAgICAgKlxuICAgICAqIFRoaXMgcGFydCBtdXN0IGJlIGVtcHR5LCBhcyBpdHMgY29udGVudHMgYXJlIG5vdCBhdXRvbWF0aWNhbGx5IG1vdmVkLlxuICAgICAqL1xuICAgIGFwcGVuZEludG8oY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuc3RhcnROb2RlID0gY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZU1hcmtlcigpKTtcbiAgICAgICAgdGhpcy5lbmROb2RlID0gY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZU1hcmtlcigpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5zZXJ0cyB0aGlzIHBhcnQgYWZ0ZXIgdGhlIGByZWZgIG5vZGUgKGJldHdlZW4gYHJlZmAgYW5kIGByZWZgJ3MgbmV4dFxuICAgICAqIHNpYmxpbmcpLiBCb3RoIGByZWZgIGFuZCBpdHMgbmV4dCBzaWJsaW5nIG11c3QgYmUgc3RhdGljLCB1bmNoYW5naW5nIG5vZGVzXG4gICAgICogc3VjaCBhcyB0aG9zZSB0aGF0IGFwcGVhciBpbiBhIGxpdGVyYWwgc2VjdGlvbiBvZiBhIHRlbXBsYXRlLlxuICAgICAqXG4gICAgICogVGhpcyBwYXJ0IG11c3QgYmUgZW1wdHksIGFzIGl0cyBjb250ZW50cyBhcmUgbm90IGF1dG9tYXRpY2FsbHkgbW92ZWQuXG4gICAgICovXG4gICAgaW5zZXJ0QWZ0ZXJOb2RlKHJlZikge1xuICAgICAgICB0aGlzLnN0YXJ0Tm9kZSA9IHJlZjtcbiAgICAgICAgdGhpcy5lbmROb2RlID0gcmVmLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBlbmRzIHRoaXMgcGFydCBpbnRvIGEgcGFyZW50IHBhcnQuXG4gICAgICpcbiAgICAgKiBUaGlzIHBhcnQgbXVzdCBiZSBlbXB0eSwgYXMgaXRzIGNvbnRlbnRzIGFyZSBub3QgYXV0b21hdGljYWxseSBtb3ZlZC5cbiAgICAgKi9cbiAgICBhcHBlbmRJbnRvUGFydChwYXJ0KSB7XG4gICAgICAgIHBhcnQuX19pbnNlcnQodGhpcy5zdGFydE5vZGUgPSBjcmVhdGVNYXJrZXIoKSk7XG4gICAgICAgIHBhcnQuX19pbnNlcnQodGhpcy5lbmROb2RlID0gY3JlYXRlTWFya2VyKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIHRoaXMgcGFydCBhZnRlciB0aGUgYHJlZmAgcGFydC5cbiAgICAgKlxuICAgICAqIFRoaXMgcGFydCBtdXN0IGJlIGVtcHR5LCBhcyBpdHMgY29udGVudHMgYXJlIG5vdCBhdXRvbWF0aWNhbGx5IG1vdmVkLlxuICAgICAqL1xuICAgIGluc2VydEFmdGVyUGFydChyZWYpIHtcbiAgICAgICAgcmVmLl9faW5zZXJ0KHRoaXMuc3RhcnROb2RlID0gY3JlYXRlTWFya2VyKCkpO1xuICAgICAgICB0aGlzLmVuZE5vZGUgPSByZWYuZW5kTm9kZTtcbiAgICAgICAgcmVmLmVuZE5vZGUgPSB0aGlzLnN0YXJ0Tm9kZTtcbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBjb21taXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0Tm9kZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGlzRGlyZWN0aXZlKHRoaXMuX19wZW5kaW5nVmFsdWUpKSB7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RpdmUgPSB0aGlzLl9fcGVuZGluZ1ZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IG5vQ2hhbmdlO1xuICAgICAgICAgICAgZGlyZWN0aXZlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fX3BlbmRpbmdWYWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBub0NoYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1ByaW1pdGl2ZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX19jb21taXRUZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFRlbXBsYXRlUmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0VGVtcGxhdGVSZXN1bHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgTm9kZSkge1xuICAgICAgICAgICAgdGhpcy5fX2NvbW1pdE5vZGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzSXRlcmFibGUodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0SXRlcmFibGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSBub3RoaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gbm90aGluZztcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrLCB3aWxsIHJlbmRlciB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uXG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0VGV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX19pbnNlcnQobm9kZSkge1xuICAgICAgICB0aGlzLmVuZE5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgdGhpcy5lbmROb2RlKTtcbiAgICB9XG4gICAgX19jb21taXROb2RlKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5fX2luc2VydCh2YWx1ZSk7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgX19jb21taXRUZXh0KHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZS5uZXh0U2libGluZztcbiAgICAgICAgdmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbiAgICAgICAgLy8gSWYgYHZhbHVlYCBpc24ndCBhbHJlYWR5IGEgc3RyaW5nLCB3ZSBleHBsaWNpdGx5IGNvbnZlcnQgaXQgaGVyZSBpbiBjYXNlXG4gICAgICAgIC8vIGl0IGNhbid0IGJlIGltcGxpY2l0bHkgY29udmVydGVkIC0gaS5lLiBpdCdzIGEgc3ltYm9sLlxuICAgICAgICBjb25zdCB2YWx1ZUFzU3RyaW5nID0gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgaWYgKG5vZGUgPT09IHRoaXMuZW5kTm9kZS5wcmV2aW91c1NpYmxpbmcgJiZcbiAgICAgICAgICAgIG5vZGUubm9kZVR5cGUgPT09IDMgLyogTm9kZS5URVhUX05PREUgKi8pIHtcbiAgICAgICAgICAgIC8vIElmIHdlIG9ubHkgaGF2ZSBhIHNpbmdsZSB0ZXh0IG5vZGUgYmV0d2VlbiB0aGUgbWFya2Vycywgd2UgY2FuIGp1c3RcbiAgICAgICAgICAgIC8vIHNldCBpdHMgdmFsdWUsIHJhdGhlciB0aGFuIHJlcGxhY2luZyBpdC5cbiAgICAgICAgICAgIC8vIFRPRE8oanVzdGluZmFnbmFuaSk6IENhbiB3ZSBqdXN0IGNoZWNrIGlmIHRoaXMudmFsdWUgaXMgcHJpbWl0aXZlP1xuICAgICAgICAgICAgbm9kZS5kYXRhID0gdmFsdWVBc1N0cmluZztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX19jb21taXROb2RlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZhbHVlQXNTdHJpbmcpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIF9fY29tbWl0VGVtcGxhdGVSZXN1bHQodmFsdWUpIHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLm9wdGlvbnMudGVtcGxhdGVGYWN0b3J5KHZhbHVlKTtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgaW5zdGFuY2VvZiBUZW1wbGF0ZUluc3RhbmNlICYmXG4gICAgICAgICAgICB0aGlzLnZhbHVlLnRlbXBsYXRlID09PSB0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZS51cGRhdGUodmFsdWUudmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBwcm9wYWdhdGUgdGhlIHRlbXBsYXRlIHByb2Nlc3NvciBmcm9tIHRoZSBUZW1wbGF0ZVJlc3VsdFxuICAgICAgICAgICAgLy8gc28gdGhhdCB3ZSB1c2UgaXRzIHN5bnRheCBleHRlbnNpb24sIGV0Yy4gVGhlIHRlbXBsYXRlIGZhY3RvcnkgY29tZXNcbiAgICAgICAgICAgIC8vIGZyb20gdGhlIHJlbmRlciBmdW5jdGlvbiBvcHRpb25zIHNvIHRoYXQgaXQgY2FuIGNvbnRyb2wgdGVtcGxhdGVcbiAgICAgICAgICAgIC8vIGNhY2hpbmcgYW5kIHByZXByb2Nlc3NpbmcuXG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBUZW1wbGF0ZUluc3RhbmNlKHRlbXBsYXRlLCB2YWx1ZS5wcm9jZXNzb3IsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IGluc3RhbmNlLl9jbG9uZSgpO1xuICAgICAgICAgICAgaW5zdGFuY2UudXBkYXRlKHZhbHVlLnZhbHVlcyk7XG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0Tm9kZShmcmFnbWVudCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gaW5zdGFuY2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX19jb21taXRJdGVyYWJsZSh2YWx1ZSkge1xuICAgICAgICAvLyBGb3IgYW4gSXRlcmFibGUsIHdlIGNyZWF0ZSBhIG5ldyBJbnN0YW5jZVBhcnQgcGVyIGl0ZW0sIHRoZW4gc2V0IGl0c1xuICAgICAgICAvLyB2YWx1ZSB0byB0aGUgaXRlbS4gVGhpcyBpcyBhIGxpdHRsZSBiaXQgb2Ygb3ZlcmhlYWQgZm9yIGV2ZXJ5IGl0ZW0gaW5cbiAgICAgICAgLy8gYW4gSXRlcmFibGUsIGJ1dCBpdCBsZXRzIHVzIHJlY3Vyc2UgZWFzaWx5IGFuZCBlZmZpY2llbnRseSB1cGRhdGUgQXJyYXlzXG4gICAgICAgIC8vIG9mIFRlbXBsYXRlUmVzdWx0cyB0aGF0IHdpbGwgYmUgY29tbW9ubHkgcmV0dXJuZWQgZnJvbSBleHByZXNzaW9ucyBsaWtlOlxuICAgICAgICAvLyBhcnJheS5tYXAoKGkpID0+IGh0bWxgJHtpfWApLCBieSByZXVzaW5nIGV4aXN0aW5nIFRlbXBsYXRlSW5zdGFuY2VzLlxuICAgICAgICAvLyBJZiBfdmFsdWUgaXMgYW4gYXJyYXksIHRoZW4gdGhlIHByZXZpb3VzIHJlbmRlciB3YXMgb2YgYW5cbiAgICAgICAgLy8gaXRlcmFibGUgYW5kIF92YWx1ZSB3aWxsIGNvbnRhaW4gdGhlIE5vZGVQYXJ0cyBmcm9tIHRoZSBwcmV2aW91c1xuICAgICAgICAvLyByZW5kZXIuIElmIF92YWx1ZSBpcyBub3QgYW4gYXJyYXksIGNsZWFyIHRoaXMgcGFydCBhbmQgbWFrZSBhIG5ld1xuICAgICAgICAvLyBhcnJheSBmb3IgTm9kZVBhcnRzLlxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBMZXRzIHVzIGtlZXAgdHJhY2sgb2YgaG93IG1hbnkgaXRlbXMgd2Ugc3RhbXBlZCBzbyB3ZSBjYW4gY2xlYXIgbGVmdG92ZXJcbiAgICAgICAgLy8gaXRlbXMgZnJvbSBhIHByZXZpb3VzIHJlbmRlclxuICAgICAgICBjb25zdCBpdGVtUGFydHMgPSB0aGlzLnZhbHVlO1xuICAgICAgICBsZXQgcGFydEluZGV4ID0gMDtcbiAgICAgICAgbGV0IGl0ZW1QYXJ0O1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdmFsdWUpIHtcbiAgICAgICAgICAgIC8vIFRyeSB0byByZXVzZSBhbiBleGlzdGluZyBwYXJ0XG4gICAgICAgICAgICBpdGVtUGFydCA9IGl0ZW1QYXJ0c1twYXJ0SW5kZXhdO1xuICAgICAgICAgICAgLy8gSWYgbm8gZXhpc3RpbmcgcGFydCwgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICAgICAgaWYgKGl0ZW1QYXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpdGVtUGFydCA9IG5ldyBOb2RlUGFydCh0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGl0ZW1QYXJ0cy5wdXNoKGl0ZW1QYXJ0KTtcbiAgICAgICAgICAgICAgICBpZiAocGFydEluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1QYXJ0LmFwcGVuZEludG9QYXJ0KHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbVBhcnQuaW5zZXJ0QWZ0ZXJQYXJ0KGl0ZW1QYXJ0c1twYXJ0SW5kZXggLSAxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbVBhcnQuc2V0VmFsdWUoaXRlbSk7XG4gICAgICAgICAgICBpdGVtUGFydC5jb21taXQoKTtcbiAgICAgICAgICAgIHBhcnRJbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJ0SW5kZXggPCBpdGVtUGFydHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBUcnVuY2F0ZSB0aGUgcGFydHMgYXJyYXkgc28gX3ZhbHVlIHJlZmxlY3RzIHRoZSBjdXJyZW50IHN0YXRlXG4gICAgICAgICAgICBpdGVtUGFydHMubGVuZ3RoID0gcGFydEluZGV4O1xuICAgICAgICAgICAgdGhpcy5jbGVhcihpdGVtUGFydCAmJiBpdGVtUGFydC5lbmROb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGVhcihzdGFydE5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSkge1xuICAgICAgICByZW1vdmVOb2Rlcyh0aGlzLnN0YXJ0Tm9kZS5wYXJlbnROb2RlLCBzdGFydE5vZGUubmV4dFNpYmxpbmcsIHRoaXMuZW5kTm9kZSk7XG4gICAgfVxufVxuLyoqXG4gKiBJbXBsZW1lbnRzIGEgYm9vbGVhbiBhdHRyaWJ1dGUsIHJvdWdobHkgYXMgZGVmaW5lZCBpbiB0aGUgSFRNTFxuICogc3BlY2lmaWNhdGlvbi5cbiAqXG4gKiBJZiB0aGUgdmFsdWUgaXMgdHJ1dGh5LCB0aGVuIHRoZSBhdHRyaWJ1dGUgaXMgcHJlc2VudCB3aXRoIGEgdmFsdWUgb2ZcbiAqICcnLiBJZiB0aGUgdmFsdWUgaXMgZmFsc2V5LCB0aGUgYXR0cmlidXRlIGlzIHJlbW92ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBCb29sZWFuQXR0cmlidXRlUGFydCB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgbmFtZSwgc3RyaW5ncykge1xuICAgICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc3RyaW5ncy5sZW5ndGggIT09IDIgfHwgc3RyaW5nc1swXSAhPT0gJycgfHwgc3RyaW5nc1sxXSAhPT0gJycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQm9vbGVhbiBhdHRyaWJ1dGVzIGNhbiBvbmx5IGNvbnRhaW4gYSBzaW5nbGUgZXhwcmVzc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuc3RyaW5ncyA9IHN0cmluZ3M7XG4gICAgfVxuICAgIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgY29tbWl0KCkge1xuICAgICAgICB3aGlsZSAoaXNEaXJlY3RpdmUodGhpcy5fX3BlbmRpbmdWYWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gbm9DaGFuZ2U7XG4gICAgICAgICAgICBkaXJlY3RpdmUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX19wZW5kaW5nVmFsdWUgPT09IG5vQ2hhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWUgPSAhIXRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUodGhpcy5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gbm9DaGFuZ2U7XG4gICAgfVxufVxuLyoqXG4gKiBTZXRzIGF0dHJpYnV0ZSB2YWx1ZXMgZm9yIFByb3BlcnR5UGFydHMsIHNvIHRoYXQgdGhlIHZhbHVlIGlzIG9ubHkgc2V0IG9uY2VcbiAqIGV2ZW4gaWYgdGhlcmUgYXJlIG11bHRpcGxlIHBhcnRzIGZvciBhIHByb3BlcnR5LlxuICpcbiAqIElmIGFuIGV4cHJlc3Npb24gY29udHJvbHMgdGhlIHdob2xlIHByb3BlcnR5IHZhbHVlLCB0aGVuIHRoZSB2YWx1ZSBpcyBzaW1wbHlcbiAqIGFzc2lnbmVkIHRvIHRoZSBwcm9wZXJ0eSB1bmRlciBjb250cm9sLiBJZiB0aGVyZSBhcmUgc3RyaW5nIGxpdGVyYWxzIG9yXG4gKiBtdWx0aXBsZSBleHByZXNzaW9ucywgdGhlbiB0aGUgc3RyaW5ncyBhcmUgZXhwcmVzc2lvbnMgYXJlIGludGVycG9sYXRlZCBpbnRvXG4gKiBhIHN0cmluZyBmaXJzdC5cbiAqL1xuZXhwb3J0IGNsYXNzIFByb3BlcnR5Q29tbWl0dGVyIGV4dGVuZHMgQXR0cmlidXRlQ29tbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBuYW1lLCBzdHJpbmdzKSB7XG4gICAgICAgIHN1cGVyKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MpO1xuICAgICAgICB0aGlzLnNpbmdsZSA9XG4gICAgICAgICAgICAoc3RyaW5ncy5sZW5ndGggPT09IDIgJiYgc3RyaW5nc1swXSA9PT0gJycgJiYgc3RyaW5nc1sxXSA9PT0gJycpO1xuICAgIH1cbiAgICBfY3JlYXRlUGFydCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9wZXJ0eVBhcnQodGhpcyk7XG4gICAgfVxuICAgIF9nZXRWYWx1ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJ0c1swXS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXIuX2dldFZhbHVlKCk7XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlydHkpIHtcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRbdGhpcy5uYW1lXSA9IHRoaXMuX2dldFZhbHVlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUHJvcGVydHlQYXJ0IGV4dGVuZHMgQXR0cmlidXRlUGFydCB7XG59XG4vLyBEZXRlY3QgZXZlbnQgbGlzdGVuZXIgb3B0aW9ucyBzdXBwb3J0LiBJZiB0aGUgYGNhcHR1cmVgIHByb3BlcnR5IGlzIHJlYWRcbi8vIGZyb20gdGhlIG9wdGlvbnMgb2JqZWN0LCB0aGVuIG9wdGlvbnMgYXJlIHN1cHBvcnRlZC4gSWYgbm90LCB0aGVuIHRoZSB0aGlyZFxuLy8gYXJndW1lbnQgdG8gYWRkL3JlbW92ZUV2ZW50TGlzdGVuZXIgaXMgaW50ZXJwcmV0ZWQgYXMgdGhlIGJvb2xlYW4gY2FwdHVyZVxuLy8gdmFsdWUgc28gd2Ugc2hvdWxkIG9ubHkgcGFzcyB0aGUgYGNhcHR1cmVgIHByb3BlcnR5LlxubGV0IGV2ZW50T3B0aW9uc1N1cHBvcnRlZCA9IGZhbHNlO1xuLy8gV3JhcCBpbnRvIGFuIElJRkUgYmVjYXVzZSBNUyBFZGdlIDw9IHY0MSBkb2VzIG5vdCBzdXBwb3J0IGhhdmluZyB0cnkvY2F0Y2hcbi8vIGJsb2NrcyByaWdodCBpbnRvIHRoZSBib2R5IG9mIGEgbW9kdWxlXG4oKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBnZXQgY2FwdHVyZSgpIHtcbiAgICAgICAgICAgICAgICBldmVudE9wdGlvbnNTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBvcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBvcHRpb25zLCBvcHRpb25zKTtcbiAgICB9XG4gICAgY2F0Y2ggKF9lKSB7XG4gICAgICAgIC8vIGV2ZW50IG9wdGlvbnMgbm90IHN1cHBvcnRlZFxuICAgIH1cbn0pKCk7XG5leHBvcnQgY2xhc3MgRXZlbnRQYXJ0IHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBldmVudE5hbWUsIGV2ZW50Q29udGV4dCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLmV2ZW50TmFtZSA9IGV2ZW50TmFtZTtcbiAgICAgICAgdGhpcy5ldmVudENvbnRleHQgPSBldmVudENvbnRleHQ7XG4gICAgICAgIHRoaXMuX19ib3VuZEhhbmRsZUV2ZW50ID0gKGUpID0+IHRoaXMuaGFuZGxlRXZlbnQoZSk7XG4gICAgfVxuICAgIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgY29tbWl0KCkge1xuICAgICAgICB3aGlsZSAoaXNEaXJlY3RpdmUodGhpcy5fX3BlbmRpbmdWYWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gbm9DaGFuZ2U7XG4gICAgICAgICAgICBkaXJlY3RpdmUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX19wZW5kaW5nVmFsdWUgPT09IG5vQ2hhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3TGlzdGVuZXIgPSB0aGlzLl9fcGVuZGluZ1ZhbHVlO1xuICAgICAgICBjb25zdCBvbGRMaXN0ZW5lciA9IHRoaXMudmFsdWU7XG4gICAgICAgIGNvbnN0IHNob3VsZFJlbW92ZUxpc3RlbmVyID0gbmV3TGlzdGVuZXIgPT0gbnVsbCB8fFxuICAgICAgICAgICAgb2xkTGlzdGVuZXIgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIChuZXdMaXN0ZW5lci5jYXB0dXJlICE9PSBvbGRMaXN0ZW5lci5jYXB0dXJlIHx8XG4gICAgICAgICAgICAgICAgICAgIG5ld0xpc3RlbmVyLm9uY2UgIT09IG9sZExpc3RlbmVyLm9uY2UgfHxcbiAgICAgICAgICAgICAgICAgICAgbmV3TGlzdGVuZXIucGFzc2l2ZSAhPT0gb2xkTGlzdGVuZXIucGFzc2l2ZSk7XG4gICAgICAgIGNvbnN0IHNob3VsZEFkZExpc3RlbmVyID0gbmV3TGlzdGVuZXIgIT0gbnVsbCAmJiAob2xkTGlzdGVuZXIgPT0gbnVsbCB8fCBzaG91bGRSZW1vdmVMaXN0ZW5lcik7XG4gICAgICAgIGlmIChzaG91bGRSZW1vdmVMaXN0ZW5lcikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5ldmVudE5hbWUsIHRoaXMuX19ib3VuZEhhbmRsZUV2ZW50LCB0aGlzLl9fb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3VsZEFkZExpc3RlbmVyKSB7XG4gICAgICAgICAgICB0aGlzLl9fb3B0aW9ucyA9IGdldE9wdGlvbnMobmV3TGlzdGVuZXIpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodGhpcy5ldmVudE5hbWUsIHRoaXMuX19ib3VuZEhhbmRsZUV2ZW50LCB0aGlzLl9fb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZSA9IG5ld0xpc3RlbmVyO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gbm9DaGFuZ2U7XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy52YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy52YWx1ZS5jYWxsKHRoaXMuZXZlbnRDb250ZXh0IHx8IHRoaXMuZWxlbWVudCwgZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52YWx1ZS5oYW5kbGVFdmVudChldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBXZSBjb3B5IG9wdGlvbnMgYmVjYXVzZSBvZiB0aGUgaW5jb25zaXN0ZW50IGJlaGF2aW9yIG9mIGJyb3dzZXJzIHdoZW4gcmVhZGluZ1xuLy8gdGhlIHRoaXJkIGFyZ3VtZW50IG9mIGFkZC9yZW1vdmVFdmVudExpc3RlbmVyLiBJRTExIGRvZXNuJ3Qgc3VwcG9ydCBvcHRpb25zXG4vLyBhdCBhbGwuIENocm9tZSA0MSBvbmx5IHJlYWRzIGBjYXB0dXJlYCBpZiB0aGUgYXJndW1lbnQgaXMgYW4gb2JqZWN0LlxuY29uc3QgZ2V0T3B0aW9ucyA9IChvKSA9PiBvICYmXG4gICAgKGV2ZW50T3B0aW9uc1N1cHBvcnRlZCA/XG4gICAgICAgIHsgY2FwdHVyZTogby5jYXB0dXJlLCBwYXNzaXZlOiBvLnBhc3NpdmUsIG9uY2U6IG8ub25jZSB9IDpcbiAgICAgICAgby5jYXB0dXJlKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnRzLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbmltcG9ydCB7IG1hcmtlciwgVGVtcGxhdGUgfSBmcm9tICcuL3RlbXBsYXRlLmpzJztcbi8qKlxuICogVGhlIGRlZmF1bHQgVGVtcGxhdGVGYWN0b3J5IHdoaWNoIGNhY2hlcyBUZW1wbGF0ZXMga2V5ZWQgb25cbiAqIHJlc3VsdC50eXBlIGFuZCByZXN1bHQuc3RyaW5ncy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlRmFjdG9yeShyZXN1bHQpIHtcbiAgICBsZXQgdGVtcGxhdGVDYWNoZSA9IHRlbXBsYXRlQ2FjaGVzLmdldChyZXN1bHQudHlwZSk7XG4gICAgaWYgKHRlbXBsYXRlQ2FjaGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0ZW1wbGF0ZUNhY2hlID0ge1xuICAgICAgICAgICAgc3RyaW5nc0FycmF5OiBuZXcgV2Vha01hcCgpLFxuICAgICAgICAgICAga2V5U3RyaW5nOiBuZXcgTWFwKClcbiAgICAgICAgfTtcbiAgICAgICAgdGVtcGxhdGVDYWNoZXMuc2V0KHJlc3VsdC50eXBlLCB0ZW1wbGF0ZUNhY2hlKTtcbiAgICB9XG4gICAgbGV0IHRlbXBsYXRlID0gdGVtcGxhdGVDYWNoZS5zdHJpbmdzQXJyYXkuZ2V0KHJlc3VsdC5zdHJpbmdzKTtcbiAgICBpZiAodGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgfVxuICAgIC8vIElmIHRoZSBUZW1wbGF0ZVN0cmluZ3NBcnJheSBpcyBuZXcsIGdlbmVyYXRlIGEga2V5IGZyb20gdGhlIHN0cmluZ3NcbiAgICAvLyBUaGlzIGtleSBpcyBzaGFyZWQgYmV0d2VlbiBhbGwgdGVtcGxhdGVzIHdpdGggaWRlbnRpY2FsIGNvbnRlbnRcbiAgICBjb25zdCBrZXkgPSByZXN1bHQuc3RyaW5ncy5qb2luKG1hcmtlcik7XG4gICAgLy8gQ2hlY2sgaWYgd2UgYWxyZWFkeSBoYXZlIGEgVGVtcGxhdGUgZm9yIHRoaXMga2V5XG4gICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNhY2hlLmtleVN0cmluZy5nZXQoa2V5KTtcbiAgICBpZiAodGVtcGxhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBJZiB3ZSBoYXZlIG5vdCBzZWVuIHRoaXMga2V5IGJlZm9yZSwgY3JlYXRlIGEgbmV3IFRlbXBsYXRlXG4gICAgICAgIHRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKHJlc3VsdCwgcmVzdWx0LmdldFRlbXBsYXRlRWxlbWVudCgpKTtcbiAgICAgICAgLy8gQ2FjaGUgdGhlIFRlbXBsYXRlIGZvciB0aGlzIGtleVxuICAgICAgICB0ZW1wbGF0ZUNhY2hlLmtleVN0cmluZy5zZXQoa2V5LCB0ZW1wbGF0ZSk7XG4gICAgfVxuICAgIC8vIENhY2hlIGFsbCBmdXR1cmUgcXVlcmllcyBmb3IgdGhpcyBUZW1wbGF0ZVN0cmluZ3NBcnJheVxuICAgIHRlbXBsYXRlQ2FjaGUuc3RyaW5nc0FycmF5LnNldChyZXN1bHQuc3RyaW5ncywgdGVtcGxhdGUpO1xuICAgIHJldHVybiB0ZW1wbGF0ZTtcbn1cbmV4cG9ydCBjb25zdCB0ZW1wbGF0ZUNhY2hlcyA9IG5ldyBNYXAoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRlbXBsYXRlLWZhY3RvcnkuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBAbW9kdWxlIGxpdC1odG1sXG4gKi9cbmltcG9ydCB7IHJlbW92ZU5vZGVzIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgTm9kZVBhcnQgfSBmcm9tICcuL3BhcnRzLmpzJztcbmltcG9ydCB7IHRlbXBsYXRlRmFjdG9yeSB9IGZyb20gJy4vdGVtcGxhdGUtZmFjdG9yeS5qcyc7XG5leHBvcnQgY29uc3QgcGFydHMgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBSZW5kZXJzIGEgdGVtcGxhdGUgcmVzdWx0IG9yIG90aGVyIHZhbHVlIHRvIGEgY29udGFpbmVyLlxuICpcbiAqIFRvIHVwZGF0ZSBhIGNvbnRhaW5lciB3aXRoIG5ldyB2YWx1ZXMsIHJlZXZhbHVhdGUgdGhlIHRlbXBsYXRlIGxpdGVyYWwgYW5kXG4gKiBjYWxsIGByZW5kZXJgIHdpdGggdGhlIG5ldyByZXN1bHQuXG4gKlxuICogQHBhcmFtIHJlc3VsdCBBbnkgdmFsdWUgcmVuZGVyYWJsZSBieSBOb2RlUGFydCAtIHR5cGljYWxseSBhIFRlbXBsYXRlUmVzdWx0XG4gKiAgICAgY3JlYXRlZCBieSBldmFsdWF0aW5nIGEgdGVtcGxhdGUgdGFnIGxpa2UgYGh0bWxgIG9yIGBzdmdgLlxuICogQHBhcmFtIGNvbnRhaW5lciBBIERPTSBwYXJlbnQgdG8gcmVuZGVyIHRvLiBUaGUgZW50aXJlIGNvbnRlbnRzIGFyZSBlaXRoZXJcbiAqICAgICByZXBsYWNlZCwgb3IgZWZmaWNpZW50bHkgdXBkYXRlZCBpZiB0aGUgc2FtZSByZXN1bHQgdHlwZSB3YXMgcHJldmlvdXNcbiAqICAgICByZW5kZXJlZCB0aGVyZS5cbiAqIEBwYXJhbSBvcHRpb25zIFJlbmRlck9wdGlvbnMgZm9yIHRoZSBlbnRpcmUgcmVuZGVyIHRyZWUgcmVuZGVyZWQgdG8gdGhpc1xuICogICAgIGNvbnRhaW5lci4gUmVuZGVyIG9wdGlvbnMgbXVzdCAqbm90KiBjaGFuZ2UgYmV0d2VlbiByZW5kZXJzIHRvIHRoZSBzYW1lXG4gKiAgICAgY29udGFpbmVyLCBhcyB0aG9zZSBjaGFuZ2VzIHdpbGwgbm90IGVmZmVjdCBwcmV2aW91c2x5IHJlbmRlcmVkIERPTS5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlbmRlciA9IChyZXN1bHQsIGNvbnRhaW5lciwgb3B0aW9ucykgPT4ge1xuICAgIGxldCBwYXJ0ID0gcGFydHMuZ2V0KGNvbnRhaW5lcik7XG4gICAgaWYgKHBhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZW1vdmVOb2Rlcyhjb250YWluZXIsIGNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgICAgcGFydHMuc2V0KGNvbnRhaW5lciwgcGFydCA9IG5ldyBOb2RlUGFydChPYmplY3QuYXNzaWduKHsgdGVtcGxhdGVGYWN0b3J5IH0sIG9wdGlvbnMpKSk7XG4gICAgICAgIHBhcnQuYXBwZW5kSW50byhjb250YWluZXIpO1xuICAgIH1cbiAgICBwYXJ0LnNldFZhbHVlKHJlc3VsdCk7XG4gICAgcGFydC5jb21taXQoKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZW5kZXIuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuaW1wb3J0IHsgQXR0cmlidXRlQ29tbWl0dGVyLCBCb29sZWFuQXR0cmlidXRlUGFydCwgRXZlbnRQYXJ0LCBOb2RlUGFydCwgUHJvcGVydHlDb21taXR0ZXIgfSBmcm9tICcuL3BhcnRzLmpzJztcbi8qKlxuICogQ3JlYXRlcyBQYXJ0cyB3aGVuIGEgdGVtcGxhdGUgaXMgaW5zdGFudGlhdGVkLlxuICovXG5leHBvcnQgY2xhc3MgRGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgcGFydHMgZm9yIGFuIGF0dHJpYnV0ZS1wb3NpdGlvbiBiaW5kaW5nLCBnaXZlbiB0aGUgZXZlbnQsIGF0dHJpYnV0ZVxuICAgICAqIG5hbWUsIGFuZCBzdHJpbmcgbGl0ZXJhbHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCBjb250YWluaW5nIHRoZSBiaW5kaW5nXG4gICAgICogQHBhcmFtIG5hbWUgIFRoZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSBzdHJpbmdzIFRoZSBzdHJpbmcgbGl0ZXJhbHMuIFRoZXJlIGFyZSBhbHdheXMgYXQgbGVhc3QgdHdvIHN0cmluZ3MsXG4gICAgICogICBldmVudCBmb3IgZnVsbHktY29udHJvbGxlZCBiaW5kaW5ncyB3aXRoIGEgc2luZ2xlIGV4cHJlc3Npb24uXG4gICAgICovXG4gICAgaGFuZGxlQXR0cmlidXRlRXhwcmVzc2lvbnMoZWxlbWVudCwgbmFtZSwgc3RyaW5ncywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBwcmVmaXggPSBuYW1lWzBdO1xuICAgICAgICBpZiAocHJlZml4ID09PSAnLicpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1pdHRlciA9IG5ldyBQcm9wZXJ0eUNvbW1pdHRlcihlbGVtZW50LCBuYW1lLnNsaWNlKDEpLCBzdHJpbmdzKTtcbiAgICAgICAgICAgIHJldHVybiBjb21taXR0ZXIucGFydHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZWZpeCA9PT0gJ0AnKSB7XG4gICAgICAgICAgICByZXR1cm4gW25ldyBFdmVudFBhcnQoZWxlbWVudCwgbmFtZS5zbGljZSgxKSwgb3B0aW9ucy5ldmVudENvbnRleHQpXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJlZml4ID09PSAnPycpIHtcbiAgICAgICAgICAgIHJldHVybiBbbmV3IEJvb2xlYW5BdHRyaWJ1dGVQYXJ0KGVsZW1lbnQsIG5hbWUuc2xpY2UoMSksIHN0cmluZ3MpXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21taXR0ZXIgPSBuZXcgQXR0cmlidXRlQ29tbWl0dGVyKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MpO1xuICAgICAgICByZXR1cm4gY29tbWl0dGVyLnBhcnRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgcGFydHMgZm9yIGEgdGV4dC1wb3NpdGlvbiBiaW5kaW5nLlxuICAgICAqIEBwYXJhbSB0ZW1wbGF0ZUZhY3RvcnlcbiAgICAgKi9cbiAgICBoYW5kbGVUZXh0RXhwcmVzc2lvbihvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgTm9kZVBhcnQob3B0aW9ucyk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGRlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvciA9IG5ldyBEZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHQtdGVtcGxhdGUtcHJvY2Vzc29yLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICpcbiAqIE1haW4gbGl0LWh0bWwgbW9kdWxlLlxuICpcbiAqIE1haW4gZXhwb3J0czpcbiAqXG4gKiAtICBbW2h0bWxdXVxuICogLSAgW1tzdmddXVxuICogLSAgW1tyZW5kZXJdXVxuICpcbiAqIEBtb2R1bGUgbGl0LWh0bWxcbiAqIEBwcmVmZXJyZWRcbiAqL1xuLyoqXG4gKiBEbyBub3QgcmVtb3ZlIHRoaXMgY29tbWVudDsgaXQga2VlcHMgdHlwZWRvYyBmcm9tIG1pc3BsYWNpbmcgdGhlIG1vZHVsZVxuICogZG9jcy5cbiAqL1xuaW1wb3J0IHsgZGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yIH0gZnJvbSAnLi9saWIvZGVmYXVsdC10ZW1wbGF0ZS1wcm9jZXNzb3IuanMnO1xuaW1wb3J0IHsgU1ZHVGVtcGxhdGVSZXN1bHQsIFRlbXBsYXRlUmVzdWx0IH0gZnJvbSAnLi9saWIvdGVtcGxhdGUtcmVzdWx0LmpzJztcbmV4cG9ydCB7IERlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvciwgZGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yIH0gZnJvbSAnLi9saWIvZGVmYXVsdC10ZW1wbGF0ZS1wcm9jZXNzb3IuanMnO1xuZXhwb3J0IHsgZGlyZWN0aXZlLCBpc0RpcmVjdGl2ZSB9IGZyb20gJy4vbGliL2RpcmVjdGl2ZS5qcyc7XG4vLyBUT0RPKGp1c3RpbmZhZ25hbmkpOiByZW1vdmUgbGluZSB3aGVuIHdlIGdldCBOb2RlUGFydCBtb3ZpbmcgbWV0aG9kc1xuZXhwb3J0IHsgcmVtb3ZlTm9kZXMsIHJlcGFyZW50Tm9kZXMgfSBmcm9tICcuL2xpYi9kb20uanMnO1xuZXhwb3J0IHsgbm9DaGFuZ2UsIG5vdGhpbmcgfSBmcm9tICcuL2xpYi9wYXJ0LmpzJztcbmV4cG9ydCB7IEF0dHJpYnV0ZUNvbW1pdHRlciwgQXR0cmlidXRlUGFydCwgQm9vbGVhbkF0dHJpYnV0ZVBhcnQsIEV2ZW50UGFydCwgaXNJdGVyYWJsZSwgaXNQcmltaXRpdmUsIE5vZGVQYXJ0LCBQcm9wZXJ0eUNvbW1pdHRlciwgUHJvcGVydHlQYXJ0IH0gZnJvbSAnLi9saWIvcGFydHMuanMnO1xuZXhwb3J0IHsgcGFydHMsIHJlbmRlciB9IGZyb20gJy4vbGliL3JlbmRlci5qcyc7XG5leHBvcnQgeyB0ZW1wbGF0ZUNhY2hlcywgdGVtcGxhdGVGYWN0b3J5IH0gZnJvbSAnLi9saWIvdGVtcGxhdGUtZmFjdG9yeS5qcyc7XG5leHBvcnQgeyBUZW1wbGF0ZUluc3RhbmNlIH0gZnJvbSAnLi9saWIvdGVtcGxhdGUtaW5zdGFuY2UuanMnO1xuZXhwb3J0IHsgU1ZHVGVtcGxhdGVSZXN1bHQsIFRlbXBsYXRlUmVzdWx0IH0gZnJvbSAnLi9saWIvdGVtcGxhdGUtcmVzdWx0LmpzJztcbmV4cG9ydCB7IGNyZWF0ZU1hcmtlciwgaXNUZW1wbGF0ZVBhcnRBY3RpdmUsIFRlbXBsYXRlIH0gZnJvbSAnLi9saWIvdGVtcGxhdGUuanMnO1xuLy8gSU1QT1JUQU5UOiBkbyBub3QgY2hhbmdlIHRoZSBwcm9wZXJ0eSBuYW1lIG9yIHRoZSBhc3NpZ25tZW50IGV4cHJlc3Npb24uXG4vLyBUaGlzIGxpbmUgd2lsbCBiZSB1c2VkIGluIHJlZ2V4ZXMgdG8gc2VhcmNoIGZvciBsaXQtaHRtbCB1c2FnZS5cbi8vIFRPRE8oanVzdGluZmFnbmFuaSk6IGluamVjdCB2ZXJzaW9uIG51bWJlciBhdCBidWlsZCB0aW1lXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAod2luZG93WydsaXRIdG1sVmVyc2lvbnMnXSB8fCAod2luZG93WydsaXRIdG1sVmVyc2lvbnMnXSA9IFtdKSkucHVzaCgnMS4yLjEnKTtcbn1cbi8qKlxuICogSW50ZXJwcmV0cyBhIHRlbXBsYXRlIGxpdGVyYWwgYXMgYW4gSFRNTCB0ZW1wbGF0ZSB0aGF0IGNhbiBlZmZpY2llbnRseVxuICogcmVuZGVyIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBodG1sID0gKHN0cmluZ3MsIC4uLnZhbHVlcykgPT4gbmV3IFRlbXBsYXRlUmVzdWx0KHN0cmluZ3MsIHZhbHVlcywgJ2h0bWwnLCBkZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IpO1xuLyoqXG4gKiBJbnRlcnByZXRzIGEgdGVtcGxhdGUgbGl0ZXJhbCBhcyBhbiBTVkcgdGVtcGxhdGUgdGhhdCBjYW4gZWZmaWNpZW50bHlcbiAqIHJlbmRlciB0byBhbmQgdXBkYXRlIGEgY29udGFpbmVyLlxuICovXG5leHBvcnQgY29uc3Qgc3ZnID0gKHN0cmluZ3MsIC4uLnZhbHVlcykgPT4gbmV3IFNWR1RlbXBsYXRlUmVzdWx0KHN0cmluZ3MsIHZhbHVlcywgJ3N2ZycsIGRlZmF1bHRUZW1wbGF0ZVByb2Nlc3Nvcik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXQtaHRtbC5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIE1vZHVsZSB0byBhZGQgc2hhZHkgRE9NL3NoYWR5IENTUyBwb2x5ZmlsbCBzdXBwb3J0IHRvIGxpdC1odG1sIHRlbXBsYXRlXG4gKiByZW5kZXJpbmcuIFNlZSB0aGUgW1tyZW5kZXJdXSBtZXRob2QgZm9yIGRldGFpbHMuXG4gKlxuICogQG1vZHVsZSBzaGFkeS1yZW5kZXJcbiAqIEBwcmVmZXJyZWRcbiAqL1xuLyoqXG4gKiBEbyBub3QgcmVtb3ZlIHRoaXMgY29tbWVudDsgaXQga2VlcHMgdHlwZWRvYyBmcm9tIG1pc3BsYWNpbmcgdGhlIG1vZHVsZVxuICogZG9jcy5cbiAqL1xuaW1wb3J0IHsgcmVtb3ZlTm9kZXMgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBpbnNlcnROb2RlSW50b1RlbXBsYXRlLCByZW1vdmVOb2Rlc0Zyb21UZW1wbGF0ZSB9IGZyb20gJy4vbW9kaWZ5LXRlbXBsYXRlLmpzJztcbmltcG9ydCB7IHBhcnRzLCByZW5kZXIgYXMgbGl0UmVuZGVyIH0gZnJvbSAnLi9yZW5kZXIuanMnO1xuaW1wb3J0IHsgdGVtcGxhdGVDYWNoZXMgfSBmcm9tICcuL3RlbXBsYXRlLWZhY3RvcnkuanMnO1xuaW1wb3J0IHsgVGVtcGxhdGVJbnN0YW5jZSB9IGZyb20gJy4vdGVtcGxhdGUtaW5zdGFuY2UuanMnO1xuaW1wb3J0IHsgbWFya2VyLCBUZW1wbGF0ZSB9IGZyb20gJy4vdGVtcGxhdGUuanMnO1xuZXhwb3J0IHsgaHRtbCwgc3ZnLCBUZW1wbGF0ZVJlc3VsdCB9IGZyb20gJy4uL2xpdC1odG1sLmpzJztcbi8vIEdldCBhIGtleSB0byBsb29rdXAgaW4gYHRlbXBsYXRlQ2FjaGVzYC5cbmNvbnN0IGdldFRlbXBsYXRlQ2FjaGVLZXkgPSAodHlwZSwgc2NvcGVOYW1lKSA9PiBgJHt0eXBlfS0tJHtzY29wZU5hbWV9YDtcbmxldCBjb21wYXRpYmxlU2hhZHlDU1NWZXJzaW9uID0gdHJ1ZTtcbmlmICh0eXBlb2Ygd2luZG93LlNoYWR5Q1NTID09PSAndW5kZWZpbmVkJykge1xuICAgIGNvbXBhdGlibGVTaGFkeUNTU1ZlcnNpb24gPSBmYWxzZTtcbn1cbmVsc2UgaWYgKHR5cGVvZiB3aW5kb3cuU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlRG9tID09PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnNvbGUud2FybihgSW5jb21wYXRpYmxlIFNoYWR5Q1NTIHZlcnNpb24gZGV0ZWN0ZWQuIGAgK1xuICAgICAgICBgUGxlYXNlIHVwZGF0ZSB0byBhdCBsZWFzdCBAd2ViY29tcG9uZW50cy93ZWJjb21wb25lbnRzanNAMi4wLjIgYW5kIGAgK1xuICAgICAgICBgQHdlYmNvbXBvbmVudHMvc2hhZHljc3NAMS4zLjEuYCk7XG4gICAgY29tcGF0aWJsZVNoYWR5Q1NTVmVyc2lvbiA9IGZhbHNlO1xufVxuLyoqXG4gKiBUZW1wbGF0ZSBmYWN0b3J5IHdoaWNoIHNjb3BlcyB0ZW1wbGF0ZSBET00gdXNpbmcgU2hhZHlDU1MuXG4gKiBAcGFyYW0gc2NvcGVOYW1lIHtzdHJpbmd9XG4gKi9cbmNvbnN0IHNoYWR5VGVtcGxhdGVGYWN0b3J5ID0gKHNjb3BlTmFtZSkgPT4gKHJlc3VsdCkgPT4ge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gZ2V0VGVtcGxhdGVDYWNoZUtleShyZXN1bHQudHlwZSwgc2NvcGVOYW1lKTtcbiAgICBsZXQgdGVtcGxhdGVDYWNoZSA9IHRlbXBsYXRlQ2FjaGVzLmdldChjYWNoZUtleSk7XG4gICAgaWYgKHRlbXBsYXRlQ2FjaGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0ZW1wbGF0ZUNhY2hlID0ge1xuICAgICAgICAgICAgc3RyaW5nc0FycmF5OiBuZXcgV2Vha01hcCgpLFxuICAgICAgICAgICAga2V5U3RyaW5nOiBuZXcgTWFwKClcbiAgICAgICAgfTtcbiAgICAgICAgdGVtcGxhdGVDYWNoZXMuc2V0KGNhY2hlS2V5LCB0ZW1wbGF0ZUNhY2hlKTtcbiAgICB9XG4gICAgbGV0IHRlbXBsYXRlID0gdGVtcGxhdGVDYWNoZS5zdHJpbmdzQXJyYXkuZ2V0KHJlc3VsdC5zdHJpbmdzKTtcbiAgICBpZiAodGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IHJlc3VsdC5zdHJpbmdzLmpvaW4obWFya2VyKTtcbiAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FjaGUua2V5U3RyaW5nLmdldChrZXkpO1xuICAgIGlmICh0ZW1wbGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSByZXN1bHQuZ2V0VGVtcGxhdGVFbGVtZW50KCk7XG4gICAgICAgIGlmIChjb21wYXRpYmxlU2hhZHlDU1NWZXJzaW9uKSB7XG4gICAgICAgICAgICB3aW5kb3cuU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlRG9tKGVsZW1lbnQsIHNjb3BlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUocmVzdWx0LCBlbGVtZW50KTtcbiAgICAgICAgdGVtcGxhdGVDYWNoZS5rZXlTdHJpbmcuc2V0KGtleSwgdGVtcGxhdGUpO1xuICAgIH1cbiAgICB0ZW1wbGF0ZUNhY2hlLnN0cmluZ3NBcnJheS5zZXQocmVzdWx0LnN0cmluZ3MsIHRlbXBsYXRlKTtcbiAgICByZXR1cm4gdGVtcGxhdGU7XG59O1xuY29uc3QgVEVNUExBVEVfVFlQRVMgPSBbJ2h0bWwnLCAnc3ZnJ107XG4vKipcbiAqIFJlbW92ZXMgYWxsIHN0eWxlIGVsZW1lbnRzIGZyb20gVGVtcGxhdGVzIGZvciB0aGUgZ2l2ZW4gc2NvcGVOYW1lLlxuICovXG5jb25zdCByZW1vdmVTdHlsZXNGcm9tTGl0VGVtcGxhdGVzID0gKHNjb3BlTmFtZSkgPT4ge1xuICAgIFRFTVBMQVRFX1RZUEVTLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGVzID0gdGVtcGxhdGVDYWNoZXMuZ2V0KGdldFRlbXBsYXRlQ2FjaGVLZXkodHlwZSwgc2NvcGVOYW1lKSk7XG4gICAgICAgIGlmICh0ZW1wbGF0ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGVtcGxhdGVzLmtleVN0cmluZy5mb3JFYWNoKCh0ZW1wbGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZWxlbWVudDogeyBjb250ZW50IH0gfSA9IHRlbXBsYXRlO1xuICAgICAgICAgICAgICAgIC8vIElFIDExIGRvZXNuJ3Qgc3VwcG9ydCB0aGUgaXRlcmFibGUgcGFyYW0gU2V0IGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVzID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgICAgIEFycmF5LmZyb20oY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdzdHlsZScpKS5mb3JFYWNoKChzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlcy5hZGQocyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlTm9kZXNGcm9tVGVtcGxhdGUodGVtcGxhdGUsIHN0eWxlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbmNvbnN0IHNoYWR5UmVuZGVyU2V0ID0gbmV3IFNldCgpO1xuLyoqXG4gKiBGb3IgdGhlIGdpdmVuIHNjb3BlIG5hbWUsIGVuc3VyZXMgdGhhdCBTaGFkeUNTUyBzdHlsZSBzY29waW5nIGlzIHBlcmZvcm1lZC5cbiAqIFRoaXMgaXMgZG9uZSBqdXN0IG9uY2UgcGVyIHNjb3BlIG5hbWUgc28gdGhlIGZyYWdtZW50IGFuZCB0ZW1wbGF0ZSBjYW5ub3RcbiAqIGJlIG1vZGlmaWVkLlxuICogKDEpIGV4dHJhY3RzIHN0eWxlcyBmcm9tIHRoZSByZW5kZXJlZCBmcmFnbWVudCBhbmQgaGFuZHMgdGhlbSB0byBTaGFkeUNTU1xuICogdG8gYmUgc2NvcGVkIGFuZCBhcHBlbmRlZCB0byB0aGUgZG9jdW1lbnRcbiAqICgyKSByZW1vdmVzIHN0eWxlIGVsZW1lbnRzIGZyb20gYWxsIGxpdC1odG1sIFRlbXBsYXRlcyBmb3IgdGhpcyBzY29wZSBuYW1lLlxuICpcbiAqIE5vdGUsIDxzdHlsZT4gZWxlbWVudHMgY2FuIG9ubHkgYmUgcGxhY2VkIGludG8gdGVtcGxhdGVzIGZvciB0aGVcbiAqIGluaXRpYWwgcmVuZGVyaW5nIG9mIHRoZSBzY29wZS4gSWYgPHN0eWxlPiBlbGVtZW50cyBhcmUgaW5jbHVkZWQgaW4gdGVtcGxhdGVzXG4gKiBkeW5hbWljYWxseSByZW5kZXJlZCB0byB0aGUgc2NvcGUgKGFmdGVyIHRoZSBmaXJzdCBzY29wZSByZW5kZXIpLCB0aGV5IHdpbGxcbiAqIG5vdCBiZSBzY29wZWQgYW5kIHRoZSA8c3R5bGU+IHdpbGwgYmUgbGVmdCBpbiB0aGUgdGVtcGxhdGUgYW5kIHJlbmRlcmVkXG4gKiBvdXRwdXQuXG4gKi9cbmNvbnN0IHByZXBhcmVUZW1wbGF0ZVN0eWxlcyA9IChzY29wZU5hbWUsIHJlbmRlcmVkRE9NLCB0ZW1wbGF0ZSkgPT4ge1xuICAgIHNoYWR5UmVuZGVyU2V0LmFkZChzY29wZU5hbWUpO1xuICAgIC8vIElmIGByZW5kZXJlZERPTWAgaXMgc3RhbXBlZCBmcm9tIGEgVGVtcGxhdGUsIHRoZW4gd2UgbmVlZCB0byBlZGl0IHRoYXRcbiAgICAvLyBUZW1wbGF0ZSdzIHVuZGVybHlpbmcgdGVtcGxhdGUgZWxlbWVudC4gT3RoZXJ3aXNlLCB3ZSBjcmVhdGUgb25lIGhlcmVcbiAgICAvLyB0byBnaXZlIHRvIFNoYWR5Q1NTLCB3aGljaCBzdGlsbCByZXF1aXJlcyBvbmUgd2hpbGUgc2NvcGluZy5cbiAgICBjb25zdCB0ZW1wbGF0ZUVsZW1lbnQgPSAhIXRlbXBsYXRlID8gdGVtcGxhdGUuZWxlbWVudCA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgLy8gTW92ZSBzdHlsZXMgb3V0IG9mIHJlbmRlcmVkIERPTSBhbmQgc3RvcmUuXG4gICAgY29uc3Qgc3R5bGVzID0gcmVuZGVyZWRET00ucXVlcnlTZWxlY3RvckFsbCgnc3R5bGUnKTtcbiAgICBjb25zdCB7IGxlbmd0aCB9ID0gc3R5bGVzO1xuICAgIC8vIElmIHRoZXJlIGFyZSBubyBzdHlsZXMsIHNraXAgdW5uZWNlc3Nhcnkgd29ya1xuICAgIGlmIChsZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gRW5zdXJlIHByZXBhcmVUZW1wbGF0ZVN0eWxlcyBpcyBjYWxsZWQgdG8gc3VwcG9ydCBhZGRpbmdcbiAgICAgICAgLy8gc3R5bGVzIHZpYSBgcHJlcGFyZUFkb3B0ZWRDc3NUZXh0YCBzaW5jZSB0aGF0IHJlcXVpcmVzIHRoYXRcbiAgICAgICAgLy8gYHByZXBhcmVUZW1wbGF0ZVN0eWxlc2AgaXMgY2FsbGVkLlxuICAgICAgICAvL1xuICAgICAgICAvLyBTaGFkeUNTUyB3aWxsIG9ubHkgdXBkYXRlIHN0eWxlcyBjb250YWluaW5nIEBhcHBseSBpbiB0aGUgdGVtcGxhdGVcbiAgICAgICAgLy8gZ2l2ZW4gdG8gYHByZXBhcmVUZW1wbGF0ZVN0eWxlc2AuIElmIG5vIGxpdCBUZW1wbGF0ZSB3YXMgZ2l2ZW4sXG4gICAgICAgIC8vIFNoYWR5Q1NTIHdpbGwgbm90IGJlIGFibGUgdG8gdXBkYXRlIHVzZXMgb2YgQGFwcGx5IGluIGFueSByZWxldmFudFxuICAgICAgICAvLyB0ZW1wbGF0ZS4gSG93ZXZlciwgdGhpcyBpcyBub3QgYSBwcm9ibGVtIGJlY2F1c2Ugd2Ugb25seSBjcmVhdGUgdGhlXG4gICAgICAgIC8vIHRlbXBsYXRlIGZvciB0aGUgcHVycG9zZSBvZiBzdXBwb3J0aW5nIGBwcmVwYXJlQWRvcHRlZENzc1RleHRgLFxuICAgICAgICAvLyB3aGljaCBkb2Vzbid0IHN1cHBvcnQgQGFwcGx5IGF0IGFsbC5cbiAgICAgICAgd2luZG93LlNoYWR5Q1NTLnByZXBhcmVUZW1wbGF0ZVN0eWxlcyh0ZW1wbGF0ZUVsZW1lbnQsIHNjb3BlTmFtZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29uZGVuc2VkU3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIC8vIENvbGxlY3Qgc3R5bGVzIGludG8gYSBzaW5nbGUgc3R5bGUuIFRoaXMgaGVscHMgdXMgbWFrZSBzdXJlIFNoYWR5Q1NTXG4gICAgLy8gbWFuaXB1bGF0aW9ucyB3aWxsIG5vdCBwcmV2ZW50IHVzIGZyb20gYmVpbmcgYWJsZSB0byBmaXggdXAgdGVtcGxhdGVcbiAgICAvLyBwYXJ0IGluZGljZXMuXG4gICAgLy8gTk9URTogY29sbGVjdGluZyBzdHlsZXMgaXMgaW5lZmZpY2llbnQgZm9yIGJyb3dzZXJzIGJ1dCBTaGFkeUNTU1xuICAgIC8vIGN1cnJlbnRseSBkb2VzIHRoaXMgYW55d2F5LiBXaGVuIGl0IGRvZXMgbm90LCB0aGlzIHNob3VsZCBiZSBjaGFuZ2VkLlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBzdHlsZXNbaV07XG4gICAgICAgIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuICAgICAgICBjb25kZW5zZWRTdHlsZS50ZXh0Q29udGVudCArPSBzdHlsZS50ZXh0Q29udGVudDtcbiAgICB9XG4gICAgLy8gUmVtb3ZlIHN0eWxlcyBmcm9tIG5lc3RlZCB0ZW1wbGF0ZXMgaW4gdGhpcyBzY29wZS5cbiAgICByZW1vdmVTdHlsZXNGcm9tTGl0VGVtcGxhdGVzKHNjb3BlTmFtZSk7XG4gICAgLy8gQW5kIHRoZW4gcHV0IHRoZSBjb25kZW5zZWQgc3R5bGUgaW50byB0aGUgXCJyb290XCIgdGVtcGxhdGUgcGFzc2VkIGluIGFzXG4gICAgLy8gYHRlbXBsYXRlYC5cbiAgICBjb25zdCBjb250ZW50ID0gdGVtcGxhdGVFbGVtZW50LmNvbnRlbnQ7XG4gICAgaWYgKCEhdGVtcGxhdGUpIHtcbiAgICAgICAgaW5zZXJ0Tm9kZUludG9UZW1wbGF0ZSh0ZW1wbGF0ZSwgY29uZGVuc2VkU3R5bGUsIGNvbnRlbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb250ZW50Lmluc2VydEJlZm9yZShjb25kZW5zZWRTdHlsZSwgY29udGVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgLy8gTm90ZSwgaXQncyBpbXBvcnRhbnQgdGhhdCBTaGFkeUNTUyBnZXRzIHRoZSB0ZW1wbGF0ZSB0aGF0IGBsaXQtaHRtbGBcbiAgICAvLyB3aWxsIGFjdHVhbGx5IHJlbmRlciBzbyB0aGF0IGl0IGNhbiB1cGRhdGUgdGhlIHN0eWxlIGluc2lkZSB3aGVuXG4gICAgLy8gbmVlZGVkIChlLmcuIEBhcHBseSBuYXRpdmUgU2hhZG93IERPTSBjYXNlKS5cbiAgICB3aW5kb3cuU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlU3R5bGVzKHRlbXBsYXRlRWxlbWVudCwgc2NvcGVOYW1lKTtcbiAgICBjb25zdCBzdHlsZSA9IGNvbnRlbnQucXVlcnlTZWxlY3Rvcignc3R5bGUnKTtcbiAgICBpZiAod2luZG93LlNoYWR5Q1NTLm5hdGl2ZVNoYWRvdyAmJiBzdHlsZSAhPT0gbnVsbCkge1xuICAgICAgICAvLyBXaGVuIGluIG5hdGl2ZSBTaGFkb3cgRE9NLCBlbnN1cmUgdGhlIHN0eWxlIGNyZWF0ZWQgYnkgU2hhZHlDU1MgaXNcbiAgICAgICAgLy8gaW5jbHVkZWQgaW4gaW5pdGlhbGx5IHJlbmRlcmVkIG91dHB1dCAoYHJlbmRlcmVkRE9NYCkuXG4gICAgICAgIHJlbmRlcmVkRE9NLmluc2VydEJlZm9yZShzdHlsZS5jbG9uZU5vZGUodHJ1ZSksIHJlbmRlcmVkRE9NLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICBlbHNlIGlmICghIXRlbXBsYXRlKSB7XG4gICAgICAgIC8vIFdoZW4gbm8gc3R5bGUgaXMgbGVmdCBpbiB0aGUgdGVtcGxhdGUsIHBhcnRzIHdpbGwgYmUgYnJva2VuIGFzIGFcbiAgICAgICAgLy8gcmVzdWx0LiBUbyBmaXggdGhpcywgd2UgcHV0IGJhY2sgdGhlIHN0eWxlIG5vZGUgU2hhZHlDU1MgcmVtb3ZlZFxuICAgICAgICAvLyBhbmQgdGhlbiB0ZWxsIGxpdCB0byByZW1vdmUgdGhhdCBub2RlIGZyb20gdGhlIHRlbXBsYXRlLlxuICAgICAgICAvLyBUaGVyZSBjYW4gYmUgbm8gc3R5bGUgaW4gdGhlIHRlbXBsYXRlIGluIDIgY2FzZXMgKDEpIHdoZW4gU2hhZHkgRE9NXG4gICAgICAgIC8vIGlzIGluIHVzZSwgU2hhZHlDU1MgcmVtb3ZlcyBhbGwgc3R5bGVzLCAoMikgd2hlbiBuYXRpdmUgU2hhZG93IERPTVxuICAgICAgICAvLyBpcyBpbiB1c2UgU2hhZHlDU1MgcmVtb3ZlcyB0aGUgc3R5bGUgaWYgaXQgY29udGFpbnMgbm8gY29udGVudC5cbiAgICAgICAgLy8gTk9URSwgU2hhZHlDU1MgY3JlYXRlcyBpdHMgb3duIHN0eWxlIHNvIHdlIGNhbiBzYWZlbHkgYWRkL3JlbW92ZVxuICAgICAgICAvLyBgY29uZGVuc2VkU3R5bGVgIGhlcmUuXG4gICAgICAgIGNvbnRlbnQuaW5zZXJ0QmVmb3JlKGNvbmRlbnNlZFN0eWxlLCBjb250ZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICBjb25zdCByZW1vdmVzID0gbmV3IFNldCgpO1xuICAgICAgICByZW1vdmVzLmFkZChjb25kZW5zZWRTdHlsZSk7XG4gICAgICAgIHJlbW92ZU5vZGVzRnJvbVRlbXBsYXRlKHRlbXBsYXRlLCByZW1vdmVzKTtcbiAgICB9XG59O1xuLyoqXG4gKiBFeHRlbnNpb24gdG8gdGhlIHN0YW5kYXJkIGByZW5kZXJgIG1ldGhvZCB3aGljaCBzdXBwb3J0cyByZW5kZXJpbmdcbiAqIHRvIFNoYWRvd1Jvb3RzIHdoZW4gdGhlIFNoYWR5RE9NIChodHRwczovL2dpdGh1Yi5jb20vd2ViY29tcG9uZW50cy9zaGFkeWRvbSlcbiAqIGFuZCBTaGFkeUNTUyAoaHR0cHM6Ly9naXRodWIuY29tL3dlYmNvbXBvbmVudHMvc2hhZHljc3MpIHBvbHlmaWxscyBhcmUgdXNlZFxuICogb3Igd2hlbiB0aGUgd2ViY29tcG9uZW50c2pzXG4gKiAoaHR0cHM6Ly9naXRodWIuY29tL3dlYmNvbXBvbmVudHMvd2ViY29tcG9uZW50c2pzKSBwb2x5ZmlsbCBpcyB1c2VkLlxuICpcbiAqIEFkZHMgYSBgc2NvcGVOYW1lYCBvcHRpb24gd2hpY2ggaXMgdXNlZCB0byBzY29wZSBlbGVtZW50IERPTSBhbmQgc3R5bGVzaGVldHNcbiAqIHdoZW4gbmF0aXZlIFNoYWRvd0RPTSBpcyB1bmF2YWlsYWJsZS4gVGhlIGBzY29wZU5hbWVgIHdpbGwgYmUgYWRkZWQgdG9cbiAqIHRoZSBjbGFzcyBhdHRyaWJ1dGUgb2YgYWxsIHJlbmRlcmVkIERPTS4gSW4gYWRkaXRpb24sIGFueSBzdHlsZSBlbGVtZW50cyB3aWxsXG4gKiBiZSBhdXRvbWF0aWNhbGx5IHJlLXdyaXR0ZW4gd2l0aCB0aGlzIGBzY29wZU5hbWVgIHNlbGVjdG9yIGFuZCBtb3ZlZCBvdXRcbiAqIG9mIHRoZSByZW5kZXJlZCBET00gYW5kIGludG8gdGhlIGRvY3VtZW50IGA8aGVhZD5gLlxuICpcbiAqIEl0IGlzIGNvbW1vbiB0byB1c2UgdGhpcyByZW5kZXIgbWV0aG9kIGluIGNvbmp1bmN0aW9uIHdpdGggYSBjdXN0b20gZWxlbWVudFxuICogd2hpY2ggcmVuZGVycyBhIHNoYWRvd1Jvb3QuIFdoZW4gdGhpcyBpcyBkb25lLCB0eXBpY2FsbHkgdGhlIGVsZW1lbnQnc1xuICogYGxvY2FsTmFtZWAgc2hvdWxkIGJlIHVzZWQgYXMgdGhlIGBzY29wZU5hbWVgLlxuICpcbiAqIEluIGFkZGl0aW9uIHRvIERPTSBzY29waW5nLCBTaGFkeUNTUyBhbHNvIHN1cHBvcnRzIGEgYmFzaWMgc2hpbSBmb3IgY3NzXG4gKiBjdXN0b20gcHJvcGVydGllcyAobmVlZGVkIG9ubHkgb24gb2xkZXIgYnJvd3NlcnMgbGlrZSBJRTExKSBhbmQgYSBzaGltIGZvclxuICogYSBkZXByZWNhdGVkIGZlYXR1cmUgY2FsbGVkIGBAYXBwbHlgIHRoYXQgc3VwcG9ydHMgYXBwbHlpbmcgYSBzZXQgb2YgY3NzXG4gKiBjdXN0b20gcHJvcGVydGllcyB0byBhIGdpdmVuIGxvY2F0aW9uLlxuICpcbiAqIFVzYWdlIGNvbnNpZGVyYXRpb25zOlxuICpcbiAqICogUGFydCB2YWx1ZXMgaW4gYDxzdHlsZT5gIGVsZW1lbnRzIGFyZSBvbmx5IGFwcGxpZWQgdGhlIGZpcnN0IHRpbWUgYSBnaXZlblxuICogYHNjb3BlTmFtZWAgcmVuZGVycy4gU3Vic2VxdWVudCBjaGFuZ2VzIHRvIHBhcnRzIGluIHN0eWxlIGVsZW1lbnRzIHdpbGwgaGF2ZVxuICogbm8gZWZmZWN0LiBCZWNhdXNlIG9mIHRoaXMsIHBhcnRzIGluIHN0eWxlIGVsZW1lbnRzIHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yXG4gKiB2YWx1ZXMgdGhhdCB3aWxsIG5ldmVyIGNoYW5nZSwgZm9yIGV4YW1wbGUgcGFydHMgdGhhdCBzZXQgc2NvcGUtd2lkZSB0aGVtZVxuICogdmFsdWVzIG9yIHBhcnRzIHdoaWNoIHJlbmRlciBzaGFyZWQgc3R5bGUgZWxlbWVudHMuXG4gKlxuICogKiBOb3RlLCBkdWUgdG8gYSBsaW1pdGF0aW9uIG9mIHRoZSBTaGFkeURPTSBwb2x5ZmlsbCwgcmVuZGVyaW5nIGluIGFcbiAqIGN1c3RvbSBlbGVtZW50J3MgYGNvbnN0cnVjdG9yYCBpcyBub3Qgc3VwcG9ydGVkLiBJbnN0ZWFkIHJlbmRlcmluZyBzaG91bGRcbiAqIGVpdGhlciBkb25lIGFzeW5jaHJvbm91c2x5LCBmb3IgZXhhbXBsZSBhdCBtaWNyb3Rhc2sgdGltaW5nIChmb3IgZXhhbXBsZVxuICogYFByb21pc2UucmVzb2x2ZSgpYCksIG9yIGJlIGRlZmVycmVkIHVudGlsIHRoZSBmaXJzdCB0aW1lIHRoZSBlbGVtZW50J3NcbiAqIGBjb25uZWN0ZWRDYWxsYmFja2AgcnVucy5cbiAqXG4gKiBVc2FnZSBjb25zaWRlcmF0aW9ucyB3aGVuIHVzaW5nIHNoaW1tZWQgY3VzdG9tIHByb3BlcnRpZXMgb3IgYEBhcHBseWA6XG4gKlxuICogKiBXaGVuZXZlciBhbnkgZHluYW1pYyBjaGFuZ2VzIGFyZSBtYWRlIHdoaWNoIGFmZmVjdFxuICogY3NzIGN1c3RvbSBwcm9wZXJ0aWVzLCBgU2hhZHlDU1Muc3R5bGVFbGVtZW50KGVsZW1lbnQpYCBtdXN0IGJlIGNhbGxlZFxuICogdG8gdXBkYXRlIHRoZSBlbGVtZW50LiBUaGVyZSBhcmUgdHdvIGNhc2VzIHdoZW4gdGhpcyBpcyBuZWVkZWQ6XG4gKiAoMSkgdGhlIGVsZW1lbnQgaXMgY29ubmVjdGVkIHRvIGEgbmV3IHBhcmVudCwgKDIpIGEgY2xhc3MgaXMgYWRkZWQgdG8gdGhlXG4gKiBlbGVtZW50IHRoYXQgY2F1c2VzIGl0IHRvIG1hdGNoIGRpZmZlcmVudCBjdXN0b20gcHJvcGVydGllcy5cbiAqIFRvIGFkZHJlc3MgdGhlIGZpcnN0IGNhc2Ugd2hlbiByZW5kZXJpbmcgYSBjdXN0b20gZWxlbWVudCwgYHN0eWxlRWxlbWVudGBcbiAqIHNob3VsZCBiZSBjYWxsZWQgaW4gdGhlIGVsZW1lbnQncyBgY29ubmVjdGVkQ2FsbGJhY2tgLlxuICpcbiAqICogU2hpbW1lZCBjdXN0b20gcHJvcGVydGllcyBtYXkgb25seSBiZSBkZWZpbmVkIGVpdGhlciBmb3IgYW4gZW50aXJlXG4gKiBzaGFkb3dSb290IChmb3IgZXhhbXBsZSwgaW4gYSBgOmhvc3RgIHJ1bGUpIG9yIHZpYSBhIHJ1bGUgdGhhdCBkaXJlY3RseVxuICogbWF0Y2hlcyBhbiBlbGVtZW50IHdpdGggYSBzaGFkb3dSb290LiBJbiBvdGhlciB3b3JkcywgaW5zdGVhZCBvZiBmbG93aW5nIGZyb21cbiAqIHBhcmVudCB0byBjaGlsZCBhcyBkbyBuYXRpdmUgY3NzIGN1c3RvbSBwcm9wZXJ0aWVzLCBzaGltbWVkIGN1c3RvbSBwcm9wZXJ0aWVzXG4gKiBmbG93IG9ubHkgZnJvbSBzaGFkb3dSb290cyB0byBuZXN0ZWQgc2hhZG93Um9vdHMuXG4gKlxuICogKiBXaGVuIHVzaW5nIGBAYXBwbHlgIG1peGluZyBjc3Mgc2hvcnRoYW5kIHByb3BlcnR5IG5hbWVzIHdpdGhcbiAqIG5vbi1zaG9ydGhhbmQgbmFtZXMgKGZvciBleGFtcGxlIGBib3JkZXJgIGFuZCBgYm9yZGVyLXdpZHRoYCkgaXMgbm90XG4gKiBzdXBwb3J0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCByZW5kZXIgPSAocmVzdWx0LCBjb250YWluZXIsIG9wdGlvbnMpID0+IHtcbiAgICBpZiAoIW9wdGlvbnMgfHwgdHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnIHx8ICFvcHRpb25zLnNjb3BlTmFtZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBgc2NvcGVOYW1lYCBvcHRpb24gaXMgcmVxdWlyZWQuJyk7XG4gICAgfVxuICAgIGNvbnN0IHNjb3BlTmFtZSA9IG9wdGlvbnMuc2NvcGVOYW1lO1xuICAgIGNvbnN0IGhhc1JlbmRlcmVkID0gcGFydHMuaGFzKGNvbnRhaW5lcik7XG4gICAgY29uc3QgbmVlZHNTY29waW5nID0gY29tcGF0aWJsZVNoYWR5Q1NTVmVyc2lvbiAmJlxuICAgICAgICBjb250YWluZXIubm9kZVR5cGUgPT09IDExIC8qIE5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSAqLyAmJlxuICAgICAgICAhIWNvbnRhaW5lci5ob3N0O1xuICAgIC8vIEhhbmRsZSBmaXJzdCByZW5kZXIgdG8gYSBzY29wZSBzcGVjaWFsbHkuLi5cbiAgICBjb25zdCBmaXJzdFNjb3BlUmVuZGVyID0gbmVlZHNTY29waW5nICYmICFzaGFkeVJlbmRlclNldC5oYXMoc2NvcGVOYW1lKTtcbiAgICAvLyBPbiBmaXJzdCBzY29wZSByZW5kZXIsIHJlbmRlciBpbnRvIGEgZnJhZ21lbnQ7IHRoaXMgY2Fubm90IGJlIGEgc2luZ2xlXG4gICAgLy8gZnJhZ21lbnQgdGhhdCBpcyByZXVzZWQgc2luY2UgbmVzdGVkIHJlbmRlcnMgY2FuIG9jY3VyIHN5bmNocm9ub3VzbHkuXG4gICAgY29uc3QgcmVuZGVyQ29udGFpbmVyID0gZmlyc3RTY29wZVJlbmRlciA/IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSA6IGNvbnRhaW5lcjtcbiAgICBsaXRSZW5kZXIocmVzdWx0LCByZW5kZXJDb250YWluZXIsIE9iamVjdC5hc3NpZ24oeyB0ZW1wbGF0ZUZhY3Rvcnk6IHNoYWR5VGVtcGxhdGVGYWN0b3J5KHNjb3BlTmFtZSkgfSwgb3B0aW9ucykpO1xuICAgIC8vIFdoZW4gcGVyZm9ybWluZyBmaXJzdCBzY29wZSByZW5kZXIsXG4gICAgLy8gKDEpIFdlJ3ZlIHJlbmRlcmVkIGludG8gYSBmcmFnbWVudCBzbyB0aGF0IHRoZXJlJ3MgYSBjaGFuY2UgdG9cbiAgICAvLyBgcHJlcGFyZVRlbXBsYXRlU3R5bGVzYCBiZWZvcmUgc3ViLWVsZW1lbnRzIGhpdCB0aGUgRE9NXG4gICAgLy8gKHdoaWNoIG1pZ2h0IGNhdXNlIHRoZW0gdG8gcmVuZGVyIGJhc2VkIG9uIGEgY29tbW9uIHBhdHRlcm4gb2ZcbiAgICAvLyByZW5kZXJpbmcgaW4gYSBjdXN0b20gZWxlbWVudCdzIGBjb25uZWN0ZWRDYWxsYmFja2ApO1xuICAgIC8vICgyKSBTY29wZSB0aGUgdGVtcGxhdGUgd2l0aCBTaGFkeUNTUyBvbmUgdGltZSBvbmx5IGZvciB0aGlzIHNjb3BlLlxuICAgIC8vICgzKSBSZW5kZXIgdGhlIGZyYWdtZW50IGludG8gdGhlIGNvbnRhaW5lciBhbmQgbWFrZSBzdXJlIHRoZVxuICAgIC8vIGNvbnRhaW5lciBrbm93cyBpdHMgYHBhcnRgIGlzIHRoZSBvbmUgd2UganVzdCByZW5kZXJlZC4gVGhpcyBlbnN1cmVzXG4gICAgLy8gRE9NIHdpbGwgYmUgcmUtdXNlZCBvbiBzdWJzZXF1ZW50IHJlbmRlcnMuXG4gICAgaWYgKGZpcnN0U2NvcGVSZW5kZXIpIHtcbiAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzLmdldChyZW5kZXJDb250YWluZXIpO1xuICAgICAgICBwYXJ0cy5kZWxldGUocmVuZGVyQ29udGFpbmVyKTtcbiAgICAgICAgLy8gU2hhZHlDU1MgbWlnaHQgaGF2ZSBzdHlsZSBzaGVldHMgKGUuZy4gZnJvbSBgcHJlcGFyZUFkb3B0ZWRDc3NUZXh0YClcbiAgICAgICAgLy8gdGhhdCBzaG91bGQgYXBwbHkgdG8gYHJlbmRlckNvbnRhaW5lcmAgZXZlbiBpZiB0aGUgcmVuZGVyZWQgdmFsdWUgaXNcbiAgICAgICAgLy8gbm90IGEgVGVtcGxhdGVJbnN0YW5jZS4gSG93ZXZlciwgaXQgd2lsbCBvbmx5IGluc2VydCBzY29wZWQgc3R5bGVzXG4gICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50IGlmIGBwcmVwYXJlVGVtcGxhdGVTdHlsZXNgIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkXG4gICAgICAgIC8vIGZvciB0aGUgZ2l2ZW4gc2NvcGUgbmFtZS5cbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBwYXJ0LnZhbHVlIGluc3RhbmNlb2YgVGVtcGxhdGVJbnN0YW5jZSA/XG4gICAgICAgICAgICBwYXJ0LnZhbHVlLnRlbXBsYXRlIDpcbiAgICAgICAgICAgIHVuZGVmaW5lZDtcbiAgICAgICAgcHJlcGFyZVRlbXBsYXRlU3R5bGVzKHNjb3BlTmFtZSwgcmVuZGVyQ29udGFpbmVyLCB0ZW1wbGF0ZSk7XG4gICAgICAgIHJlbW92ZU5vZGVzKGNvbnRhaW5lciwgY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVuZGVyQ29udGFpbmVyKTtcbiAgICAgICAgcGFydHMuc2V0KGNvbnRhaW5lciwgcGFydCk7XG4gICAgfVxuICAgIC8vIEFmdGVyIGVsZW1lbnRzIGhhdmUgaGl0IHRoZSBET00sIHVwZGF0ZSBzdHlsaW5nIGlmIHRoaXMgaXMgdGhlXG4gICAgLy8gaW5pdGlhbCByZW5kZXIgdG8gdGhpcyBjb250YWluZXIuXG4gICAgLy8gVGhpcyBpcyBuZWVkZWQgd2hlbmV2ZXIgZHluYW1pYyBjaGFuZ2VzIGFyZSBtYWRlIHNvIGl0IHdvdWxkIGJlXG4gICAgLy8gc2FmZXN0IHRvIGRvIGV2ZXJ5IHJlbmRlcjsgaG93ZXZlciwgdGhpcyB3b3VsZCByZWdyZXNzIHBlcmZvcm1hbmNlXG4gICAgLy8gc28gd2UgbGVhdmUgaXQgdXAgdG8gdGhlIHVzZXIgdG8gY2FsbCBgU2hhZHlDU1Muc3R5bGVFbGVtZW50YFxuICAgIC8vIGZvciBkeW5hbWljIGNoYW5nZXMuXG4gICAgaWYgKCFoYXNSZW5kZXJlZCAmJiBuZWVkc1Njb3BpbmcpIHtcbiAgICAgICAgd2luZG93LlNoYWR5Q1NTLnN0eWxlRWxlbWVudChjb250YWluZXIuaG9zdCk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYWR5LXJlbmRlci5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG52YXIgX2E7XG4vKipcbiAqIFdoZW4gdXNpbmcgQ2xvc3VyZSBDb21waWxlciwgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eShwcm9wZXJ0eSwgb2JqZWN0KSBpc1xuICogcmVwbGFjZWQgYXQgY29tcGlsZSB0aW1lIGJ5IHRoZSBtdW5nZWQgbmFtZSBmb3Igb2JqZWN0W3Byb3BlcnR5XS4gV2UgY2Fubm90XG4gKiBhbGlhcyB0aGlzIGZ1bmN0aW9uLCBzbyB3ZSBoYXZlIHRvIHVzZSBhIHNtYWxsIHNoaW0gdGhhdCBoYXMgdGhlIHNhbWVcbiAqIGJlaGF2aW9yIHdoZW4gbm90IGNvbXBpbGluZy5cbiAqL1xud2luZG93LkpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkgPVxuICAgIChwcm9wLCBfb2JqKSA9PiBwcm9wO1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRDb252ZXJ0ZXIgPSB7XG4gICAgdG9BdHRyaWJ1dGUodmFsdWUsIHR5cGUpIHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIEJvb2xlYW46XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID8gJycgOiBudWxsO1xuICAgICAgICAgICAgY2FzZSBPYmplY3Q6XG4gICAgICAgICAgICBjYXNlIEFycmF5OlxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSB2YWx1ZSBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgcGFzcyB0aGlzIHRocm91Z2hcbiAgICAgICAgICAgICAgICAvLyB0byBhbGxvdyByZW1vdmluZy9ubyBjaGFuZ2UgYmVoYXZpb3IuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyB2YWx1ZSA6IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBmcm9tQXR0cmlidXRlKHZhbHVlLCB0eXBlKSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBCb29sZWFuOlxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSAhPT0gbnVsbDtcbiAgICAgICAgICAgIGNhc2UgTnVtYmVyOlxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCA/IG51bGwgOiBOdW1iZXIodmFsdWUpO1xuICAgICAgICAgICAgY2FzZSBPYmplY3Q6XG4gICAgICAgICAgICBjYXNlIEFycmF5OlxuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxufTtcbi8qKlxuICogQ2hhbmdlIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgZGlmZmVyZW50IGZyb20gYG9sZFZhbHVlYC5cbiAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgYXMgdGhlIGRlZmF1bHQgZm9yIGEgcHJvcGVydHkncyBgaGFzQ2hhbmdlZGAgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBjb25zdCBub3RFcXVhbCA9ICh2YWx1ZSwgb2xkKSA9PiB7XG4gICAgLy8gVGhpcyBlbnN1cmVzIChvbGQ9PU5hTiwgdmFsdWU9PU5hTikgYWx3YXlzIHJldHVybnMgZmFsc2VcbiAgICByZXR1cm4gb2xkICE9PSB2YWx1ZSAmJiAob2xkID09PSBvbGQgfHwgdmFsdWUgPT09IHZhbHVlKTtcbn07XG5jb25zdCBkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbiA9IHtcbiAgICBhdHRyaWJ1dGU6IHRydWUsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNvbnZlcnRlcjogZGVmYXVsdENvbnZlcnRlcixcbiAgICByZWZsZWN0OiBmYWxzZSxcbiAgICBoYXNDaGFuZ2VkOiBub3RFcXVhbFxufTtcbmNvbnN0IFNUQVRFX0hBU19VUERBVEVEID0gMTtcbmNvbnN0IFNUQVRFX1VQREFURV9SRVFVRVNURUQgPSAxIDw8IDI7XG5jb25zdCBTVEFURV9JU19SRUZMRUNUSU5HX1RPX0FUVFJJQlVURSA9IDEgPDwgMztcbmNvbnN0IFNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fUFJPUEVSVFkgPSAxIDw8IDQ7XG4vKipcbiAqIFRoZSBDbG9zdXJlIEpTIENvbXBpbGVyIGRvZXNuJ3QgY3VycmVudGx5IGhhdmUgZ29vZCBzdXBwb3J0IGZvciBzdGF0aWNcbiAqIHByb3BlcnR5IHNlbWFudGljcyB3aGVyZSBcInRoaXNcIiBpcyBkeW5hbWljIChlLmcuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvaXNzdWVzLzMxNzcgYW5kIG90aGVycykgc28gd2UgdXNlXG4gKiB0aGlzIGhhY2sgdG8gYnlwYXNzIGFueSByZXdyaXRpbmcgYnkgdGhlIGNvbXBpbGVyLlxuICovXG5jb25zdCBmaW5hbGl6ZWQgPSAnZmluYWxpemVkJztcbi8qKlxuICogQmFzZSBlbGVtZW50IGNsYXNzIHdoaWNoIG1hbmFnZXMgZWxlbWVudCBwcm9wZXJ0aWVzIGFuZCBhdHRyaWJ1dGVzLiBXaGVuXG4gKiBwcm9wZXJ0aWVzIGNoYW5nZSwgdGhlIGB1cGRhdGVgIG1ldGhvZCBpcyBhc3luY2hyb25vdXNseSBjYWxsZWQuIFRoaXMgbWV0aG9kXG4gKiBzaG91bGQgYmUgc3VwcGxpZWQgYnkgc3ViY2xhc3NlcnMgdG8gcmVuZGVyIHVwZGF0ZXMgYXMgZGVzaXJlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIFVwZGF0aW5nRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSAwO1xuICAgICAgICB0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8vIEluaXRpYWxpemUgdG8gYW4gdW5yZXNvbHZlZCBQcm9taXNlIHNvIHdlIGNhbiBtYWtlIHN1cmUgdGhlIGVsZW1lbnQgaGFzXG4gICAgICAgIC8vIGNvbm5lY3RlZCBiZWZvcmUgZmlyc3QgdXBkYXRlLlxuICAgICAgICB0aGlzLl91cGRhdGVQcm9taXNlID0gbmV3IFByb21pc2UoKHJlcykgPT4gdGhpcy5fZW5hYmxlVXBkYXRpbmdSZXNvbHZlciA9IHJlcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXAgd2l0aCBrZXlzIGZvciBhbnkgcHJvcGVydGllcyB0aGF0IGhhdmUgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdFxuICAgICAgICAgKiB1cGRhdGUgY3ljbGUgd2l0aCBwcmV2aW91cyB2YWx1ZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9jaGFuZ2VkUHJvcGVydGllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcCB3aXRoIGtleXMgb2YgcHJvcGVydGllcyB0aGF0IHNob3VsZCBiZSByZWZsZWN0ZWQgd2hlbiB1cGRhdGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBhdHRyaWJ1dGVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHJlZ2lzdGVyZWQgcHJvcGVydGllcy5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgICAgICAvLyBub3RlOiBwaWdneSBiYWNraW5nIG9uIHRoaXMgdG8gZW5zdXJlIHdlJ3JlIGZpbmFsaXplZC5cbiAgICAgICAgdGhpcy5maW5hbGl6ZSgpO1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gW107XG4gICAgICAgIC8vIFVzZSBmb3JFYWNoIHNvIHRoaXMgd29ya3MgZXZlbiBpZiBmb3Ivb2YgbG9vcHMgYXJlIGNvbXBpbGVkIHRvIGZvciBsb29wc1xuICAgICAgICAvLyBleHBlY3RpbmcgYXJyYXlzXG4gICAgICAgIHRoaXMuX2NsYXNzUHJvcGVydGllcy5mb3JFYWNoKCh2LCBwKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhdHRyID0gdGhpcy5fYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KHAsIHYpO1xuICAgICAgICAgICAgaWYgKGF0dHIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2F0dHJpYnV0ZVRvUHJvcGVydHlNYXAuc2V0KGF0dHIsIHApO1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMucHVzaChhdHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoZSBwcml2YXRlIGBfY2xhc3NQcm9wZXJ0aWVzYCBwcm9wZXJ0eSBtZXRhZGF0YSBpcyBjcmVhdGVkLlxuICAgICAqIEluIGFkZGl0aW9uIHRvIGBmaW5hbGl6ZWAgdGhpcyBpcyBhbHNvIGNhbGxlZCBpbiBgY3JlYXRlUHJvcGVydHlgIHRvXG4gICAgICogZW5zdXJlIHRoZSBgQHByb3BlcnR5YCBkZWNvcmF0b3IgY2FuIGFkZCBwcm9wZXJ0eSBtZXRhZGF0YS5cbiAgICAgKi9cbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBzdGF0aWMgX2Vuc3VyZUNsYXNzUHJvcGVydGllcygpIHtcbiAgICAgICAgLy8gZW5zdXJlIHByaXZhdGUgc3RvcmFnZSBmb3IgcHJvcGVydHkgZGVjbGFyYXRpb25zLlxuICAgICAgICBpZiAoIXRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnX2NsYXNzUHJvcGVydGllcycsIHRoaXMpKSkge1xuICAgICAgICAgICAgdGhpcy5fY2xhc3NQcm9wZXJ0aWVzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgLy8gTk9URTogV29ya2Fyb3VuZCBJRTExIG5vdCBzdXBwb3J0aW5nIE1hcCBjb25zdHJ1Y3RvciBhcmd1bWVudC5cbiAgICAgICAgICAgIGNvbnN0IHN1cGVyUHJvcGVydGllcyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fY2xhc3NQcm9wZXJ0aWVzO1xuICAgICAgICAgICAgaWYgKHN1cGVyUHJvcGVydGllcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3VwZXJQcm9wZXJ0aWVzLmZvckVhY2goKHYsIGspID0+IHRoaXMuX2NsYXNzUHJvcGVydGllcy5zZXQoaywgdikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBwcm9wZXJ0eSBhY2Nlc3NvciBvbiB0aGUgZWxlbWVudCBwcm90b3R5cGUgaWYgb25lIGRvZXMgbm90IGV4aXN0XG4gICAgICogYW5kIHN0b3JlcyBhIFByb3BlcnR5RGVjbGFyYXRpb24gZm9yIHRoZSBwcm9wZXJ0eSB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuICAgICAqIFRoZSBwcm9wZXJ0eSBzZXR0ZXIgY2FsbHMgdGhlIHByb3BlcnR5J3MgYGhhc0NoYW5nZWRgIHByb3BlcnR5IG9wdGlvblxuICAgICAqIG9yIHVzZXMgYSBzdHJpY3QgaWRlbnRpdHkgY2hlY2sgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgb3Igbm90IHRvIHJlcXVlc3RcbiAgICAgKiBhbiB1cGRhdGUuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBtYXkgYmUgb3ZlcnJpZGRlbiB0byBjdXN0b21pemUgcHJvcGVydGllczsgaG93ZXZlcixcbiAgICAgKiB3aGVuIGRvaW5nIHNvLCBpdCdzIGltcG9ydGFudCB0byBjYWxsIGBzdXBlci5jcmVhdGVQcm9wZXJ0eWAgdG8gZW5zdXJlXG4gICAgICogdGhlIHByb3BlcnR5IGlzIHNldHVwIGNvcnJlY3RseS4gVGhpcyBtZXRob2QgY2FsbHNcbiAgICAgKiBgZ2V0UHJvcGVydHlEZXNjcmlwdG9yYCBpbnRlcm5hbGx5IHRvIGdldCBhIGRlc2NyaXB0b3IgdG8gaW5zdGFsbC5cbiAgICAgKiBUbyBjdXN0b21pemUgd2hhdCBwcm9wZXJ0aWVzIGRvIHdoZW4gdGhleSBhcmUgZ2V0IG9yIHNldCwgb3ZlcnJpZGVcbiAgICAgKiBgZ2V0UHJvcGVydHlEZXNjcmlwdG9yYC4gVG8gY3VzdG9taXplIHRoZSBvcHRpb25zIGZvciBhIHByb3BlcnR5LFxuICAgICAqIGltcGxlbWVudCBgY3JlYXRlUHJvcGVydHlgIGxpa2UgdGhpczpcbiAgICAgKlxuICAgICAqIHN0YXRpYyBjcmVhdGVQcm9wZXJ0eShuYW1lLCBvcHRpb25zKSB7XG4gICAgICogICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihvcHRpb25zLCB7bXlPcHRpb246IHRydWV9KTtcbiAgICAgKiAgIHN1cGVyLmNyZWF0ZVByb3BlcnR5KG5hbWUsIG9wdGlvbnMpO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZVByb3BlcnR5KG5hbWUsIG9wdGlvbnMgPSBkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbikge1xuICAgICAgICAvLyBOb3RlLCBzaW5jZSB0aGlzIGNhbiBiZSBjYWxsZWQgYnkgdGhlIGBAcHJvcGVydHlgIGRlY29yYXRvciB3aGljaFxuICAgICAgICAvLyBpcyBjYWxsZWQgYmVmb3JlIGBmaW5hbGl6ZWAsIHdlIGVuc3VyZSBzdG9yYWdlIGV4aXN0cyBmb3IgcHJvcGVydHlcbiAgICAgICAgLy8gbWV0YWRhdGEuXG4gICAgICAgIHRoaXMuX2Vuc3VyZUNsYXNzUHJvcGVydGllcygpO1xuICAgICAgICB0aGlzLl9jbGFzc1Byb3BlcnRpZXMuc2V0KG5hbWUsIG9wdGlvbnMpO1xuICAgICAgICAvLyBEbyBub3QgZ2VuZXJhdGUgYW4gYWNjZXNzb3IgaWYgdGhlIHByb3RvdHlwZSBhbHJlYWR5IGhhcyBvbmUsIHNpbmNlXG4gICAgICAgIC8vIGl0IHdvdWxkIGJlIGxvc3Qgb3RoZXJ3aXNlIGFuZCB0aGF0IHdvdWxkIG5ldmVyIGJlIHRoZSB1c2VyJ3MgaW50ZW50aW9uO1xuICAgICAgICAvLyBJbnN0ZWFkLCB3ZSBleHBlY3QgdXNlcnMgdG8gY2FsbCBgcmVxdWVzdFVwZGF0ZWAgdGhlbXNlbHZlcyBmcm9tXG4gICAgICAgIC8vIHVzZXItZGVmaW5lZCBhY2Nlc3NvcnMuIE5vdGUgdGhhdCBpZiB0aGUgc3VwZXIgaGFzIGFuIGFjY2Vzc29yIHdlIHdpbGxcbiAgICAgICAgLy8gc3RpbGwgb3ZlcndyaXRlIGl0XG4gICAgICAgIGlmIChvcHRpb25zLm5vQWNjZXNzb3IgfHwgdGhpcy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXkgPSB0eXBlb2YgbmFtZSA9PT0gJ3N5bWJvbCcgPyBTeW1ib2woKSA6IGBfXyR7bmFtZX1gO1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gdGhpcy5nZXRQcm9wZXJ0eURlc2NyaXB0b3IobmFtZSwga2V5LCBvcHRpb25zKTtcbiAgICAgICAgaWYgKGRlc2NyaXB0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMucHJvdG90eXBlLCBuYW1lLCBkZXNjcmlwdG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvcGVydHkgZGVzY3JpcHRvciB0byBiZSBkZWZpbmVkIG9uIHRoZSBnaXZlbiBuYW1lZCBwcm9wZXJ0eS5cbiAgICAgKiBJZiBubyBkZXNjcmlwdG9yIGlzIHJldHVybmVkLCB0aGUgcHJvcGVydHkgd2lsbCBub3QgYmVjb21lIGFuIGFjY2Vzc29yLlxuICAgICAqIEZvciBleGFtcGxlLFxuICAgICAqXG4gICAgICogICBjbGFzcyBNeUVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgICAgKiAgICAgc3RhdGljIGdldFByb3BlcnR5RGVzY3JpcHRvcihuYW1lLCBrZXksIG9wdGlvbnMpIHtcbiAgICAgKiAgICAgICBjb25zdCBkZWZhdWx0RGVzY3JpcHRvciA9XG4gICAgICogICAgICAgICAgIHN1cGVyLmdldFByb3BlcnR5RGVzY3JpcHRvcihuYW1lLCBrZXksIG9wdGlvbnMpO1xuICAgICAqICAgICAgIGNvbnN0IHNldHRlciA9IGRlZmF1bHREZXNjcmlwdG9yLnNldDtcbiAgICAgKiAgICAgICByZXR1cm4ge1xuICAgICAqICAgICAgICAgZ2V0OiBkZWZhdWx0RGVzY3JpcHRvci5nZXQsXG4gICAgICogICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgKiAgICAgICAgICAgc2V0dGVyLmNhbGwodGhpcywgdmFsdWUpO1xuICAgICAqICAgICAgICAgICAvLyBjdXN0b20gYWN0aW9uLlxuICAgICAqICAgICAgICAgfSxcbiAgICAgKiAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgKiAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIH1cbiAgICAgKiAgIH1cbiAgICAgKlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGdldFByb3BlcnR5RGVzY3JpcHRvcihuYW1lLCBrZXksIF9vcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55IG5vIHN5bWJvbCBpbiBpbmRleFxuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW2tleV07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzW25hbWVdO1xuICAgICAgICAgICAgICAgIHRoaXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RVcGRhdGUobmFtZSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcHJvcGVydHkgb3B0aW9ucyBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICAqIFRoZXNlIG9wdGlvbnMgYXJlIGRlZmluZWQgd2l0aCBhIFByb3BlcnR5RGVjbGFyYXRpb24gdmlhIHRoZSBgcHJvcGVydGllc2BcbiAgICAgKiBvYmplY3Qgb3IgdGhlIGBAcHJvcGVydHlgIGRlY29yYXRvciBhbmQgYXJlIHJlZ2lzdGVyZWQgaW5cbiAgICAgKiBgY3JlYXRlUHJvcGVydHkoLi4uKWAuXG4gICAgICpcbiAgICAgKiBOb3RlLCB0aGlzIG1ldGhvZCBzaG91bGQgYmUgY29uc2lkZXJlZCBcImZpbmFsXCIgYW5kIG5vdCBvdmVycmlkZGVuLiBUb1xuICAgICAqIGN1c3RvbWl6ZSB0aGUgb3B0aW9ucyBmb3IgYSBnaXZlbiBwcm9wZXJ0eSwgb3ZlcnJpZGUgYGNyZWF0ZVByb3BlcnR5YC5cbiAgICAgKlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICogQGZpbmFsXG4gICAgICovXG4gICAgc3RhdGljIGdldFByb3BlcnR5T3B0aW9ucyhuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGFzc1Byb3BlcnRpZXMgJiYgdGhpcy5fY2xhc3NQcm9wZXJ0aWVzLmdldChuYW1lKSB8fFxuICAgICAgICAgICAgZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgcHJvcGVydHkgYWNjZXNzb3JzIGZvciByZWdpc3RlcmVkIHByb3BlcnRpZXMgYW5kIGVuc3VyZXNcbiAgICAgKiBhbnkgc3VwZXJjbGFzc2VzIGFyZSBhbHNvIGZpbmFsaXplZC5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBmaW5hbGl6ZSgpIHtcbiAgICAgICAgLy8gZmluYWxpemUgYW55IHN1cGVyY2xhc3Nlc1xuICAgICAgICBjb25zdCBzdXBlckN0b3IgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcyk7XG4gICAgICAgIGlmICghc3VwZXJDdG9yLmhhc093blByb3BlcnR5KGZpbmFsaXplZCkpIHtcbiAgICAgICAgICAgIHN1cGVyQ3Rvci5maW5hbGl6ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNbZmluYWxpemVkXSA9IHRydWU7XG4gICAgICAgIHRoaXMuX2Vuc3VyZUNsYXNzUHJvcGVydGllcygpO1xuICAgICAgICAvLyBpbml0aWFsaXplIE1hcCBwb3B1bGF0ZWQgaW4gb2JzZXJ2ZWRBdHRyaWJ1dGVzXG4gICAgICAgIHRoaXMuX2F0dHJpYnV0ZVRvUHJvcGVydHlNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIG1ha2UgYW55IHByb3BlcnRpZXNcbiAgICAgICAgLy8gTm90ZSwgb25seSBwcm9jZXNzIFwib3duXCIgcHJvcGVydGllcyBzaW5jZSB0aGlzIGVsZW1lbnQgd2lsbCBpbmhlcml0XG4gICAgICAgIC8vIGFueSBwcm9wZXJ0aWVzIGRlZmluZWQgb24gdGhlIHN1cGVyQ2xhc3MsIGFuZCBmaW5hbGl6YXRpb24gZW5zdXJlc1xuICAgICAgICAvLyB0aGUgZW50aXJlIHByb3RvdHlwZSBjaGFpbiBpcyBmaW5hbGl6ZWQuXG4gICAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ3Byb3BlcnRpZXMnLCB0aGlzKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wZXJ0aWVzO1xuICAgICAgICAgICAgLy8gc3VwcG9ydCBzeW1ib2xzIGluIHByb3BlcnRpZXMgKElFMTEgZG9lcyBub3Qgc3VwcG9ydCB0aGlzKVxuICAgICAgICAgICAgY29uc3QgcHJvcEtleXMgPSBbXG4gICAgICAgICAgICAgICAgLi4uT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvcHMpLFxuICAgICAgICAgICAgICAgIC4uLih0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gJ2Z1bmN0aW9uJykgP1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHByb3BzKSA6XG4gICAgICAgICAgICAgICAgICAgIFtdXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgLy8gVGhpcyBmb3Ivb2YgaXMgb2sgYmVjYXVzZSBwcm9wS2V5cyBpcyBhbiBhcnJheVxuICAgICAgICAgICAgZm9yIChjb25zdCBwIG9mIHByb3BLZXlzKSB7XG4gICAgICAgICAgICAgICAgLy8gbm90ZSwgdXNlIG9mIGBhbnlgIGlzIGR1ZSB0byBUeXBlU3JpcHQgbGFjayBvZiBzdXBwb3J0IGZvciBzeW1ib2wgaW5cbiAgICAgICAgICAgICAgICAvLyBpbmRleCB0eXBlc1xuICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnkgbm8gc3ltYm9sIGluIGluZGV4XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVQcm9wZXJ0eShwLCBwcm9wc1twXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcHJvcGVydHkgbmFtZSBmb3IgdGhlIGdpdmVuIGF0dHJpYnV0ZSBgbmFtZWAuXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX2F0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eShuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IG9wdGlvbnMuYXR0cmlidXRlO1xuICAgICAgICByZXR1cm4gYXR0cmlidXRlID09PSBmYWxzZSA/XG4gICAgICAgICAgICB1bmRlZmluZWQgOlxuICAgICAgICAgICAgKHR5cGVvZiBhdHRyaWJ1dGUgPT09ICdzdHJpbmcnID9cbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGUgOlxuICAgICAgICAgICAgICAgICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgPyBuYW1lLnRvTG93ZXJDYXNlKCkgOiB1bmRlZmluZWQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGEgcHJvcGVydHkgc2hvdWxkIHJlcXVlc3QgYW4gdXBkYXRlLlxuICAgICAqIENhbGxlZCB3aGVuIGEgcHJvcGVydHkgdmFsdWUgaXMgc2V0IGFuZCB1c2VzIHRoZSBgaGFzQ2hhbmdlZGBcbiAgICAgKiBvcHRpb24gZm9yIHRoZSBwcm9wZXJ0eSBpZiBwcmVzZW50IG9yIGEgc3RyaWN0IGlkZW50aXR5IGNoZWNrLlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF92YWx1ZUhhc0NoYW5nZWQodmFsdWUsIG9sZCwgaGFzQ2hhbmdlZCA9IG5vdEVxdWFsKSB7XG4gICAgICAgIHJldHVybiBoYXNDaGFuZ2VkKHZhbHVlLCBvbGQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBmb3IgdGhlIGdpdmVuIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgKiBDYWxsZWQgdmlhIHRoZSBgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrYCBhbmQgdXNlcyB0aGUgcHJvcGVydHknc1xuICAgICAqIGBjb252ZXJ0ZXJgIG9yIGBjb252ZXJ0ZXIuZnJvbUF0dHJpYnV0ZWAgcHJvcGVydHkgb3B0aW9uLlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wcm9wZXJ0eVZhbHVlRnJvbUF0dHJpYnV0ZSh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB0eXBlID0gb3B0aW9ucy50eXBlO1xuICAgICAgICBjb25zdCBjb252ZXJ0ZXIgPSBvcHRpb25zLmNvbnZlcnRlciB8fCBkZWZhdWx0Q29udmVydGVyO1xuICAgICAgICBjb25zdCBmcm9tQXR0cmlidXRlID0gKHR5cGVvZiBjb252ZXJ0ZXIgPT09ICdmdW5jdGlvbicgPyBjb252ZXJ0ZXIgOiBjb252ZXJ0ZXIuZnJvbUF0dHJpYnV0ZSk7XG4gICAgICAgIHJldHVybiBmcm9tQXR0cmlidXRlID8gZnJvbUF0dHJpYnV0ZSh2YWx1ZSwgdHlwZSkgOiB2YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYXR0cmlidXRlIHZhbHVlIGZvciB0aGUgZ2l2ZW4gcHJvcGVydHkgdmFsdWUuIElmIHRoaXNcbiAgICAgKiByZXR1cm5zIHVuZGVmaW5lZCwgdGhlIHByb3BlcnR5IHdpbGwgKm5vdCogYmUgcmVmbGVjdGVkIHRvIGFuIGF0dHJpYnV0ZS5cbiAgICAgKiBJZiB0aGlzIHJldHVybnMgbnVsbCwgdGhlIGF0dHJpYnV0ZSB3aWxsIGJlIHJlbW92ZWQsIG90aGVyd2lzZSB0aGVcbiAgICAgKiBhdHRyaWJ1dGUgd2lsbCBiZSBzZXQgdG8gdGhlIHZhbHVlLlxuICAgICAqIFRoaXMgdXNlcyB0aGUgcHJvcGVydHkncyBgcmVmbGVjdGAgYW5kIGB0eXBlLnRvQXR0cmlidXRlYCBwcm9wZXJ0eSBvcHRpb25zLlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wcm9wZXJ0eVZhbHVlVG9BdHRyaWJ1dGUodmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMucmVmbGVjdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHlwZSA9IG9wdGlvbnMudHlwZTtcbiAgICAgICAgY29uc3QgY29udmVydGVyID0gb3B0aW9ucy5jb252ZXJ0ZXI7XG4gICAgICAgIGNvbnN0IHRvQXR0cmlidXRlID0gY29udmVydGVyICYmIGNvbnZlcnRlci50b0F0dHJpYnV0ZSB8fFxuICAgICAgICAgICAgZGVmYXVsdENvbnZlcnRlci50b0F0dHJpYnV0ZTtcbiAgICAgICAgcmV0dXJuIHRvQXR0cmlidXRlKHZhbHVlLCB0eXBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgZWxlbWVudCBpbml0aWFsaXphdGlvbi4gQnkgZGVmYXVsdCBjYXB0dXJlcyBhbnkgcHJlLXNldCB2YWx1ZXMgZm9yXG4gICAgICogcmVnaXN0ZXJlZCBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICAgIHRoaXMuX3NhdmVJbnN0YW5jZVByb3BlcnRpZXMoKTtcbiAgICAgICAgLy8gZW5zdXJlcyBmaXJzdCB1cGRhdGUgd2lsbCBiZSBjYXVnaHQgYnkgYW4gZWFybHkgYWNjZXNzIG9mXG4gICAgICAgIC8vIGB1cGRhdGVDb21wbGV0ZWBcbiAgICAgICAgdGhpcy5fcmVxdWVzdFVwZGF0ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaXhlcyBhbnkgcHJvcGVydGllcyBzZXQgb24gdGhlIGluc3RhbmNlIGJlZm9yZSB1cGdyYWRlIHRpbWUuXG4gICAgICogT3RoZXJ3aXNlIHRoZXNlIHdvdWxkIHNoYWRvdyB0aGUgYWNjZXNzb3IgYW5kIGJyZWFrIHRoZXNlIHByb3BlcnRpZXMuXG4gICAgICogVGhlIHByb3BlcnRpZXMgYXJlIHN0b3JlZCBpbiBhIE1hcCB3aGljaCBpcyBwbGF5ZWQgYmFjayBhZnRlciB0aGVcbiAgICAgKiBjb25zdHJ1Y3RvciBydW5zLiBOb3RlLCBvbiB2ZXJ5IG9sZCB2ZXJzaW9ucyBvZiBTYWZhcmkgKDw9OSkgb3IgQ2hyb21lXG4gICAgICogKDw9NDEpLCBwcm9wZXJ0aWVzIGNyZWF0ZWQgZm9yIG5hdGl2ZSBwbGF0Zm9ybSBwcm9wZXJ0aWVzIGxpa2UgKGBpZGAgb3JcbiAgICAgKiBgbmFtZWApIG1heSBub3QgaGF2ZSBkZWZhdWx0IHZhbHVlcyBzZXQgaW4gdGhlIGVsZW1lbnQgY29uc3RydWN0b3IuIE9uXG4gICAgICogdGhlc2UgYnJvd3NlcnMgbmF0aXZlIHByb3BlcnRpZXMgYXBwZWFyIG9uIGluc3RhbmNlcyBhbmQgdGhlcmVmb3JlIHRoZWlyXG4gICAgICogZGVmYXVsdCB2YWx1ZSB3aWxsIG92ZXJ3cml0ZSBhbnkgZWxlbWVudCBkZWZhdWx0IChlLmcuIGlmIHRoZSBlbGVtZW50IHNldHNcbiAgICAgKiB0aGlzLmlkID0gJ2lkJyBpbiB0aGUgY29uc3RydWN0b3IsIHRoZSAnaWQnIHdpbGwgYmVjb21lICcnIHNpbmNlIHRoaXMgaXNcbiAgICAgKiB0aGUgbmF0aXZlIHBsYXRmb3JtIGRlZmF1bHQpLlxuICAgICAqL1xuICAgIF9zYXZlSW5zdGFuY2VQcm9wZXJ0aWVzKCkge1xuICAgICAgICAvLyBVc2UgZm9yRWFjaCBzbyB0aGlzIHdvcmtzIGV2ZW4gaWYgZm9yL29mIGxvb3BzIGFyZSBjb21waWxlZCB0byBmb3IgbG9vcHNcbiAgICAgICAgLy8gZXhwZWN0aW5nIGFycmF5c1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yXG4gICAgICAgICAgICAuX2NsYXNzUHJvcGVydGllcy5mb3JFYWNoKChfdiwgcCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkocCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXNbcF07XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXNbcF07XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2VQcm9wZXJ0aWVzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMuc2V0KHAsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgcHJldmlvdXNseSBzYXZlZCBpbnN0YW5jZSBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIF9hcHBseUluc3RhbmNlUHJvcGVydGllcygpIHtcbiAgICAgICAgLy8gVXNlIGZvckVhY2ggc28gdGhpcyB3b3JrcyBldmVuIGlmIGZvci9vZiBsb29wcyBhcmUgY29tcGlsZWQgdG8gZm9yIGxvb3BzXG4gICAgICAgIC8vIGV4cGVjdGluZyBhcnJheXNcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuICAgICAgICB0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMuZm9yRWFjaCgodiwgcCkgPT4gdGhpc1twXSA9IHYpO1xuICAgICAgICB0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAvLyBFbnN1cmUgZmlyc3QgY29ubmVjdGlvbiBjb21wbGV0ZXMgYW4gdXBkYXRlLiBVcGRhdGVzIGNhbm5vdCBjb21wbGV0ZVxuICAgICAgICAvLyBiZWZvcmUgY29ubmVjdGlvbi5cbiAgICAgICAgdGhpcy5lbmFibGVVcGRhdGluZygpO1xuICAgIH1cbiAgICBlbmFibGVVcGRhdGluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuX2VuYWJsZVVwZGF0aW5nUmVzb2x2ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5fZW5hYmxlVXBkYXRpbmdSZXNvbHZlcigpO1xuICAgICAgICAgICAgdGhpcy5fZW5hYmxlVXBkYXRpbmdSZXNvbHZlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbGxvd3MgZm9yIGBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpYCBpbiBleHRlbnNpb25zIHdoaWxlXG4gICAgICogcmVzZXJ2aW5nIHRoZSBwb3NzaWJpbGl0eSBvZiBtYWtpbmcgbm9uLWJyZWFraW5nIGZlYXR1cmUgYWRkaXRpb25zXG4gICAgICogd2hlbiBkaXNjb25uZWN0aW5nIGF0IHNvbWUgcG9pbnQgaW4gdGhlIGZ1dHVyZS5cbiAgICAgKi9cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3luY2hyb25pemVzIHByb3BlcnR5IHZhbHVlcyB3aGVuIGF0dHJpYnV0ZXMgY2hhbmdlLlxuICAgICAqL1xuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGQsIHZhbHVlKSB7XG4gICAgICAgIGlmIChvbGQgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9hdHRyaWJ1dGVUb1Byb3BlcnR5KG5hbWUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcHJvcGVydHlUb0F0dHJpYnV0ZShuYW1lLCB2YWx1ZSwgb3B0aW9ucyA9IGRlZmF1bHRQcm9wZXJ0eURlY2xhcmF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBjb25zdCBhdHRyID0gY3Rvci5fYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KG5hbWUsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoYXR0ciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyVmFsdWUgPSBjdG9yLl9wcm9wZXJ0eVZhbHVlVG9BdHRyaWJ1dGUodmFsdWUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgLy8gYW4gdW5kZWZpbmVkIHZhbHVlIGRvZXMgbm90IGNoYW5nZSB0aGUgYXR0cmlidXRlLlxuICAgICAgICAgICAgaWYgKGF0dHJWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVHJhY2sgaWYgdGhlIHByb3BlcnR5IGlzIGJlaW5nIHJlZmxlY3RlZCB0byBhdm9pZFxuICAgICAgICAgICAgLy8gc2V0dGluZyB0aGUgcHJvcGVydHkgYWdhaW4gdmlhIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgLiBOb3RlOlxuICAgICAgICAgICAgLy8gMS4gdGhpcyB0YWtlcyBhZHZhbnRhZ2Ugb2YgdGhlIGZhY3QgdGhhdCB0aGUgY2FsbGJhY2sgaXMgc3luY2hyb25vdXMuXG4gICAgICAgICAgICAvLyAyLiB3aWxsIGJlaGF2ZSBpbmNvcnJlY3RseSBpZiBtdWx0aXBsZSBhdHRyaWJ1dGVzIGFyZSBpbiB0aGUgcmVhY3Rpb25cbiAgICAgICAgICAgIC8vIHN0YWNrIGF0IHRpbWUgb2YgY2FsbGluZy4gSG93ZXZlciwgc2luY2Ugd2UgcHJvY2VzcyBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAvLyBpbiBgdXBkYXRlYCB0aGlzIHNob3VsZCBub3QgYmUgcG9zc2libGUgKG9yIGFuIGV4dHJlbWUgY29ybmVyIGNhc2VcbiAgICAgICAgICAgIC8vIHRoYXQgd2UnZCBsaWtlIHRvIGRpc2NvdmVyKS5cbiAgICAgICAgICAgIC8vIG1hcmsgc3RhdGUgcmVmbGVjdGluZ1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZSB8IFNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fQVRUUklCVVRFO1xuICAgICAgICAgICAgaWYgKGF0dHJWYWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbWFyayBzdGF0ZSBub3QgcmVmbGVjdGluZ1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZSAmIH5TVEFURV9JU19SRUZMRUNUSU5HX1RPX0FUVFJJQlVURTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfYXR0cmlidXRlVG9Qcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICAvLyBVc2UgdHJhY2tpbmcgaW5mbyB0byBhdm9pZCBkZXNlcmlhbGl6aW5nIGF0dHJpYnV0ZSB2YWx1ZSBpZiBpdCB3YXNcbiAgICAgICAgLy8ganVzdCBzZXQgZnJvbSBhIHByb3BlcnR5IHNldHRlci5cbiAgICAgICAgaWYgKHRoaXMuX3VwZGF0ZVN0YXRlICYgU1RBVEVfSVNfUkVGTEVDVElOR19UT19BVFRSSUJVVEUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgLy8gTm90ZSwgaGludCB0aGlzIGFzIGFuIGBBdHRyaWJ1dGVNYXBgIHNvIGNsb3N1cmUgY2xlYXJseSB1bmRlcnN0YW5kc1xuICAgICAgICAvLyB0aGUgdHlwZTsgaXQgaGFzIGlzc3VlcyB3aXRoIHRyYWNraW5nIHR5cGVzIHRocm91Z2ggc3RhdGljc1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tdW5uZWNlc3NhcnktdHlwZS1hc3NlcnRpb25cbiAgICAgICAgY29uc3QgcHJvcE5hbWUgPSBjdG9yLl9hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwLmdldChuYW1lKTtcbiAgICAgICAgaWYgKHByb3BOYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBjdG9yLmdldFByb3BlcnR5T3B0aW9ucyhwcm9wTmFtZSk7XG4gICAgICAgICAgICAvLyBtYXJrIHN0YXRlIHJlZmxlY3RpbmdcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUgfCBTVEFURV9JU19SRUZMRUNUSU5HX1RPX1BST1BFUlRZO1xuICAgICAgICAgICAgdGhpc1twcm9wTmFtZV0gPVxuICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcbiAgICAgICAgICAgICAgICBjdG9yLl9wcm9wZXJ0eVZhbHVlRnJvbUF0dHJpYnV0ZSh2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAvLyBtYXJrIHN0YXRlIG5vdCByZWZsZWN0aW5nXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlICYgflNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fUFJPUEVSVFk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBwcml2YXRlIHZlcnNpb24gb2YgYHJlcXVlc3RVcGRhdGVgIGRvZXMgbm90IGFjY2VzcyBvciByZXR1cm4gdGhlXG4gICAgICogYHVwZGF0ZUNvbXBsZXRlYCBwcm9taXNlLiBUaGlzIHByb21pc2UgY2FuIGJlIG92ZXJyaWRkZW4gYW5kIGlzIHRoZXJlZm9yZVxuICAgICAqIG5vdCBmcmVlIHRvIGFjY2Vzcy5cbiAgICAgKi9cbiAgICBfcmVxdWVzdFVwZGF0ZShuYW1lLCBvbGRWYWx1ZSkge1xuICAgICAgICBsZXQgc2hvdWxkUmVxdWVzdFVwZGF0ZSA9IHRydWU7XG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSBwcm9wZXJ0eSBrZXksIHBlcmZvcm0gcHJvcGVydHkgdXBkYXRlIHN0ZXBzLlxuICAgICAgICBpZiAobmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBjdG9yLmdldFByb3BlcnR5T3B0aW9ucyhuYW1lKTtcbiAgICAgICAgICAgIGlmIChjdG9yLl92YWx1ZUhhc0NoYW5nZWQodGhpc1tuYW1lXSwgb2xkVmFsdWUsIG9wdGlvbnMuaGFzQ2hhbmdlZCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2NoYW5nZWRQcm9wZXJ0aWVzLmhhcyhuYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jaGFuZ2VkUHJvcGVydGllcy5zZXQobmFtZSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBBZGQgdG8gcmVmbGVjdGluZyBwcm9wZXJ0aWVzIHNldC5cbiAgICAgICAgICAgICAgICAvLyBOb3RlLCBpdCdzIGltcG9ydGFudCB0aGF0IGV2ZXJ5IGNoYW5nZSBoYXMgYSBjaGFuY2UgdG8gYWRkIHRoZVxuICAgICAgICAgICAgICAgIC8vIHByb3BlcnR5IHRvIGBfcmVmbGVjdGluZ1Byb3BlcnRpZXNgLiBUaGlzIGVuc3VyZXMgc2V0dGluZ1xuICAgICAgICAgICAgICAgIC8vIGF0dHJpYnV0ZSArIHByb3BlcnR5IHJlZmxlY3RzIGNvcnJlY3RseS5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yZWZsZWN0ID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgICEodGhpcy5fdXBkYXRlU3RhdGUgJiBTVEFURV9JU19SRUZMRUNUSU5HX1RPX1BST1BFUlRZKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMuc2V0KG5hbWUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFib3J0IHRoZSByZXF1ZXN0IGlmIHRoZSBwcm9wZXJ0eSBzaG91bGQgbm90IGJlIGNvbnNpZGVyZWQgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICBzaG91bGRSZXF1ZXN0VXBkYXRlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9oYXNSZXF1ZXN0ZWRVcGRhdGUgJiYgc2hvdWxkUmVxdWVzdFVwZGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUHJvbWlzZSA9IHRoaXMuX2VucXVldWVVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0cyBhbiB1cGRhdGUgd2hpY2ggaXMgcHJvY2Vzc2VkIGFzeW5jaHJvbm91c2x5LiBUaGlzIHNob3VsZFxuICAgICAqIGJlIGNhbGxlZCB3aGVuIGFuIGVsZW1lbnQgc2hvdWxkIHVwZGF0ZSBiYXNlZCBvbiBzb21lIHN0YXRlIG5vdCB0cmlnZ2VyZWRcbiAgICAgKiBieSBzZXR0aW5nIGEgcHJvcGVydHkuIEluIHRoaXMgY2FzZSwgcGFzcyBubyBhcmd1bWVudHMuIEl0IHNob3VsZCBhbHNvIGJlXG4gICAgICogY2FsbGVkIHdoZW4gbWFudWFsbHkgaW1wbGVtZW50aW5nIGEgcHJvcGVydHkgc2V0dGVyLiBJbiB0aGlzIGNhc2UsIHBhc3MgdGhlXG4gICAgICogcHJvcGVydHkgYG5hbWVgIGFuZCBgb2xkVmFsdWVgIHRvIGVuc3VyZSB0aGF0IGFueSBjb25maWd1cmVkIHByb3BlcnR5XG4gICAgICogb3B0aW9ucyBhcmUgaG9ub3JlZC4gUmV0dXJucyB0aGUgYHVwZGF0ZUNvbXBsZXRlYCBQcm9taXNlIHdoaWNoIGlzIHJlc29sdmVkXG4gICAgICogd2hlbiB0aGUgdXBkYXRlIGNvbXBsZXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIHtQcm9wZXJ0eUtleX0gKG9wdGlvbmFsKSBuYW1lIG9mIHJlcXVlc3RpbmcgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0gb2xkVmFsdWUge2FueX0gKG9wdGlvbmFsKSBvbGQgdmFsdWUgb2YgcmVxdWVzdGluZyBwcm9wZXJ0eVxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBBIFByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSB1cGRhdGUgY29tcGxldGVzLlxuICAgICAqL1xuICAgIHJlcXVlc3RVcGRhdGUobmFtZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcmVxdWVzdFVwZGF0ZShuYW1lLCBvbGRWYWx1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUNvbXBsZXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHVwIHRoZSBlbGVtZW50IHRvIGFzeW5jaHJvbm91c2x5IHVwZGF0ZS5cbiAgICAgKi9cbiAgICBhc3luYyBfZW5xdWV1ZVVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZSB8IFNUQVRFX1VQREFURV9SRVFVRVNURUQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBFbnN1cmUgYW55IHByZXZpb3VzIHVwZGF0ZSBoYXMgcmVzb2x2ZWQgYmVmb3JlIHVwZGF0aW5nLlxuICAgICAgICAgICAgLy8gVGhpcyBgYXdhaXRgIGFsc28gZW5zdXJlcyB0aGF0IHByb3BlcnR5IGNoYW5nZXMgYXJlIGJhdGNoZWQuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl91cGRhdGVQcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBJZ25vcmUgYW55IHByZXZpb3VzIGVycm9ycy4gV2Ugb25seSBjYXJlIHRoYXQgdGhlIHByZXZpb3VzIGN5Y2xlIGlzXG4gICAgICAgICAgICAvLyBkb25lLiBBbnkgZXJyb3Igc2hvdWxkIGhhdmUgYmVlbiBoYW5kbGVkIGluIHRoZSBwcmV2aW91cyB1cGRhdGUuXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5wZXJmb3JtVXBkYXRlKCk7XG4gICAgICAgIC8vIElmIGBwZXJmb3JtVXBkYXRlYCByZXR1cm5zIGEgUHJvbWlzZSwgd2UgYXdhaXQgaXQuIFRoaXMgaXMgZG9uZSB0b1xuICAgICAgICAvLyBlbmFibGUgY29vcmRpbmF0aW5nIHVwZGF0ZXMgd2l0aCBhIHNjaGVkdWxlci4gTm90ZSwgdGhlIHJlc3VsdCBpc1xuICAgICAgICAvLyBjaGVja2VkIHRvIGF2b2lkIGRlbGF5aW5nIGFuIGFkZGl0aW9uYWwgbWljcm90YXNrIHVubGVzcyB3ZSBuZWVkIHRvLlxuICAgICAgICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGF3YWl0IHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXRoaXMuX2hhc1JlcXVlc3RlZFVwZGF0ZTtcbiAgICB9XG4gICAgZ2V0IF9oYXNSZXF1ZXN0ZWRVcGRhdGUoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fdXBkYXRlU3RhdGUgJiBTVEFURV9VUERBVEVfUkVRVUVTVEVEKTtcbiAgICB9XG4gICAgZ2V0IGhhc1VwZGF0ZWQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fdXBkYXRlU3RhdGUgJiBTVEFURV9IQVNfVVBEQVRFRCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGFuIGVsZW1lbnQgdXBkYXRlLiBOb3RlLCBpZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGR1cmluZyB0aGVcbiAgICAgKiB1cGRhdGUsIGBmaXJzdFVwZGF0ZWRgIGFuZCBgdXBkYXRlZGAgd2lsbCBub3QgYmUgY2FsbGVkLlxuICAgICAqXG4gICAgICogWW91IGNhbiBvdmVycmlkZSB0aGlzIG1ldGhvZCB0byBjaGFuZ2UgdGhlIHRpbWluZyBvZiB1cGRhdGVzLiBJZiB0aGlzXG4gICAgICogbWV0aG9kIGlzIG92ZXJyaWRkZW4sIGBzdXBlci5wZXJmb3JtVXBkYXRlKClgIG11c3QgYmUgY2FsbGVkLlxuICAgICAqXG4gICAgICogRm9yIGluc3RhbmNlLCB0byBzY2hlZHVsZSB1cGRhdGVzIHRvIG9jY3VyIGp1c3QgYmVmb3JlIHRoZSBuZXh0IGZyYW1lOlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogcHJvdGVjdGVkIGFzeW5jIHBlcmZvcm1VcGRhdGUoKTogUHJvbWlzZTx1bmtub3duPiB7XG4gICAgICogICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHJlc29sdmUoKSkpO1xuICAgICAqICAgc3VwZXIucGVyZm9ybVVwZGF0ZSgpO1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBwZXJmb3JtVXBkYXRlKCkge1xuICAgICAgICAvLyBNaXhpbiBpbnN0YW5jZSBwcm9wZXJ0aWVzIG9uY2UsIGlmIHRoZXkgZXhpc3QuXG4gICAgICAgIGlmICh0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuX2FwcGx5SW5zdGFuY2VQcm9wZXJ0aWVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNob3VsZFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgICBjb25zdCBjaGFuZ2VkUHJvcGVydGllcyA9IHRoaXMuX2NoYW5nZWRQcm9wZXJ0aWVzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2hvdWxkVXBkYXRlID0gdGhpcy5zaG91bGRVcGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX21hcmtVcGRhdGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIFByZXZlbnQgYGZpcnN0VXBkYXRlZGAgYW5kIGB1cGRhdGVkYCBmcm9tIHJ1bm5pbmcgd2hlbiB0aGVyZSdzIGFuXG4gICAgICAgICAgICAvLyB1cGRhdGUgZXhjZXB0aW9uLlxuICAgICAgICAgICAgc2hvdWxkVXBkYXRlID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBFbnN1cmUgZWxlbWVudCBjYW4gYWNjZXB0IGFkZGl0aW9uYWwgdXBkYXRlcyBhZnRlciBhbiBleGNlcHRpb24uXG4gICAgICAgICAgICB0aGlzLl9tYXJrVXBkYXRlZCgpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgICAgICAgICBpZiAoISh0aGlzLl91cGRhdGVTdGF0ZSAmIFNUQVRFX0hBU19VUERBVEVEKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUgfCBTVEFURV9IQVNfVVBEQVRFRDtcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9tYXJrVXBkYXRlZCgpIHtcbiAgICAgICAgdGhpcy5fY2hhbmdlZFByb3BlcnRpZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUgJiB+U1RBVEVfVVBEQVRFX1JFUVVFU1RFRDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBlbGVtZW50IGhhcyBjb21wbGV0ZWQgdXBkYXRpbmcuXG4gICAgICogVGhlIFByb21pc2UgdmFsdWUgaXMgYSBib29sZWFuIHRoYXQgaXMgYHRydWVgIGlmIHRoZSBlbGVtZW50IGNvbXBsZXRlZCB0aGVcbiAgICAgKiB1cGRhdGUgd2l0aG91dCB0cmlnZ2VyaW5nIGFub3RoZXIgdXBkYXRlLiBUaGUgUHJvbWlzZSByZXN1bHQgaXMgYGZhbHNlYCBpZlxuICAgICAqIGEgcHJvcGVydHkgd2FzIHNldCBpbnNpZGUgYHVwZGF0ZWQoKWAuIElmIHRoZSBQcm9taXNlIGlzIHJlamVjdGVkLCBhblxuICAgICAqIGV4Y2VwdGlvbiB3YXMgdGhyb3duIGR1cmluZyB0aGUgdXBkYXRlLlxuICAgICAqXG4gICAgICogVG8gYXdhaXQgYWRkaXRpb25hbCBhc3luY2hyb25vdXMgd29yaywgb3ZlcnJpZGUgdGhlIGBfZ2V0VXBkYXRlQ29tcGxldGVgXG4gICAgICogbWV0aG9kLiBGb3IgZXhhbXBsZSwgaXQgaXMgc29tZXRpbWVzIHVzZWZ1bCB0byBhd2FpdCBhIHJlbmRlcmVkIGVsZW1lbnRcbiAgICAgKiBiZWZvcmUgZnVsZmlsbGluZyB0aGlzIFByb21pc2UuIFRvIGRvIHRoaXMsIGZpcnN0IGF3YWl0XG4gICAgICogYHN1cGVyLl9nZXRVcGRhdGVDb21wbGV0ZSgpYCwgdGhlbiBhbnkgc3Vic2VxdWVudCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSByZXR1cm5zIGEgYm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGVcbiAgICAgKiB1cGRhdGUgcmVzb2x2ZWQgd2l0aG91dCB0cmlnZ2VyaW5nIGFub3RoZXIgdXBkYXRlLlxuICAgICAqL1xuICAgIGdldCB1cGRhdGVDb21wbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFVwZGF0ZUNvbXBsZXRlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIHBvaW50IGZvciB0aGUgYHVwZGF0ZUNvbXBsZXRlYCBwcm9taXNlLlxuICAgICAqXG4gICAgICogSXQgaXMgbm90IHNhZmUgdG8gb3ZlcnJpZGUgdGhlIGB1cGRhdGVDb21wbGV0ZWAgZ2V0dGVyIGRpcmVjdGx5IGR1ZSB0byBhXG4gICAgICogbGltaXRhdGlvbiBpbiBUeXBlU2NyaXB0IHdoaWNoIG1lYW5zIGl0IGlzIG5vdCBwb3NzaWJsZSB0byBjYWxsIGFcbiAgICAgKiBzdXBlcmNsYXNzIGdldHRlciAoZS5nLiBgc3VwZXIudXBkYXRlQ29tcGxldGUudGhlbiguLi4pYCkgd2hlbiB0aGUgdGFyZ2V0XG4gICAgICogbGFuZ3VhZ2UgaXMgRVM1IChodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzMzOCkuXG4gICAgICogVGhpcyBtZXRob2Qgc2hvdWxkIGJlIG92ZXJyaWRkZW4gaW5zdGVhZC4gRm9yIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiAgIGNsYXNzIE15RWxlbWVudCBleHRlbmRzIExpdEVsZW1lbnQge1xuICAgICAqICAgICBhc3luYyBfZ2V0VXBkYXRlQ29tcGxldGUoKSB7XG4gICAgICogICAgICAgYXdhaXQgc3VwZXIuX2dldFVwZGF0ZUNvbXBsZXRlKCk7XG4gICAgICogICAgICAgYXdhaXQgdGhpcy5fbXlDaGlsZC51cGRhdGVDb21wbGV0ZTtcbiAgICAgKiAgICAgfVxuICAgICAqICAgfVxuICAgICAqL1xuICAgIF9nZXRVcGRhdGVDb21wbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VwZGF0ZVByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnRyb2xzIHdoZXRoZXIgb3Igbm90IGB1cGRhdGVgIHNob3VsZCBiZSBjYWxsZWQgd2hlbiB0aGUgZWxlbWVudCByZXF1ZXN0c1xuICAgICAqIGFuIHVwZGF0ZS4gQnkgZGVmYXVsdCwgdGhpcyBtZXRob2QgYWx3YXlzIHJldHVybnMgYHRydWVgLCBidXQgdGhpcyBjYW4gYmVcbiAgICAgKiBjdXN0b21pemVkIHRvIGNvbnRyb2wgd2hlbiB0byB1cGRhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gX2NoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAgICovXG4gICAgc2hvdWxkVXBkYXRlKF9jaGFuZ2VkUHJvcGVydGllcykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgZWxlbWVudC4gVGhpcyBtZXRob2QgcmVmbGVjdHMgcHJvcGVydHkgdmFsdWVzIHRvIGF0dHJpYnV0ZXMuXG4gICAgICogSXQgY2FuIGJlIG92ZXJyaWRkZW4gdG8gcmVuZGVyIGFuZCBrZWVwIHVwZGF0ZWQgZWxlbWVudCBET00uXG4gICAgICogU2V0dGluZyBwcm9wZXJ0aWVzIGluc2lkZSB0aGlzIG1ldGhvZCB3aWxsICpub3QqIHRyaWdnZXJcbiAgICAgKiBhbm90aGVyIHVwZGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICAgKi9cbiAgICB1cGRhdGUoX2NoYW5nZWRQcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcy5zaXplID4gMCkge1xuICAgICAgICAgICAgLy8gVXNlIGZvckVhY2ggc28gdGhpcyB3b3JrcyBldmVuIGlmIGZvci9vZiBsb29wcyBhcmUgY29tcGlsZWQgdG8gZm9yXG4gICAgICAgICAgICAvLyBsb29wcyBleHBlY3RpbmcgYXJyYXlzXG4gICAgICAgICAgICB0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcy5mb3JFYWNoKCh2LCBrKSA9PiB0aGlzLl9wcm9wZXJ0eVRvQXR0cmlidXRlKGssIHRoaXNba10sIHYpKTtcbiAgICAgICAgICAgIHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21hcmtVcGRhdGVkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZWQgd2hlbmV2ZXIgdGhlIGVsZW1lbnQgaXMgdXBkYXRlZC4gSW1wbGVtZW50IHRvIHBlcmZvcm1cbiAgICAgKiBwb3N0LXVwZGF0aW5nIHRhc2tzIHZpYSBET00gQVBJcywgZm9yIGV4YW1wbGUsIGZvY3VzaW5nIGFuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlIHRoaXMgbWV0aG9kIHdpbGwgdHJpZ2dlciB0aGUgZWxlbWVudCB0byB1cGRhdGVcbiAgICAgKiBhZ2FpbiBhZnRlciB0aGlzIHVwZGF0ZSBjeWNsZSBjb21wbGV0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gX2NoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAgICovXG4gICAgdXBkYXRlZChfY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlZCB3aGVuIHRoZSBlbGVtZW50IGlzIGZpcnN0IHVwZGF0ZWQuIEltcGxlbWVudCB0byBwZXJmb3JtIG9uZSB0aW1lXG4gICAgICogd29yayBvbiB0aGUgZWxlbWVudCBhZnRlciB1cGRhdGUuXG4gICAgICpcbiAgICAgKiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlIHRoaXMgbWV0aG9kIHdpbGwgdHJpZ2dlciB0aGUgZWxlbWVudCB0byB1cGRhdGVcbiAgICAgKiBhZ2FpbiBhZnRlciB0aGlzIHVwZGF0ZSBjeWNsZSBjb21wbGV0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gX2NoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAgICovXG4gICAgZmlyc3RVcGRhdGVkKF9jaGFuZ2VkUHJvcGVydGllcykge1xuICAgIH1cbn1cbl9hID0gZmluYWxpemVkO1xuLyoqXG4gKiBNYXJrcyBjbGFzcyBhcyBoYXZpbmcgZmluaXNoZWQgY3JlYXRpbmcgcHJvcGVydGllcy5cbiAqL1xuVXBkYXRpbmdFbGVtZW50W19hXSA9IHRydWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGRhdGluZy1lbGVtZW50LmpzLm1hcCIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxOSBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlXG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dCBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhc1xucGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28gc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudFxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuZXhwb3J0IGNvbnN0IHN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cyA9ICgnYWRvcHRlZFN0eWxlU2hlZXRzJyBpbiBEb2N1bWVudC5wcm90b3R5cGUpICYmXG4gICAgKCdyZXBsYWNlJyBpbiBDU1NTdHlsZVNoZWV0LnByb3RvdHlwZSk7XG5jb25zdCBjb25zdHJ1Y3Rpb25Ub2tlbiA9IFN5bWJvbCgpO1xuZXhwb3J0IGNsYXNzIENTU1Jlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoY3NzVGV4dCwgc2FmZVRva2VuKSB7XG4gICAgICAgIGlmIChzYWZlVG9rZW4gIT09IGNvbnN0cnVjdGlvblRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NTU1Jlc3VsdCBpcyBub3QgY29uc3RydWN0YWJsZS4gVXNlIGB1bnNhZmVDU1NgIG9yIGBjc3NgIGluc3RlYWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jc3NUZXh0ID0gY3NzVGV4dDtcbiAgICB9XG4gICAgLy8gTm90ZSwgdGhpcyBpcyBhIGdldHRlciBzbyB0aGF0IGl0J3MgbGF6eS4gSW4gcHJhY3RpY2UsIHRoaXMgbWVhbnNcbiAgICAvLyBzdHlsZXNoZWV0cyBhcmUgbm90IGNyZWF0ZWQgdW50aWwgdGhlIGZpcnN0IGVsZW1lbnQgaW5zdGFuY2UgaXMgbWFkZS5cbiAgICBnZXQgc3R5bGVTaGVldCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3N0eWxlU2hlZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gTm90ZSwgaWYgYGFkb3B0ZWRTdHlsZVNoZWV0c2AgaXMgc3VwcG9ydGVkIHRoZW4gd2UgYXNzdW1lIENTU1N0eWxlU2hlZXRcbiAgICAgICAgICAgIC8vIGlzIGNvbnN0cnVjdGFibGUuXG4gICAgICAgICAgICBpZiAoc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3R5bGVTaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3R5bGVTaGVldC5yZXBsYWNlU3luYyh0aGlzLmNzc1RleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3R5bGVTaGVldCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0eWxlU2hlZXQ7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jc3NUZXh0O1xuICAgIH1cbn1cbi8qKlxuICogV3JhcCBhIHZhbHVlIGZvciBpbnRlcnBvbGF0aW9uIGluIGEgY3NzIHRhZ2dlZCB0ZW1wbGF0ZSBsaXRlcmFsLlxuICpcbiAqIFRoaXMgaXMgdW5zYWZlIGJlY2F1c2UgdW50cnVzdGVkIENTUyB0ZXh0IGNhbiBiZSB1c2VkIHRvIHBob25lIGhvbWVcbiAqIG9yIGV4ZmlsdHJhdGUgZGF0YSB0byBhbiBhdHRhY2tlciBjb250cm9sbGVkIHNpdGUuIFRha2UgY2FyZSB0byBvbmx5IHVzZVxuICogdGhpcyB3aXRoIHRydXN0ZWQgaW5wdXQuXG4gKi9cbmV4cG9ydCBjb25zdCB1bnNhZmVDU1MgPSAodmFsdWUpID0+IHtcbiAgICByZXR1cm4gbmV3IENTU1Jlc3VsdChTdHJpbmcodmFsdWUpLCBjb25zdHJ1Y3Rpb25Ub2tlbik7XG59O1xuY29uc3QgdGV4dEZyb21DU1NSZXN1bHQgPSAodmFsdWUpID0+IHtcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBDU1NSZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmNzc1RleHQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWYWx1ZSBwYXNzZWQgdG8gJ2NzcycgZnVuY3Rpb24gbXVzdCBiZSBhICdjc3MnIGZ1bmN0aW9uIHJlc3VsdDogJHt2YWx1ZX0uIFVzZSAndW5zYWZlQ1NTJyB0byBwYXNzIG5vbi1saXRlcmFsIHZhbHVlcywgYnV0XG4gICAgICAgICAgICB0YWtlIGNhcmUgdG8gZW5zdXJlIHBhZ2Ugc2VjdXJpdHkuYCk7XG4gICAgfVxufTtcbi8qKlxuICogVGVtcGxhdGUgdGFnIHdoaWNoIHdoaWNoIGNhbiBiZSB1c2VkIHdpdGggTGl0RWxlbWVudCdzIGBzdHlsZWAgcHJvcGVydHkgdG9cbiAqIHNldCBlbGVtZW50IHN0eWxlcy4gRm9yIHNlY3VyaXR5IHJlYXNvbnMsIG9ubHkgbGl0ZXJhbCBzdHJpbmcgdmFsdWVzIG1heSBiZVxuICogdXNlZC4gVG8gaW5jb3Jwb3JhdGUgbm9uLWxpdGVyYWwgdmFsdWVzIGB1bnNhZmVDU1NgIG1heSBiZSB1c2VkIGluc2lkZSBhXG4gKiB0ZW1wbGF0ZSBzdHJpbmcgcGFydC5cbiAqL1xuZXhwb3J0IGNvbnN0IGNzcyA9IChzdHJpbmdzLCAuLi52YWx1ZXMpID0+IHtcbiAgICBjb25zdCBjc3NUZXh0ID0gdmFsdWVzLnJlZHVjZSgoYWNjLCB2LCBpZHgpID0+IGFjYyArIHRleHRGcm9tQ1NTUmVzdWx0KHYpICsgc3RyaW5nc1tpZHggKyAxXSwgc3RyaW5nc1swXSk7XG4gICAgcmV0dXJuIG5ldyBDU1NSZXN1bHQoY3NzVGV4dCwgY29uc3RydWN0aW9uVG9rZW4pO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNzcy10YWcuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSAnbGl0LWh0bWwvbGliL3NoYWR5LXJlbmRlci5qcyc7XG5pbXBvcnQgeyBVcGRhdGluZ0VsZW1lbnQgfSBmcm9tICcuL2xpYi91cGRhdGluZy1lbGVtZW50LmpzJztcbmV4cG9ydCAqIGZyb20gJy4vbGliL3VwZGF0aW5nLWVsZW1lbnQuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvZGVjb3JhdG9ycy5qcyc7XG5leHBvcnQgeyBodG1sLCBzdmcsIFRlbXBsYXRlUmVzdWx0LCBTVkdUZW1wbGF0ZVJlc3VsdCB9IGZyb20gJ2xpdC1odG1sL2xpdC1odG1sLmpzJztcbmltcG9ydCB7IHN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cyB9IGZyb20gJy4vbGliL2Nzcy10YWcuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvY3NzLXRhZy5qcyc7XG4vLyBJTVBPUlRBTlQ6IGRvIG5vdCBjaGFuZ2UgdGhlIHByb3BlcnR5IG5hbWUgb3IgdGhlIGFzc2lnbm1lbnQgZXhwcmVzc2lvbi5cbi8vIFRoaXMgbGluZSB3aWxsIGJlIHVzZWQgaW4gcmVnZXhlcyB0byBzZWFyY2ggZm9yIExpdEVsZW1lbnQgdXNhZ2UuXG4vLyBUT0RPKGp1c3RpbmZhZ25hbmkpOiBpbmplY3QgdmVyc2lvbiBudW1iZXIgYXQgYnVpbGQgdGltZVxuKHdpbmRvd1snbGl0RWxlbWVudFZlcnNpb25zJ10gfHwgKHdpbmRvd1snbGl0RWxlbWVudFZlcnNpb25zJ10gPSBbXSkpXG4gICAgLnB1c2goJzIuMy4xJyk7XG4vKipcbiAqIFNlbnRpbmFsIHZhbHVlIHVzZWQgdG8gYXZvaWQgY2FsbGluZyBsaXQtaHRtbCdzIHJlbmRlciBmdW5jdGlvbiB3aGVuXG4gKiBzdWJjbGFzc2VzIGRvIG5vdCBpbXBsZW1lbnQgYHJlbmRlcmBcbiAqL1xuY29uc3QgcmVuZGVyTm90SW1wbGVtZW50ZWQgPSB7fTtcbmV4cG9ydCBjbGFzcyBMaXRFbGVtZW50IGV4dGVuZHMgVXBkYXRpbmdFbGVtZW50IHtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGFycmF5IG9mIHN0eWxlcyB0byBhcHBseSB0byB0aGUgZWxlbWVudC5cbiAgICAgKiBPdmVycmlkZSB0aGlzIG1ldGhvZCB0byBpbnRlZ3JhdGUgaW50byBhIHN0eWxlIG1hbmFnZW1lbnQgc3lzdGVtLlxuICAgICAqXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0U3R5bGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZXM7XG4gICAgfVxuICAgIC8qKiBAbm9jb2xsYXBzZSAqL1xuICAgIHN0YXRpYyBfZ2V0VW5pcXVlU3R5bGVzKCkge1xuICAgICAgICAvLyBPbmx5IGdhdGhlciBzdHlsZXMgb25jZSBwZXIgY2xhc3NcbiAgICAgICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnX3N0eWxlcycsIHRoaXMpKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRha2UgY2FyZSBub3QgdG8gY2FsbCBgdGhpcy5nZXRTdHlsZXMoKWAgbXVsdGlwbGUgdGltZXMgc2luY2UgdGhpc1xuICAgICAgICAvLyBnZW5lcmF0ZXMgbmV3IENTU1Jlc3VsdHMgZWFjaCB0aW1lLlxuICAgICAgICAvLyBUT0RPKHNvcnZlbGwpOiBTaW5jZSB3ZSBkbyBub3QgY2FjaGUgQ1NTUmVzdWx0cyBieSBpbnB1dCwgYW55XG4gICAgICAgIC8vIHNoYXJlZCBzdHlsZXMgd2lsbCBnZW5lcmF0ZSBuZXcgc3R5bGVzaGVldCBvYmplY3RzLCB3aGljaCBpcyB3YXN0ZWZ1bC5cbiAgICAgICAgLy8gVGhpcyBzaG91bGQgYmUgYWRkcmVzc2VkIHdoZW4gYSBicm93c2VyIHNoaXBzIGNvbnN0cnVjdGFibGVcbiAgICAgICAgLy8gc3R5bGVzaGVldHMuXG4gICAgICAgIGNvbnN0IHVzZXJTdHlsZXMgPSB0aGlzLmdldFN0eWxlcygpO1xuICAgICAgICBpZiAodXNlclN0eWxlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9zdHlsZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHVzZXJTdHlsZXMpKSB7XG4gICAgICAgICAgICAvLyBEZS1kdXBsaWNhdGUgc3R5bGVzIHByZXNlcnZpbmcgdGhlIF9sYXN0XyBpbnN0YW5jZSBpbiB0aGUgc2V0LlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiB0byBhdm9pZCBkdXBsaWNhdGVkIHN0eWxlcyB0aGF0IGNhblxuICAgICAgICAgICAgLy8gb2NjdXIgZXNwZWNpYWxseSB3aGVuIGNvbXBvc2luZyB2aWEgc3ViY2xhc3NpbmcuXG4gICAgICAgICAgICAvLyBUaGUgbGFzdCBpdGVtIGlzIGtlcHQgdG8gdHJ5IHRvIHByZXNlcnZlIHRoZSBjYXNjYWRlIG9yZGVyIHdpdGggdGhlXG4gICAgICAgICAgICAvLyBhc3N1bXB0aW9uIHRoYXQgaXQncyBtb3N0IGltcG9ydGFudCB0aGF0IGxhc3QgYWRkZWQgc3R5bGVzIG92ZXJyaWRlXG4gICAgICAgICAgICAvLyBwcmV2aW91cyBzdHlsZXMuXG4gICAgICAgICAgICBjb25zdCBhZGRTdHlsZXMgPSAoc3R5bGVzLCBzZXQpID0+IHN0eWxlcy5yZWR1Y2VSaWdodCgoc2V0LCBzKSA9PiBcbiAgICAgICAgICAgIC8vIE5vdGU6IE9uIElFIHNldC5hZGQoKSBkb2VzIG5vdCByZXR1cm4gdGhlIHNldFxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShzKSA/IGFkZFN0eWxlcyhzLCBzZXQpIDogKHNldC5hZGQocyksIHNldCksIHNldCk7XG4gICAgICAgICAgICAvLyBBcnJheS5mcm9tIGRvZXMgbm90IHdvcmsgb24gU2V0IGluIElFLCBvdGhlcndpc2UgcmV0dXJuXG4gICAgICAgICAgICAvLyBBcnJheS5mcm9tKGFkZFN0eWxlcyh1c2VyU3R5bGVzLCBuZXcgU2V0PENTU1Jlc3VsdD4oKSkpLnJldmVyc2UoKVxuICAgICAgICAgICAgY29uc3Qgc2V0ID0gYWRkU3R5bGVzKHVzZXJTdHlsZXMsIG5ldyBTZXQoKSk7XG4gICAgICAgICAgICBjb25zdCBzdHlsZXMgPSBbXTtcbiAgICAgICAgICAgIHNldC5mb3JFYWNoKCh2KSA9PiBzdHlsZXMudW5zaGlmdCh2KSk7XG4gICAgICAgICAgICB0aGlzLl9zdHlsZXMgPSBzdHlsZXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zdHlsZXMgPSBbdXNlclN0eWxlc107XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgZWxlbWVudCBpbml0aWFsaXphdGlvbi4gQnkgZGVmYXVsdCB0aGlzIGNhbGxzIGBjcmVhdGVSZW5kZXJSb290YFxuICAgICAqIHRvIGNyZWF0ZSB0aGUgZWxlbWVudCBgcmVuZGVyUm9vdGAgbm9kZSBhbmQgY2FwdHVyZXMgYW55IHByZS1zZXQgdmFsdWVzIGZvclxuICAgICAqIHJlZ2lzdGVyZWQgcHJvcGVydGllcy5cbiAgICAgKi9cbiAgICBpbml0aWFsaXplKCkge1xuICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XG4gICAgICAgIHRoaXMuY29uc3RydWN0b3IuX2dldFVuaXF1ZVN0eWxlcygpO1xuICAgICAgICB0aGlzLnJlbmRlclJvb3QgPVxuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZW5kZXJSb290KCk7XG4gICAgICAgIC8vIE5vdGUsIGlmIHJlbmRlclJvb3QgaXMgbm90IGEgc2hhZG93Um9vdCwgc3R5bGVzIHdvdWxkL2NvdWxkIGFwcGx5IHRvIHRoZVxuICAgICAgICAvLyBlbGVtZW50J3MgZ2V0Um9vdE5vZGUoKS4gV2hpbGUgdGhpcyBjb3VsZCBiZSBkb25lLCB3ZSdyZSBjaG9vc2luZyBub3QgdG9cbiAgICAgICAgLy8gc3VwcG9ydCB0aGlzIG5vdyBzaW5jZSBpdCB3b3VsZCByZXF1aXJlIGRpZmZlcmVudCBsb2dpYyBhcm91bmQgZGUtZHVwaW5nLlxuICAgICAgICBpZiAod2luZG93LlNoYWRvd1Jvb3QgJiYgdGhpcy5yZW5kZXJSb290IGluc3RhbmNlb2Ygd2luZG93LlNoYWRvd1Jvb3QpIHtcbiAgICAgICAgICAgIHRoaXMuYWRvcHRTdHlsZXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBub2RlIGludG8gd2hpY2ggdGhlIGVsZW1lbnQgc2hvdWxkIHJlbmRlciBhbmQgYnkgZGVmYXVsdFxuICAgICAqIGNyZWF0ZXMgYW5kIHJldHVybnMgYW4gb3BlbiBzaGFkb3dSb290LiBJbXBsZW1lbnQgdG8gY3VzdG9taXplIHdoZXJlIHRoZVxuICAgICAqIGVsZW1lbnQncyBET00gaXMgcmVuZGVyZWQuIEZvciBleGFtcGxlLCB0byByZW5kZXIgaW50byB0aGUgZWxlbWVudCdzXG4gICAgICogY2hpbGROb2RlcywgcmV0dXJuIGB0aGlzYC5cbiAgICAgKiBAcmV0dXJucyB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBSZXR1cm5zIGEgbm9kZSBpbnRvIHdoaWNoIHRvIHJlbmRlci5cbiAgICAgKi9cbiAgICBjcmVhdGVSZW5kZXJSb290KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgc3R5bGluZyB0byB0aGUgZWxlbWVudCBzaGFkb3dSb290IHVzaW5nIHRoZSBgc3RhdGljIGdldCBzdHlsZXNgXG4gICAgICogcHJvcGVydHkuIFN0eWxpbmcgd2lsbCBhcHBseSB1c2luZyBgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHNgIHdoZXJlXG4gICAgICogYXZhaWxhYmxlIGFuZCB3aWxsIGZhbGxiYWNrIG90aGVyd2lzZS4gV2hlbiBTaGFkb3cgRE9NIGlzIHBvbHlmaWxsZWQsXG4gICAgICogU2hhZHlDU1Mgc2NvcGVzIHN0eWxlcyBhbmQgYWRkcyB0aGVtIHRvIHRoZSBkb2N1bWVudC4gV2hlbiBTaGFkb3cgRE9NXG4gICAgICogaXMgYXZhaWxhYmxlIGJ1dCBgYWRvcHRlZFN0eWxlU2hlZXRzYCBpcyBub3QsIHN0eWxlcyBhcmUgYXBwZW5kZWQgdG8gdGhlXG4gICAgICogZW5kIG9mIHRoZSBgc2hhZG93Um9vdGAgdG8gW21pbWljIHNwZWNcbiAgICAgKiBiZWhhdmlvcl0oaHR0cHM6Ly93aWNnLmdpdGh1Yi5pby9jb25zdHJ1Y3Qtc3R5bGVzaGVldHMvI3VzaW5nLWNvbnN0cnVjdGVkLXN0eWxlc2hlZXRzKS5cbiAgICAgKi9cbiAgICBhZG9wdFN0eWxlcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGVzID0gdGhpcy5jb25zdHJ1Y3Rvci5fc3R5bGVzO1xuICAgICAgICBpZiAoc3R5bGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZXJlIGFyZSB0aHJlZSBzZXBhcmF0ZSBjYXNlcyBoZXJlIGJhc2VkIG9uIFNoYWRvdyBET00gc3VwcG9ydC5cbiAgICAgICAgLy8gKDEpIHNoYWRvd1Jvb3QgcG9seWZpbGxlZDogdXNlIFNoYWR5Q1NTXG4gICAgICAgIC8vICgyKSBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyBhdmFpbGFibGU6IHVzZSBpdC5cbiAgICAgICAgLy8gKDMpIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzIHBvbHlmaWxsZWQ6IGFwcGVuZCBzdHlsZXMgYWZ0ZXJcbiAgICAgICAgLy8gcmVuZGVyaW5nXG4gICAgICAgIGlmICh3aW5kb3cuU2hhZHlDU1MgIT09IHVuZGVmaW5lZCAmJiAhd2luZG93LlNoYWR5Q1NTLm5hdGl2ZVNoYWRvdykge1xuICAgICAgICAgICAgd2luZG93LlNoYWR5Q1NTLlNjb3BpbmdTaGltLnByZXBhcmVBZG9wdGVkQ3NzVGV4dChzdHlsZXMubWFwKChzKSA9PiBzLmNzc1RleHQpLCB0aGlzLmxvY2FsTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclJvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID1cbiAgICAgICAgICAgICAgICBzdHlsZXMubWFwKChzKSA9PiBzLnN0eWxlU2hlZXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gVGhpcyBtdXN0IGJlIGRvbmUgYWZ0ZXIgcmVuZGVyaW5nIHNvIHRoZSBhY3R1YWwgc3R5bGUgaW5zZXJ0aW9uIGlzIGRvbmVcbiAgICAgICAgICAgIC8vIGluIGB1cGRhdGVgLlxuICAgICAgICAgICAgdGhpcy5fbmVlZHNTaGltQWRvcHRlZFN0eWxlU2hlZXRzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgLy8gTm90ZSwgZmlyc3QgdXBkYXRlL3JlbmRlciBoYW5kbGVzIHN0eWxlRWxlbWVudCBzbyB3ZSBvbmx5IGNhbGwgdGhpcyBpZlxuICAgICAgICAvLyBjb25uZWN0ZWQgYWZ0ZXIgZmlyc3QgdXBkYXRlLlxuICAgICAgICBpZiAodGhpcy5oYXNVcGRhdGVkICYmIHdpbmRvdy5TaGFkeUNTUyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3aW5kb3cuU2hhZHlDU1Muc3R5bGVFbGVtZW50KHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGVsZW1lbnQuIFRoaXMgbWV0aG9kIHJlZmxlY3RzIHByb3BlcnR5IHZhbHVlcyB0byBhdHRyaWJ1dGVzXG4gICAgICogYW5kIGNhbGxzIGByZW5kZXJgIHRvIHJlbmRlciBET00gdmlhIGxpdC1odG1sLiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlXG4gICAgICogdGhpcyBtZXRob2Qgd2lsbCAqbm90KiB0cmlnZ2VyIGFub3RoZXIgdXBkYXRlLlxuICAgICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICAgKi9cbiAgICB1cGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgICAgLy8gU2V0dGluZyBwcm9wZXJ0aWVzIGluIGByZW5kZXJgIHNob3VsZCBub3QgdHJpZ2dlciBhbiB1cGRhdGUuIFNpbmNlXG4gICAgICAgIC8vIHVwZGF0ZXMgYXJlIGFsbG93ZWQgYWZ0ZXIgc3VwZXIudXBkYXRlLCBpdCdzIGltcG9ydGFudCB0byBjYWxsIGByZW5kZXJgXG4gICAgICAgIC8vIGJlZm9yZSB0aGF0LlxuICAgICAgICBjb25zdCB0ZW1wbGF0ZVJlc3VsdCA9IHRoaXMucmVuZGVyKCk7XG4gICAgICAgIHN1cGVyLnVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgIC8vIElmIHJlbmRlciBpcyBub3QgaW1wbGVtZW50ZWQgYnkgdGhlIGNvbXBvbmVudCwgZG9uJ3QgY2FsbCBsaXQtaHRtbCByZW5kZXJcbiAgICAgICAgaWYgKHRlbXBsYXRlUmVzdWx0ICE9PSByZW5kZXJOb3RJbXBsZW1lbnRlZCkge1xuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgIC5yZW5kZXIodGVtcGxhdGVSZXN1bHQsIHRoaXMucmVuZGVyUm9vdCwgeyBzY29wZU5hbWU6IHRoaXMubG9jYWxOYW1lLCBldmVudENvbnRleHQ6IHRoaXMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiBuYXRpdmUgU2hhZG93IERPTSBpcyB1c2VkIGJ1dCBhZG9wdGVkU3R5bGVzIGFyZSBub3Qgc3VwcG9ydGVkLFxuICAgICAgICAvLyBpbnNlcnQgc3R5bGluZyBhZnRlciByZW5kZXJpbmcgdG8gZW5zdXJlIGFkb3B0ZWRTdHlsZXMgaGF2ZSBoaWdoZXN0XG4gICAgICAgIC8vIHByaW9yaXR5LlxuICAgICAgICBpZiAodGhpcy5fbmVlZHNTaGltQWRvcHRlZFN0eWxlU2hlZXRzKSB7XG4gICAgICAgICAgICB0aGlzLl9uZWVkc1NoaW1BZG9wdGVkU3R5bGVTaGVldHMgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IuX3N0eWxlcy5mb3JFYWNoKChzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gcy5jc3NUZXh0O1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUm9vdC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIG9uIGVhY2ggdXBkYXRlIHRvIHBlcmZvcm0gcmVuZGVyaW5nIHRhc2tzLiBUaGlzIG1ldGhvZCBtYXkgcmV0dXJuXG4gICAgICogYW55IHZhbHVlIHJlbmRlcmFibGUgYnkgbGl0LWh0bWwncyBOb2RlUGFydCAtIHR5cGljYWxseSBhIFRlbXBsYXRlUmVzdWx0LlxuICAgICAqIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGUgdGhpcyBtZXRob2Qgd2lsbCAqbm90KiB0cmlnZ2VyIHRoZSBlbGVtZW50IHRvXG4gICAgICogdXBkYXRlLlxuICAgICAqL1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIHJlbmRlck5vdEltcGxlbWVudGVkO1xuICAgIH1cbn1cbi8qKlxuICogRW5zdXJlIHRoaXMgY2xhc3MgaXMgbWFya2VkIGFzIGBmaW5hbGl6ZWRgIGFzIGFuIG9wdGltaXphdGlvbiBlbnN1cmluZ1xuICogaXQgd2lsbCBub3QgbmVlZGxlc3NseSB0cnkgdG8gYGZpbmFsaXplYC5cbiAqXG4gKiBOb3RlIHRoaXMgcHJvcGVydHkgbmFtZSBpcyBhIHN0cmluZyB0byBwcmV2ZW50IGJyZWFraW5nIENsb3N1cmUgSlMgQ29tcGlsZXJcbiAqIG9wdGltaXphdGlvbnMuIFNlZSB1cGRhdGluZy1lbGVtZW50LnRzIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICovXG5MaXRFbGVtZW50WydmaW5hbGl6ZWQnXSA9IHRydWU7XG4vKipcbiAqIFJlbmRlciBtZXRob2QgdXNlZCB0byByZW5kZXIgdGhlIHZhbHVlIHRvIHRoZSBlbGVtZW50J3MgRE9NLlxuICogQHBhcmFtIHJlc3VsdCBUaGUgdmFsdWUgdG8gcmVuZGVyLlxuICogQHBhcmFtIGNvbnRhaW5lciBOb2RlIGludG8gd2hpY2ggdG8gcmVuZGVyLlxuICogQHBhcmFtIG9wdGlvbnMgRWxlbWVudCBuYW1lLlxuICogQG5vY29sbGFwc2VcbiAqL1xuTGl0RWxlbWVudC5yZW5kZXIgPSByZW5kZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXQtZWxlbWVudC5qcy5tYXAiLCJpbXBvcnQgeyBMaXRFbGVtZW50IH0gZnJvbSAnbGl0LWVsZW1lbnQnO1xuaW1wb3J0IHsgbGl0U3RhdGVzTWl4aW4gfSBmcm9tICdpbXBlcmEtanMnO1xuaW1wb3J0IHsgTWFuYWdlciB9IGZyb20gJy4uL1NlcnZpY2VNYW5hZ2VyLmpzJztcbmltcG9ydCB7IHN5c3RlbVZhcmlhYmxlLCBWYXJTdGF0dXNDb2RlcyB9IGZyb20gJy4uL0RhdGFNb2RlbHMvVHlwZXMuanMnO1xuZXhwb3J0IGNsYXNzIGhtaUVsZW1lbnQgZXh0ZW5kcyBsaXRTdGF0ZXNNaXhpbihbTWFuYWdlci5kYXRhVHJlZSwgTWFuYWdlci5lcnJvclRyYXldLCBMaXRFbGVtZW50KSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuc3lzdGVtID0gXCJkZWZhdWx0XCI7XG4gICAgICAgIHRoaXMuZW5naW5lID0gXCJkZWZhdWx0XCI7XG4gICAgICAgIHRoaXMuX2luaXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZXJ2aWNlX21hbmFnZXIgPSBNYW5hZ2VyO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB7IHR5cGU6IFN0cmluZyB9LFxuICAgICAgICAgICAgc3lzdGVtOiB7IHR5cGU6IFN0cmluZyB9LFxuICAgICAgICAgICAgZW5naW5lOiB7IHR5cGU6IFN0cmluZyB9LFxuICAgICAgICAgICAgc3RhdHVzOiB7IHR5cGU6IFN0cmluZyB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pbml0KVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRoaXMuc2VydmljZV9tYW5hZ2VyLmRhdGFUcmVlLkV4aXN0VmFyKHRoaXMpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YXRyZWVbdGhpcy5zeXN0ZW1dW3RoaXMubmFtZV0udmFsdWU7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2luaXQpXG4gICAgICAgICAgICByZXR1cm4gVmFyU3RhdHVzQ29kZXMuUGVuZGluZztcbiAgICAgICAgaWYgKHRoaXMuc2VydmljZV9tYW5hZ2VyLmRhdGFUcmVlLkV4aXN0VmFyKHRoaXMpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YXRyZWVbdGhpcy5zeXN0ZW1dW3RoaXMubmFtZV0uc3RhdHVzO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gVmFyU3RhdHVzQ29kZXMuRXJyb3I7XG4gICAgfVxuICAgIHNldCBzdGF0dXMoU3RhdHVzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgU3RhdHVzICE9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoIXRoaXMuc2VydmljZV9tYW5hZ2VyLmRhdGFUcmVlLkV4aXN0VmFyKHRoaXMpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBvbGRfdmFsID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJzdGF0dXNcIik7XG4gICAgICAgIGlmIChvbGRfdmFsICE9PSBTdGF0dXMgfHwgb2xkX3ZhbCAhPT0gdGhpcy5zdGF0dXMpIHtcbiAgICAgICAgICAgIHRoaXMuRGF0YVVwZGF0ZShudWxsLCBTdGF0dXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uX2RhdGF0cmVlX3VwZGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2V0QXR0cmlidXRlKFwic3RhdHVzXCIpICE9PSB0aGlzLnN0YXR1cylcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3RhdHVzXCIsIHRoaXMuc3RhdHVzKTtcbiAgICB9XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIC8vIG1heWJlIGhlcmUgZGlzcGF0Y2ggUkVBRFkgZXZlbnQ/P1xuICAgICAgICAvLyBtYXliZSBoZXJlIHJlc29sdmUgYSBSRUFEWSBwcm9taXNlIHNvIG9uZSBjYW4gYXdhaXQgaXQ/P1xuICAgICAgICBNYW5hZ2VyLlN1YnNjcmliZSh0aGlzLmVuZ2luZSwgdGhpcykudGhlbigoKSA9PiB7IHRoaXMuX2luaXQgPSB0cnVlOyB9KTtcbiAgICB9XG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIGlmIChzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaylcbiAgICAgICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIE1hbmFnZXIuVW5zdWJzY3JpYmUodGhpcy5lbmdpbmUsIHRoaXMpO1xuICAgIH1cbiAgICBhc3luYyBXcml0ZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5Xcml0ZU11bHRpcGxlKFt0aGlzXSwgW3ZhbHVlXSk7XG4gICAgfVxuICAgIGFzeW5jIFdyaXRlTXVsdGlwbGUodGFyZ2V0cywgdmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBNYW5hZ2VyLldyaXRlKHRoaXMuZW5naW5lLCB0YXJnZXRzLCB2YWx1ZXMpO1xuICAgIH1cbiAgICBhc3luYyBSZWFkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5SZWFkTXVsdGlwbGUoW3RoaXNdKTtcbiAgICB9XG4gICAgYXN5bmMgUmVhZE11bHRpcGxlKHRhcmdldHMpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IE1hbmFnZXIuUmVhZCh0aGlzLmVuZ2luZSwgdGFyZ2V0cyk7XG4gICAgfVxuICAgIERhdGFVcGRhdGUoVmFsdWUsIFN0YXR1cykge1xuICAgICAgICBsZXQgc3lzVmFyID0gbmV3IHN5c3RlbVZhcmlhYmxlKHRoaXMpO1xuICAgICAgICBzeXNWYXIuc3RhdHVzID0gU3RhdHVzO1xuICAgICAgICBzeXNWYXIudmFsdWUgPSBWYWx1ZTtcbiAgICAgICAgdGhpcy5EYXRhVXBkYXRlTXVsdGlwbGUoc3lzVmFyKTtcbiAgICB9XG4gICAgRGF0YVVwZGF0ZU11bHRpcGxlKHN5c3Zhcikge1xuICAgICAgICBNYW5hZ2VyLlVwZGF0ZShzeXN2YXIpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGNzcywgaHRtbCwgTGl0RWxlbWVudCB9IGZyb20gJ2xpdC1lbGVtZW50JztcbmV4cG9ydCBjbGFzcyBMb2FkZXIgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgICBzdGF0aWMgZ2V0IHN0eWxlcygpIHtcbiAgICAgICAgcmV0dXJuIGNzcyBgXG4gICAgICAgICAgICA6aG9zdHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OmJsb2NrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGF0aHtcbiAgICAgICAgICAgICAgICBzdHJva2U6IHZhcigtLWNvbG9yLCAjMzQ5OGRiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5sb2FkZXIge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogc3BpbiB2YXIoLS1zcGVlZCwwLjdzKSBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7XG4gICAgICAgICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxuICAgICAgICAgICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIGh0bWwgYFxuICAgICAgICA8c3ZnIGNsYXNzPVwibG9hZGVyXCIgdmlld0JveD1cIjAgMCA1MDAgNTAwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuICAgICAgICAgICAgPHBhdGggc3R5bGU9XCJmaWxsOiBub25lOyBzdHJva2Utd2lkdGg6IDc1O1wiIGQ9XCJNIDIzOCAzOCBDIDM2Mi4yNjQgMzggNDYzIDEzOC43MzYgNDYzIDI2M1wiPjwvcGF0aD5cbiAgICAgICAgPC9zdmc+XG4gICAgICAgIGA7XG4gICAgfVxufVxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwieC1sb2FkZXJcIiwgTG9hZGVyKTtcbiIsImltcG9ydCB7IGhtaUVsZW1lbnQgfSBmcm9tICcuL0hNSWVsZW1lbnQuanMnO1xuaW1wb3J0IHsgaHRtbCwgY3NzIH0gZnJvbSAnbGl0LWVsZW1lbnQnO1xuaW1wb3J0IHsgVmFyU3RhdHVzQ29kZXMgYXMgdnNjIH0gZnJvbSAnLi4vRGF0YU1vZGVscy9UeXBlcy5qcyc7XG5pbXBvcnQgJy4vbG9hZGVyLmpzJztcbmV4cG9ydCBjbGFzcyBzdGF0dXNTd2l0Y2ggZXh0ZW5kcyBobWlFbGVtZW50IHtcbiAgICBzdGF0aWMgZ2V0IHN0eWxlcygpIHtcbiAgICAgICAgcmV0dXJuIGNzcyBgXG4gICAgICAgIFxuICAgICAgICAgICAgOmhvc3R7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAqIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5IDogbm9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHgtbG9hZGVye1xuICAgICAgICAgICAgICAgIC0tY29sb3IgOiB2YXIoLS1sb2FkZXJDb2xvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtzaG93XXtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OmJsb2NrO1xuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBodG1sIGBcbiAgICAgICAgPHgtbG9hZGVyID9zaG93PVwiJHt0aGlzLnN0YXR1cyA9PT0gdnNjLlBlbmRpbmd9XCIgPiA8L3gtbG9hZGVyPlxuICAgICAgICA8c2xvdCAgP3Nob3c9XCIke3RoaXMuc3RhdHVzID09PSB2c2MuU3Vic2NyaWJlZH1cIiBuYW1lPVwic3ViXCI+PC9zbG90PlxuICAgICAgICA8c2xvdCAgP3Nob3c9XCIke3RoaXMuc3RhdHVzID09PSB2c2MuVW5zdWJzY3JpYmVkfVwiIG5hbWU9XCJ1bnN1YlwiPiA8L3Nsb3Q+XG4gICAgICAgIDxzbG90ICA/c2hvdz1cIiR7dGhpcy5zdGF0dXMgPT09IHZzYy5FcnJvcn1cIiBuYW1lPVwiZXJyb3JcIj4gPC9zbG90PlxuICAgICAgICBgO1xuICAgIH1cbn1cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcInN0YXR1cy1zd2l0Y2hcIiwgc3RhdHVzU3dpdGNoKTtcbiIsImltcG9ydCB7IGh0bWwsIGNzcyB9IGZyb20gJ2xpdC1lbGVtZW50JztcbmltcG9ydCB7IGhtaUVsZW1lbnQgfSBmcm9tICcuL0hNSWVsZW1lbnQuanMnO1xuaW1wb3J0IHsgVmFyU3RhdHVzQ29kZXMgYXMgdnNjIH0gZnJvbSAnLi4vRGF0YU1vZGVscy9UeXBlcy5qcyc7XG5leHBvcnQgY2xhc3MgYm9vbENvbG9yU3dpdGNoIGV4dGVuZHMgaG1pRWxlbWVudCB7XG4gICAgc3RhdGljIGdldCBzdHlsZXMoKSB7XG4gICAgICAgIHJldHVybiBjc3MgYFxuICAgICAgICAgICAgOmhvc3R7XG4gICAgICAgICAgICAgICAgZGlzcGxheTpibG9jaztcbiAgICAgICAgICAgICAgICBjdXJzb3IgOiBwb2ludGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKntcbiAgICAgICAgICAgICAgICBkaXNwbGF5IDogbm9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNsb3Qge1xuICAgICAgICAgICAgICAgIGN1cnNvciA6IHBvaW50ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6aG9zdChbc3RhdHVzPVwiRVJST1JcIl0pID4gc2xvdHtcbiAgICAgICAgICAgICAgICBjdXJzb3IgOiBub3QtYWxsb3dlZCA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6aG9zdChbc3RhdHVzPVwiVU5TVUJTQ1JJQkVEXCJdKSA+IHNsb3R7XG4gICAgICAgICAgICAgICAgY3Vyc29yIDogbm90LWFsbG93ZWQgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOmhvc3QoW3JlYWQtb25seV0pID4gc2xvdHtcbiAgICAgICAgICAgICAgICBjdXJzb3IgOiBhdXRvIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFtzaG93XXtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OmJsb2NrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgW3ZhbD1cIm9uXCJdOjpzbG90dGVkKCope1xuICAgICAgICAgICAgICAgIHN0cm9rZSA6IGJsdWU7XG4gICAgICAgICAgICAgICAgZmlsbCA6IGdyZWVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgW3ZhbD1cIm9mZlwiXTo6c2xvdHRlZCgqKXtcbiAgICAgICAgICAgICAgICBzdHJva2UgOiBibHVlO1xuICAgICAgICAgICAgICAgIGZpbGwgOiBncmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOmhvc3QoW3N0YXR1cz1cIkVSUk9SXCJdKSA+IDo6c2xvdHRlZCgqKXtcbiAgICAgICAgICAgICAgICBzdHJva2UgOiBibGFjaztcbiAgICAgICAgICAgICAgICBmaWxsIDogcmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOmhvc3QoW3N0YXR1cz1cIlVOU1VCU0NSSUJFRFwiXSkgPiA6OnNsb3R0ZWQoKil7XG4gICAgICAgICAgICAgICAgc3Ryb2tlIDogeWVsbG93O1xuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBodG1sIGBcbiAgICAgICAgICAgIDxzbG90IHZhbD1cIiR7dGhpcy52YWx1ZSA/IFwib25cIiA6IFwib2ZmXCJ9XCIgXG4gICAgICAgICAgICAgICAgICBAY2xpY2s9XCIke3RoaXMub25jbGlja31cIlxuICAgICAgICAgICAgICAgICAgP3Nob3c9XCIke3RoaXMuc3RhdHVzICE9PSB2c2MuUGVuZGluZ31cIj4gRW1wdHkgU2xvdDwvc2xvdD5cbiAgICAgICAgICAgIDx4LWxvYWRlciA/c2hvdz1cIiR7dGhpcy5zdGF0dXMgPT09IHZzYy5QZW5kaW5nfVwiPjwveC1sb2FkZXI+XG4gICAgICAgIGA7XG4gICAgfVxuICAgIG9uY2xpY2soKSB7XG4gICAgICAgIGxldCBzdHMgPSB0aGlzLnN0YXR1czsgLy8gYXZvaWQgdGhlIGdldHRlciBmdW5jdGlvbiBjYWxsXG4gICAgICAgIGlmICh0aGlzLmhhc0F0dHJpYnV0ZShcInJlYWQtb25seVwiKSB8fFxuICAgICAgICAgICAgc3RzID09PSB2c2MuRXJyb3IgfHxcbiAgICAgICAgICAgIHN0cyA9PT0gdnNjLlBlbmRpbmcgfHxcbiAgICAgICAgICAgIHN0cyA9PT0gdnNjLlVuc3Vic2NyaWJlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IHRvZ2dsZSA9IHRoaXMudmFsdWUgPyBmYWxzZSA6IHRydWU7XG4gICAgICAgIHRoaXMuV3JpdGUodG9nZ2xlKTtcbiAgICB9XG59XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJib29sLWNvbG9yXCIsIGJvb2xDb2xvclN3aXRjaCk7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIFRydWUgaWYgdGhlIGN1c3RvbSBlbGVtZW50cyBwb2x5ZmlsbCBpcyBpbiB1c2UuXG4gKi9cbmV4cG9ydCBjb25zdCBpc0NFUG9seWZpbGwgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cyAhPSBudWxsICYmXG4gICAgd2luZG93LmN1c3RvbUVsZW1lbnRzLnBvbHlmaWxsV3JhcEZsdXNoQ2FsbGJhY2sgIT09XG4gICAgICAgIHVuZGVmaW5lZDtcbi8qKlxuICogUmVwYXJlbnRzIG5vZGVzLCBzdGFydGluZyBmcm9tIGBzdGFydGAgKGluY2x1c2l2ZSkgdG8gYGVuZGAgKGV4Y2x1c2l2ZSksXG4gKiBpbnRvIGFub3RoZXIgY29udGFpbmVyIChjb3VsZCBiZSB0aGUgc2FtZSBjb250YWluZXIpLCBiZWZvcmUgYGJlZm9yZWAuIElmXG4gKiBgYmVmb3JlYCBpcyBudWxsLCBpdCBhcHBlbmRzIHRoZSBub2RlcyB0byB0aGUgY29udGFpbmVyLlxuICovXG5leHBvcnQgY29uc3QgcmVwYXJlbnROb2RlcyA9IChjb250YWluZXIsIHN0YXJ0LCBlbmQgPSBudWxsLCBiZWZvcmUgPSBudWxsKSA9PiB7XG4gICAgd2hpbGUgKHN0YXJ0ICE9PSBlbmQpIHtcbiAgICAgICAgY29uc3QgbiA9IHN0YXJ0Lm5leHRTaWJsaW5nO1xuICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKHN0YXJ0LCBiZWZvcmUpO1xuICAgICAgICBzdGFydCA9IG47XG4gICAgfVxufTtcbi8qKlxuICogUmVtb3ZlcyBub2Rlcywgc3RhcnRpbmcgZnJvbSBgc3RhcnRgIChpbmNsdXNpdmUpIHRvIGBlbmRgIChleGNsdXNpdmUpLCBmcm9tXG4gKiBgY29udGFpbmVyYC5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlbW92ZU5vZGVzID0gKGNvbnRhaW5lciwgc3RhcnQsIGVuZCA9IG51bGwpID0+IHtcbiAgICB3aGlsZSAoc3RhcnQgIT09IGVuZCkge1xuICAgICAgICBjb25zdCBuID0gc3RhcnQubmV4dFNpYmxpbmc7XG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChzdGFydCk7XG4gICAgICAgIHN0YXJ0ID0gbjtcbiAgICB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZG9tLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogQW4gZXhwcmVzc2lvbiBtYXJrZXIgd2l0aCBlbWJlZGRlZCB1bmlxdWUga2V5IHRvIGF2b2lkIGNvbGxpc2lvbiB3aXRoXG4gKiBwb3NzaWJsZSB0ZXh0IGluIHRlbXBsYXRlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IG1hcmtlciA9IGB7e2xpdC0ke1N0cmluZyhNYXRoLnJhbmRvbSgpKS5zbGljZSgyKX19fWA7XG4vKipcbiAqIEFuIGV4cHJlc3Npb24gbWFya2VyIHVzZWQgdGV4dC1wb3NpdGlvbnMsIG11bHRpLWJpbmRpbmcgYXR0cmlidXRlcywgYW5kXG4gKiBhdHRyaWJ1dGVzIHdpdGggbWFya3VwLWxpa2UgdGV4dCB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBub2RlTWFya2VyID0gYDwhLS0ke21hcmtlcn0tLT5gO1xuZXhwb3J0IGNvbnN0IG1hcmtlclJlZ2V4ID0gbmV3IFJlZ0V4cChgJHttYXJrZXJ9fCR7bm9kZU1hcmtlcn1gKTtcbi8qKlxuICogU3VmZml4IGFwcGVuZGVkIHRvIGFsbCBib3VuZCBhdHRyaWJ1dGUgbmFtZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBib3VuZEF0dHJpYnV0ZVN1ZmZpeCA9ICckbGl0JCc7XG4vKipcbiAqIEFuIHVwZGF0YWJsZSBUZW1wbGF0ZSB0aGF0IHRyYWNrcyB0aGUgbG9jYXRpb24gb2YgZHluYW1pYyBwYXJ0cy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRlbXBsYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihyZXN1bHQsIGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5wYXJ0cyA9IFtdO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICBjb25zdCBub2Rlc1RvUmVtb3ZlID0gW107XG4gICAgICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgICAgIC8vIEVkZ2UgbmVlZHMgYWxsIDQgcGFyYW1ldGVycyBwcmVzZW50OyBJRTExIG5lZWRzIDNyZCBwYXJhbWV0ZXIgdG8gYmUgbnVsbFxuICAgICAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKGVsZW1lbnQuY29udGVudCwgMTMzIC8qIE5vZGVGaWx0ZXIuU0hPV197RUxFTUVOVHxDT01NRU5UfFRFWFR9ICovLCBudWxsLCBmYWxzZSk7XG4gICAgICAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSBsYXN0IGluZGV4IGFzc29jaWF0ZWQgd2l0aCBhIHBhcnQuIFdlIHRyeSB0byBkZWxldGVcbiAgICAgICAgLy8gdW5uZWNlc3Nhcnkgbm9kZXMsIGJ1dCB3ZSBuZXZlciB3YW50IHRvIGFzc29jaWF0ZSB0d28gZGlmZmVyZW50IHBhcnRzXG4gICAgICAgIC8vIHRvIHRoZSBzYW1lIGluZGV4LiBUaGV5IG11c3QgaGF2ZSBhIGNvbnN0YW50IG5vZGUgYmV0d2Vlbi5cbiAgICAgICAgbGV0IGxhc3RQYXJ0SW5kZXggPSAwO1xuICAgICAgICBsZXQgaW5kZXggPSAtMTtcbiAgICAgICAgbGV0IHBhcnRJbmRleCA9IDA7XG4gICAgICAgIGNvbnN0IHsgc3RyaW5ncywgdmFsdWVzOiB7IGxlbmd0aCB9IH0gPSByZXN1bHQ7XG4gICAgICAgIHdoaWxlIChwYXJ0SW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKTtcbiAgICAgICAgICAgIGlmIChub2RlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UndmUgZXhoYXVzdGVkIHRoZSBjb250ZW50IGluc2lkZSBhIG5lc3RlZCB0ZW1wbGF0ZSBlbGVtZW50LlxuICAgICAgICAgICAgICAgIC8vIEJlY2F1c2Ugd2Ugc3RpbGwgaGF2ZSBwYXJ0cyAodGhlIG91dGVyIGZvci1sb29wKSwgd2Uga25vdzpcbiAgICAgICAgICAgICAgICAvLyAtIFRoZXJlIGlzIGEgdGVtcGxhdGUgaW4gdGhlIHN0YWNrXG4gICAgICAgICAgICAgICAgLy8gLSBUaGUgd2Fsa2VyIHdpbGwgZmluZCBhIG5leHROb2RlIG91dHNpZGUgdGhlIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEgLyogTm9kZS5FTEVNRU5UX05PREUgKi8pIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IG5vZGUuYXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBsZW5ndGggfSA9IGF0dHJpYnV0ZXM7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlclxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTmFtZWROb2RlTWFwLFxuICAgICAgICAgICAgICAgICAgICAvLyBhdHRyaWJ1dGVzIGFyZSBub3QgZ3VhcmFudGVlZCB0byBiZSByZXR1cm5lZCBpbiBkb2N1bWVudCBvcmRlci5cbiAgICAgICAgICAgICAgICAgICAgLy8gSW4gcGFydGljdWxhciwgRWRnZS9JRSBjYW4gcmV0dXJuIHRoZW0gb3V0IG9mIG9yZGVyLCBzbyB3ZSBjYW5ub3RcbiAgICAgICAgICAgICAgICAgICAgLy8gYXNzdW1lIGEgY29ycmVzcG9uZGVuY2UgYmV0d2VlbiBwYXJ0IGluZGV4IGFuZCBhdHRyaWJ1dGUgaW5kZXguXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRzV2l0aChhdHRyaWJ1dGVzW2ldLm5hbWUsIGJvdW5kQXR0cmlidXRlU3VmZml4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGNvdW50LS0gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHRlbXBsYXRlIGxpdGVyYWwgc2VjdGlvbiBsZWFkaW5nIHVwIHRvIHRoZSBmaXJzdFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwcmVzc2lvbiBpbiB0aGlzIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nRm9yUGFydCA9IHN0cmluZ3NbcGFydEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIGF0dHJpYnV0ZSBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbGFzdEF0dHJpYnV0ZU5hbWVSZWdleC5leGVjKHN0cmluZ0ZvclBhcnQpWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgY29ycmVzcG9uZGluZyBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsbCBib3VuZCBhdHRyaWJ1dGVzIGhhdmUgaGFkIGEgc3VmZml4IGFkZGVkIGluXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUZW1wbGF0ZVJlc3VsdCNnZXRIVE1MIHRvIG9wdCBvdXQgb2Ygc3BlY2lhbCBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsaW5nLiBUbyBsb29rIHVwIHRoZSBhdHRyaWJ1dGUgdmFsdWUgd2UgYWxzbyBuZWVkIHRvIGFkZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHN1ZmZpeC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZUxvb2t1cE5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCkgKyBib3VuZEF0dHJpYnV0ZVN1ZmZpeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZVZhbHVlID0gbm9kZS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTG9va3VwTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVMb29rdXBOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRpY3MgPSBhdHRyaWJ1dGVWYWx1ZS5zcGxpdChtYXJrZXJSZWdleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2goeyB0eXBlOiAnYXR0cmlidXRlJywgaW5kZXgsIG5hbWUsIHN0cmluZ3M6IHN0YXRpY3MgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0SW5kZXggKz0gc3RhdGljcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub2RlLnRhZ05hbWUgPT09ICdURU1QTEFURScpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gbm9kZS5jb250ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMgLyogTm9kZS5URVhUX05PREUgKi8pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gbm9kZS5kYXRhO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmluZGV4T2YobWFya2VyKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5ncyA9IGRhdGEuc3BsaXQobWFya2VyUmVnZXgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0SW5kZXggPSBzdHJpbmdzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IHRleHQgbm9kZSBmb3IgZWFjaCBsaXRlcmFsIHNlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlc2Ugbm9kZXMgYXJlIGFsc28gdXNlZCBhcyB0aGUgbWFya2VycyBmb3Igbm9kZSBwYXJ0c1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhc3RJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5zZXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHMgPSBzdHJpbmdzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0ID0gY3JlYXRlTWFya2VyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGxhc3RBdHRyaWJ1dGVOYW1lUmVnZXguZXhlYyhzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2ggIT09IG51bGwgJiYgZW5kc1dpdGgobWF0Y2hbMl0sIGJvdW5kQXR0cmlidXRlU3VmZml4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gcy5zbGljZSgwLCBtYXRjaC5pbmRleCkgKyBtYXRjaFsxXSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFsyXS5zbGljZSgwLCAtYm91bmRBdHRyaWJ1dGVTdWZmaXgubGVuZ3RoKSArIG1hdGNoWzNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoaW5zZXJ0LCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFydHMucHVzaCh7IHR5cGU6ICdub2RlJywgaW5kZXg6ICsraW5kZXggfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBubyB0ZXh0LCB3ZSBtdXN0IGluc2VydCBhIGNvbW1lbnQgdG8gbWFyayBvdXIgcGxhY2UuXG4gICAgICAgICAgICAgICAgICAgIC8vIEVsc2UsIHdlIGNhbiB0cnVzdCBpdCB3aWxsIHN0aWNrIGFyb3VuZCBhZnRlciBjbG9uaW5nLlxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nc1tsYXN0SW5kZXhdID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShjcmVhdGVNYXJrZXIoKSwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlc1RvUmVtb3ZlLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmRhdGEgPSBzdHJpbmdzW2xhc3RJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIHBhcnQgZm9yIGVhY2ggbWF0Y2ggZm91bmRcbiAgICAgICAgICAgICAgICAgICAgcGFydEluZGV4ICs9IGxhc3RJbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09PSA4IC8qIE5vZGUuQ09NTUVOVF9OT0RFICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuZGF0YSA9PT0gbWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGEgbmV3IG1hcmtlciBub2RlIHRvIGJlIHRoZSBzdGFydE5vZGUgb2YgdGhlIFBhcnQgaWYgYW55IG9mXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgYXJlIHRydWU6XG4gICAgICAgICAgICAgICAgICAgIC8vICAqIFdlIGRvbid0IGhhdmUgYSBwcmV2aW91c1NpYmxpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gICogVGhlIHByZXZpb3VzU2libGluZyBpcyBhbHJlYWR5IHRoZSBzdGFydCBvZiBhIHByZXZpb3VzIHBhcnRcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUucHJldmlvdXNTaWJsaW5nID09PSBudWxsIHx8IGluZGV4ID09PSBsYXN0UGFydEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShjcmVhdGVNYXJrZXIoKSwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGFzdFBhcnRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2goeyB0eXBlOiAnbm9kZScsIGluZGV4IH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGEgbmV4dFNpYmxpbmcsIGtlZXAgdGhpcyBub2RlIHNvIHdlIGhhdmUgYW4gZW5kLlxuICAgICAgICAgICAgICAgICAgICAvLyBFbHNlLCB3ZSBjYW4gcmVtb3ZlIGl0IHRvIHNhdmUgZnV0dXJlIGNvc3RzLlxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5uZXh0U2libGluZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5kYXRhID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlc1RvUmVtb3ZlLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleC0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhcnRJbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChpID0gbm9kZS5kYXRhLmluZGV4T2YobWFya2VyLCBpICsgMSkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tbWVudCBub2RlIGhhcyBhIGJpbmRpbmcgbWFya2VyIGluc2lkZSwgbWFrZSBhbiBpbmFjdGl2ZSBwYXJ0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgYmluZGluZyB3b24ndCB3b3JrLCBidXQgc3Vic2VxdWVudCBiaW5kaW5ncyB3aWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIChqdXN0aW5mYWduYW5pKTogY29uc2lkZXIgd2hldGhlciBpdCdzIGV2ZW4gd29ydGggaXQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1ha2UgYmluZGluZ3MgaW4gY29tbWVudHMgd29ya1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJ0cy5wdXNoKHsgdHlwZTogJ25vZGUnLCBpbmRleDogLTEgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBSZW1vdmUgdGV4dCBiaW5kaW5nIG5vZGVzIGFmdGVyIHRoZSB3YWxrIHRvIG5vdCBkaXN0dXJiIHRoZSBUcmVlV2Fsa2VyXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBub2Rlc1RvUmVtb3ZlKSB7XG4gICAgICAgICAgICBuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobik7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBlbmRzV2l0aCA9IChzdHIsIHN1ZmZpeCkgPT4ge1xuICAgIGNvbnN0IGluZGV4ID0gc3RyLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGg7XG4gICAgcmV0dXJuIGluZGV4ID49IDAgJiYgc3RyLnNsaWNlKGluZGV4KSA9PT0gc3VmZml4O1xufTtcbmV4cG9ydCBjb25zdCBpc1RlbXBsYXRlUGFydEFjdGl2ZSA9IChwYXJ0KSA9PiBwYXJ0LmluZGV4ICE9PSAtMTtcbi8vIEFsbG93cyBgZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnJylgIHRvIGJlIHJlbmFtZWQgZm9yIGFcbi8vIHNtYWxsIG1hbnVhbCBzaXplLXNhdmluZ3MuXG5leHBvcnQgY29uc3QgY3JlYXRlTWFya2VyID0gKCkgPT4gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnJyk7XG4vKipcbiAqIFRoaXMgcmVnZXggZXh0cmFjdHMgdGhlIGF0dHJpYnV0ZSBuYW1lIHByZWNlZGluZyBhbiBhdHRyaWJ1dGUtcG9zaXRpb25cbiAqIGV4cHJlc3Npb24uIEl0IGRvZXMgdGhpcyBieSBtYXRjaGluZyB0aGUgc3ludGF4IGFsbG93ZWQgZm9yIGF0dHJpYnV0ZXNcbiAqIGFnYWluc3QgdGhlIHN0cmluZyBsaXRlcmFsIGRpcmVjdGx5IHByZWNlZGluZyB0aGUgZXhwcmVzc2lvbiwgYXNzdW1pbmcgdGhhdFxuICogdGhlIGV4cHJlc3Npb24gaXMgaW4gYW4gYXR0cmlidXRlLXZhbHVlIHBvc2l0aW9uLlxuICpcbiAqIFNlZSBhdHRyaWJ1dGVzIGluIHRoZSBIVE1MIHNwZWM6XG4gKiBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvc3ludGF4Lmh0bWwjZWxlbWVudHMtYXR0cmlidXRlc1xuICpcbiAqIFwiIFxceDA5XFx4MGFcXHgwY1xceDBkXCIgYXJlIEhUTUwgc3BhY2UgY2hhcmFjdGVyczpcbiAqIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9pbmZyYXN0cnVjdHVyZS5odG1sI3NwYWNlLWNoYXJhY3RlcnNcbiAqXG4gKiBcIlxcMC1cXHgxRlxceDdGLVxceDlGXCIgYXJlIFVuaWNvZGUgY29udHJvbCBjaGFyYWN0ZXJzLCB3aGljaCBpbmNsdWRlcyBldmVyeVxuICogc3BhY2UgY2hhcmFjdGVyIGV4Y2VwdCBcIiBcIi5cbiAqXG4gKiBTbyBhbiBhdHRyaWJ1dGUgaXM6XG4gKiAgKiBUaGUgbmFtZTogYW55IGNoYXJhY3RlciBleGNlcHQgYSBjb250cm9sIGNoYXJhY3Rlciwgc3BhY2UgY2hhcmFjdGVyLCAoJyksXG4gKiAgICAoXCIpLCBcIj5cIiwgXCI9XCIsIG9yIFwiL1wiXG4gKiAgKiBGb2xsb3dlZCBieSB6ZXJvIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVyc1xuICogICogRm9sbG93ZWQgYnkgXCI9XCJcbiAqICAqIEZvbGxvd2VkIGJ5IHplcm8gb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzXG4gKiAgKiBGb2xsb3dlZCBieTpcbiAqICAgICogQW55IGNoYXJhY3RlciBleGNlcHQgc3BhY2UsICgnKSwgKFwiKSwgXCI8XCIsIFwiPlwiLCBcIj1cIiwgKGApLCBvclxuICogICAgKiAoXCIpIHRoZW4gYW55IG5vbi0oXCIpLCBvclxuICogICAgKiAoJykgdGhlbiBhbnkgbm9uLSgnKVxuICovXG5leHBvcnQgY29uc3QgbGFzdEF0dHJpYnV0ZU5hbWVSZWdleCA9IFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbi8oWyBcXHgwOVxceDBhXFx4MGNcXHgwZF0pKFteXFwwLVxceDFGXFx4N0YtXFx4OUYgXCInPj0vXSspKFsgXFx4MDlcXHgwYVxceDBjXFx4MGRdKj1bIFxceDA5XFx4MGFcXHgwY1xceDBkXSooPzpbXiBcXHgwOVxceDBhXFx4MGNcXHgwZFwiJ2A8Pj1dKnxcIlteXCJdKnwnW14nXSopKSQvO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVtcGxhdGUuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBAbW9kdWxlIHNoYWR5LXJlbmRlclxuICovXG5pbXBvcnQgeyBpc1RlbXBsYXRlUGFydEFjdGl2ZSB9IGZyb20gJy4vdGVtcGxhdGUuanMnO1xuY29uc3Qgd2Fsa2VyTm9kZUZpbHRlciA9IDEzMyAvKiBOb2RlRmlsdGVyLlNIT1dfe0VMRU1FTlR8Q09NTUVOVHxURVhUfSAqLztcbi8qKlxuICogUmVtb3ZlcyB0aGUgbGlzdCBvZiBub2RlcyBmcm9tIGEgVGVtcGxhdGUgc2FmZWx5LiBJbiBhZGRpdGlvbiB0byByZW1vdmluZ1xuICogbm9kZXMgZnJvbSB0aGUgVGVtcGxhdGUsIHRoZSBUZW1wbGF0ZSBwYXJ0IGluZGljZXMgYXJlIHVwZGF0ZWQgdG8gbWF0Y2hcbiAqIHRoZSBtdXRhdGVkIFRlbXBsYXRlIERPTS5cbiAqXG4gKiBBcyB0aGUgdGVtcGxhdGUgaXMgd2Fsa2VkIHRoZSByZW1vdmFsIHN0YXRlIGlzIHRyYWNrZWQgYW5kXG4gKiBwYXJ0IGluZGljZXMgYXJlIGFkanVzdGVkIGFzIG5lZWRlZC5cbiAqXG4gKiBkaXZcbiAqICAgZGl2IzEgKHJlbW92ZSkgPC0tIHN0YXJ0IHJlbW92aW5nIChyZW1vdmluZyBub2RlIGlzIGRpdiMxKVxuICogICAgIGRpdlxuICogICAgICAgZGl2IzIgKHJlbW92ZSkgIDwtLSBjb250aW51ZSByZW1vdmluZyAocmVtb3Zpbmcgbm9kZSBpcyBzdGlsbCBkaXYjMSlcbiAqICAgICAgICAgZGl2XG4gKiBkaXYgPC0tIHN0b3AgcmVtb3Zpbmcgc2luY2UgcHJldmlvdXMgc2libGluZyBpcyB0aGUgcmVtb3Zpbmcgbm9kZSAoZGl2IzEsXG4gKiByZW1vdmVkIDQgbm9kZXMpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVOb2Rlc0Zyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgbm9kZXNUb1JlbW92ZSkge1xuICAgIGNvbnN0IHsgZWxlbWVudDogeyBjb250ZW50IH0sIHBhcnRzIH0gPSB0ZW1wbGF0ZTtcbiAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKGNvbnRlbnQsIHdhbGtlck5vZGVGaWx0ZXIsIG51bGwsIGZhbHNlKTtcbiAgICBsZXQgcGFydEluZGV4ID0gbmV4dEFjdGl2ZUluZGV4SW5UZW1wbGF0ZVBhcnRzKHBhcnRzKTtcbiAgICBsZXQgcGFydCA9IHBhcnRzW3BhcnRJbmRleF07XG4gICAgbGV0IG5vZGVJbmRleCA9IC0xO1xuICAgIGxldCByZW1vdmVDb3VudCA9IDA7XG4gICAgY29uc3Qgbm9kZXNUb1JlbW92ZUluVGVtcGxhdGUgPSBbXTtcbiAgICBsZXQgY3VycmVudFJlbW92aW5nTm9kZSA9IG51bGw7XG4gICAgd2hpbGUgKHdhbGtlci5uZXh0Tm9kZSgpKSB7XG4gICAgICAgIG5vZGVJbmRleCsrO1xuICAgICAgICBjb25zdCBub2RlID0gd2Fsa2VyLmN1cnJlbnROb2RlO1xuICAgICAgICAvLyBFbmQgcmVtb3ZhbCBpZiBzdGVwcGVkIHBhc3QgdGhlIHJlbW92aW5nIG5vZGVcbiAgICAgICAgaWYgKG5vZGUucHJldmlvdXNTaWJsaW5nID09PSBjdXJyZW50UmVtb3ZpbmdOb2RlKSB7XG4gICAgICAgICAgICBjdXJyZW50UmVtb3ZpbmdOb2RlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBBIG5vZGUgdG8gcmVtb3ZlIHdhcyBmb3VuZCBpbiB0aGUgdGVtcGxhdGVcbiAgICAgICAgaWYgKG5vZGVzVG9SZW1vdmUuaGFzKG5vZGUpKSB7XG4gICAgICAgICAgICBub2Rlc1RvUmVtb3ZlSW5UZW1wbGF0ZS5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgLy8gVHJhY2sgbm9kZSB3ZSdyZSByZW1vdmluZ1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRSZW1vdmluZ05vZGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UmVtb3ZpbmdOb2RlID0gbm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBXaGVuIHJlbW92aW5nLCBpbmNyZW1lbnQgY291bnQgYnkgd2hpY2ggdG8gYWRqdXN0IHN1YnNlcXVlbnQgcGFydCBpbmRpY2VzXG4gICAgICAgIGlmIChjdXJyZW50UmVtb3ZpbmdOb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZW1vdmVDb3VudCsrO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChwYXJ0ICE9PSB1bmRlZmluZWQgJiYgcGFydC5pbmRleCA9PT0gbm9kZUluZGV4KSB7XG4gICAgICAgICAgICAvLyBJZiBwYXJ0IGlzIGluIGEgcmVtb3ZlZCBub2RlIGRlYWN0aXZhdGUgaXQgYnkgc2V0dGluZyBpbmRleCB0byAtMSBvclxuICAgICAgICAgICAgLy8gYWRqdXN0IHRoZSBpbmRleCBhcyBuZWVkZWQuXG4gICAgICAgICAgICBwYXJ0LmluZGV4ID0gY3VycmVudFJlbW92aW5nTm9kZSAhPT0gbnVsbCA/IC0xIDogcGFydC5pbmRleCAtIHJlbW92ZUNvdW50O1xuICAgICAgICAgICAgLy8gZ28gdG8gdGhlIG5leHQgYWN0aXZlIHBhcnQuXG4gICAgICAgICAgICBwYXJ0SW5kZXggPSBuZXh0QWN0aXZlSW5kZXhJblRlbXBsYXRlUGFydHMocGFydHMsIHBhcnRJbmRleCk7XG4gICAgICAgICAgICBwYXJ0ID0gcGFydHNbcGFydEluZGV4XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBub2Rlc1RvUmVtb3ZlSW5UZW1wbGF0ZS5mb3JFYWNoKChuKSA9PiBuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobikpO1xufVxuY29uc3QgY291bnROb2RlcyA9IChub2RlKSA9PiB7XG4gICAgbGV0IGNvdW50ID0gKG5vZGUubm9kZVR5cGUgPT09IDExIC8qIE5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSAqLykgPyAwIDogMTtcbiAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKG5vZGUsIHdhbGtlck5vZGVGaWx0ZXIsIG51bGwsIGZhbHNlKTtcbiAgICB3aGlsZSAod2Fsa2VyLm5leHROb2RlKCkpIHtcbiAgICAgICAgY291bnQrKztcbiAgICB9XG4gICAgcmV0dXJuIGNvdW50O1xufTtcbmNvbnN0IG5leHRBY3RpdmVJbmRleEluVGVtcGxhdGVQYXJ0cyA9IChwYXJ0cywgc3RhcnRJbmRleCA9IC0xKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXggKyAxOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzW2ldO1xuICAgICAgICBpZiAoaXNUZW1wbGF0ZVBhcnRBY3RpdmUocGFydCkpIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn07XG4vKipcbiAqIEluc2VydHMgdGhlIGdpdmVuIG5vZGUgaW50byB0aGUgVGVtcGxhdGUsIG9wdGlvbmFsbHkgYmVmb3JlIHRoZSBnaXZlblxuICogcmVmTm9kZS4gSW4gYWRkaXRpb24gdG8gaW5zZXJ0aW5nIHRoZSBub2RlIGludG8gdGhlIFRlbXBsYXRlLCB0aGUgVGVtcGxhdGVcbiAqIHBhcnQgaW5kaWNlcyBhcmUgdXBkYXRlZCB0byBtYXRjaCB0aGUgbXV0YXRlZCBUZW1wbGF0ZSBET00uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnROb2RlSW50b1RlbXBsYXRlKHRlbXBsYXRlLCBub2RlLCByZWZOb2RlID0gbnVsbCkge1xuICAgIGNvbnN0IHsgZWxlbWVudDogeyBjb250ZW50IH0sIHBhcnRzIH0gPSB0ZW1wbGF0ZTtcbiAgICAvLyBJZiB0aGVyZSdzIG5vIHJlZk5vZGUsIHRoZW4gcHV0IG5vZGUgYXQgZW5kIG9mIHRlbXBsYXRlLlxuICAgIC8vIE5vIHBhcnQgaW5kaWNlcyBuZWVkIHRvIGJlIHNoaWZ0ZWQgaW4gdGhpcyBjYXNlLlxuICAgIGlmIChyZWZOb2RlID09PSBudWxsIHx8IHJlZk5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHdhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIoY29udGVudCwgd2Fsa2VyTm9kZUZpbHRlciwgbnVsbCwgZmFsc2UpO1xuICAgIGxldCBwYXJ0SW5kZXggPSBuZXh0QWN0aXZlSW5kZXhJblRlbXBsYXRlUGFydHMocGFydHMpO1xuICAgIGxldCBpbnNlcnRDb3VudCA9IDA7XG4gICAgbGV0IHdhbGtlckluZGV4ID0gLTE7XG4gICAgd2hpbGUgKHdhbGtlci5uZXh0Tm9kZSgpKSB7XG4gICAgICAgIHdhbGtlckluZGV4Kys7XG4gICAgICAgIGNvbnN0IHdhbGtlck5vZGUgPSB3YWxrZXIuY3VycmVudE5vZGU7XG4gICAgICAgIGlmICh3YWxrZXJOb2RlID09PSByZWZOb2RlKSB7XG4gICAgICAgICAgICBpbnNlcnRDb3VudCA9IGNvdW50Tm9kZXMobm9kZSk7XG4gICAgICAgICAgICByZWZOb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIHJlZk5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChwYXJ0SW5kZXggIT09IC0xICYmIHBhcnRzW3BhcnRJbmRleF0uaW5kZXggPT09IHdhbGtlckluZGV4KSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSd2ZSBpbnNlcnRlZCB0aGUgbm9kZSwgc2ltcGx5IGFkanVzdCBhbGwgc3Vic2VxdWVudCBwYXJ0c1xuICAgICAgICAgICAgaWYgKGluc2VydENvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIHdoaWxlIChwYXJ0SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnRzW3BhcnRJbmRleF0uaW5kZXggKz0gaW5zZXJ0Q291bnQ7XG4gICAgICAgICAgICAgICAgICAgIHBhcnRJbmRleCA9IG5leHRBY3RpdmVJbmRleEluVGVtcGxhdGVQYXJ0cyhwYXJ0cywgcGFydEluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFydEluZGV4ID0gbmV4dEFjdGl2ZUluZGV4SW5UZW1wbGF0ZVBhcnRzKHBhcnRzLCBwYXJ0SW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9kaWZ5LXRlbXBsYXRlLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbmNvbnN0IGRpcmVjdGl2ZXMgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBCcmFuZHMgYSBmdW5jdGlvbiBhcyBhIGRpcmVjdGl2ZSBmYWN0b3J5IGZ1bmN0aW9uIHNvIHRoYXQgbGl0LWh0bWwgd2lsbCBjYWxsXG4gKiB0aGUgZnVuY3Rpb24gZHVyaW5nIHRlbXBsYXRlIHJlbmRlcmluZywgcmF0aGVyIHRoYW4gcGFzc2luZyBhcyBhIHZhbHVlLlxuICpcbiAqIEEgX2RpcmVjdGl2ZV8gaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgUGFydCBhcyBhbiBhcmd1bWVudC4gSXQgaGFzIHRoZVxuICogc2lnbmF0dXJlOiBgKHBhcnQ6IFBhcnQpID0+IHZvaWRgLlxuICpcbiAqIEEgZGlyZWN0aXZlIF9mYWN0b3J5XyBpcyBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYXJndW1lbnRzIGZvciBkYXRhIGFuZFxuICogY29uZmlndXJhdGlvbiBhbmQgcmV0dXJucyBhIGRpcmVjdGl2ZS4gVXNlcnMgb2YgZGlyZWN0aXZlIHVzdWFsbHkgcmVmZXIgdG9cbiAqIHRoZSBkaXJlY3RpdmUgZmFjdG9yeSBhcyB0aGUgZGlyZWN0aXZlLiBGb3IgZXhhbXBsZSwgXCJUaGUgcmVwZWF0IGRpcmVjdGl2ZVwiLlxuICpcbiAqIFVzdWFsbHkgYSB0ZW1wbGF0ZSBhdXRob3Igd2lsbCBpbnZva2UgYSBkaXJlY3RpdmUgZmFjdG9yeSBpbiB0aGVpciB0ZW1wbGF0ZVxuICogd2l0aCByZWxldmFudCBhcmd1bWVudHMsIHdoaWNoIHdpbGwgdGhlbiByZXR1cm4gYSBkaXJlY3RpdmUgZnVuY3Rpb24uXG4gKlxuICogSGVyZSdzIGFuIGV4YW1wbGUgb2YgdXNpbmcgdGhlIGByZXBlYXQoKWAgZGlyZWN0aXZlIGZhY3RvcnkgdGhhdCB0YWtlcyBhblxuICogYXJyYXkgYW5kIGEgZnVuY3Rpb24gdG8gcmVuZGVyIGFuIGl0ZW06XG4gKlxuICogYGBganNcbiAqIGh0bWxgPHVsPjwke3JlcGVhdChpdGVtcywgKGl0ZW0pID0+IGh0bWxgPGxpPiR7aXRlbX08L2xpPmApfTwvdWw+YFxuICogYGBgXG4gKlxuICogV2hlbiBgcmVwZWF0YCBpcyBpbnZva2VkLCBpdCByZXR1cm5zIGEgZGlyZWN0aXZlIGZ1bmN0aW9uIHRoYXQgY2xvc2VzIG92ZXJcbiAqIGBpdGVtc2AgYW5kIHRoZSB0ZW1wbGF0ZSBmdW5jdGlvbi4gV2hlbiB0aGUgb3V0ZXIgdGVtcGxhdGUgaXMgcmVuZGVyZWQsIHRoZVxuICogcmV0dXJuIGRpcmVjdGl2ZSBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCB0aGUgUGFydCBmb3IgdGhlIGV4cHJlc3Npb24uXG4gKiBgcmVwZWF0YCB0aGVuIHBlcmZvcm1zIGl0J3MgY3VzdG9tIGxvZ2ljIHRvIHJlbmRlciBtdWx0aXBsZSBpdGVtcy5cbiAqXG4gKiBAcGFyYW0gZiBUaGUgZGlyZWN0aXZlIGZhY3RvcnkgZnVuY3Rpb24uIE11c3QgYmUgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYVxuICogZnVuY3Rpb24gb2YgdGhlIHNpZ25hdHVyZSBgKHBhcnQ6IFBhcnQpID0+IHZvaWRgLiBUaGUgcmV0dXJuZWQgZnVuY3Rpb24gd2lsbFxuICogYmUgY2FsbGVkIHdpdGggdGhlIHBhcnQgb2JqZWN0LlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogaW1wb3J0IHtkaXJlY3RpdmUsIGh0bWx9IGZyb20gJ2xpdC1odG1sJztcbiAqXG4gKiBjb25zdCBpbW11dGFibGUgPSBkaXJlY3RpdmUoKHYpID0+IChwYXJ0KSA9PiB7XG4gKiAgIGlmIChwYXJ0LnZhbHVlICE9PSB2KSB7XG4gKiAgICAgcGFydC5zZXRWYWx1ZSh2KVxuICogICB9XG4gKiB9KTtcbiAqL1xuZXhwb3J0IGNvbnN0IGRpcmVjdGl2ZSA9IChmKSA9PiAoKC4uLmFyZ3MpID0+IHtcbiAgICBjb25zdCBkID0gZiguLi5hcmdzKTtcbiAgICBkaXJlY3RpdmVzLnNldChkLCB0cnVlKTtcbiAgICByZXR1cm4gZDtcbn0pO1xuZXhwb3J0IGNvbnN0IGlzRGlyZWN0aXZlID0gKG8pID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIG8gPT09ICdmdW5jdGlvbicgJiYgZGlyZWN0aXZlcy5oYXMobyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlyZWN0aXZlLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogQSBzZW50aW5lbCB2YWx1ZSB0aGF0IHNpZ25hbHMgdGhhdCBhIHZhbHVlIHdhcyBoYW5kbGVkIGJ5IGEgZGlyZWN0aXZlIGFuZFxuICogc2hvdWxkIG5vdCBiZSB3cml0dGVuIHRvIHRoZSBET00uXG4gKi9cbmV4cG9ydCBjb25zdCBub0NoYW5nZSA9IHt9O1xuLyoqXG4gKiBBIHNlbnRpbmVsIHZhbHVlIHRoYXQgc2lnbmFscyBhIE5vZGVQYXJ0IHRvIGZ1bGx5IGNsZWFyIGl0cyBjb250ZW50LlxuICovXG5leHBvcnQgY29uc3Qgbm90aGluZyA9IHt9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFydC5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIEBtb2R1bGUgbGl0LWh0bWxcbiAqL1xuaW1wb3J0IHsgaXNDRVBvbHlmaWxsIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgaXNUZW1wbGF0ZVBhcnRBY3RpdmUgfSBmcm9tICcuL3RlbXBsYXRlLmpzJztcbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgYSBgVGVtcGxhdGVgIHRoYXQgY2FuIGJlIGF0dGFjaGVkIHRvIHRoZSBET00gYW5kIHVwZGF0ZWRcbiAqIHdpdGggbmV3IHZhbHVlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRlbXBsYXRlSW5zdGFuY2Uge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlLCBwcm9jZXNzb3IsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fX3BhcnRzID0gW107XG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgICAgdGhpcy5wcm9jZXNzb3IgPSBwcm9jZXNzb3I7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxuICAgIHVwZGF0ZSh2YWx1ZXMpIHtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgdGhpcy5fX3BhcnRzKSB7XG4gICAgICAgICAgICBpZiAocGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcGFydC5zZXRWYWx1ZSh2YWx1ZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiB0aGlzLl9fcGFydHMpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwYXJ0LmNvbW1pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIF9jbG9uZSgpIHtcbiAgICAgICAgLy8gVGhlcmUgYXJlIGEgbnVtYmVyIG9mIHN0ZXBzIGluIHRoZSBsaWZlY3ljbGUgb2YgYSB0ZW1wbGF0ZSBpbnN0YW5jZSdzXG4gICAgICAgIC8vIERPTSBmcmFnbWVudDpcbiAgICAgICAgLy8gIDEuIENsb25lIC0gY3JlYXRlIHRoZSBpbnN0YW5jZSBmcmFnbWVudFxuICAgICAgICAvLyAgMi4gQWRvcHQgLSBhZG9wdCBpbnRvIHRoZSBtYWluIGRvY3VtZW50XG4gICAgICAgIC8vICAzLiBQcm9jZXNzIC0gZmluZCBwYXJ0IG1hcmtlcnMgYW5kIGNyZWF0ZSBwYXJ0c1xuICAgICAgICAvLyAgNC4gVXBncmFkZSAtIHVwZ3JhZGUgY3VzdG9tIGVsZW1lbnRzXG4gICAgICAgIC8vICA1LiBVcGRhdGUgLSBzZXQgbm9kZSwgYXR0cmlidXRlLCBwcm9wZXJ0eSwgZXRjLiwgdmFsdWVzXG4gICAgICAgIC8vICA2LiBDb25uZWN0IC0gY29ubmVjdCB0byB0aGUgZG9jdW1lbnQuIE9wdGlvbmFsIGFuZCBvdXRzaWRlIG9mIHRoaXNcbiAgICAgICAgLy8gICAgIG1ldGhvZC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gV2UgaGF2ZSBhIGZldyBjb25zdHJhaW50cyBvbiB0aGUgb3JkZXJpbmcgb2YgdGhlc2Ugc3RlcHM6XG4gICAgICAgIC8vICAqIFdlIG5lZWQgdG8gdXBncmFkZSBiZWZvcmUgdXBkYXRpbmcsIHNvIHRoYXQgcHJvcGVydHkgdmFsdWVzIHdpbGwgcGFzc1xuICAgICAgICAvLyAgICB0aHJvdWdoIGFueSBwcm9wZXJ0eSBzZXR0ZXJzLlxuICAgICAgICAvLyAgKiBXZSB3b3VsZCBsaWtlIHRvIHByb2Nlc3MgYmVmb3JlIHVwZ3JhZGluZyBzbyB0aGF0IHdlJ3JlIHN1cmUgdGhhdCB0aGVcbiAgICAgICAgLy8gICAgY2xvbmVkIGZyYWdtZW50IGlzIGluZXJ0IGFuZCBub3QgZGlzdHVyYmVkIGJ5IHNlbGYtbW9kaWZ5aW5nIERPTS5cbiAgICAgICAgLy8gICogV2Ugd2FudCBjdXN0b20gZWxlbWVudHMgdG8gdXBncmFkZSBldmVuIGluIGRpc2Nvbm5lY3RlZCBmcmFnbWVudHMuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEdpdmVuIHRoZXNlIGNvbnN0cmFpbnRzLCB3aXRoIGZ1bGwgY3VzdG9tIGVsZW1lbnRzIHN1cHBvcnQgd2Ugd291bGRcbiAgICAgICAgLy8gcHJlZmVyIHRoZSBvcmRlcjogQ2xvbmUsIFByb2Nlc3MsIEFkb3B0LCBVcGdyYWRlLCBVcGRhdGUsIENvbm5lY3RcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQnV0IFNhZmFyaSBkb2VzIG5vdCBpbXBsZW1lbnQgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5I3VwZ3JhZGUsIHNvIHdlXG4gICAgICAgIC8vIGNhbiBub3QgaW1wbGVtZW50IHRoYXQgb3JkZXIgYW5kIHN0aWxsIGhhdmUgdXBncmFkZS1iZWZvcmUtdXBkYXRlIGFuZFxuICAgICAgICAvLyB1cGdyYWRlIGRpc2Nvbm5lY3RlZCBmcmFnbWVudHMuIFNvIHdlIGluc3RlYWQgc2FjcmlmaWNlIHRoZVxuICAgICAgICAvLyBwcm9jZXNzLWJlZm9yZS11cGdyYWRlIGNvbnN0cmFpbnQsIHNpbmNlIGluIEN1c3RvbSBFbGVtZW50cyB2MSBlbGVtZW50c1xuICAgICAgICAvLyBtdXN0IG5vdCBtb2RpZnkgdGhlaXIgbGlnaHQgRE9NIGluIHRoZSBjb25zdHJ1Y3Rvci4gV2Ugc3RpbGwgaGF2ZSBpc3N1ZXNcbiAgICAgICAgLy8gd2hlbiBjby1leGlzdGluZyB3aXRoIENFdjAgZWxlbWVudHMgbGlrZSBQb2x5bWVyIDEsIGFuZCB3aXRoIHBvbHlmaWxsc1xuICAgICAgICAvLyB0aGF0IGRvbid0IHN0cmljdGx5IGFkaGVyZSB0byB0aGUgbm8tbW9kaWZpY2F0aW9uIHJ1bGUgYmVjYXVzZSBzaGFkb3dcbiAgICAgICAgLy8gRE9NLCB3aGljaCBtYXkgYmUgY3JlYXRlZCBpbiB0aGUgY29uc3RydWN0b3IsIGlzIGVtdWxhdGVkIGJ5IGJlaW5nIHBsYWNlZFxuICAgICAgICAvLyBpbiB0aGUgbGlnaHQgRE9NLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgcmVzdWx0aW5nIG9yZGVyIGlzIG9uIG5hdGl2ZSBpczogQ2xvbmUsIEFkb3B0LCBVcGdyYWRlLCBQcm9jZXNzLFxuICAgICAgICAvLyBVcGRhdGUsIENvbm5lY3QuIGRvY3VtZW50LmltcG9ydE5vZGUoKSBwZXJmb3JtcyBDbG9uZSwgQWRvcHQsIGFuZCBVcGdyYWRlXG4gICAgICAgIC8vIGluIG9uZSBzdGVwLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgQ3VzdG9tIEVsZW1lbnRzIHYxIHBvbHlmaWxsIHN1cHBvcnRzIHVwZ3JhZGUoKSwgc28gdGhlIG9yZGVyIHdoZW5cbiAgICAgICAgLy8gcG9seWZpbGxlZCBpcyB0aGUgbW9yZSBpZGVhbDogQ2xvbmUsIFByb2Nlc3MsIEFkb3B0LCBVcGdyYWRlLCBVcGRhdGUsXG4gICAgICAgIC8vIENvbm5lY3QuXG4gICAgICAgIGNvbnN0IGZyYWdtZW50ID0gaXNDRVBvbHlmaWxsID9cbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGUuZWxlbWVudC5jb250ZW50LmNsb25lTm9kZSh0cnVlKSA6XG4gICAgICAgICAgICBkb2N1bWVudC5pbXBvcnROb2RlKHRoaXMudGVtcGxhdGUuZWxlbWVudC5jb250ZW50LCB0cnVlKTtcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBbXTtcbiAgICAgICAgY29uc3QgcGFydHMgPSB0aGlzLnRlbXBsYXRlLnBhcnRzO1xuICAgICAgICAvLyBFZGdlIG5lZWRzIGFsbCA0IHBhcmFtZXRlcnMgcHJlc2VudDsgSUUxMSBuZWVkcyAzcmQgcGFyYW1ldGVyIHRvIGJlIG51bGxcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihmcmFnbWVudCwgMTMzIC8qIE5vZGVGaWx0ZXIuU0hPV197RUxFTUVOVHxDT01NRU5UfFRFWFR9ICovLCBudWxsLCBmYWxzZSk7XG4gICAgICAgIGxldCBwYXJ0SW5kZXggPSAwO1xuICAgICAgICBsZXQgbm9kZUluZGV4ID0gMDtcbiAgICAgICAgbGV0IHBhcnQ7XG4gICAgICAgIGxldCBub2RlID0gd2Fsa2VyLm5leHROb2RlKCk7XG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgdGhlIG5vZGVzIGFuZCBwYXJ0cyBvZiBhIHRlbXBsYXRlXG4gICAgICAgIHdoaWxlIChwYXJ0SW5kZXggPCBwYXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHBhcnQgPSBwYXJ0c1twYXJ0SW5kZXhdO1xuICAgICAgICAgICAgaWYgKCFpc1RlbXBsYXRlUGFydEFjdGl2ZShwYXJ0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX19wYXJ0cy5wdXNoKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgcGFydEluZGV4Kys7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQcm9ncmVzcyB0aGUgdHJlZSB3YWxrZXIgdW50aWwgd2UgZmluZCBvdXIgbmV4dCBwYXJ0J3Mgbm9kZS5cbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBtdWx0aXBsZSBwYXJ0cyBtYXkgc2hhcmUgdGhlIHNhbWUgbm9kZSAoYXR0cmlidXRlIHBhcnRzXG4gICAgICAgICAgICAvLyBvbiBhIHNpbmdsZSBlbGVtZW50KSwgc28gdGhpcyBsb29wIG1heSBub3QgcnVuIGF0IGFsbC5cbiAgICAgICAgICAgIHdoaWxlIChub2RlSW5kZXggPCBwYXJ0LmluZGV4KSB7XG4gICAgICAgICAgICAgICAgbm9kZUluZGV4Kys7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT09ICdURU1QTEFURScpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gbm9kZS5jb250ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKSkgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UndmUgZXhoYXVzdGVkIHRoZSBjb250ZW50IGluc2lkZSBhIG5lc3RlZCB0ZW1wbGF0ZSBlbGVtZW50LlxuICAgICAgICAgICAgICAgICAgICAvLyBCZWNhdXNlIHdlIHN0aWxsIGhhdmUgcGFydHMgKHRoZSBvdXRlciBmb3ItbG9vcCksIHdlIGtub3c6XG4gICAgICAgICAgICAgICAgICAgIC8vIC0gVGhlcmUgaXMgYSB0ZW1wbGF0ZSBpbiB0aGUgc3RhY2tcbiAgICAgICAgICAgICAgICAgICAgLy8gLSBUaGUgd2Fsa2VyIHdpbGwgZmluZCBhIG5leHROb2RlIG91dHNpZGUgdGhlIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBub2RlID0gd2Fsa2VyLm5leHROb2RlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2UndmUgYXJyaXZlZCBhdCBvdXIgcGFydCdzIG5vZGUuXG4gICAgICAgICAgICBpZiAocGFydC50eXBlID09PSAnbm9kZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0ID0gdGhpcy5wcm9jZXNzb3IuaGFuZGxlVGV4dEV4cHJlc3Npb24odGhpcy5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICBwYXJ0Lmluc2VydEFmdGVyTm9kZShub2RlLnByZXZpb3VzU2libGluZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3BhcnRzLnB1c2gocGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fcGFydHMucHVzaCguLi50aGlzLnByb2Nlc3Nvci5oYW5kbGVBdHRyaWJ1dGVFeHByZXNzaW9ucyhub2RlLCBwYXJ0Lm5hbWUsIHBhcnQuc3RyaW5ncywgdGhpcy5vcHRpb25zKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNDRVBvbHlmaWxsKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5hZG9wdE5vZGUoZnJhZ21lbnQpO1xuICAgICAgICAgICAgY3VzdG9tRWxlbWVudHMudXBncmFkZShmcmFnbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyYWdtZW50O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRlbXBsYXRlLWluc3RhbmNlLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogQG1vZHVsZSBsaXQtaHRtbFxuICovXG5pbXBvcnQgeyByZXBhcmVudE5vZGVzIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgYm91bmRBdHRyaWJ1dGVTdWZmaXgsIGxhc3RBdHRyaWJ1dGVOYW1lUmVnZXgsIG1hcmtlciwgbm9kZU1hcmtlciB9IGZyb20gJy4vdGVtcGxhdGUuanMnO1xuY29uc3QgY29tbWVudE1hcmtlciA9IGAgJHttYXJrZXJ9IGA7XG4vKipcbiAqIFRoZSByZXR1cm4gdHlwZSBvZiBgaHRtbGAsIHdoaWNoIGhvbGRzIGEgVGVtcGxhdGUgYW5kIHRoZSB2YWx1ZXMgZnJvbVxuICogaW50ZXJwb2xhdGVkIGV4cHJlc3Npb25zLlxuICovXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVSZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKHN0cmluZ3MsIHZhbHVlcywgdHlwZSwgcHJvY2Vzc29yKSB7XG4gICAgICAgIHRoaXMuc3RyaW5ncyA9IHN0cmluZ3M7XG4gICAgICAgIHRoaXMudmFsdWVzID0gdmFsdWVzO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnByb2Nlc3NvciA9IHByb2Nlc3NvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyBvZiBIVE1MIHVzZWQgdG8gY3JlYXRlIGEgYDx0ZW1wbGF0ZT5gIGVsZW1lbnQuXG4gICAgICovXG4gICAgZ2V0SFRNTCgpIHtcbiAgICAgICAgY29uc3QgbCA9IHRoaXMuc3RyaW5ncy5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgaHRtbCA9ICcnO1xuICAgICAgICBsZXQgaXNDb21tZW50QmluZGluZyA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuc3RyaW5nc1tpXTtcbiAgICAgICAgICAgIC8vIEZvciBlYWNoIGJpbmRpbmcgd2Ugd2FudCB0byBkZXRlcm1pbmUgdGhlIGtpbmQgb2YgbWFya2VyIHRvIGluc2VydFxuICAgICAgICAgICAgLy8gaW50byB0aGUgdGVtcGxhdGUgc291cmNlIGJlZm9yZSBpdCdzIHBhcnNlZCBieSB0aGUgYnJvd3NlcidzIEhUTUxcbiAgICAgICAgICAgIC8vIHBhcnNlci4gVGhlIG1hcmtlciB0eXBlIGlzIGJhc2VkIG9uIHdoZXRoZXIgdGhlIGV4cHJlc3Npb24gaXMgaW4gYW5cbiAgICAgICAgICAgIC8vIGF0dHJpYnV0ZSwgdGV4dCwgb3IgY29tbWVudCBwb3NpdGlvbi5cbiAgICAgICAgICAgIC8vICAgKiBGb3Igbm9kZS1wb3NpdGlvbiBiaW5kaW5ncyB3ZSBpbnNlcnQgYSBjb21tZW50IHdpdGggdGhlIG1hcmtlclxuICAgICAgICAgICAgLy8gICAgIHNlbnRpbmVsIGFzIGl0cyB0ZXh0IGNvbnRlbnQsIGxpa2UgPCEtLXt7bGl0LWd1aWR9fS0tPi5cbiAgICAgICAgICAgIC8vICAgKiBGb3IgYXR0cmlidXRlIGJpbmRpbmdzIHdlIGluc2VydCBqdXN0IHRoZSBtYXJrZXIgc2VudGluZWwgZm9yIHRoZVxuICAgICAgICAgICAgLy8gICAgIGZpcnN0IGJpbmRpbmcsIHNvIHRoYXQgd2Ugc3VwcG9ydCB1bnF1b3RlZCBhdHRyaWJ1dGUgYmluZGluZ3MuXG4gICAgICAgICAgICAvLyAgICAgU3Vic2VxdWVudCBiaW5kaW5ncyBjYW4gdXNlIGEgY29tbWVudCBtYXJrZXIgYmVjYXVzZSBtdWx0aS1iaW5kaW5nXG4gICAgICAgICAgICAvLyAgICAgYXR0cmlidXRlcyBtdXN0IGJlIHF1b3RlZC5cbiAgICAgICAgICAgIC8vICAgKiBGb3IgY29tbWVudCBiaW5kaW5ncyB3ZSBpbnNlcnQganVzdCB0aGUgbWFya2VyIHNlbnRpbmVsIHNvIHdlIGRvbid0XG4gICAgICAgICAgICAvLyAgICAgY2xvc2UgdGhlIGNvbW1lbnQuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBjb2RlIHNjYW5zIHRoZSB0ZW1wbGF0ZSBzb3VyY2UsIGJ1dCBpcyAqbm90KiBhbiBIVE1MXG4gICAgICAgICAgICAvLyBwYXJzZXIuIFdlIGRvbid0IG5lZWQgdG8gdHJhY2sgdGhlIHRyZWUgc3RydWN0dXJlIG9mIHRoZSBIVE1MLCBvbmx5XG4gICAgICAgICAgICAvLyB3aGV0aGVyIGEgYmluZGluZyBpcyBpbnNpZGUgYSBjb21tZW50LCBhbmQgaWYgbm90LCBpZiBpdCBhcHBlYXJzIHRvIGJlXG4gICAgICAgICAgICAvLyB0aGUgZmlyc3QgYmluZGluZyBpbiBhbiBhdHRyaWJ1dGUuXG4gICAgICAgICAgICBjb25zdCBjb21tZW50T3BlbiA9IHMubGFzdEluZGV4T2YoJzwhLS0nKTtcbiAgICAgICAgICAgIC8vIFdlJ3JlIGluIGNvbW1lbnQgcG9zaXRpb24gaWYgd2UgaGF2ZSBhIGNvbW1lbnQgb3BlbiB3aXRoIG5vIGZvbGxvd2luZ1xuICAgICAgICAgICAgLy8gY29tbWVudCBjbG9zZS4gQmVjYXVzZSA8LS0gY2FuIGFwcGVhciBpbiBhbiBhdHRyaWJ1dGUgdmFsdWUgdGhlcmUgY2FuXG4gICAgICAgICAgICAvLyBiZSBmYWxzZSBwb3NpdGl2ZXMuXG4gICAgICAgICAgICBpc0NvbW1lbnRCaW5kaW5nID0gKGNvbW1lbnRPcGVuID4gLTEgfHwgaXNDb21tZW50QmluZGluZykgJiZcbiAgICAgICAgICAgICAgICBzLmluZGV4T2YoJy0tPicsIGNvbW1lbnRPcGVuICsgMSkgPT09IC0xO1xuICAgICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYW4gYXR0cmlidXRlLWxpa2Ugc2VxdWVuY2UgcHJlY2VkaW5nIHRoZVxuICAgICAgICAgICAgLy8gZXhwcmVzc2lvbi4gVGhpcyBjYW4gbWF0Y2ggXCJuYW1lPXZhbHVlXCIgbGlrZSBzdHJ1Y3R1cmVzIGluIHRleHQsXG4gICAgICAgICAgICAvLyBjb21tZW50cywgYW5kIGF0dHJpYnV0ZSB2YWx1ZXMsIHNvIHRoZXJlIGNhbiBiZSBmYWxzZS1wb3NpdGl2ZXMuXG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVNYXRjaCA9IGxhc3RBdHRyaWJ1dGVOYW1lUmVnZXguZXhlYyhzKTtcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVNYXRjaCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIFdlJ3JlIG9ubHkgaW4gdGhpcyBicmFuY2ggaWYgd2UgZG9uJ3QgaGF2ZSBhIGF0dHJpYnV0ZS1saWtlXG4gICAgICAgICAgICAgICAgLy8gcHJlY2VkaW5nIHNlcXVlbmNlLiBGb3IgY29tbWVudHMsIHRoaXMgZ3VhcmRzIGFnYWluc3QgdW51c3VhbFxuICAgICAgICAgICAgICAgIC8vIGF0dHJpYnV0ZSB2YWx1ZXMgbGlrZSA8ZGl2IGZvbz1cIjwhLS0keydiYXInfVwiPi4gQ2FzZXMgbGlrZVxuICAgICAgICAgICAgICAgIC8vIDwhLS0gZm9vPSR7J2Jhcid9LS0+IGFyZSBoYW5kbGVkIGNvcnJlY3RseSBpbiB0aGUgYXR0cmlidXRlIGJyYW5jaFxuICAgICAgICAgICAgICAgIC8vIGJlbG93LlxuICAgICAgICAgICAgICAgIGh0bWwgKz0gcyArIChpc0NvbW1lbnRCaW5kaW5nID8gY29tbWVudE1hcmtlciA6IG5vZGVNYXJrZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRm9yIGF0dHJpYnV0ZXMgd2UgdXNlIGp1c3QgYSBtYXJrZXIgc2VudGluZWwsIGFuZCBhbHNvIGFwcGVuZCBhXG4gICAgICAgICAgICAgICAgLy8gJGxpdCQgc3VmZml4IHRvIHRoZSBuYW1lIHRvIG9wdC1vdXQgb2YgYXR0cmlidXRlLXNwZWNpZmljIHBhcnNpbmdcbiAgICAgICAgICAgICAgICAvLyB0aGF0IElFIGFuZCBFZGdlIGRvIGZvciBzdHlsZSBhbmQgY2VydGFpbiBTVkcgYXR0cmlidXRlcy5cbiAgICAgICAgICAgICAgICBodG1sICs9IHMuc3Vic3RyKDAsIGF0dHJpYnV0ZU1hdGNoLmluZGV4KSArIGF0dHJpYnV0ZU1hdGNoWzFdICtcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlTWF0Y2hbMl0gKyBib3VuZEF0dHJpYnV0ZVN1ZmZpeCArIGF0dHJpYnV0ZU1hdGNoWzNdICtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGh0bWwgKz0gdGhpcy5zdHJpbmdzW2xdO1xuICAgICAgICByZXR1cm4gaHRtbDtcbiAgICB9XG4gICAgZ2V0VGVtcGxhdGVFbGVtZW50KCkge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IHRoaXMuZ2V0SFRNTCgpO1xuICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBBIFRlbXBsYXRlUmVzdWx0IGZvciBTVkcgZnJhZ21lbnRzLlxuICpcbiAqIFRoaXMgY2xhc3Mgd3JhcHMgSFRNTCBpbiBhbiBgPHN2Zz5gIHRhZyBpbiBvcmRlciB0byBwYXJzZSBpdHMgY29udGVudHMgaW4gdGhlXG4gKiBTVkcgbmFtZXNwYWNlLCB0aGVuIG1vZGlmaWVzIHRoZSB0ZW1wbGF0ZSB0byByZW1vdmUgdGhlIGA8c3ZnPmAgdGFnIHNvIHRoYXRcbiAqIGNsb25lcyBvbmx5IGNvbnRhaW5lciB0aGUgb3JpZ2luYWwgZnJhZ21lbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBTVkdUZW1wbGF0ZVJlc3VsdCBleHRlbmRzIFRlbXBsYXRlUmVzdWx0IHtcbiAgICBnZXRIVE1MKCkge1xuICAgICAgICByZXR1cm4gYDxzdmc+JHtzdXBlci5nZXRIVE1MKCl9PC9zdmc+YDtcbiAgICB9XG4gICAgZ2V0VGVtcGxhdGVFbGVtZW50KCkge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHN1cGVyLmdldFRlbXBsYXRlRWxlbWVudCgpO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gdGVtcGxhdGUuY29udGVudDtcbiAgICAgICAgY29uc3Qgc3ZnRWxlbWVudCA9IGNvbnRlbnQuZmlyc3RDaGlsZDtcbiAgICAgICAgY29udGVudC5yZW1vdmVDaGlsZChzdmdFbGVtZW50KTtcbiAgICAgICAgcmVwYXJlbnROb2Rlcyhjb250ZW50LCBzdmdFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVtcGxhdGUtcmVzdWx0LmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogQG1vZHVsZSBsaXQtaHRtbFxuICovXG5pbXBvcnQgeyBpc0RpcmVjdGl2ZSB9IGZyb20gJy4vZGlyZWN0aXZlLmpzJztcbmltcG9ydCB7IHJlbW92ZU5vZGVzIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgbm9DaGFuZ2UsIG5vdGhpbmcgfSBmcm9tICcuL3BhcnQuanMnO1xuaW1wb3J0IHsgVGVtcGxhdGVJbnN0YW5jZSB9IGZyb20gJy4vdGVtcGxhdGUtaW5zdGFuY2UuanMnO1xuaW1wb3J0IHsgVGVtcGxhdGVSZXN1bHQgfSBmcm9tICcuL3RlbXBsYXRlLXJlc3VsdC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVNYXJrZXIgfSBmcm9tICcuL3RlbXBsYXRlLmpzJztcbmV4cG9ydCBjb25zdCBpc1ByaW1pdGl2ZSA9ICh2YWx1ZSkgPT4ge1xuICAgIHJldHVybiAodmFsdWUgPT09IG51bGwgfHxcbiAgICAgICAgISh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykpO1xufTtcbmV4cG9ydCBjb25zdCBpc0l0ZXJhYmxlID0gKHZhbHVlKSA9PiB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpIHx8XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICEhKHZhbHVlICYmIHZhbHVlW1N5bWJvbC5pdGVyYXRvcl0pO1xufTtcbi8qKlxuICogV3JpdGVzIGF0dHJpYnV0ZSB2YWx1ZXMgdG8gdGhlIERPTSBmb3IgYSBncm91cCBvZiBBdHRyaWJ1dGVQYXJ0cyBib3VuZCB0byBhXG4gKiBzaW5nbGUgYXR0cmlidXRlLiBUaGUgdmFsdWUgaXMgb25seSBzZXQgb25jZSBldmVuIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBwYXJ0c1xuICogZm9yIGFuIGF0dHJpYnV0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEF0dHJpYnV0ZUNvbW1pdHRlciB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgbmFtZSwgc3RyaW5ncykge1xuICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5zdHJpbmdzID0gc3RyaW5ncztcbiAgICAgICAgdGhpcy5wYXJ0cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnRzW2ldID0gdGhpcy5fY3JlYXRlUGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzaW5nbGUgcGFydC4gT3ZlcnJpZGUgdGhpcyB0byBjcmVhdGUgYSBkaWZmZXJudCB0eXBlIG9mIHBhcnQuXG4gICAgICovXG4gICAgX2NyZWF0ZVBhcnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0cmlidXRlUGFydCh0aGlzKTtcbiAgICB9XG4gICAgX2dldFZhbHVlKCkge1xuICAgICAgICBjb25zdCBzdHJpbmdzID0gdGhpcy5zdHJpbmdzO1xuICAgICAgICBjb25zdCBsID0gc3RyaW5ncy5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgdGV4dCA9ICcnO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgdGV4dCArPSBzdHJpbmdzW2ldO1xuICAgICAgICAgICAgY29uc3QgcGFydCA9IHRoaXMucGFydHNbaV07XG4gICAgICAgICAgICBpZiAocGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdiA9IHBhcnQudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGlzUHJpbWl0aXZlKHYpIHx8ICFpc0l0ZXJhYmxlKHYpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQgKz0gdHlwZW9mIHYgPT09ICdzdHJpbmcnID8gdiA6IFN0cmluZyh2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiB2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IHR5cGVvZiB0ID09PSAnc3RyaW5nJyA/IHQgOiBTdHJpbmcodCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGV4dCArPSBzdHJpbmdzW2xdO1xuICAgICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG4gICAgY29tbWl0KCkge1xuICAgICAgICBpZiAodGhpcy5kaXJ0eSkge1xuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsIHRoaXMuX2dldFZhbHVlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBBIFBhcnQgdGhhdCBjb250cm9scyBhbGwgb3IgcGFydCBvZiBhbiBhdHRyaWJ1dGUgdmFsdWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdHRyaWJ1dGVQYXJ0IHtcbiAgICBjb25zdHJ1Y3Rvcihjb21taXR0ZXIpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jb21taXR0ZXIgPSBjb21taXR0ZXI7XG4gICAgfVxuICAgIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbm9DaGFuZ2UgJiYgKCFpc1ByaW1pdGl2ZSh2YWx1ZSkgfHwgdmFsdWUgIT09IHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAvLyBJZiB0aGUgdmFsdWUgaXMgYSBub3QgYSBkaXJlY3RpdmUsIGRpcnR5IHRoZSBjb21taXR0ZXIgc28gdGhhdCBpdCdsbFxuICAgICAgICAgICAgLy8gY2FsbCBzZXRBdHRyaWJ1dGUuIElmIHRoZSB2YWx1ZSBpcyBhIGRpcmVjdGl2ZSwgaXQnbGwgZGlydHkgdGhlXG4gICAgICAgICAgICAvLyBjb21taXR0ZXIgaWYgaXQgY2FsbHMgc2V0VmFsdWUoKS5cbiAgICAgICAgICAgIGlmICghaXNEaXJlY3RpdmUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21taXR0ZXIuZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgd2hpbGUgKGlzRGlyZWN0aXZlKHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RpdmUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5vQ2hhbmdlO1xuICAgICAgICAgICAgZGlyZWN0aXZlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZhbHVlID09PSBub0NoYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29tbWl0dGVyLmNvbW1pdCgpO1xuICAgIH1cbn1cbi8qKlxuICogQSBQYXJ0IHRoYXQgY29udHJvbHMgYSBsb2NhdGlvbiB3aXRoaW4gYSBOb2RlIHRyZWUuIExpa2UgYSBSYW5nZSwgTm9kZVBhcnRcbiAqIGhhcyBzdGFydCBhbmQgZW5kIGxvY2F0aW9ucyBhbmQgY2FuIHNldCBhbmQgdXBkYXRlIHRoZSBOb2RlcyBiZXR3ZWVuIHRob3NlXG4gKiBsb2NhdGlvbnMuXG4gKlxuICogTm9kZVBhcnRzIHN1cHBvcnQgc2V2ZXJhbCB2YWx1ZSB0eXBlczogcHJpbWl0aXZlcywgTm9kZXMsIFRlbXBsYXRlUmVzdWx0cyxcbiAqIGFzIHdlbGwgYXMgYXJyYXlzIGFuZCBpdGVyYWJsZXMgb2YgdGhvc2UgdHlwZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBOb2RlUGFydCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBlbmRzIHRoaXMgcGFydCBpbnRvIGEgY29udGFpbmVyLlxuICAgICAqXG4gICAgICogVGhpcyBwYXJ0IG11c3QgYmUgZW1wdHksIGFzIGl0cyBjb250ZW50cyBhcmUgbm90IGF1dG9tYXRpY2FsbHkgbW92ZWQuXG4gICAgICovXG4gICAgYXBwZW5kSW50byhjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5zdGFydE5vZGUgPSBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlTWFya2VyKCkpO1xuICAgICAgICB0aGlzLmVuZE5vZGUgPSBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlTWFya2VyKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIHRoaXMgcGFydCBhZnRlciB0aGUgYHJlZmAgbm9kZSAoYmV0d2VlbiBgcmVmYCBhbmQgYHJlZmAncyBuZXh0XG4gICAgICogc2libGluZykuIEJvdGggYHJlZmAgYW5kIGl0cyBuZXh0IHNpYmxpbmcgbXVzdCBiZSBzdGF0aWMsIHVuY2hhbmdpbmcgbm9kZXNcbiAgICAgKiBzdWNoIGFzIHRob3NlIHRoYXQgYXBwZWFyIGluIGEgbGl0ZXJhbCBzZWN0aW9uIG9mIGEgdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBUaGlzIHBhcnQgbXVzdCBiZSBlbXB0eSwgYXMgaXRzIGNvbnRlbnRzIGFyZSBub3QgYXV0b21hdGljYWxseSBtb3ZlZC5cbiAgICAgKi9cbiAgICBpbnNlcnRBZnRlck5vZGUocmVmKSB7XG4gICAgICAgIHRoaXMuc3RhcnROb2RlID0gcmVmO1xuICAgICAgICB0aGlzLmVuZE5vZGUgPSByZWYubmV4dFNpYmxpbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZHMgdGhpcyBwYXJ0IGludG8gYSBwYXJlbnQgcGFydC5cbiAgICAgKlxuICAgICAqIFRoaXMgcGFydCBtdXN0IGJlIGVtcHR5LCBhcyBpdHMgY29udGVudHMgYXJlIG5vdCBhdXRvbWF0aWNhbGx5IG1vdmVkLlxuICAgICAqL1xuICAgIGFwcGVuZEludG9QYXJ0KHBhcnQpIHtcbiAgICAgICAgcGFydC5fX2luc2VydCh0aGlzLnN0YXJ0Tm9kZSA9IGNyZWF0ZU1hcmtlcigpKTtcbiAgICAgICAgcGFydC5fX2luc2VydCh0aGlzLmVuZE5vZGUgPSBjcmVhdGVNYXJrZXIoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluc2VydHMgdGhpcyBwYXJ0IGFmdGVyIHRoZSBgcmVmYCBwYXJ0LlxuICAgICAqXG4gICAgICogVGhpcyBwYXJ0IG11c3QgYmUgZW1wdHksIGFzIGl0cyBjb250ZW50cyBhcmUgbm90IGF1dG9tYXRpY2FsbHkgbW92ZWQuXG4gICAgICovXG4gICAgaW5zZXJ0QWZ0ZXJQYXJ0KHJlZikge1xuICAgICAgICByZWYuX19pbnNlcnQodGhpcy5zdGFydE5vZGUgPSBjcmVhdGVNYXJrZXIoKSk7XG4gICAgICAgIHRoaXMuZW5kTm9kZSA9IHJlZi5lbmROb2RlO1xuICAgICAgICByZWYuZW5kTm9kZSA9IHRoaXMuc3RhcnROb2RlO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnROb2RlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoaXNEaXJlY3RpdmUodGhpcy5fX3BlbmRpbmdWYWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gbm9DaGFuZ2U7XG4gICAgICAgICAgICBkaXJlY3RpdmUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLl9fcGVuZGluZ1ZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgPT09IG5vQ2hhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUHJpbWl0aXZlKHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX2NvbW1pdFRleHQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgVGVtcGxhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuX19jb21taXRUZW1wbGF0ZVJlc3VsdCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0Tm9kZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNJdGVyYWJsZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX19jb21taXRJdGVyYWJsZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IG5vdGhpbmcpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBub3RoaW5nO1xuICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRmFsbGJhY2ssIHdpbGwgcmVuZGVyIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb25cbiAgICAgICAgICAgIHRoaXMuX19jb21taXRUZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfX2luc2VydChub2RlKSB7XG4gICAgICAgIHRoaXMuZW5kTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCB0aGlzLmVuZE5vZGUpO1xuICAgIH1cbiAgICBfX2NvbW1pdE5vZGUodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICB0aGlzLl9faW5zZXJ0KHZhbHVlKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBfX2NvbW1pdFRleHQodmFsdWUpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuc3RhcnROb2RlLm5leHRTaWJsaW5nO1xuICAgICAgICB2YWx1ZSA9IHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xuICAgICAgICAvLyBJZiBgdmFsdWVgIGlzbid0IGFscmVhZHkgYSBzdHJpbmcsIHdlIGV4cGxpY2l0bHkgY29udmVydCBpdCBoZXJlIGluIGNhc2VcbiAgICAgICAgLy8gaXQgY2FuJ3QgYmUgaW1wbGljaXRseSBjb252ZXJ0ZWQgLSBpLmUuIGl0J3MgYSBzeW1ib2wuXG4gICAgICAgIGNvbnN0IHZhbHVlQXNTdHJpbmcgPSB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBTdHJpbmcodmFsdWUpO1xuICAgICAgICBpZiAobm9kZSA9PT0gdGhpcy5lbmROb2RlLnByZXZpb3VzU2libGluZyAmJlxuICAgICAgICAgICAgbm9kZS5ub2RlVHlwZSA9PT0gMyAvKiBOb2RlLlRFWFRfTk9ERSAqLykge1xuICAgICAgICAgICAgLy8gSWYgd2Ugb25seSBoYXZlIGEgc2luZ2xlIHRleHQgbm9kZSBiZXR3ZWVuIHRoZSBtYXJrZXJzLCB3ZSBjYW4ganVzdFxuICAgICAgICAgICAgLy8gc2V0IGl0cyB2YWx1ZSwgcmF0aGVyIHRoYW4gcmVwbGFjaW5nIGl0LlxuICAgICAgICAgICAgLy8gVE9ETyhqdXN0aW5mYWduYW5pKTogQ2FuIHdlIGp1c3QgY2hlY2sgaWYgdGhpcy52YWx1ZSBpcyBwcmltaXRpdmU/XG4gICAgICAgICAgICBub2RlLmRhdGEgPSB2YWx1ZUFzU3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fX2NvbW1pdE5vZGUoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodmFsdWVBc1N0cmluZykpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgX19jb21taXRUZW1wbGF0ZVJlc3VsdCh2YWx1ZSkge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMub3B0aW9ucy50ZW1wbGF0ZUZhY3RvcnkodmFsdWUpO1xuICAgICAgICBpZiAodGhpcy52YWx1ZSBpbnN0YW5jZW9mIFRlbXBsYXRlSW5zdGFuY2UgJiZcbiAgICAgICAgICAgIHRoaXMudmFsdWUudGVtcGxhdGUgPT09IHRlbXBsYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlLnVwZGF0ZSh2YWx1ZS52YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIHByb3BhZ2F0ZSB0aGUgdGVtcGxhdGUgcHJvY2Vzc29yIGZyb20gdGhlIFRlbXBsYXRlUmVzdWx0XG4gICAgICAgICAgICAvLyBzbyB0aGF0IHdlIHVzZSBpdHMgc3ludGF4IGV4dGVuc2lvbiwgZXRjLiBUaGUgdGVtcGxhdGUgZmFjdG9yeSBjb21lc1xuICAgICAgICAgICAgLy8gZnJvbSB0aGUgcmVuZGVyIGZ1bmN0aW9uIG9wdGlvbnMgc28gdGhhdCBpdCBjYW4gY29udHJvbCB0ZW1wbGF0ZVxuICAgICAgICAgICAgLy8gY2FjaGluZyBhbmQgcHJlcHJvY2Vzc2luZy5cbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IFRlbXBsYXRlSW5zdGFuY2UodGVtcGxhdGUsIHZhbHVlLnByb2Nlc3NvciwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gaW5zdGFuY2UuX2Nsb25lKCk7XG4gICAgICAgICAgICBpbnN0YW5jZS51cGRhdGUodmFsdWUudmFsdWVzKTtcbiAgICAgICAgICAgIHRoaXMuX19jb21taXROb2RlKGZyYWdtZW50KTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBpbnN0YW5jZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfX2NvbW1pdEl0ZXJhYmxlKHZhbHVlKSB7XG4gICAgICAgIC8vIEZvciBhbiBJdGVyYWJsZSwgd2UgY3JlYXRlIGEgbmV3IEluc3RhbmNlUGFydCBwZXIgaXRlbSwgdGhlbiBzZXQgaXRzXG4gICAgICAgIC8vIHZhbHVlIHRvIHRoZSBpdGVtLiBUaGlzIGlzIGEgbGl0dGxlIGJpdCBvZiBvdmVyaGVhZCBmb3IgZXZlcnkgaXRlbSBpblxuICAgICAgICAvLyBhbiBJdGVyYWJsZSwgYnV0IGl0IGxldHMgdXMgcmVjdXJzZSBlYXNpbHkgYW5kIGVmZmljaWVudGx5IHVwZGF0ZSBBcnJheXNcbiAgICAgICAgLy8gb2YgVGVtcGxhdGVSZXN1bHRzIHRoYXQgd2lsbCBiZSBjb21tb25seSByZXR1cm5lZCBmcm9tIGV4cHJlc3Npb25zIGxpa2U6XG4gICAgICAgIC8vIGFycmF5Lm1hcCgoaSkgPT4gaHRtbGAke2l9YCksIGJ5IHJldXNpbmcgZXhpc3RpbmcgVGVtcGxhdGVJbnN0YW5jZXMuXG4gICAgICAgIC8vIElmIF92YWx1ZSBpcyBhbiBhcnJheSwgdGhlbiB0aGUgcHJldmlvdXMgcmVuZGVyIHdhcyBvZiBhblxuICAgICAgICAvLyBpdGVyYWJsZSBhbmQgX3ZhbHVlIHdpbGwgY29udGFpbiB0aGUgTm9kZVBhcnRzIGZyb20gdGhlIHByZXZpb3VzXG4gICAgICAgIC8vIHJlbmRlci4gSWYgX3ZhbHVlIGlzIG5vdCBhbiBhcnJheSwgY2xlYXIgdGhpcyBwYXJ0IGFuZCBtYWtlIGEgbmV3XG4gICAgICAgIC8vIGFycmF5IGZvciBOb2RlUGFydHMuXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIExldHMgdXMga2VlcCB0cmFjayBvZiBob3cgbWFueSBpdGVtcyB3ZSBzdGFtcGVkIHNvIHdlIGNhbiBjbGVhciBsZWZ0b3ZlclxuICAgICAgICAvLyBpdGVtcyBmcm9tIGEgcHJldmlvdXMgcmVuZGVyXG4gICAgICAgIGNvbnN0IGl0ZW1QYXJ0cyA9IHRoaXMudmFsdWU7XG4gICAgICAgIGxldCBwYXJ0SW5kZXggPSAwO1xuICAgICAgICBsZXQgaXRlbVBhcnQ7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB2YWx1ZSkge1xuICAgICAgICAgICAgLy8gVHJ5IHRvIHJldXNlIGFuIGV4aXN0aW5nIHBhcnRcbiAgICAgICAgICAgIGl0ZW1QYXJ0ID0gaXRlbVBhcnRzW3BhcnRJbmRleF07XG4gICAgICAgICAgICAvLyBJZiBubyBleGlzdGluZyBwYXJ0LCBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgICAgICBpZiAoaXRlbVBhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGl0ZW1QYXJ0ID0gbmV3IE5vZGVQYXJ0KHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaXRlbVBhcnRzLnB1c2goaXRlbVBhcnQpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJ0SW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbVBhcnQuYXBwZW5kSW50b1BhcnQodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpdGVtUGFydC5pbnNlcnRBZnRlclBhcnQoaXRlbVBhcnRzW3BhcnRJbmRleCAtIDFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtUGFydC5zZXRWYWx1ZShpdGVtKTtcbiAgICAgICAgICAgIGl0ZW1QYXJ0LmNvbW1pdCgpO1xuICAgICAgICAgICAgcGFydEluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnRJbmRleCA8IGl0ZW1QYXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIFRydW5jYXRlIHRoZSBwYXJ0cyBhcnJheSBzbyBfdmFsdWUgcmVmbGVjdHMgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICAgIGl0ZW1QYXJ0cy5sZW5ndGggPSBwYXJ0SW5kZXg7XG4gICAgICAgICAgICB0aGlzLmNsZWFyKGl0ZW1QYXJ0ICYmIGl0ZW1QYXJ0LmVuZE5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFyKHN0YXJ0Tm9kZSA9IHRoaXMuc3RhcnROb2RlKSB7XG4gICAgICAgIHJlbW92ZU5vZGVzKHRoaXMuc3RhcnROb2RlLnBhcmVudE5vZGUsIHN0YXJ0Tm9kZS5uZXh0U2libGluZywgdGhpcy5lbmROb2RlKTtcbiAgICB9XG59XG4vKipcbiAqIEltcGxlbWVudHMgYSBib29sZWFuIGF0dHJpYnV0ZSwgcm91Z2hseSBhcyBkZWZpbmVkIGluIHRoZSBIVE1MXG4gKiBzcGVjaWZpY2F0aW9uLlxuICpcbiAqIElmIHRoZSB2YWx1ZSBpcyB0cnV0aHksIHRoZW4gdGhlIGF0dHJpYnV0ZSBpcyBwcmVzZW50IHdpdGggYSB2YWx1ZSBvZlxuICogJycuIElmIHRoZSB2YWx1ZSBpcyBmYWxzZXksIHRoZSBhdHRyaWJ1dGUgaXMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIEJvb2xlYW5BdHRyaWJ1dGVQYXJ0IHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBuYW1lLCBzdHJpbmdzKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzdHJpbmdzLmxlbmd0aCAhPT0gMiB8fCBzdHJpbmdzWzBdICE9PSAnJyB8fCBzdHJpbmdzWzFdICE9PSAnJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCb29sZWFuIGF0dHJpYnV0ZXMgY2FuIG9ubHkgY29udGFpbiBhIHNpbmdsZSBleHByZXNzaW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5zdHJpbmdzID0gc3RyaW5ncztcbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBjb21taXQoKSB7XG4gICAgICAgIHdoaWxlIChpc0RpcmVjdGl2ZSh0aGlzLl9fcGVuZGluZ1ZhbHVlKSkge1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aXZlID0gdGhpcy5fX3BlbmRpbmdWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSBub0NoYW5nZTtcbiAgICAgICAgICAgIGRpcmVjdGl2ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fX3BlbmRpbmdWYWx1ZSA9PT0gbm9DaGFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9ICEhdGhpcy5fX3BlbmRpbmdWYWx1ZTtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKHRoaXMubmFtZSwgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSh0aGlzLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSBub0NoYW5nZTtcbiAgICB9XG59XG4vKipcbiAqIFNldHMgYXR0cmlidXRlIHZhbHVlcyBmb3IgUHJvcGVydHlQYXJ0cywgc28gdGhhdCB0aGUgdmFsdWUgaXMgb25seSBzZXQgb25jZVxuICogZXZlbiBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgcGFydHMgZm9yIGEgcHJvcGVydHkuXG4gKlxuICogSWYgYW4gZXhwcmVzc2lvbiBjb250cm9scyB0aGUgd2hvbGUgcHJvcGVydHkgdmFsdWUsIHRoZW4gdGhlIHZhbHVlIGlzIHNpbXBseVxuICogYXNzaWduZWQgdG8gdGhlIHByb3BlcnR5IHVuZGVyIGNvbnRyb2wuIElmIHRoZXJlIGFyZSBzdHJpbmcgbGl0ZXJhbHMgb3JcbiAqIG11bHRpcGxlIGV4cHJlc3Npb25zLCB0aGVuIHRoZSBzdHJpbmdzIGFyZSBleHByZXNzaW9ucyBhcmUgaW50ZXJwb2xhdGVkIGludG9cbiAqIGEgc3RyaW5nIGZpcnN0LlxuICovXG5leHBvcnQgY2xhc3MgUHJvcGVydHlDb21taXR0ZXIgZXh0ZW5kcyBBdHRyaWJ1dGVDb21taXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MpIHtcbiAgICAgICAgc3VwZXIoZWxlbWVudCwgbmFtZSwgc3RyaW5ncyk7XG4gICAgICAgIHRoaXMuc2luZ2xlID1cbiAgICAgICAgICAgIChzdHJpbmdzLmxlbmd0aCA9PT0gMiAmJiBzdHJpbmdzWzBdID09PSAnJyAmJiBzdHJpbmdzWzFdID09PSAnJyk7XG4gICAgfVxuICAgIF9jcmVhdGVQYXJ0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb3BlcnR5UGFydCh0aGlzKTtcbiAgICB9XG4gICAgX2dldFZhbHVlKCkge1xuICAgICAgICBpZiAodGhpcy5zaW5nbGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnRzWzBdLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0VmFsdWUoKTtcbiAgICB9XG4gICAgY29tbWl0KCkge1xuICAgICAgICBpZiAodGhpcy5kaXJ0eSkge1xuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudFt0aGlzLm5hbWVdID0gdGhpcy5fZ2V0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eVBhcnQgZXh0ZW5kcyBBdHRyaWJ1dGVQYXJ0IHtcbn1cbi8vIERldGVjdCBldmVudCBsaXN0ZW5lciBvcHRpb25zIHN1cHBvcnQuIElmIHRoZSBgY2FwdHVyZWAgcHJvcGVydHkgaXMgcmVhZFxuLy8gZnJvbSB0aGUgb3B0aW9ucyBvYmplY3QsIHRoZW4gb3B0aW9ucyBhcmUgc3VwcG9ydGVkLiBJZiBub3QsIHRoZW4gdGhlIHRoaXJkXG4vLyBhcmd1bWVudCB0byBhZGQvcmVtb3ZlRXZlbnRMaXN0ZW5lciBpcyBpbnRlcnByZXRlZCBhcyB0aGUgYm9vbGVhbiBjYXB0dXJlXG4vLyB2YWx1ZSBzbyB3ZSBzaG91bGQgb25seSBwYXNzIHRoZSBgY2FwdHVyZWAgcHJvcGVydHkuXG5sZXQgZXZlbnRPcHRpb25zU3VwcG9ydGVkID0gZmFsc2U7XG4vLyBXcmFwIGludG8gYW4gSUlGRSBiZWNhdXNlIE1TIEVkZ2UgPD0gdjQxIGRvZXMgbm90IHN1cHBvcnQgaGF2aW5nIHRyeS9jYXRjaFxuLy8gYmxvY2tzIHJpZ2h0IGludG8gdGhlIGJvZHkgb2YgYSBtb2R1bGVcbigoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGdldCBjYXB0dXJlKCkge1xuICAgICAgICAgICAgICAgIGV2ZW50T3B0aW9uc1N1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdCcsIG9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGVzdCcsIG9wdGlvbnMsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBjYXRjaCAoX2UpIHtcbiAgICAgICAgLy8gZXZlbnQgb3B0aW9ucyBub3Qgc3VwcG9ydGVkXG4gICAgfVxufSkoKTtcbmV4cG9ydCBjbGFzcyBFdmVudFBhcnQge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGV2ZW50TmFtZSwgZXZlbnRDb250ZXh0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuZXZlbnROYW1lID0gZXZlbnROYW1lO1xuICAgICAgICB0aGlzLmV2ZW50Q29udGV4dCA9IGV2ZW50Q29udGV4dDtcbiAgICAgICAgdGhpcy5fX2JvdW5kSGFuZGxlRXZlbnQgPSAoZSkgPT4gdGhpcy5oYW5kbGVFdmVudChlKTtcbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBjb21taXQoKSB7XG4gICAgICAgIHdoaWxlIChpc0RpcmVjdGl2ZSh0aGlzLl9fcGVuZGluZ1ZhbHVlKSkge1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aXZlID0gdGhpcy5fX3BlbmRpbmdWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSBub0NoYW5nZTtcbiAgICAgICAgICAgIGRpcmVjdGl2ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fX3BlbmRpbmdWYWx1ZSA9PT0gbm9DaGFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdMaXN0ZW5lciA9IHRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgICAgIGNvbnN0IG9sZExpc3RlbmVyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgY29uc3Qgc2hvdWxkUmVtb3ZlTGlzdGVuZXIgPSBuZXdMaXN0ZW5lciA9PSBudWxsIHx8XG4gICAgICAgICAgICBvbGRMaXN0ZW5lciAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgKG5ld0xpc3RlbmVyLmNhcHR1cmUgIT09IG9sZExpc3RlbmVyLmNhcHR1cmUgfHxcbiAgICAgICAgICAgICAgICAgICAgbmV3TGlzdGVuZXIub25jZSAhPT0gb2xkTGlzdGVuZXIub25jZSB8fFxuICAgICAgICAgICAgICAgICAgICBuZXdMaXN0ZW5lci5wYXNzaXZlICE9PSBvbGRMaXN0ZW5lci5wYXNzaXZlKTtcbiAgICAgICAgY29uc3Qgc2hvdWxkQWRkTGlzdGVuZXIgPSBuZXdMaXN0ZW5lciAhPSBudWxsICYmIChvbGRMaXN0ZW5lciA9PSBudWxsIHx8IHNob3VsZFJlbW92ZUxpc3RlbmVyKTtcbiAgICAgICAgaWYgKHNob3VsZFJlbW92ZUxpc3RlbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50TmFtZSwgdGhpcy5fX2JvdW5kSGFuZGxlRXZlbnQsIHRoaXMuX19vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvdWxkQWRkTGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX19vcHRpb25zID0gZ2V0T3B0aW9ucyhuZXdMaXN0ZW5lcik7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50TmFtZSwgdGhpcy5fX2JvdW5kSGFuZGxlRXZlbnQsIHRoaXMuX19vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlID0gbmV3TGlzdGVuZXI7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSBub0NoYW5nZTtcbiAgICB9XG4gICAgaGFuZGxlRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlLmNhbGwodGhpcy5ldmVudENvbnRleHQgfHwgdGhpcy5lbGVtZW50LCBldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlLmhhbmRsZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIFdlIGNvcHkgb3B0aW9ucyBiZWNhdXNlIG9mIHRoZSBpbmNvbnNpc3RlbnQgYmVoYXZpb3Igb2YgYnJvd3NlcnMgd2hlbiByZWFkaW5nXG4vLyB0aGUgdGhpcmQgYXJndW1lbnQgb2YgYWRkL3JlbW92ZUV2ZW50TGlzdGVuZXIuIElFMTEgZG9lc24ndCBzdXBwb3J0IG9wdGlvbnNcbi8vIGF0IGFsbC4gQ2hyb21lIDQxIG9ubHkgcmVhZHMgYGNhcHR1cmVgIGlmIHRoZSBhcmd1bWVudCBpcyBhbiBvYmplY3QuXG5jb25zdCBnZXRPcHRpb25zID0gKG8pID0+IG8gJiZcbiAgICAoZXZlbnRPcHRpb25zU3VwcG9ydGVkID9cbiAgICAgICAgeyBjYXB0dXJlOiBvLmNhcHR1cmUsIHBhc3NpdmU6IG8ucGFzc2l2ZSwgb25jZTogby5vbmNlIH0gOlxuICAgICAgICBvLmNhcHR1cmUpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFydHMuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuaW1wb3J0IHsgbWFya2VyLCBUZW1wbGF0ZSB9IGZyb20gJy4vdGVtcGxhdGUuanMnO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBUZW1wbGF0ZUZhY3Rvcnkgd2hpY2ggY2FjaGVzIFRlbXBsYXRlcyBrZXllZCBvblxuICogcmVzdWx0LnR5cGUgYW5kIHJlc3VsdC5zdHJpbmdzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGVGYWN0b3J5KHJlc3VsdCkge1xuICAgIGxldCB0ZW1wbGF0ZUNhY2hlID0gdGVtcGxhdGVDYWNoZXMuZ2V0KHJlc3VsdC50eXBlKTtcbiAgICBpZiAodGVtcGxhdGVDYWNoZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRlbXBsYXRlQ2FjaGUgPSB7XG4gICAgICAgICAgICBzdHJpbmdzQXJyYXk6IG5ldyBXZWFrTWFwKCksXG4gICAgICAgICAgICBrZXlTdHJpbmc6IG5ldyBNYXAoKVxuICAgICAgICB9O1xuICAgICAgICB0ZW1wbGF0ZUNhY2hlcy5zZXQocmVzdWx0LnR5cGUsIHRlbXBsYXRlQ2FjaGUpO1xuICAgIH1cbiAgICBsZXQgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNhY2hlLnN0cmluZ3NBcnJheS5nZXQocmVzdWx0LnN0cmluZ3MpO1xuICAgIGlmICh0ZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG4gICAgLy8gSWYgdGhlIFRlbXBsYXRlU3RyaW5nc0FycmF5IGlzIG5ldywgZ2VuZXJhdGUgYSBrZXkgZnJvbSB0aGUgc3RyaW5nc1xuICAgIC8vIFRoaXMga2V5IGlzIHNoYXJlZCBiZXR3ZWVuIGFsbCB0ZW1wbGF0ZXMgd2l0aCBpZGVudGljYWwgY29udGVudFxuICAgIGNvbnN0IGtleSA9IHJlc3VsdC5zdHJpbmdzLmpvaW4obWFya2VyKTtcbiAgICAvLyBDaGVjayBpZiB3ZSBhbHJlYWR5IGhhdmUgYSBUZW1wbGF0ZSBmb3IgdGhpcyBrZXlcbiAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FjaGUua2V5U3RyaW5nLmdldChrZXkpO1xuICAgIGlmICh0ZW1wbGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIElmIHdlIGhhdmUgbm90IHNlZW4gdGhpcyBrZXkgYmVmb3JlLCBjcmVhdGUgYSBuZXcgVGVtcGxhdGVcbiAgICAgICAgdGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUocmVzdWx0LCByZXN1bHQuZ2V0VGVtcGxhdGVFbGVtZW50KCkpO1xuICAgICAgICAvLyBDYWNoZSB0aGUgVGVtcGxhdGUgZm9yIHRoaXMga2V5XG4gICAgICAgIHRlbXBsYXRlQ2FjaGUua2V5U3RyaW5nLnNldChrZXksIHRlbXBsYXRlKTtcbiAgICB9XG4gICAgLy8gQ2FjaGUgYWxsIGZ1dHVyZSBxdWVyaWVzIGZvciB0aGlzIFRlbXBsYXRlU3RyaW5nc0FycmF5XG4gICAgdGVtcGxhdGVDYWNoZS5zdHJpbmdzQXJyYXkuc2V0KHJlc3VsdC5zdHJpbmdzLCB0ZW1wbGF0ZSk7XG4gICAgcmV0dXJuIHRlbXBsYXRlO1xufVxuZXhwb3J0IGNvbnN0IHRlbXBsYXRlQ2FjaGVzID0gbmV3IE1hcCgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVtcGxhdGUtZmFjdG9yeS5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIEBtb2R1bGUgbGl0LWh0bWxcbiAqL1xuaW1wb3J0IHsgcmVtb3ZlTm9kZXMgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBOb2RlUGFydCB9IGZyb20gJy4vcGFydHMuanMnO1xuaW1wb3J0IHsgdGVtcGxhdGVGYWN0b3J5IH0gZnJvbSAnLi90ZW1wbGF0ZS1mYWN0b3J5LmpzJztcbmV4cG9ydCBjb25zdCBwYXJ0cyA9IG5ldyBXZWFrTWFwKCk7XG4vKipcbiAqIFJlbmRlcnMgYSB0ZW1wbGF0ZSByZXN1bHQgb3Igb3RoZXIgdmFsdWUgdG8gYSBjb250YWluZXIuXG4gKlxuICogVG8gdXBkYXRlIGEgY29udGFpbmVyIHdpdGggbmV3IHZhbHVlcywgcmVldmFsdWF0ZSB0aGUgdGVtcGxhdGUgbGl0ZXJhbCBhbmRcbiAqIGNhbGwgYHJlbmRlcmAgd2l0aCB0aGUgbmV3IHJlc3VsdC5cbiAqXG4gKiBAcGFyYW0gcmVzdWx0IEFueSB2YWx1ZSByZW5kZXJhYmxlIGJ5IE5vZGVQYXJ0IC0gdHlwaWNhbGx5IGEgVGVtcGxhdGVSZXN1bHRcbiAqICAgICBjcmVhdGVkIGJ5IGV2YWx1YXRpbmcgYSB0ZW1wbGF0ZSB0YWcgbGlrZSBgaHRtbGAgb3IgYHN2Z2AuXG4gKiBAcGFyYW0gY29udGFpbmVyIEEgRE9NIHBhcmVudCB0byByZW5kZXIgdG8uIFRoZSBlbnRpcmUgY29udGVudHMgYXJlIGVpdGhlclxuICogICAgIHJlcGxhY2VkLCBvciBlZmZpY2llbnRseSB1cGRhdGVkIGlmIHRoZSBzYW1lIHJlc3VsdCB0eXBlIHdhcyBwcmV2aW91c1xuICogICAgIHJlbmRlcmVkIHRoZXJlLlxuICogQHBhcmFtIG9wdGlvbnMgUmVuZGVyT3B0aW9ucyBmb3IgdGhlIGVudGlyZSByZW5kZXIgdHJlZSByZW5kZXJlZCB0byB0aGlzXG4gKiAgICAgY29udGFpbmVyLiBSZW5kZXIgb3B0aW9ucyBtdXN0ICpub3QqIGNoYW5nZSBiZXR3ZWVuIHJlbmRlcnMgdG8gdGhlIHNhbWVcbiAqICAgICBjb250YWluZXIsIGFzIHRob3NlIGNoYW5nZXMgd2lsbCBub3QgZWZmZWN0IHByZXZpb3VzbHkgcmVuZGVyZWQgRE9NLlxuICovXG5leHBvcnQgY29uc3QgcmVuZGVyID0gKHJlc3VsdCwgY29udGFpbmVyLCBvcHRpb25zKSA9PiB7XG4gICAgbGV0IHBhcnQgPSBwYXJ0cy5nZXQoY29udGFpbmVyKTtcbiAgICBpZiAocGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJlbW92ZU5vZGVzKGNvbnRhaW5lciwgY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgICAgICBwYXJ0cy5zZXQoY29udGFpbmVyLCBwYXJ0ID0gbmV3IE5vZGVQYXJ0KE9iamVjdC5hc3NpZ24oeyB0ZW1wbGF0ZUZhY3RvcnkgfSwgb3B0aW9ucykpKTtcbiAgICAgICAgcGFydC5hcHBlbmRJbnRvKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIHBhcnQuc2V0VmFsdWUocmVzdWx0KTtcbiAgICBwYXJ0LmNvbW1pdCgpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlbmRlci5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5pbXBvcnQgeyBBdHRyaWJ1dGVDb21taXR0ZXIsIEJvb2xlYW5BdHRyaWJ1dGVQYXJ0LCBFdmVudFBhcnQsIE5vZGVQYXJ0LCBQcm9wZXJ0eUNvbW1pdHRlciB9IGZyb20gJy4vcGFydHMuanMnO1xuLyoqXG4gKiBDcmVhdGVzIFBhcnRzIHdoZW4gYSB0ZW1wbGF0ZSBpcyBpbnN0YW50aWF0ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3Ige1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBwYXJ0cyBmb3IgYW4gYXR0cmlidXRlLXBvc2l0aW9uIGJpbmRpbmcsIGdpdmVuIHRoZSBldmVudCwgYXR0cmlidXRlXG4gICAgICogbmFtZSwgYW5kIHN0cmluZyBsaXRlcmFscy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIGJpbmRpbmdcbiAgICAgKiBAcGFyYW0gbmFtZSAgVGhlIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtIHN0cmluZ3MgVGhlIHN0cmluZyBsaXRlcmFscy4gVGhlcmUgYXJlIGFsd2F5cyBhdCBsZWFzdCB0d28gc3RyaW5ncyxcbiAgICAgKiAgIGV2ZW50IGZvciBmdWxseS1jb250cm9sbGVkIGJpbmRpbmdzIHdpdGggYSBzaW5nbGUgZXhwcmVzc2lvbi5cbiAgICAgKi9cbiAgICBoYW5kbGVBdHRyaWJ1dGVFeHByZXNzaW9ucyhlbGVtZW50LCBuYW1lLCBzdHJpbmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHByZWZpeCA9IG5hbWVbMF07XG4gICAgICAgIGlmIChwcmVmaXggPT09ICcuJykge1xuICAgICAgICAgICAgY29uc3QgY29tbWl0dGVyID0gbmV3IFByb3BlcnR5Q29tbWl0dGVyKGVsZW1lbnQsIG5hbWUuc2xpY2UoMSksIHN0cmluZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbW1pdHRlci5wYXJ0cztcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJlZml4ID09PSAnQCcpIHtcbiAgICAgICAgICAgIHJldHVybiBbbmV3IEV2ZW50UGFydChlbGVtZW50LCBuYW1lLnNsaWNlKDEpLCBvcHRpb25zLmV2ZW50Q29udGV4dCldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmVmaXggPT09ICc/Jykge1xuICAgICAgICAgICAgcmV0dXJuIFtuZXcgQm9vbGVhbkF0dHJpYnV0ZVBhcnQoZWxlbWVudCwgbmFtZS5zbGljZSgxKSwgc3RyaW5ncyldO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbW1pdHRlciA9IG5ldyBBdHRyaWJ1dGVDb21taXR0ZXIoZWxlbWVudCwgbmFtZSwgc3RyaW5ncyk7XG4gICAgICAgIHJldHVybiBjb21taXR0ZXIucGFydHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBwYXJ0cyBmb3IgYSB0ZXh0LXBvc2l0aW9uIGJpbmRpbmcuXG4gICAgICogQHBhcmFtIHRlbXBsYXRlRmFjdG9yeVxuICAgICAqL1xuICAgIGhhbmRsZVRleHRFeHByZXNzaW9uKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlUGFydChvcHRpb25zKTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgZGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yID0gbmV3IERlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvcigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmYXVsdC10ZW1wbGF0ZS1wcm9jZXNzb3IuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKlxuICogTWFpbiBsaXQtaHRtbCBtb2R1bGUuXG4gKlxuICogTWFpbiBleHBvcnRzOlxuICpcbiAqIC0gIFtbaHRtbF1dXG4gKiAtICBbW3N2Z11dXG4gKiAtICBbW3JlbmRlcl1dXG4gKlxuICogQG1vZHVsZSBsaXQtaHRtbFxuICogQHByZWZlcnJlZFxuICovXG4vKipcbiAqIERvIG5vdCByZW1vdmUgdGhpcyBjb21tZW50OyBpdCBrZWVwcyB0eXBlZG9jIGZyb20gbWlzcGxhY2luZyB0aGUgbW9kdWxlXG4gKiBkb2NzLlxuICovXG5pbXBvcnQgeyBkZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IgfSBmcm9tICcuL2xpYi9kZWZhdWx0LXRlbXBsYXRlLXByb2Nlc3Nvci5qcyc7XG5pbXBvcnQgeyBTVkdUZW1wbGF0ZVJlc3VsdCwgVGVtcGxhdGVSZXN1bHQgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1yZXN1bHQuanMnO1xuZXhwb3J0IHsgRGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yLCBkZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IgfSBmcm9tICcuL2xpYi9kZWZhdWx0LXRlbXBsYXRlLXByb2Nlc3Nvci5qcyc7XG5leHBvcnQgeyBkaXJlY3RpdmUsIGlzRGlyZWN0aXZlIH0gZnJvbSAnLi9saWIvZGlyZWN0aXZlLmpzJztcbi8vIFRPRE8oanVzdGluZmFnbmFuaSk6IHJlbW92ZSBsaW5lIHdoZW4gd2UgZ2V0IE5vZGVQYXJ0IG1vdmluZyBtZXRob2RzXG5leHBvcnQgeyByZW1vdmVOb2RlcywgcmVwYXJlbnROb2RlcyB9IGZyb20gJy4vbGliL2RvbS5qcyc7XG5leHBvcnQgeyBub0NoYW5nZSwgbm90aGluZyB9IGZyb20gJy4vbGliL3BhcnQuanMnO1xuZXhwb3J0IHsgQXR0cmlidXRlQ29tbWl0dGVyLCBBdHRyaWJ1dGVQYXJ0LCBCb29sZWFuQXR0cmlidXRlUGFydCwgRXZlbnRQYXJ0LCBpc0l0ZXJhYmxlLCBpc1ByaW1pdGl2ZSwgTm9kZVBhcnQsIFByb3BlcnR5Q29tbWl0dGVyLCBQcm9wZXJ0eVBhcnQgfSBmcm9tICcuL2xpYi9wYXJ0cy5qcyc7XG5leHBvcnQgeyBwYXJ0cywgcmVuZGVyIH0gZnJvbSAnLi9saWIvcmVuZGVyLmpzJztcbmV4cG9ydCB7IHRlbXBsYXRlQ2FjaGVzLCB0ZW1wbGF0ZUZhY3RvcnkgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1mYWN0b3J5LmpzJztcbmV4cG9ydCB7IFRlbXBsYXRlSW5zdGFuY2UgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1pbnN0YW5jZS5qcyc7XG5leHBvcnQgeyBTVkdUZW1wbGF0ZVJlc3VsdCwgVGVtcGxhdGVSZXN1bHQgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1yZXN1bHQuanMnO1xuZXhwb3J0IHsgY3JlYXRlTWFya2VyLCBpc1RlbXBsYXRlUGFydEFjdGl2ZSwgVGVtcGxhdGUgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS5qcyc7XG4vLyBJTVBPUlRBTlQ6IGRvIG5vdCBjaGFuZ2UgdGhlIHByb3BlcnR5IG5hbWUgb3IgdGhlIGFzc2lnbm1lbnQgZXhwcmVzc2lvbi5cbi8vIFRoaXMgbGluZSB3aWxsIGJlIHVzZWQgaW4gcmVnZXhlcyB0byBzZWFyY2ggZm9yIGxpdC1odG1sIHVzYWdlLlxuLy8gVE9ETyhqdXN0aW5mYWduYW5pKTogaW5qZWN0IHZlcnNpb24gbnVtYmVyIGF0IGJ1aWxkIHRpbWVcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICh3aW5kb3dbJ2xpdEh0bWxWZXJzaW9ucyddIHx8ICh3aW5kb3dbJ2xpdEh0bWxWZXJzaW9ucyddID0gW10pKS5wdXNoKCcxLjIuMScpO1xufVxuLyoqXG4gKiBJbnRlcnByZXRzIGEgdGVtcGxhdGUgbGl0ZXJhbCBhcyBhbiBIVE1MIHRlbXBsYXRlIHRoYXQgY2FuIGVmZmljaWVudGx5XG4gKiByZW5kZXIgdG8gYW5kIHVwZGF0ZSBhIGNvbnRhaW5lci5cbiAqL1xuZXhwb3J0IGNvbnN0IGh0bWwgPSAoc3RyaW5ncywgLi4udmFsdWVzKSA9PiBuZXcgVGVtcGxhdGVSZXN1bHQoc3RyaW5ncywgdmFsdWVzLCAnaHRtbCcsIGRlZmF1bHRUZW1wbGF0ZVByb2Nlc3Nvcik7XG4vKipcbiAqIEludGVycHJldHMgYSB0ZW1wbGF0ZSBsaXRlcmFsIGFzIGFuIFNWRyB0ZW1wbGF0ZSB0aGF0IGNhbiBlZmZpY2llbnRseVxuICogcmVuZGVyIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBzdmcgPSAoc3RyaW5ncywgLi4udmFsdWVzKSA9PiBuZXcgU1ZHVGVtcGxhdGVSZXN1bHQoc3RyaW5ncywgdmFsdWVzLCAnc3ZnJywgZGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpdC1odG1sLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogTW9kdWxlIHRvIGFkZCBzaGFkeSBET00vc2hhZHkgQ1NTIHBvbHlmaWxsIHN1cHBvcnQgdG8gbGl0LWh0bWwgdGVtcGxhdGVcbiAqIHJlbmRlcmluZy4gU2VlIHRoZSBbW3JlbmRlcl1dIG1ldGhvZCBmb3IgZGV0YWlscy5cbiAqXG4gKiBAbW9kdWxlIHNoYWR5LXJlbmRlclxuICogQHByZWZlcnJlZFxuICovXG4vKipcbiAqIERvIG5vdCByZW1vdmUgdGhpcyBjb21tZW50OyBpdCBrZWVwcyB0eXBlZG9jIGZyb20gbWlzcGxhY2luZyB0aGUgbW9kdWxlXG4gKiBkb2NzLlxuICovXG5pbXBvcnQgeyByZW1vdmVOb2RlcyB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGluc2VydE5vZGVJbnRvVGVtcGxhdGUsIHJlbW92ZU5vZGVzRnJvbVRlbXBsYXRlIH0gZnJvbSAnLi9tb2RpZnktdGVtcGxhdGUuanMnO1xuaW1wb3J0IHsgcGFydHMsIHJlbmRlciBhcyBsaXRSZW5kZXIgfSBmcm9tICcuL3JlbmRlci5qcyc7XG5pbXBvcnQgeyB0ZW1wbGF0ZUNhY2hlcyB9IGZyb20gJy4vdGVtcGxhdGUtZmFjdG9yeS5qcyc7XG5pbXBvcnQgeyBUZW1wbGF0ZUluc3RhbmNlIH0gZnJvbSAnLi90ZW1wbGF0ZS1pbnN0YW5jZS5qcyc7XG5pbXBvcnQgeyBtYXJrZXIsIFRlbXBsYXRlIH0gZnJvbSAnLi90ZW1wbGF0ZS5qcyc7XG5leHBvcnQgeyBodG1sLCBzdmcsIFRlbXBsYXRlUmVzdWx0IH0gZnJvbSAnLi4vbGl0LWh0bWwuanMnO1xuLy8gR2V0IGEga2V5IHRvIGxvb2t1cCBpbiBgdGVtcGxhdGVDYWNoZXNgLlxuY29uc3QgZ2V0VGVtcGxhdGVDYWNoZUtleSA9ICh0eXBlLCBzY29wZU5hbWUpID0+IGAke3R5cGV9LS0ke3Njb3BlTmFtZX1gO1xubGV0IGNvbXBhdGlibGVTaGFkeUNTU1ZlcnNpb24gPSB0cnVlO1xuaWYgKHR5cGVvZiB3aW5kb3cuU2hhZHlDU1MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29tcGF0aWJsZVNoYWR5Q1NTVmVyc2lvbiA9IGZhbHNlO1xufVxuZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5TaGFkeUNTUy5wcmVwYXJlVGVtcGxhdGVEb20gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29uc29sZS53YXJuKGBJbmNvbXBhdGlibGUgU2hhZHlDU1MgdmVyc2lvbiBkZXRlY3RlZC4gYCArXG4gICAgICAgIGBQbGVhc2UgdXBkYXRlIHRvIGF0IGxlYXN0IEB3ZWJjb21wb25lbnRzL3dlYmNvbXBvbmVudHNqc0AyLjAuMiBhbmQgYCArXG4gICAgICAgIGBAd2ViY29tcG9uZW50cy9zaGFkeWNzc0AxLjMuMS5gKTtcbiAgICBjb21wYXRpYmxlU2hhZHlDU1NWZXJzaW9uID0gZmFsc2U7XG59XG4vKipcbiAqIFRlbXBsYXRlIGZhY3Rvcnkgd2hpY2ggc2NvcGVzIHRlbXBsYXRlIERPTSB1c2luZyBTaGFkeUNTUy5cbiAqIEBwYXJhbSBzY29wZU5hbWUge3N0cmluZ31cbiAqL1xuY29uc3Qgc2hhZHlUZW1wbGF0ZUZhY3RvcnkgPSAoc2NvcGVOYW1lKSA9PiAocmVzdWx0KSA9PiB7XG4gICAgY29uc3QgY2FjaGVLZXkgPSBnZXRUZW1wbGF0ZUNhY2hlS2V5KHJlc3VsdC50eXBlLCBzY29wZU5hbWUpO1xuICAgIGxldCB0ZW1wbGF0ZUNhY2hlID0gdGVtcGxhdGVDYWNoZXMuZ2V0KGNhY2hlS2V5KTtcbiAgICBpZiAodGVtcGxhdGVDYWNoZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRlbXBsYXRlQ2FjaGUgPSB7XG4gICAgICAgICAgICBzdHJpbmdzQXJyYXk6IG5ldyBXZWFrTWFwKCksXG4gICAgICAgICAgICBrZXlTdHJpbmc6IG5ldyBNYXAoKVxuICAgICAgICB9O1xuICAgICAgICB0ZW1wbGF0ZUNhY2hlcy5zZXQoY2FjaGVLZXksIHRlbXBsYXRlQ2FjaGUpO1xuICAgIH1cbiAgICBsZXQgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNhY2hlLnN0cmluZ3NBcnJheS5nZXQocmVzdWx0LnN0cmluZ3MpO1xuICAgIGlmICh0ZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG4gICAgY29uc3Qga2V5ID0gcmVzdWx0LnN0cmluZ3Muam9pbihtYXJrZXIpO1xuICAgIHRlbXBsYXRlID0gdGVtcGxhdGVDYWNoZS5rZXlTdHJpbmcuZ2V0KGtleSk7XG4gICAgaWYgKHRlbXBsYXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHJlc3VsdC5nZXRUZW1wbGF0ZUVsZW1lbnQoKTtcbiAgICAgICAgaWYgKGNvbXBhdGlibGVTaGFkeUNTU1ZlcnNpb24pIHtcbiAgICAgICAgICAgIHdpbmRvdy5TaGFkeUNTUy5wcmVwYXJlVGVtcGxhdGVEb20oZWxlbWVudCwgc2NvcGVOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0ZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZShyZXN1bHQsIGVsZW1lbnQpO1xuICAgICAgICB0ZW1wbGF0ZUNhY2hlLmtleVN0cmluZy5zZXQoa2V5LCB0ZW1wbGF0ZSk7XG4gICAgfVxuICAgIHRlbXBsYXRlQ2FjaGUuc3RyaW5nc0FycmF5LnNldChyZXN1bHQuc3RyaW5ncywgdGVtcGxhdGUpO1xuICAgIHJldHVybiB0ZW1wbGF0ZTtcbn07XG5jb25zdCBURU1QTEFURV9UWVBFUyA9IFsnaHRtbCcsICdzdmcnXTtcbi8qKlxuICogUmVtb3ZlcyBhbGwgc3R5bGUgZWxlbWVudHMgZnJvbSBUZW1wbGF0ZXMgZm9yIHRoZSBnaXZlbiBzY29wZU5hbWUuXG4gKi9cbmNvbnN0IHJlbW92ZVN0eWxlc0Zyb21MaXRUZW1wbGF0ZXMgPSAoc2NvcGVOYW1lKSA9PiB7XG4gICAgVEVNUExBVEVfVFlQRVMuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZXMgPSB0ZW1wbGF0ZUNhY2hlcy5nZXQoZ2V0VGVtcGxhdGVDYWNoZUtleSh0eXBlLCBzY29wZU5hbWUpKTtcbiAgICAgICAgaWYgKHRlbXBsYXRlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZXMua2V5U3RyaW5nLmZvckVhY2goKHRlbXBsYXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBlbGVtZW50OiB7IGNvbnRlbnQgfSB9ID0gdGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgLy8gSUUgMTEgZG9lc24ndCBzdXBwb3J0IHRoZSBpdGVyYWJsZSBwYXJhbSBTZXQgY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICBjb25zdCBzdHlsZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgQXJyYXkuZnJvbShjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3N0eWxlJykpLmZvckVhY2goKHMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVzLmFkZChzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZW1vdmVOb2Rlc0Zyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgc3R5bGVzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuY29uc3Qgc2hhZHlSZW5kZXJTZXQgPSBuZXcgU2V0KCk7XG4vKipcbiAqIEZvciB0aGUgZ2l2ZW4gc2NvcGUgbmFtZSwgZW5zdXJlcyB0aGF0IFNoYWR5Q1NTIHN0eWxlIHNjb3BpbmcgaXMgcGVyZm9ybWVkLlxuICogVGhpcyBpcyBkb25lIGp1c3Qgb25jZSBwZXIgc2NvcGUgbmFtZSBzbyB0aGUgZnJhZ21lbnQgYW5kIHRlbXBsYXRlIGNhbm5vdFxuICogYmUgbW9kaWZpZWQuXG4gKiAoMSkgZXh0cmFjdHMgc3R5bGVzIGZyb20gdGhlIHJlbmRlcmVkIGZyYWdtZW50IGFuZCBoYW5kcyB0aGVtIHRvIFNoYWR5Q1NTXG4gKiB0byBiZSBzY29wZWQgYW5kIGFwcGVuZGVkIHRvIHRoZSBkb2N1bWVudFxuICogKDIpIHJlbW92ZXMgc3R5bGUgZWxlbWVudHMgZnJvbSBhbGwgbGl0LWh0bWwgVGVtcGxhdGVzIGZvciB0aGlzIHNjb3BlIG5hbWUuXG4gKlxuICogTm90ZSwgPHN0eWxlPiBlbGVtZW50cyBjYW4gb25seSBiZSBwbGFjZWQgaW50byB0ZW1wbGF0ZXMgZm9yIHRoZVxuICogaW5pdGlhbCByZW5kZXJpbmcgb2YgdGhlIHNjb3BlLiBJZiA8c3R5bGU+IGVsZW1lbnRzIGFyZSBpbmNsdWRlZCBpbiB0ZW1wbGF0ZXNcbiAqIGR5bmFtaWNhbGx5IHJlbmRlcmVkIHRvIHRoZSBzY29wZSAoYWZ0ZXIgdGhlIGZpcnN0IHNjb3BlIHJlbmRlciksIHRoZXkgd2lsbFxuICogbm90IGJlIHNjb3BlZCBhbmQgdGhlIDxzdHlsZT4gd2lsbCBiZSBsZWZ0IGluIHRoZSB0ZW1wbGF0ZSBhbmQgcmVuZGVyZWRcbiAqIG91dHB1dC5cbiAqL1xuY29uc3QgcHJlcGFyZVRlbXBsYXRlU3R5bGVzID0gKHNjb3BlTmFtZSwgcmVuZGVyZWRET00sIHRlbXBsYXRlKSA9PiB7XG4gICAgc2hhZHlSZW5kZXJTZXQuYWRkKHNjb3BlTmFtZSk7XG4gICAgLy8gSWYgYHJlbmRlcmVkRE9NYCBpcyBzdGFtcGVkIGZyb20gYSBUZW1wbGF0ZSwgdGhlbiB3ZSBuZWVkIHRvIGVkaXQgdGhhdFxuICAgIC8vIFRlbXBsYXRlJ3MgdW5kZXJseWluZyB0ZW1wbGF0ZSBlbGVtZW50LiBPdGhlcndpc2UsIHdlIGNyZWF0ZSBvbmUgaGVyZVxuICAgIC8vIHRvIGdpdmUgdG8gU2hhZHlDU1MsIHdoaWNoIHN0aWxsIHJlcXVpcmVzIG9uZSB3aGlsZSBzY29waW5nLlxuICAgIGNvbnN0IHRlbXBsYXRlRWxlbWVudCA9ICEhdGVtcGxhdGUgPyB0ZW1wbGF0ZS5lbGVtZW50IDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICAvLyBNb3ZlIHN0eWxlcyBvdXQgb2YgcmVuZGVyZWQgRE9NIGFuZCBzdG9yZS5cbiAgICBjb25zdCBzdHlsZXMgPSByZW5kZXJlZERPTS5xdWVyeVNlbGVjdG9yQWxsKCdzdHlsZScpO1xuICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBzdHlsZXM7XG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIHN0eWxlcywgc2tpcCB1bm5lY2Vzc2FyeSB3b3JrXG4gICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBFbnN1cmUgcHJlcGFyZVRlbXBsYXRlU3R5bGVzIGlzIGNhbGxlZCB0byBzdXBwb3J0IGFkZGluZ1xuICAgICAgICAvLyBzdHlsZXMgdmlhIGBwcmVwYXJlQWRvcHRlZENzc1RleHRgIHNpbmNlIHRoYXQgcmVxdWlyZXMgdGhhdFxuICAgICAgICAvLyBgcHJlcGFyZVRlbXBsYXRlU3R5bGVzYCBpcyBjYWxsZWQuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFNoYWR5Q1NTIHdpbGwgb25seSB1cGRhdGUgc3R5bGVzIGNvbnRhaW5pbmcgQGFwcGx5IGluIHRoZSB0ZW1wbGF0ZVxuICAgICAgICAvLyBnaXZlbiB0byBgcHJlcGFyZVRlbXBsYXRlU3R5bGVzYC4gSWYgbm8gbGl0IFRlbXBsYXRlIHdhcyBnaXZlbixcbiAgICAgICAgLy8gU2hhZHlDU1Mgd2lsbCBub3QgYmUgYWJsZSB0byB1cGRhdGUgdXNlcyBvZiBAYXBwbHkgaW4gYW55IHJlbGV2YW50XG4gICAgICAgIC8vIHRlbXBsYXRlLiBIb3dldmVyLCB0aGlzIGlzIG5vdCBhIHByb2JsZW0gYmVjYXVzZSB3ZSBvbmx5IGNyZWF0ZSB0aGVcbiAgICAgICAgLy8gdGVtcGxhdGUgZm9yIHRoZSBwdXJwb3NlIG9mIHN1cHBvcnRpbmcgYHByZXBhcmVBZG9wdGVkQ3NzVGV4dGAsXG4gICAgICAgIC8vIHdoaWNoIGRvZXNuJ3Qgc3VwcG9ydCBAYXBwbHkgYXQgYWxsLlxuICAgICAgICB3aW5kb3cuU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlU3R5bGVzKHRlbXBsYXRlRWxlbWVudCwgc2NvcGVOYW1lKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb25kZW5zZWRTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgLy8gQ29sbGVjdCBzdHlsZXMgaW50byBhIHNpbmdsZSBzdHlsZS4gVGhpcyBoZWxwcyB1cyBtYWtlIHN1cmUgU2hhZHlDU1NcbiAgICAvLyBtYW5pcHVsYXRpb25zIHdpbGwgbm90IHByZXZlbnQgdXMgZnJvbSBiZWluZyBhYmxlIHRvIGZpeCB1cCB0ZW1wbGF0ZVxuICAgIC8vIHBhcnQgaW5kaWNlcy5cbiAgICAvLyBOT1RFOiBjb2xsZWN0aW5nIHN0eWxlcyBpcyBpbmVmZmljaWVudCBmb3IgYnJvd3NlcnMgYnV0IFNoYWR5Q1NTXG4gICAgLy8gY3VycmVudGx5IGRvZXMgdGhpcyBhbnl3YXkuIFdoZW4gaXQgZG9lcyBub3QsIHRoaXMgc2hvdWxkIGJlIGNoYW5nZWQuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzdHlsZSA9IHN0eWxlc1tpXTtcbiAgICAgICAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG4gICAgICAgIGNvbmRlbnNlZFN0eWxlLnRleHRDb250ZW50ICs9IHN0eWxlLnRleHRDb250ZW50O1xuICAgIH1cbiAgICAvLyBSZW1vdmUgc3R5bGVzIGZyb20gbmVzdGVkIHRlbXBsYXRlcyBpbiB0aGlzIHNjb3BlLlxuICAgIHJlbW92ZVN0eWxlc0Zyb21MaXRUZW1wbGF0ZXMoc2NvcGVOYW1lKTtcbiAgICAvLyBBbmQgdGhlbiBwdXQgdGhlIGNvbmRlbnNlZCBzdHlsZSBpbnRvIHRoZSBcInJvb3RcIiB0ZW1wbGF0ZSBwYXNzZWQgaW4gYXNcbiAgICAvLyBgdGVtcGxhdGVgLlxuICAgIGNvbnN0IGNvbnRlbnQgPSB0ZW1wbGF0ZUVsZW1lbnQuY29udGVudDtcbiAgICBpZiAoISF0ZW1wbGF0ZSkge1xuICAgICAgICBpbnNlcnROb2RlSW50b1RlbXBsYXRlKHRlbXBsYXRlLCBjb25kZW5zZWRTdHlsZSwgY29udGVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuaW5zZXJ0QmVmb3JlKGNvbmRlbnNlZFN0eWxlLCBjb250ZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICAvLyBOb3RlLCBpdCdzIGltcG9ydGFudCB0aGF0IFNoYWR5Q1NTIGdldHMgdGhlIHRlbXBsYXRlIHRoYXQgYGxpdC1odG1sYFxuICAgIC8vIHdpbGwgYWN0dWFsbHkgcmVuZGVyIHNvIHRoYXQgaXQgY2FuIHVwZGF0ZSB0aGUgc3R5bGUgaW5zaWRlIHdoZW5cbiAgICAvLyBuZWVkZWQgKGUuZy4gQGFwcGx5IG5hdGl2ZSBTaGFkb3cgRE9NIGNhc2UpLlxuICAgIHdpbmRvdy5TaGFkeUNTUy5wcmVwYXJlVGVtcGxhdGVTdHlsZXModGVtcGxhdGVFbGVtZW50LCBzY29wZU5hbWUpO1xuICAgIGNvbnN0IHN0eWxlID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCdzdHlsZScpO1xuICAgIGlmICh3aW5kb3cuU2hhZHlDU1MubmF0aXZlU2hhZG93ICYmIHN0eWxlICE9PSBudWxsKSB7XG4gICAgICAgIC8vIFdoZW4gaW4gbmF0aXZlIFNoYWRvdyBET00sIGVuc3VyZSB0aGUgc3R5bGUgY3JlYXRlZCBieSBTaGFkeUNTUyBpc1xuICAgICAgICAvLyBpbmNsdWRlZCBpbiBpbml0aWFsbHkgcmVuZGVyZWQgb3V0cHV0IChgcmVuZGVyZWRET01gKS5cbiAgICAgICAgcmVuZGVyZWRET00uaW5zZXJ0QmVmb3JlKHN0eWxlLmNsb25lTm9kZSh0cnVlKSwgcmVuZGVyZWRET00uZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCEhdGVtcGxhdGUpIHtcbiAgICAgICAgLy8gV2hlbiBubyBzdHlsZSBpcyBsZWZ0IGluIHRoZSB0ZW1wbGF0ZSwgcGFydHMgd2lsbCBiZSBicm9rZW4gYXMgYVxuICAgICAgICAvLyByZXN1bHQuIFRvIGZpeCB0aGlzLCB3ZSBwdXQgYmFjayB0aGUgc3R5bGUgbm9kZSBTaGFkeUNTUyByZW1vdmVkXG4gICAgICAgIC8vIGFuZCB0aGVuIHRlbGwgbGl0IHRvIHJlbW92ZSB0aGF0IG5vZGUgZnJvbSB0aGUgdGVtcGxhdGUuXG4gICAgICAgIC8vIFRoZXJlIGNhbiBiZSBubyBzdHlsZSBpbiB0aGUgdGVtcGxhdGUgaW4gMiBjYXNlcyAoMSkgd2hlbiBTaGFkeSBET01cbiAgICAgICAgLy8gaXMgaW4gdXNlLCBTaGFkeUNTUyByZW1vdmVzIGFsbCBzdHlsZXMsICgyKSB3aGVuIG5hdGl2ZSBTaGFkb3cgRE9NXG4gICAgICAgIC8vIGlzIGluIHVzZSBTaGFkeUNTUyByZW1vdmVzIHRoZSBzdHlsZSBpZiBpdCBjb250YWlucyBubyBjb250ZW50LlxuICAgICAgICAvLyBOT1RFLCBTaGFkeUNTUyBjcmVhdGVzIGl0cyBvd24gc3R5bGUgc28gd2UgY2FuIHNhZmVseSBhZGQvcmVtb3ZlXG4gICAgICAgIC8vIGBjb25kZW5zZWRTdHlsZWAgaGVyZS5cbiAgICAgICAgY29udGVudC5pbnNlcnRCZWZvcmUoY29uZGVuc2VkU3R5bGUsIGNvbnRlbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgIGNvbnN0IHJlbW92ZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHJlbW92ZXMuYWRkKGNvbmRlbnNlZFN0eWxlKTtcbiAgICAgICAgcmVtb3ZlTm9kZXNGcm9tVGVtcGxhdGUodGVtcGxhdGUsIHJlbW92ZXMpO1xuICAgIH1cbn07XG4vKipcbiAqIEV4dGVuc2lvbiB0byB0aGUgc3RhbmRhcmQgYHJlbmRlcmAgbWV0aG9kIHdoaWNoIHN1cHBvcnRzIHJlbmRlcmluZ1xuICogdG8gU2hhZG93Um9vdHMgd2hlbiB0aGUgU2hhZHlET00gKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJjb21wb25lbnRzL3NoYWR5ZG9tKVxuICogYW5kIFNoYWR5Q1NTIChodHRwczovL2dpdGh1Yi5jb20vd2ViY29tcG9uZW50cy9zaGFkeWNzcykgcG9seWZpbGxzIGFyZSB1c2VkXG4gKiBvciB3aGVuIHRoZSB3ZWJjb21wb25lbnRzanNcbiAqIChodHRwczovL2dpdGh1Yi5jb20vd2ViY29tcG9uZW50cy93ZWJjb21wb25lbnRzanMpIHBvbHlmaWxsIGlzIHVzZWQuXG4gKlxuICogQWRkcyBhIGBzY29wZU5hbWVgIG9wdGlvbiB3aGljaCBpcyB1c2VkIHRvIHNjb3BlIGVsZW1lbnQgRE9NIGFuZCBzdHlsZXNoZWV0c1xuICogd2hlbiBuYXRpdmUgU2hhZG93RE9NIGlzIHVuYXZhaWxhYmxlLiBUaGUgYHNjb3BlTmFtZWAgd2lsbCBiZSBhZGRlZCB0b1xuICogdGhlIGNsYXNzIGF0dHJpYnV0ZSBvZiBhbGwgcmVuZGVyZWQgRE9NLiBJbiBhZGRpdGlvbiwgYW55IHN0eWxlIGVsZW1lbnRzIHdpbGxcbiAqIGJlIGF1dG9tYXRpY2FsbHkgcmUtd3JpdHRlbiB3aXRoIHRoaXMgYHNjb3BlTmFtZWAgc2VsZWN0b3IgYW5kIG1vdmVkIG91dFxuICogb2YgdGhlIHJlbmRlcmVkIERPTSBhbmQgaW50byB0aGUgZG9jdW1lbnQgYDxoZWFkPmAuXG4gKlxuICogSXQgaXMgY29tbW9uIHRvIHVzZSB0aGlzIHJlbmRlciBtZXRob2QgaW4gY29uanVuY3Rpb24gd2l0aCBhIGN1c3RvbSBlbGVtZW50XG4gKiB3aGljaCByZW5kZXJzIGEgc2hhZG93Um9vdC4gV2hlbiB0aGlzIGlzIGRvbmUsIHR5cGljYWxseSB0aGUgZWxlbWVudCdzXG4gKiBgbG9jYWxOYW1lYCBzaG91bGQgYmUgdXNlZCBhcyB0aGUgYHNjb3BlTmFtZWAuXG4gKlxuICogSW4gYWRkaXRpb24gdG8gRE9NIHNjb3BpbmcsIFNoYWR5Q1NTIGFsc28gc3VwcG9ydHMgYSBiYXNpYyBzaGltIGZvciBjc3NcbiAqIGN1c3RvbSBwcm9wZXJ0aWVzIChuZWVkZWQgb25seSBvbiBvbGRlciBicm93c2VycyBsaWtlIElFMTEpIGFuZCBhIHNoaW0gZm9yXG4gKiBhIGRlcHJlY2F0ZWQgZmVhdHVyZSBjYWxsZWQgYEBhcHBseWAgdGhhdCBzdXBwb3J0cyBhcHBseWluZyBhIHNldCBvZiBjc3NcbiAqIGN1c3RvbSBwcm9wZXJ0aWVzIHRvIGEgZ2l2ZW4gbG9jYXRpb24uXG4gKlxuICogVXNhZ2UgY29uc2lkZXJhdGlvbnM6XG4gKlxuICogKiBQYXJ0IHZhbHVlcyBpbiBgPHN0eWxlPmAgZWxlbWVudHMgYXJlIG9ubHkgYXBwbGllZCB0aGUgZmlyc3QgdGltZSBhIGdpdmVuXG4gKiBgc2NvcGVOYW1lYCByZW5kZXJzLiBTdWJzZXF1ZW50IGNoYW5nZXMgdG8gcGFydHMgaW4gc3R5bGUgZWxlbWVudHMgd2lsbCBoYXZlXG4gKiBubyBlZmZlY3QuIEJlY2F1c2Ugb2YgdGhpcywgcGFydHMgaW4gc3R5bGUgZWxlbWVudHMgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3JcbiAqIHZhbHVlcyB0aGF0IHdpbGwgbmV2ZXIgY2hhbmdlLCBmb3IgZXhhbXBsZSBwYXJ0cyB0aGF0IHNldCBzY29wZS13aWRlIHRoZW1lXG4gKiB2YWx1ZXMgb3IgcGFydHMgd2hpY2ggcmVuZGVyIHNoYXJlZCBzdHlsZSBlbGVtZW50cy5cbiAqXG4gKiAqIE5vdGUsIGR1ZSB0byBhIGxpbWl0YXRpb24gb2YgdGhlIFNoYWR5RE9NIHBvbHlmaWxsLCByZW5kZXJpbmcgaW4gYVxuICogY3VzdG9tIGVsZW1lbnQncyBgY29uc3RydWN0b3JgIGlzIG5vdCBzdXBwb3J0ZWQuIEluc3RlYWQgcmVuZGVyaW5nIHNob3VsZFxuICogZWl0aGVyIGRvbmUgYXN5bmNocm9ub3VzbHksIGZvciBleGFtcGxlIGF0IG1pY3JvdGFzayB0aW1pbmcgKGZvciBleGFtcGxlXG4gKiBgUHJvbWlzZS5yZXNvbHZlKClgKSwgb3IgYmUgZGVmZXJyZWQgdW50aWwgdGhlIGZpcnN0IHRpbWUgdGhlIGVsZW1lbnQnc1xuICogYGNvbm5lY3RlZENhbGxiYWNrYCBydW5zLlxuICpcbiAqIFVzYWdlIGNvbnNpZGVyYXRpb25zIHdoZW4gdXNpbmcgc2hpbW1lZCBjdXN0b20gcHJvcGVydGllcyBvciBgQGFwcGx5YDpcbiAqXG4gKiAqIFdoZW5ldmVyIGFueSBkeW5hbWljIGNoYW5nZXMgYXJlIG1hZGUgd2hpY2ggYWZmZWN0XG4gKiBjc3MgY3VzdG9tIHByb3BlcnRpZXMsIGBTaGFkeUNTUy5zdHlsZUVsZW1lbnQoZWxlbWVudClgIG11c3QgYmUgY2FsbGVkXG4gKiB0byB1cGRhdGUgdGhlIGVsZW1lbnQuIFRoZXJlIGFyZSB0d28gY2FzZXMgd2hlbiB0aGlzIGlzIG5lZWRlZDpcbiAqICgxKSB0aGUgZWxlbWVudCBpcyBjb25uZWN0ZWQgdG8gYSBuZXcgcGFyZW50LCAoMikgYSBjbGFzcyBpcyBhZGRlZCB0byB0aGVcbiAqIGVsZW1lbnQgdGhhdCBjYXVzZXMgaXQgdG8gbWF0Y2ggZGlmZmVyZW50IGN1c3RvbSBwcm9wZXJ0aWVzLlxuICogVG8gYWRkcmVzcyB0aGUgZmlyc3QgY2FzZSB3aGVuIHJlbmRlcmluZyBhIGN1c3RvbSBlbGVtZW50LCBgc3R5bGVFbGVtZW50YFxuICogc2hvdWxkIGJlIGNhbGxlZCBpbiB0aGUgZWxlbWVudCdzIGBjb25uZWN0ZWRDYWxsYmFja2AuXG4gKlxuICogKiBTaGltbWVkIGN1c3RvbSBwcm9wZXJ0aWVzIG1heSBvbmx5IGJlIGRlZmluZWQgZWl0aGVyIGZvciBhbiBlbnRpcmVcbiAqIHNoYWRvd1Jvb3QgKGZvciBleGFtcGxlLCBpbiBhIGA6aG9zdGAgcnVsZSkgb3IgdmlhIGEgcnVsZSB0aGF0IGRpcmVjdGx5XG4gKiBtYXRjaGVzIGFuIGVsZW1lbnQgd2l0aCBhIHNoYWRvd1Jvb3QuIEluIG90aGVyIHdvcmRzLCBpbnN0ZWFkIG9mIGZsb3dpbmcgZnJvbVxuICogcGFyZW50IHRvIGNoaWxkIGFzIGRvIG5hdGl2ZSBjc3MgY3VzdG9tIHByb3BlcnRpZXMsIHNoaW1tZWQgY3VzdG9tIHByb3BlcnRpZXNcbiAqIGZsb3cgb25seSBmcm9tIHNoYWRvd1Jvb3RzIHRvIG5lc3RlZCBzaGFkb3dSb290cy5cbiAqXG4gKiAqIFdoZW4gdXNpbmcgYEBhcHBseWAgbWl4aW5nIGNzcyBzaG9ydGhhbmQgcHJvcGVydHkgbmFtZXMgd2l0aFxuICogbm9uLXNob3J0aGFuZCBuYW1lcyAoZm9yIGV4YW1wbGUgYGJvcmRlcmAgYW5kIGBib3JkZXItd2lkdGhgKSBpcyBub3RcbiAqIHN1cHBvcnRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlbmRlciA9IChyZXN1bHQsIGNvbnRhaW5lciwgb3B0aW9ucykgPT4ge1xuICAgIGlmICghb3B0aW9ucyB8fCB0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcgfHwgIW9wdGlvbnMuc2NvcGVOYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGBzY29wZU5hbWVgIG9wdGlvbiBpcyByZXF1aXJlZC4nKTtcbiAgICB9XG4gICAgY29uc3Qgc2NvcGVOYW1lID0gb3B0aW9ucy5zY29wZU5hbWU7XG4gICAgY29uc3QgaGFzUmVuZGVyZWQgPSBwYXJ0cy5oYXMoY29udGFpbmVyKTtcbiAgICBjb25zdCBuZWVkc1Njb3BpbmcgPSBjb21wYXRpYmxlU2hhZHlDU1NWZXJzaW9uICYmXG4gICAgICAgIGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gMTEgLyogTm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFICovICYmXG4gICAgICAgICEhY29udGFpbmVyLmhvc3Q7XG4gICAgLy8gSGFuZGxlIGZpcnN0IHJlbmRlciB0byBhIHNjb3BlIHNwZWNpYWxseS4uLlxuICAgIGNvbnN0IGZpcnN0U2NvcGVSZW5kZXIgPSBuZWVkc1Njb3BpbmcgJiYgIXNoYWR5UmVuZGVyU2V0LmhhcyhzY29wZU5hbWUpO1xuICAgIC8vIE9uIGZpcnN0IHNjb3BlIHJlbmRlciwgcmVuZGVyIGludG8gYSBmcmFnbWVudDsgdGhpcyBjYW5ub3QgYmUgYSBzaW5nbGVcbiAgICAvLyBmcmFnbWVudCB0aGF0IGlzIHJldXNlZCBzaW5jZSBuZXN0ZWQgcmVuZGVycyBjYW4gb2NjdXIgc3luY2hyb25vdXNseS5cbiAgICBjb25zdCByZW5kZXJDb250YWluZXIgPSBmaXJzdFNjb3BlUmVuZGVyID8gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpIDogY29udGFpbmVyO1xuICAgIGxpdFJlbmRlcihyZXN1bHQsIHJlbmRlckNvbnRhaW5lciwgT2JqZWN0LmFzc2lnbih7IHRlbXBsYXRlRmFjdG9yeTogc2hhZHlUZW1wbGF0ZUZhY3Rvcnkoc2NvcGVOYW1lKSB9LCBvcHRpb25zKSk7XG4gICAgLy8gV2hlbiBwZXJmb3JtaW5nIGZpcnN0IHNjb3BlIHJlbmRlcixcbiAgICAvLyAoMSkgV2UndmUgcmVuZGVyZWQgaW50byBhIGZyYWdtZW50IHNvIHRoYXQgdGhlcmUncyBhIGNoYW5jZSB0b1xuICAgIC8vIGBwcmVwYXJlVGVtcGxhdGVTdHlsZXNgIGJlZm9yZSBzdWItZWxlbWVudHMgaGl0IHRoZSBET01cbiAgICAvLyAod2hpY2ggbWlnaHQgY2F1c2UgdGhlbSB0byByZW5kZXIgYmFzZWQgb24gYSBjb21tb24gcGF0dGVybiBvZlxuICAgIC8vIHJlbmRlcmluZyBpbiBhIGN1c3RvbSBlbGVtZW50J3MgYGNvbm5lY3RlZENhbGxiYWNrYCk7XG4gICAgLy8gKDIpIFNjb3BlIHRoZSB0ZW1wbGF0ZSB3aXRoIFNoYWR5Q1NTIG9uZSB0aW1lIG9ubHkgZm9yIHRoaXMgc2NvcGUuXG4gICAgLy8gKDMpIFJlbmRlciB0aGUgZnJhZ21lbnQgaW50byB0aGUgY29udGFpbmVyIGFuZCBtYWtlIHN1cmUgdGhlXG4gICAgLy8gY29udGFpbmVyIGtub3dzIGl0cyBgcGFydGAgaXMgdGhlIG9uZSB3ZSBqdXN0IHJlbmRlcmVkLiBUaGlzIGVuc3VyZXNcbiAgICAvLyBET00gd2lsbCBiZSByZS11c2VkIG9uIHN1YnNlcXVlbnQgcmVuZGVycy5cbiAgICBpZiAoZmlyc3RTY29wZVJlbmRlcikge1xuICAgICAgICBjb25zdCBwYXJ0ID0gcGFydHMuZ2V0KHJlbmRlckNvbnRhaW5lcik7XG4gICAgICAgIHBhcnRzLmRlbGV0ZShyZW5kZXJDb250YWluZXIpO1xuICAgICAgICAvLyBTaGFkeUNTUyBtaWdodCBoYXZlIHN0eWxlIHNoZWV0cyAoZS5nLiBmcm9tIGBwcmVwYXJlQWRvcHRlZENzc1RleHRgKVxuICAgICAgICAvLyB0aGF0IHNob3VsZCBhcHBseSB0byBgcmVuZGVyQ29udGFpbmVyYCBldmVuIGlmIHRoZSByZW5kZXJlZCB2YWx1ZSBpc1xuICAgICAgICAvLyBub3QgYSBUZW1wbGF0ZUluc3RhbmNlLiBIb3dldmVyLCBpdCB3aWxsIG9ubHkgaW5zZXJ0IHNjb3BlZCBzdHlsZXNcbiAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQgaWYgYHByZXBhcmVUZW1wbGF0ZVN0eWxlc2AgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWRcbiAgICAgICAgLy8gZm9yIHRoZSBnaXZlbiBzY29wZSBuYW1lLlxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHBhcnQudmFsdWUgaW5zdGFuY2VvZiBUZW1wbGF0ZUluc3RhbmNlID9cbiAgICAgICAgICAgIHBhcnQudmFsdWUudGVtcGxhdGUgOlxuICAgICAgICAgICAgdW5kZWZpbmVkO1xuICAgICAgICBwcmVwYXJlVGVtcGxhdGVTdHlsZXMoc2NvcGVOYW1lLCByZW5kZXJDb250YWluZXIsIHRlbXBsYXRlKTtcbiAgICAgICAgcmVtb3ZlTm9kZXMoY29udGFpbmVyLCBjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJDb250YWluZXIpO1xuICAgICAgICBwYXJ0cy5zZXQoY29udGFpbmVyLCBwYXJ0KTtcbiAgICB9XG4gICAgLy8gQWZ0ZXIgZWxlbWVudHMgaGF2ZSBoaXQgdGhlIERPTSwgdXBkYXRlIHN0eWxpbmcgaWYgdGhpcyBpcyB0aGVcbiAgICAvLyBpbml0aWFsIHJlbmRlciB0byB0aGlzIGNvbnRhaW5lci5cbiAgICAvLyBUaGlzIGlzIG5lZWRlZCB3aGVuZXZlciBkeW5hbWljIGNoYW5nZXMgYXJlIG1hZGUgc28gaXQgd291bGQgYmVcbiAgICAvLyBzYWZlc3QgdG8gZG8gZXZlcnkgcmVuZGVyOyBob3dldmVyLCB0aGlzIHdvdWxkIHJlZ3Jlc3MgcGVyZm9ybWFuY2VcbiAgICAvLyBzbyB3ZSBsZWF2ZSBpdCB1cCB0byB0aGUgdXNlciB0byBjYWxsIGBTaGFkeUNTUy5zdHlsZUVsZW1lbnRgXG4gICAgLy8gZm9yIGR5bmFtaWMgY2hhbmdlcy5cbiAgICBpZiAoIWhhc1JlbmRlcmVkICYmIG5lZWRzU2NvcGluZykge1xuICAgICAgICB3aW5kb3cuU2hhZHlDU1Muc3R5bGVFbGVtZW50KGNvbnRhaW5lci5ob3N0KTtcbiAgICB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhZHktcmVuZGVyLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbnZhciBfYTtcbi8qKlxuICogV2hlbiB1c2luZyBDbG9zdXJlIENvbXBpbGVyLCBKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KHByb3BlcnR5LCBvYmplY3QpIGlzXG4gKiByZXBsYWNlZCBhdCBjb21waWxlIHRpbWUgYnkgdGhlIG11bmdlZCBuYW1lIGZvciBvYmplY3RbcHJvcGVydHldLiBXZSBjYW5ub3RcbiAqIGFsaWFzIHRoaXMgZnVuY3Rpb24sIHNvIHdlIGhhdmUgdG8gdXNlIGEgc21hbGwgc2hpbSB0aGF0IGhhcyB0aGUgc2FtZVxuICogYmVoYXZpb3Igd2hlbiBub3QgY29tcGlsaW5nLlxuICovXG53aW5kb3cuSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSA9XG4gICAgKHByb3AsIF9vYmopID0+IHByb3A7XG5leHBvcnQgY29uc3QgZGVmYXVsdENvbnZlcnRlciA9IHtcbiAgICB0b0F0dHJpYnV0ZSh2YWx1ZSwgdHlwZSkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgQm9vbGVhbjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPyAnJyA6IG51bGw7XG4gICAgICAgICAgICBjYXNlIE9iamVjdDpcbiAgICAgICAgICAgIGNhc2UgQXJyYXk6XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIHZhbHVlIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCBwYXNzIHRoaXMgdGhyb3VnaFxuICAgICAgICAgICAgICAgIC8vIHRvIGFsbG93IHJlbW92aW5nL25vIGNoYW5nZSBiZWhhdmlvci5cbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIGZyb21BdHRyaWJ1dGUodmFsdWUsIHR5cGUpIHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIEJvb2xlYW46XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlICE9PSBudWxsO1xuICAgICAgICAgICAgY2FzZSBOdW1iZXI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09PSBudWxsID8gbnVsbCA6IE51bWJlcih2YWx1ZSk7XG4gICAgICAgICAgICBjYXNlIE9iamVjdDpcbiAgICAgICAgICAgIGNhc2UgQXJyYXk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59O1xuLyoqXG4gKiBDaGFuZ2UgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBkaWZmZXJlbnQgZnJvbSBgb2xkVmFsdWVgLlxuICogVGhpcyBtZXRob2QgaXMgdXNlZCBhcyB0aGUgZGVmYXVsdCBmb3IgYSBwcm9wZXJ0eSdzIGBoYXNDaGFuZ2VkYCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vdEVxdWFsID0gKHZhbHVlLCBvbGQpID0+IHtcbiAgICAvLyBUaGlzIGVuc3VyZXMgKG9sZD09TmFOLCB2YWx1ZT09TmFOKSBhbHdheXMgcmV0dXJucyBmYWxzZVxuICAgIHJldHVybiBvbGQgIT09IHZhbHVlICYmIChvbGQgPT09IG9sZCB8fCB2YWx1ZSA9PT0gdmFsdWUpO1xufTtcbmNvbnN0IGRlZmF1bHRQcm9wZXJ0eURlY2xhcmF0aW9uID0ge1xuICAgIGF0dHJpYnV0ZTogdHJ1ZSxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY29udmVydGVyOiBkZWZhdWx0Q29udmVydGVyLFxuICAgIHJlZmxlY3Q6IGZhbHNlLFxuICAgIGhhc0NoYW5nZWQ6IG5vdEVxdWFsXG59O1xuY29uc3QgU1RBVEVfSEFTX1VQREFURUQgPSAxO1xuY29uc3QgU1RBVEVfVVBEQVRFX1JFUVVFU1RFRCA9IDEgPDwgMjtcbmNvbnN0IFNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fQVRUUklCVVRFID0gMSA8PCAzO1xuY29uc3QgU1RBVEVfSVNfUkVGTEVDVElOR19UT19QUk9QRVJUWSA9IDEgPDwgNDtcbi8qKlxuICogVGhlIENsb3N1cmUgSlMgQ29tcGlsZXIgZG9lc24ndCBjdXJyZW50bHkgaGF2ZSBnb29kIHN1cHBvcnQgZm9yIHN0YXRpY1xuICogcHJvcGVydHkgc2VtYW50aWNzIHdoZXJlIFwidGhpc1wiIGlzIGR5bmFtaWMgKGUuZy5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1jb21waWxlci9pc3N1ZXMvMzE3NyBhbmQgb3RoZXJzKSBzbyB3ZSB1c2VcbiAqIHRoaXMgaGFjayB0byBieXBhc3MgYW55IHJld3JpdGluZyBieSB0aGUgY29tcGlsZXIuXG4gKi9cbmNvbnN0IGZpbmFsaXplZCA9ICdmaW5hbGl6ZWQnO1xuLyoqXG4gKiBCYXNlIGVsZW1lbnQgY2xhc3Mgd2hpY2ggbWFuYWdlcyBlbGVtZW50IHByb3BlcnRpZXMgYW5kIGF0dHJpYnV0ZXMuIFdoZW5cbiAqIHByb3BlcnRpZXMgY2hhbmdlLCB0aGUgYHVwZGF0ZWAgbWV0aG9kIGlzIGFzeW5jaHJvbm91c2x5IGNhbGxlZC4gVGhpcyBtZXRob2RcbiAqIHNob3VsZCBiZSBzdXBwbGllZCBieSBzdWJjbGFzc2VycyB0byByZW5kZXIgdXBkYXRlcyBhcyBkZXNpcmVkLlxuICovXG5leHBvcnQgY2xhc3MgVXBkYXRpbmdFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IDA7XG4gICAgICAgIHRoaXMuX2luc3RhbmNlUHJvcGVydGllcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0byBhbiB1bnJlc29sdmVkIFByb21pc2Ugc28gd2UgY2FuIG1ha2Ugc3VyZSB0aGUgZWxlbWVudCBoYXNcbiAgICAgICAgLy8gY29ubmVjdGVkIGJlZm9yZSBmaXJzdCB1cGRhdGUuXG4gICAgICAgIHRoaXMuX3VwZGF0ZVByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzKSA9PiB0aGlzLl9lbmFibGVVcGRhdGluZ1Jlc29sdmVyID0gcmVzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcCB3aXRoIGtleXMgZm9yIGFueSBwcm9wZXJ0aWVzIHRoYXQgaGF2ZSBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0XG4gICAgICAgICAqIHVwZGF0ZSBjeWNsZSB3aXRoIHByZXZpb3VzIHZhbHVlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2NoYW5nZWRQcm9wZXJ0aWVzID0gbmV3IE1hcCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogTWFwIHdpdGgga2V5cyBvZiBwcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIGJlIHJlZmxlY3RlZCB3aGVuIHVwZGF0ZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsaXN0IG9mIGF0dHJpYnV0ZXMgY29ycmVzcG9uZGluZyB0byB0aGUgcmVnaXN0ZXJlZCBwcm9wZXJ0aWVzLlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIC8vIG5vdGU6IHBpZ2d5IGJhY2tpbmcgb24gdGhpcyB0byBlbnN1cmUgd2UncmUgZmluYWxpemVkLlxuICAgICAgICB0aGlzLmZpbmFsaXplKCk7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBbXTtcbiAgICAgICAgLy8gVXNlIGZvckVhY2ggc28gdGhpcyB3b3JrcyBldmVuIGlmIGZvci9vZiBsb29wcyBhcmUgY29tcGlsZWQgdG8gZm9yIGxvb3BzXG4gICAgICAgIC8vIGV4cGVjdGluZyBhcnJheXNcbiAgICAgICAgdGhpcy5fY2xhc3NQcm9wZXJ0aWVzLmZvckVhY2goKHYsIHApID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHIgPSB0aGlzLl9hdHRyaWJ1dGVOYW1lRm9yUHJvcGVydHkocCwgdik7XG4gICAgICAgICAgICBpZiAoYXR0ciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcC5zZXQoYXR0ciwgcCk7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5wdXNoKGF0dHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhlIHByaXZhdGUgYF9jbGFzc1Byb3BlcnRpZXNgIHByb3BlcnR5IG1ldGFkYXRhIGlzIGNyZWF0ZWQuXG4gICAgICogSW4gYWRkaXRpb24gdG8gYGZpbmFsaXplYCB0aGlzIGlzIGFsc28gY2FsbGVkIGluIGBjcmVhdGVQcm9wZXJ0eWAgdG9cbiAgICAgKiBlbnN1cmUgdGhlIGBAcHJvcGVydHlgIGRlY29yYXRvciBjYW4gYWRkIHByb3BlcnR5IG1ldGFkYXRhLlxuICAgICAqL1xuICAgIC8qKiBAbm9jb2xsYXBzZSAqL1xuICAgIHN0YXRpYyBfZW5zdXJlQ2xhc3NQcm9wZXJ0aWVzKCkge1xuICAgICAgICAvLyBlbnN1cmUgcHJpdmF0ZSBzdG9yYWdlIGZvciBwcm9wZXJ0eSBkZWNsYXJhdGlvbnMuXG4gICAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfY2xhc3NQcm9wZXJ0aWVzJywgdGhpcykpKSB7XG4gICAgICAgICAgICB0aGlzLl9jbGFzc1Byb3BlcnRpZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICAvLyBOT1RFOiBXb3JrYXJvdW5kIElFMTEgbm90IHN1cHBvcnRpbmcgTWFwIGNvbnN0cnVjdG9yIGFyZ3VtZW50LlxuICAgICAgICAgICAgY29uc3Qgc3VwZXJQcm9wZXJ0aWVzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9jbGFzc1Byb3BlcnRpZXM7XG4gICAgICAgICAgICBpZiAoc3VwZXJQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdXBlclByb3BlcnRpZXMuZm9yRWFjaCgodiwgaykgPT4gdGhpcy5fY2xhc3NQcm9wZXJ0aWVzLnNldChrLCB2KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHByb3BlcnR5IGFjY2Vzc29yIG9uIHRoZSBlbGVtZW50IHByb3RvdHlwZSBpZiBvbmUgZG9lcyBub3QgZXhpc3RcbiAgICAgKiBhbmQgc3RvcmVzIGEgUHJvcGVydHlEZWNsYXJhdGlvbiBmb3IgdGhlIHByb3BlcnR5IHdpdGggdGhlIGdpdmVuIG9wdGlvbnMuXG4gICAgICogVGhlIHByb3BlcnR5IHNldHRlciBjYWxscyB0aGUgcHJvcGVydHkncyBgaGFzQ2hhbmdlZGAgcHJvcGVydHkgb3B0aW9uXG4gICAgICogb3IgdXNlcyBhIHN0cmljdCBpZGVudGl0eSBjaGVjayB0byBkZXRlcm1pbmUgd2hldGhlciBvciBub3QgdG8gcmVxdWVzdFxuICAgICAqIGFuIHVwZGF0ZS5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIG1heSBiZSBvdmVycmlkZGVuIHRvIGN1c3RvbWl6ZSBwcm9wZXJ0aWVzOyBob3dldmVyLFxuICAgICAqIHdoZW4gZG9pbmcgc28sIGl0J3MgaW1wb3J0YW50IHRvIGNhbGwgYHN1cGVyLmNyZWF0ZVByb3BlcnR5YCB0byBlbnN1cmVcbiAgICAgKiB0aGUgcHJvcGVydHkgaXMgc2V0dXAgY29ycmVjdGx5LiBUaGlzIG1ldGhvZCBjYWxsc1xuICAgICAqIGBnZXRQcm9wZXJ0eURlc2NyaXB0b3JgIGludGVybmFsbHkgdG8gZ2V0IGEgZGVzY3JpcHRvciB0byBpbnN0YWxsLlxuICAgICAqIFRvIGN1c3RvbWl6ZSB3aGF0IHByb3BlcnRpZXMgZG8gd2hlbiB0aGV5IGFyZSBnZXQgb3Igc2V0LCBvdmVycmlkZVxuICAgICAqIGBnZXRQcm9wZXJ0eURlc2NyaXB0b3JgLiBUbyBjdXN0b21pemUgdGhlIG9wdGlvbnMgZm9yIGEgcHJvcGVydHksXG4gICAgICogaW1wbGVtZW50IGBjcmVhdGVQcm9wZXJ0eWAgbGlrZSB0aGlzOlxuICAgICAqXG4gICAgICogc3RhdGljIGNyZWF0ZVByb3BlcnR5KG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgKiAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKG9wdGlvbnMsIHtteU9wdGlvbjogdHJ1ZX0pO1xuICAgICAqICAgc3VwZXIuY3JlYXRlUHJvcGVydHkobmFtZSwgb3B0aW9ucyk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlUHJvcGVydHkobmFtZSwgb3B0aW9ucyA9IGRlZmF1bHRQcm9wZXJ0eURlY2xhcmF0aW9uKSB7XG4gICAgICAgIC8vIE5vdGUsIHNpbmNlIHRoaXMgY2FuIGJlIGNhbGxlZCBieSB0aGUgYEBwcm9wZXJ0eWAgZGVjb3JhdG9yIHdoaWNoXG4gICAgICAgIC8vIGlzIGNhbGxlZCBiZWZvcmUgYGZpbmFsaXplYCwgd2UgZW5zdXJlIHN0b3JhZ2UgZXhpc3RzIGZvciBwcm9wZXJ0eVxuICAgICAgICAvLyBtZXRhZGF0YS5cbiAgICAgICAgdGhpcy5fZW5zdXJlQ2xhc3NQcm9wZXJ0aWVzKCk7XG4gICAgICAgIHRoaXMuX2NsYXNzUHJvcGVydGllcy5zZXQobmFtZSwgb3B0aW9ucyk7XG4gICAgICAgIC8vIERvIG5vdCBnZW5lcmF0ZSBhbiBhY2Nlc3NvciBpZiB0aGUgcHJvdG90eXBlIGFscmVhZHkgaGFzIG9uZSwgc2luY2VcbiAgICAgICAgLy8gaXQgd291bGQgYmUgbG9zdCBvdGhlcndpc2UgYW5kIHRoYXQgd291bGQgbmV2ZXIgYmUgdGhlIHVzZXIncyBpbnRlbnRpb247XG4gICAgICAgIC8vIEluc3RlYWQsIHdlIGV4cGVjdCB1c2VycyB0byBjYWxsIGByZXF1ZXN0VXBkYXRlYCB0aGVtc2VsdmVzIGZyb21cbiAgICAgICAgLy8gdXNlci1kZWZpbmVkIGFjY2Vzc29ycy4gTm90ZSB0aGF0IGlmIHRoZSBzdXBlciBoYXMgYW4gYWNjZXNzb3Igd2Ugd2lsbFxuICAgICAgICAvLyBzdGlsbCBvdmVyd3JpdGUgaXRcbiAgICAgICAgaWYgKG9wdGlvbnMubm9BY2Nlc3NvciB8fCB0aGlzLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtleSA9IHR5cGVvZiBuYW1lID09PSAnc3ltYm9sJyA/IFN5bWJvbCgpIDogYF9fJHtuYW1lfWA7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB0aGlzLmdldFByb3BlcnR5RGVzY3JpcHRvcihuYW1lLCBrZXksIG9wdGlvbnMpO1xuICAgICAgICBpZiAoZGVzY3JpcHRvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5wcm90b3R5cGUsIG5hbWUsIGRlc2NyaXB0b3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9wZXJ0eSBkZXNjcmlwdG9yIHRvIGJlIGRlZmluZWQgb24gdGhlIGdpdmVuIG5hbWVkIHByb3BlcnR5LlxuICAgICAqIElmIG5vIGRlc2NyaXB0b3IgaXMgcmV0dXJuZWQsIHRoZSBwcm9wZXJ0eSB3aWxsIG5vdCBiZWNvbWUgYW4gYWNjZXNzb3IuXG4gICAgICogRm9yIGV4YW1wbGUsXG4gICAgICpcbiAgICAgKiAgIGNsYXNzIE15RWxlbWVudCBleHRlbmRzIExpdEVsZW1lbnQge1xuICAgICAqICAgICBzdGF0aWMgZ2V0UHJvcGVydHlEZXNjcmlwdG9yKG5hbWUsIGtleSwgb3B0aW9ucykge1xuICAgICAqICAgICAgIGNvbnN0IGRlZmF1bHREZXNjcmlwdG9yID1cbiAgICAgKiAgICAgICAgICAgc3VwZXIuZ2V0UHJvcGVydHlEZXNjcmlwdG9yKG5hbWUsIGtleSwgb3B0aW9ucyk7XG4gICAgICogICAgICAgY29uc3Qgc2V0dGVyID0gZGVmYXVsdERlc2NyaXB0b3Iuc2V0O1xuICAgICAqICAgICAgIHJldHVybiB7XG4gICAgICogICAgICAgICBnZXQ6IGRlZmF1bHREZXNjcmlwdG9yLmdldCxcbiAgICAgKiAgICAgICAgIHNldCh2YWx1ZSkge1xuICAgICAqICAgICAgICAgICBzZXR0ZXIuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICogICAgICAgICAgIC8vIGN1c3RvbSBhY3Rpb24uXG4gICAgICogICAgICAgICB9LFxuICAgICAqICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAqICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAqICAgICAgIH1cbiAgICAgKiAgICAgfVxuICAgICAqICAgfVxuICAgICAqXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0UHJvcGVydHlEZXNjcmlwdG9yKG5hbWUsIGtleSwgX29wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnkgbm8gc3ltYm9sIGluIGluZGV4XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNba2V5XTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXNbbmFtZV07XG4gICAgICAgICAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVxdWVzdFVwZGF0ZShuYW1lLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9wZXJ0eSBvcHRpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gcHJvcGVydHkuXG4gICAgICogVGhlc2Ugb3B0aW9ucyBhcmUgZGVmaW5lZCB3aXRoIGEgUHJvcGVydHlEZWNsYXJhdGlvbiB2aWEgdGhlIGBwcm9wZXJ0aWVzYFxuICAgICAqIG9iamVjdCBvciB0aGUgYEBwcm9wZXJ0eWAgZGVjb3JhdG9yIGFuZCBhcmUgcmVnaXN0ZXJlZCBpblxuICAgICAqIGBjcmVhdGVQcm9wZXJ0eSguLi4pYC5cbiAgICAgKlxuICAgICAqIE5vdGUsIHRoaXMgbWV0aG9kIHNob3VsZCBiZSBjb25zaWRlcmVkIFwiZmluYWxcIiBhbmQgbm90IG92ZXJyaWRkZW4uIFRvXG4gICAgICogY3VzdG9taXplIHRoZSBvcHRpb25zIGZvciBhIGdpdmVuIHByb3BlcnR5LCBvdmVycmlkZSBgY3JlYXRlUHJvcGVydHlgLlxuICAgICAqXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKiBAZmluYWxcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0UHJvcGVydHlPcHRpb25zKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NsYXNzUHJvcGVydGllcyAmJiB0aGlzLl9jbGFzc1Byb3BlcnRpZXMuZ2V0KG5hbWUpIHx8XG4gICAgICAgICAgICBkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBwcm9wZXJ0eSBhY2Nlc3NvcnMgZm9yIHJlZ2lzdGVyZWQgcHJvcGVydGllcyBhbmQgZW5zdXJlc1xuICAgICAqIGFueSBzdXBlcmNsYXNzZXMgYXJlIGFsc28gZmluYWxpemVkLlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGZpbmFsaXplKCkge1xuICAgICAgICAvLyBmaW5hbGl6ZSBhbnkgc3VwZXJjbGFzc2VzXG4gICAgICAgIGNvbnN0IHN1cGVyQ3RvciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKTtcbiAgICAgICAgaWYgKCFzdXBlckN0b3IuaGFzT3duUHJvcGVydHkoZmluYWxpemVkKSkge1xuICAgICAgICAgICAgc3VwZXJDdG9yLmZpbmFsaXplKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1tmaW5hbGl6ZWRdID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fZW5zdXJlQ2xhc3NQcm9wZXJ0aWVzKCk7XG4gICAgICAgIC8vIGluaXRpYWxpemUgTWFwIHBvcHVsYXRlZCBpbiBvYnNlcnZlZEF0dHJpYnV0ZXNcbiAgICAgICAgdGhpcy5fYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgLy8gbWFrZSBhbnkgcHJvcGVydGllc1xuICAgICAgICAvLyBOb3RlLCBvbmx5IHByb2Nlc3MgXCJvd25cIiBwcm9wZXJ0aWVzIHNpbmNlIHRoaXMgZWxlbWVudCB3aWxsIGluaGVyaXRcbiAgICAgICAgLy8gYW55IHByb3BlcnRpZXMgZGVmaW5lZCBvbiB0aGUgc3VwZXJDbGFzcywgYW5kIGZpbmFsaXphdGlvbiBlbnN1cmVzXG4gICAgICAgIC8vIHRoZSBlbnRpcmUgcHJvdG90eXBlIGNoYWluIGlzIGZpbmFsaXplZC5cbiAgICAgICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgncHJvcGVydGllcycsIHRoaXMpKSkge1xuICAgICAgICAgICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BlcnRpZXM7XG4gICAgICAgICAgICAvLyBzdXBwb3J0IHN5bWJvbHMgaW4gcHJvcGVydGllcyAoSUUxMSBkb2VzIG5vdCBzdXBwb3J0IHRoaXMpXG4gICAgICAgICAgICBjb25zdCBwcm9wS2V5cyA9IFtcbiAgICAgICAgICAgICAgICAuLi5PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm9wcyksXG4gICAgICAgICAgICAgICAgLi4uKHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSAnZnVuY3Rpb24nKSA/XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocHJvcHMpIDpcbiAgICAgICAgICAgICAgICAgICAgW11cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICAvLyBUaGlzIGZvci9vZiBpcyBvayBiZWNhdXNlIHByb3BLZXlzIGlzIGFuIGFycmF5XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHAgb2YgcHJvcEtleXMpIHtcbiAgICAgICAgICAgICAgICAvLyBub3RlLCB1c2Ugb2YgYGFueWAgaXMgZHVlIHRvIFR5cGVTcmlwdCBsYWNrIG9mIHN1cHBvcnQgZm9yIHN5bWJvbCBpblxuICAgICAgICAgICAgICAgIC8vIGluZGV4IHR5cGVzXG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueSBubyBzeW1ib2wgaW4gaW5kZXhcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVByb3BlcnR5KHAsIHByb3BzW3BdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9wZXJ0eSBuYW1lIGZvciB0aGUgZ2l2ZW4gYXR0cmlidXRlIGBuYW1lYC5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlID0gb3B0aW9ucy5hdHRyaWJ1dGU7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGUgPT09IGZhbHNlID9cbiAgICAgICAgICAgIHVuZGVmaW5lZCA6XG4gICAgICAgICAgICAodHlwZW9mIGF0dHJpYnV0ZSA9PT0gJ3N0cmluZycgP1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSA6XG4gICAgICAgICAgICAgICAgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyA/IG5hbWUudG9Mb3dlckNhc2UoKSA6IHVuZGVmaW5lZCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYSBwcm9wZXJ0eSBzaG91bGQgcmVxdWVzdCBhbiB1cGRhdGUuXG4gICAgICogQ2FsbGVkIHdoZW4gYSBwcm9wZXJ0eSB2YWx1ZSBpcyBzZXQgYW5kIHVzZXMgdGhlIGBoYXNDaGFuZ2VkYFxuICAgICAqIG9wdGlvbiBmb3IgdGhlIHByb3BlcnR5IGlmIHByZXNlbnQgb3IgYSBzdHJpY3QgaWRlbnRpdHkgY2hlY2suXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3ZhbHVlSGFzQ2hhbmdlZCh2YWx1ZSwgb2xkLCBoYXNDaGFuZ2VkID0gbm90RXF1YWwpIHtcbiAgICAgICAgcmV0dXJuIGhhc0NoYW5nZWQodmFsdWUsIG9sZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIGZvciB0aGUgZ2l2ZW4gYXR0cmlidXRlIHZhbHVlLlxuICAgICAqIENhbGxlZCB2aWEgdGhlIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgIGFuZCB1c2VzIHRoZSBwcm9wZXJ0eSdzXG4gICAgICogYGNvbnZlcnRlcmAgb3IgYGNvbnZlcnRlci5mcm9tQXR0cmlidXRlYCBwcm9wZXJ0eSBvcHRpb24uXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3Byb3BlcnR5VmFsdWVGcm9tQXR0cmlidXRlKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBvcHRpb25zLnR5cGU7XG4gICAgICAgIGNvbnN0IGNvbnZlcnRlciA9IG9wdGlvbnMuY29udmVydGVyIHx8IGRlZmF1bHRDb252ZXJ0ZXI7XG4gICAgICAgIGNvbnN0IGZyb21BdHRyaWJ1dGUgPSAodHlwZW9mIGNvbnZlcnRlciA9PT0gJ2Z1bmN0aW9uJyA/IGNvbnZlcnRlciA6IGNvbnZlcnRlci5mcm9tQXR0cmlidXRlKTtcbiAgICAgICAgcmV0dXJuIGZyb21BdHRyaWJ1dGUgPyBmcm9tQXR0cmlidXRlKHZhbHVlLCB0eXBlKSA6IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBhdHRyaWJ1dGUgdmFsdWUgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eSB2YWx1ZS4gSWYgdGhpc1xuICAgICAqIHJldHVybnMgdW5kZWZpbmVkLCB0aGUgcHJvcGVydHkgd2lsbCAqbm90KiBiZSByZWZsZWN0ZWQgdG8gYW4gYXR0cmlidXRlLlxuICAgICAqIElmIHRoaXMgcmV0dXJucyBudWxsLCB0aGUgYXR0cmlidXRlIHdpbGwgYmUgcmVtb3ZlZCwgb3RoZXJ3aXNlIHRoZVxuICAgICAqIGF0dHJpYnV0ZSB3aWxsIGJlIHNldCB0byB0aGUgdmFsdWUuXG4gICAgICogVGhpcyB1c2VzIHRoZSBwcm9wZXJ0eSdzIGByZWZsZWN0YCBhbmQgYHR5cGUudG9BdHRyaWJ1dGVgIHByb3BlcnR5IG9wdGlvbnMuXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3Byb3BlcnR5VmFsdWVUb0F0dHJpYnV0ZSh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucy5yZWZsZWN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0eXBlID0gb3B0aW9ucy50eXBlO1xuICAgICAgICBjb25zdCBjb252ZXJ0ZXIgPSBvcHRpb25zLmNvbnZlcnRlcjtcbiAgICAgICAgY29uc3QgdG9BdHRyaWJ1dGUgPSBjb252ZXJ0ZXIgJiYgY29udmVydGVyLnRvQXR0cmlidXRlIHx8XG4gICAgICAgICAgICBkZWZhdWx0Q29udmVydGVyLnRvQXR0cmlidXRlO1xuICAgICAgICByZXR1cm4gdG9BdHRyaWJ1dGUodmFsdWUsIHR5cGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBlbGVtZW50IGluaXRpYWxpemF0aW9uLiBCeSBkZWZhdWx0IGNhcHR1cmVzIGFueSBwcmUtc2V0IHZhbHVlcyBmb3JcbiAgICAgKiByZWdpc3RlcmVkIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgdGhpcy5fc2F2ZUluc3RhbmNlUHJvcGVydGllcygpO1xuICAgICAgICAvLyBlbnN1cmVzIGZpcnN0IHVwZGF0ZSB3aWxsIGJlIGNhdWdodCBieSBhbiBlYXJseSBhY2Nlc3Mgb2ZcbiAgICAgICAgLy8gYHVwZGF0ZUNvbXBsZXRlYFxuICAgICAgICB0aGlzLl9yZXF1ZXN0VXBkYXRlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpeGVzIGFueSBwcm9wZXJ0aWVzIHNldCBvbiB0aGUgaW5zdGFuY2UgYmVmb3JlIHVwZ3JhZGUgdGltZS5cbiAgICAgKiBPdGhlcndpc2UgdGhlc2Ugd291bGQgc2hhZG93IHRoZSBhY2Nlc3NvciBhbmQgYnJlYWsgdGhlc2UgcHJvcGVydGllcy5cbiAgICAgKiBUaGUgcHJvcGVydGllcyBhcmUgc3RvcmVkIGluIGEgTWFwIHdoaWNoIGlzIHBsYXllZCBiYWNrIGFmdGVyIHRoZVxuICAgICAqIGNvbnN0cnVjdG9yIHJ1bnMuIE5vdGUsIG9uIHZlcnkgb2xkIHZlcnNpb25zIG9mIFNhZmFyaSAoPD05KSBvciBDaHJvbWVcbiAgICAgKiAoPD00MSksIHByb3BlcnRpZXMgY3JlYXRlZCBmb3IgbmF0aXZlIHBsYXRmb3JtIHByb3BlcnRpZXMgbGlrZSAoYGlkYCBvclxuICAgICAqIGBuYW1lYCkgbWF5IG5vdCBoYXZlIGRlZmF1bHQgdmFsdWVzIHNldCBpbiB0aGUgZWxlbWVudCBjb25zdHJ1Y3Rvci4gT25cbiAgICAgKiB0aGVzZSBicm93c2VycyBuYXRpdmUgcHJvcGVydGllcyBhcHBlYXIgb24gaW5zdGFuY2VzIGFuZCB0aGVyZWZvcmUgdGhlaXJcbiAgICAgKiBkZWZhdWx0IHZhbHVlIHdpbGwgb3ZlcndyaXRlIGFueSBlbGVtZW50IGRlZmF1bHQgKGUuZy4gaWYgdGhlIGVsZW1lbnQgc2V0c1xuICAgICAqIHRoaXMuaWQgPSAnaWQnIGluIHRoZSBjb25zdHJ1Y3RvciwgdGhlICdpZCcgd2lsbCBiZWNvbWUgJycgc2luY2UgdGhpcyBpc1xuICAgICAqIHRoZSBuYXRpdmUgcGxhdGZvcm0gZGVmYXVsdCkuXG4gICAgICovXG4gICAgX3NhdmVJbnN0YW5jZVByb3BlcnRpZXMoKSB7XG4gICAgICAgIC8vIFVzZSBmb3JFYWNoIHNvIHRoaXMgd29ya3MgZXZlbiBpZiBmb3Ivb2YgbG9vcHMgYXJlIGNvbXBpbGVkIHRvIGZvciBsb29wc1xuICAgICAgICAvLyBleHBlY3RpbmcgYXJyYXlzXG4gICAgICAgIHRoaXMuY29uc3RydWN0b3JcbiAgICAgICAgICAgIC5fY2xhc3NQcm9wZXJ0aWVzLmZvckVhY2goKF92LCBwKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShwKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpc1twXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpc1twXTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2luc3RhbmNlUHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlUHJvcGVydGllcy5zZXQocCwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBwcmV2aW91c2x5IHNhdmVkIGluc3RhbmNlIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgX2FwcGx5SW5zdGFuY2VQcm9wZXJ0aWVzKCkge1xuICAgICAgICAvLyBVc2UgZm9yRWFjaCBzbyB0aGlzIHdvcmtzIGV2ZW4gaWYgZm9yL29mIGxvb3BzIGFyZSBjb21waWxlZCB0byBmb3IgbG9vcHNcbiAgICAgICAgLy8gZXhwZWN0aW5nIGFycmF5c1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gICAgICAgIHRoaXMuX2luc3RhbmNlUHJvcGVydGllcy5mb3JFYWNoKCh2LCBwKSA9PiB0aGlzW3BdID0gdik7XG4gICAgICAgIHRoaXMuX2luc3RhbmNlUHJvcGVydGllcyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIC8vIEVuc3VyZSBmaXJzdCBjb25uZWN0aW9uIGNvbXBsZXRlcyBhbiB1cGRhdGUuIFVwZGF0ZXMgY2Fubm90IGNvbXBsZXRlXG4gICAgICAgIC8vIGJlZm9yZSBjb25uZWN0aW9uLlxuICAgICAgICB0aGlzLmVuYWJsZVVwZGF0aW5nKCk7XG4gICAgfVxuICAgIGVuYWJsZVVwZGF0aW5nKCkge1xuICAgICAgICBpZiAodGhpcy5fZW5hYmxlVXBkYXRpbmdSZXNvbHZlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9lbmFibGVVcGRhdGluZ1Jlc29sdmVyKCk7XG4gICAgICAgICAgICB0aGlzLl9lbmFibGVVcGRhdGluZ1Jlc29sdmVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsbG93cyBmb3IgYHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKClgIGluIGV4dGVuc2lvbnMgd2hpbGVcbiAgICAgKiByZXNlcnZpbmcgdGhlIHBvc3NpYmlsaXR5IG9mIG1ha2luZyBub24tYnJlYWtpbmcgZmVhdHVyZSBhZGRpdGlvbnNcbiAgICAgKiB3aGVuIGRpc2Nvbm5lY3RpbmcgYXQgc29tZSBwb2ludCBpbiB0aGUgZnV0dXJlLlxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTeW5jaHJvbml6ZXMgcHJvcGVydHkgdmFsdWVzIHdoZW4gYXR0cmlidXRlcyBjaGFuZ2UuXG4gICAgICovXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG9sZCAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2F0dHJpYnV0ZVRvUHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9wcm9wZXJ0eVRvQXR0cmlidXRlKG5hbWUsIHZhbHVlLCBvcHRpb25zID0gZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb24pIHtcbiAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIGNvbnN0IGF0dHIgPSBjdG9yLl9hdHRyaWJ1dGVOYW1lRm9yUHJvcGVydHkobmFtZSwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChhdHRyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJWYWx1ZSA9IGN0b3IuX3Byb3BlcnR5VmFsdWVUb0F0dHJpYnV0ZSh2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAvLyBhbiB1bmRlZmluZWQgdmFsdWUgZG9lcyBub3QgY2hhbmdlIHRoZSBhdHRyaWJ1dGUuXG4gICAgICAgICAgICBpZiAoYXR0clZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUcmFjayBpZiB0aGUgcHJvcGVydHkgaXMgYmVpbmcgcmVmbGVjdGVkIHRvIGF2b2lkXG4gICAgICAgICAgICAvLyBzZXR0aW5nIHRoZSBwcm9wZXJ0eSBhZ2FpbiB2aWEgYGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja2AuIE5vdGU6XG4gICAgICAgICAgICAvLyAxLiB0aGlzIHRha2VzIGFkdmFudGFnZSBvZiB0aGUgZmFjdCB0aGF0IHRoZSBjYWxsYmFjayBpcyBzeW5jaHJvbm91cy5cbiAgICAgICAgICAgIC8vIDIuIHdpbGwgYmVoYXZlIGluY29ycmVjdGx5IGlmIG11bHRpcGxlIGF0dHJpYnV0ZXMgYXJlIGluIHRoZSByZWFjdGlvblxuICAgICAgICAgICAgLy8gc3RhY2sgYXQgdGltZSBvZiBjYWxsaW5nLiBIb3dldmVyLCBzaW5jZSB3ZSBwcm9jZXNzIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIC8vIGluIGB1cGRhdGVgIHRoaXMgc2hvdWxkIG5vdCBiZSBwb3NzaWJsZSAob3IgYW4gZXh0cmVtZSBjb3JuZXIgY2FzZVxuICAgICAgICAgICAgLy8gdGhhdCB3ZSdkIGxpa2UgdG8gZGlzY292ZXIpLlxuICAgICAgICAgICAgLy8gbWFyayBzdGF0ZSByZWZsZWN0aW5nXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlIHwgU1RBVEVfSVNfUkVGTEVDVElOR19UT19BVFRSSUJVVEU7XG4gICAgICAgICAgICBpZiAoYXR0clZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBtYXJrIHN0YXRlIG5vdCByZWZsZWN0aW5nXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlICYgflNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fQVRUUklCVVRFO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9hdHRyaWJ1dGVUb1Byb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIC8vIFVzZSB0cmFja2luZyBpbmZvIHRvIGF2b2lkIGRlc2VyaWFsaXppbmcgYXR0cmlidXRlIHZhbHVlIGlmIGl0IHdhc1xuICAgICAgICAvLyBqdXN0IHNldCBmcm9tIGEgcHJvcGVydHkgc2V0dGVyLlxuICAgICAgICBpZiAodGhpcy5fdXBkYXRlU3RhdGUgJiBTVEFURV9JU19SRUZMRUNUSU5HX1RPX0FUVFJJQlVURSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICAvLyBOb3RlLCBoaW50IHRoaXMgYXMgYW4gYEF0dHJpYnV0ZU1hcGAgc28gY2xvc3VyZSBjbGVhcmx5IHVuZGVyc3RhbmRzXG4gICAgICAgIC8vIHRoZSB0eXBlOyBpdCBoYXMgaXNzdWVzIHdpdGggdHJhY2tpbmcgdHlwZXMgdGhyb3VnaCBzdGF0aWNzXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby11bm5lY2Vzc2FyeS10eXBlLWFzc2VydGlvblxuICAgICAgICBjb25zdCBwcm9wTmFtZSA9IGN0b3IuX2F0dHJpYnV0ZVRvUHJvcGVydHlNYXAuZ2V0KG5hbWUpO1xuICAgICAgICBpZiAocHJvcE5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGN0b3IuZ2V0UHJvcGVydHlPcHRpb25zKHByb3BOYW1lKTtcbiAgICAgICAgICAgIC8vIG1hcmsgc3RhdGUgcmVmbGVjdGluZ1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZSB8IFNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fUFJPUEVSVFk7XG4gICAgICAgICAgICB0aGlzW3Byb3BOYW1lXSA9XG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuICAgICAgICAgICAgICAgIGN0b3IuX3Byb3BlcnR5VmFsdWVGcm9tQXR0cmlidXRlKHZhbHVlLCBvcHRpb25zKTtcbiAgICAgICAgICAgIC8vIG1hcmsgc3RhdGUgbm90IHJlZmxlY3RpbmdcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUgJiB+U1RBVEVfSVNfUkVGTEVDVElOR19UT19QUk9QRVJUWTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIHByaXZhdGUgdmVyc2lvbiBvZiBgcmVxdWVzdFVwZGF0ZWAgZG9lcyBub3QgYWNjZXNzIG9yIHJldHVybiB0aGVcbiAgICAgKiBgdXBkYXRlQ29tcGxldGVgIHByb21pc2UuIFRoaXMgcHJvbWlzZSBjYW4gYmUgb3ZlcnJpZGRlbiBhbmQgaXMgdGhlcmVmb3JlXG4gICAgICogbm90IGZyZWUgdG8gYWNjZXNzLlxuICAgICAqL1xuICAgIF9yZXF1ZXN0VXBkYXRlKG5hbWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGxldCBzaG91bGRSZXF1ZXN0VXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIHByb3BlcnR5IGtleSwgcGVyZm9ybSBwcm9wZXJ0eSB1cGRhdGUgc3RlcHMuXG4gICAgICAgIGlmIChuYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGN0b3IuZ2V0UHJvcGVydHlPcHRpb25zKG5hbWUpO1xuICAgICAgICAgICAgaWYgKGN0b3IuX3ZhbHVlSGFzQ2hhbmdlZCh0aGlzW25hbWVdLCBvbGRWYWx1ZSwgb3B0aW9ucy5oYXNDaGFuZ2VkKSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fY2hhbmdlZFByb3BlcnRpZXMuaGFzKG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NoYW5nZWRQcm9wZXJ0aWVzLnNldChuYW1lLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEFkZCB0byByZWZsZWN0aW5nIHByb3BlcnRpZXMgc2V0LlxuICAgICAgICAgICAgICAgIC8vIE5vdGUsIGl0J3MgaW1wb3J0YW50IHRoYXQgZXZlcnkgY2hhbmdlIGhhcyBhIGNoYW5jZSB0byBhZGQgdGhlXG4gICAgICAgICAgICAgICAgLy8gcHJvcGVydHkgdG8gYF9yZWZsZWN0aW5nUHJvcGVydGllc2AuIFRoaXMgZW5zdXJlcyBzZXR0aW5nXG4gICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlICsgcHJvcGVydHkgcmVmbGVjdHMgY29ycmVjdGx5LlxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJlZmxlY3QgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICAgICAgISh0aGlzLl91cGRhdGVTdGF0ZSAmIFNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fUFJPUEVSVFkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcy5zZXQobmFtZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQWJvcnQgdGhlIHJlcXVlc3QgaWYgdGhlIHByb3BlcnR5IHNob3VsZCBub3QgYmUgY29uc2lkZXJlZCBjaGFuZ2VkLlxuICAgICAgICAgICAgICAgIHNob3VsZFJlcXVlc3RVcGRhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2hhc1JlcXVlc3RlZFVwZGF0ZSAmJiBzaG91bGRSZXF1ZXN0VXBkYXRlKSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVQcm9taXNlID0gdGhpcy5fZW5xdWV1ZVVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcXVlc3RzIGFuIHVwZGF0ZSB3aGljaCBpcyBwcm9jZXNzZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgc2hvdWxkXG4gICAgICogYmUgY2FsbGVkIHdoZW4gYW4gZWxlbWVudCBzaG91bGQgdXBkYXRlIGJhc2VkIG9uIHNvbWUgc3RhdGUgbm90IHRyaWdnZXJlZFxuICAgICAqIGJ5IHNldHRpbmcgYSBwcm9wZXJ0eS4gSW4gdGhpcyBjYXNlLCBwYXNzIG5vIGFyZ3VtZW50cy4gSXQgc2hvdWxkIGFsc28gYmVcbiAgICAgKiBjYWxsZWQgd2hlbiBtYW51YWxseSBpbXBsZW1lbnRpbmcgYSBwcm9wZXJ0eSBzZXR0ZXIuIEluIHRoaXMgY2FzZSwgcGFzcyB0aGVcbiAgICAgKiBwcm9wZXJ0eSBgbmFtZWAgYW5kIGBvbGRWYWx1ZWAgdG8gZW5zdXJlIHRoYXQgYW55IGNvbmZpZ3VyZWQgcHJvcGVydHlcbiAgICAgKiBvcHRpb25zIGFyZSBob25vcmVkLiBSZXR1cm5zIHRoZSBgdXBkYXRlQ29tcGxldGVgIFByb21pc2Ugd2hpY2ggaXMgcmVzb2x2ZWRcbiAgICAgKiB3aGVuIHRoZSB1cGRhdGUgY29tcGxldGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUge1Byb3BlcnR5S2V5fSAob3B0aW9uYWwpIG5hbWUgb2YgcmVxdWVzdGluZyBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSBvbGRWYWx1ZSB7YW55fSAob3B0aW9uYWwpIG9sZCB2YWx1ZSBvZiByZXF1ZXN0aW5nIHByb3BlcnR5XG4gICAgICogQHJldHVybnMge1Byb21pc2V9IEEgUHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHVwZGF0ZSBjb21wbGV0ZXMuXG4gICAgICovXG4gICAgcmVxdWVzdFVwZGF0ZShuYW1lLCBvbGRWYWx1ZSkge1xuICAgICAgICB0aGlzLl9yZXF1ZXN0VXBkYXRlKG5hbWUsIG9sZFZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlQ29tcGxldGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgdGhlIGVsZW1lbnQgdG8gYXN5bmNocm9ub3VzbHkgdXBkYXRlLlxuICAgICAqL1xuICAgIGFzeW5jIF9lbnF1ZXVlVXBkYXRlKCkge1xuICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlIHwgU1RBVEVfVVBEQVRFX1JFUVVFU1RFRDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSBhbnkgcHJldmlvdXMgdXBkYXRlIGhhcyByZXNvbHZlZCBiZWZvcmUgdXBkYXRpbmcuXG4gICAgICAgICAgICAvLyBUaGlzIGBhd2FpdGAgYWxzbyBlbnN1cmVzIHRoYXQgcHJvcGVydHkgY2hhbmdlcyBhcmUgYmF0Y2hlZC5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZVByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZSBhbnkgcHJldmlvdXMgZXJyb3JzLiBXZSBvbmx5IGNhcmUgdGhhdCB0aGUgcHJldmlvdXMgY3ljbGUgaXNcbiAgICAgICAgICAgIC8vIGRvbmUuIEFueSBlcnJvciBzaG91bGQgaGF2ZSBiZWVuIGhhbmRsZWQgaW4gdGhlIHByZXZpb3VzIHVwZGF0ZS5cbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnBlcmZvcm1VcGRhdGUoKTtcbiAgICAgICAgLy8gSWYgYHBlcmZvcm1VcGRhdGVgIHJldHVybnMgYSBQcm9taXNlLCB3ZSBhd2FpdCBpdC4gVGhpcyBpcyBkb25lIHRvXG4gICAgICAgIC8vIGVuYWJsZSBjb29yZGluYXRpbmcgdXBkYXRlcyB3aXRoIGEgc2NoZWR1bGVyLiBOb3RlLCB0aGUgcmVzdWx0IGlzXG4gICAgICAgIC8vIGNoZWNrZWQgdG8gYXZvaWQgZGVsYXlpbmcgYW4gYWRkaXRpb25hbCBtaWNyb3Rhc2sgdW5sZXNzIHdlIG5lZWQgdG8uXG4gICAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgYXdhaXQgcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhdGhpcy5faGFzUmVxdWVzdGVkVXBkYXRlO1xuICAgIH1cbiAgICBnZXQgX2hhc1JlcXVlc3RlZFVwZGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl91cGRhdGVTdGF0ZSAmIFNUQVRFX1VQREFURV9SRVFVRVNURUQpO1xuICAgIH1cbiAgICBnZXQgaGFzVXBkYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl91cGRhdGVTdGF0ZSAmIFNUQVRFX0hBU19VUERBVEVEKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYW4gZWxlbWVudCB1cGRhdGUuIE5vdGUsIGlmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZHVyaW5nIHRoZVxuICAgICAqIHVwZGF0ZSwgYGZpcnN0VXBkYXRlZGAgYW5kIGB1cGRhdGVkYCB3aWxsIG5vdCBiZSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGNoYW5nZSB0aGUgdGltaW5nIG9mIHVwZGF0ZXMuIElmIHRoaXNcbiAgICAgKiBtZXRob2QgaXMgb3ZlcnJpZGRlbiwgYHN1cGVyLnBlcmZvcm1VcGRhdGUoKWAgbXVzdCBiZSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBGb3IgaW5zdGFuY2UsIHRvIHNjaGVkdWxlIHVwZGF0ZXMgdG8gb2NjdXIganVzdCBiZWZvcmUgdGhlIG5leHQgZnJhbWU6XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBwcm90ZWN0ZWQgYXN5bmMgcGVyZm9ybVVwZGF0ZSgpOiBQcm9taXNlPHVua25vd24+IHtcbiAgICAgKiAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gcmVzb2x2ZSgpKSk7XG4gICAgICogICBzdXBlci5wZXJmb3JtVXBkYXRlKCk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHBlcmZvcm1VcGRhdGUoKSB7XG4gICAgICAgIC8vIE1peGluIGluc3RhbmNlIHByb3BlcnRpZXMgb25jZSwgaWYgdGhleSBleGlzdC5cbiAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNlUHJvcGVydGllcykge1xuICAgICAgICAgICAgdGhpcy5fYXBwbHlJbnN0YW5jZVByb3BlcnRpZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2hvdWxkVXBkYXRlID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGNoYW5nZWRQcm9wZXJ0aWVzID0gdGhpcy5fY2hhbmdlZFByb3BlcnRpZXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzaG91bGRVcGRhdGUgPSB0aGlzLnNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgICAgICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWFya1VwZGF0ZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gUHJldmVudCBgZmlyc3RVcGRhdGVkYCBhbmQgYHVwZGF0ZWRgIGZyb20gcnVubmluZyB3aGVuIHRoZXJlJ3MgYW5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSBleGNlcHRpb24uXG4gICAgICAgICAgICBzaG91bGRVcGRhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIEVuc3VyZSBlbGVtZW50IGNhbiBhY2NlcHQgYWRkaXRpb25hbCB1cGRhdGVzIGFmdGVyIGFuIGV4Y2VwdGlvbi5cbiAgICAgICAgICAgIHRoaXMuX21hcmtVcGRhdGVkKCk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgICAgICAgIGlmICghKHRoaXMuX3VwZGF0ZVN0YXRlICYgU1RBVEVfSEFTX1VQREFURUQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZSB8IFNUQVRFX0hBU19VUERBVEVEO1xuICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX21hcmtVcGRhdGVkKCkge1xuICAgICAgICB0aGlzLl9jaGFuZ2VkUHJvcGVydGllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZSAmIH5TVEFURV9VUERBVEVfUkVRVUVTVEVEO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGNvbXBsZXRlZCB1cGRhdGluZy5cbiAgICAgKiBUaGUgUHJvbWlzZSB2YWx1ZSBpcyBhIGJvb2xlYW4gdGhhdCBpcyBgdHJ1ZWAgaWYgdGhlIGVsZW1lbnQgY29tcGxldGVkIHRoZVxuICAgICAqIHVwZGF0ZSB3aXRob3V0IHRyaWdnZXJpbmcgYW5vdGhlciB1cGRhdGUuIFRoZSBQcm9taXNlIHJlc3VsdCBpcyBgZmFsc2VgIGlmXG4gICAgICogYSBwcm9wZXJ0eSB3YXMgc2V0IGluc2lkZSBgdXBkYXRlZCgpYC4gSWYgdGhlIFByb21pc2UgaXMgcmVqZWN0ZWQsIGFuXG4gICAgICogZXhjZXB0aW9uIHdhcyB0aHJvd24gZHVyaW5nIHRoZSB1cGRhdGUuXG4gICAgICpcbiAgICAgKiBUbyBhd2FpdCBhZGRpdGlvbmFsIGFzeW5jaHJvbm91cyB3b3JrLCBvdmVycmlkZSB0aGUgYF9nZXRVcGRhdGVDb21wbGV0ZWBcbiAgICAgKiBtZXRob2QuIEZvciBleGFtcGxlLCBpdCBpcyBzb21ldGltZXMgdXNlZnVsIHRvIGF3YWl0IGEgcmVuZGVyZWQgZWxlbWVudFxuICAgICAqIGJlZm9yZSBmdWxmaWxsaW5nIHRoaXMgUHJvbWlzZS4gVG8gZG8gdGhpcywgZmlyc3QgYXdhaXRcbiAgICAgKiBgc3VwZXIuX2dldFVwZGF0ZUNvbXBsZXRlKClgLCB0aGVuIGFueSBzdWJzZXF1ZW50IHN0YXRlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHJldHVybnMgYSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZVxuICAgICAqIHVwZGF0ZSByZXNvbHZlZCB3aXRob3V0IHRyaWdnZXJpbmcgYW5vdGhlciB1cGRhdGUuXG4gICAgICovXG4gICAgZ2V0IHVwZGF0ZUNvbXBsZXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VXBkYXRlQ29tcGxldGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGUgcG9pbnQgZm9yIHRoZSBgdXBkYXRlQ29tcGxldGVgIHByb21pc2UuXG4gICAgICpcbiAgICAgKiBJdCBpcyBub3Qgc2FmZSB0byBvdmVycmlkZSB0aGUgYHVwZGF0ZUNvbXBsZXRlYCBnZXR0ZXIgZGlyZWN0bHkgZHVlIHRvIGFcbiAgICAgKiBsaW1pdGF0aW9uIGluIFR5cGVTY3JpcHQgd2hpY2ggbWVhbnMgaXQgaXMgbm90IHBvc3NpYmxlIHRvIGNhbGwgYVxuICAgICAqIHN1cGVyY2xhc3MgZ2V0dGVyIChlLmcuIGBzdXBlci51cGRhdGVDb21wbGV0ZS50aGVuKC4uLilgKSB3aGVuIHRoZSB0YXJnZXRcbiAgICAgKiBsYW5ndWFnZSBpcyBFUzUgKGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMzM4KS5cbiAgICAgKiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgb3ZlcnJpZGRlbiBpbnN0ZWFkLiBGb3IgZXhhbXBsZTpcbiAgICAgKlxuICAgICAqICAgY2xhc3MgTXlFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAgICogICAgIGFzeW5jIF9nZXRVcGRhdGVDb21wbGV0ZSgpIHtcbiAgICAgKiAgICAgICBhd2FpdCBzdXBlci5fZ2V0VXBkYXRlQ29tcGxldGUoKTtcbiAgICAgKiAgICAgICBhd2FpdCB0aGlzLl9teUNoaWxkLnVwZGF0ZUNvbXBsZXRlO1xuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICovXG4gICAgX2dldFVwZGF0ZUNvbXBsZXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXBkYXRlUHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udHJvbHMgd2hldGhlciBvciBub3QgYHVwZGF0ZWAgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIHRoZSBlbGVtZW50IHJlcXVlc3RzXG4gICAgICogYW4gdXBkYXRlLiBCeSBkZWZhdWx0LCB0aGlzIG1ldGhvZCBhbHdheXMgcmV0dXJucyBgdHJ1ZWAsIGJ1dCB0aGlzIGNhbiBiZVxuICAgICAqIGN1c3RvbWl6ZWQgdG8gY29udHJvbCB3aGVuIHRvIHVwZGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICAgKi9cbiAgICBzaG91bGRVcGRhdGUoX2NoYW5nZWRQcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBlbGVtZW50LiBUaGlzIG1ldGhvZCByZWZsZWN0cyBwcm9wZXJ0eSB2YWx1ZXMgdG8gYXR0cmlidXRlcy5cbiAgICAgKiBJdCBjYW4gYmUgb3ZlcnJpZGRlbiB0byByZW5kZXIgYW5kIGtlZXAgdXBkYXRlZCBlbGVtZW50IERPTS5cbiAgICAgKiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlIHRoaXMgbWV0aG9kIHdpbGwgKm5vdCogdHJpZ2dlclxuICAgICAqIGFub3RoZXIgdXBkYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIF9jaGFuZ2VkUHJvcGVydGllcyBNYXAgb2YgY2hhbmdlZCBwcm9wZXJ0aWVzIHdpdGggb2xkIHZhbHVlc1xuICAgICAqL1xuICAgIHVwZGF0ZShfY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAvLyBVc2UgZm9yRWFjaCBzbyB0aGlzIHdvcmtzIGV2ZW4gaWYgZm9yL29mIGxvb3BzIGFyZSBjb21waWxlZCB0byBmb3JcbiAgICAgICAgICAgIC8vIGxvb3BzIGV4cGVjdGluZyBhcnJheXNcbiAgICAgICAgICAgIHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzLmZvckVhY2goKHYsIGspID0+IHRoaXMuX3Byb3BlcnR5VG9BdHRyaWJ1dGUoaywgdGhpc1trXSwgdikpO1xuICAgICAgICAgICAgdGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbWFya1VwZGF0ZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlZCB3aGVuZXZlciB0aGUgZWxlbWVudCBpcyB1cGRhdGVkLiBJbXBsZW1lbnQgdG8gcGVyZm9ybVxuICAgICAqIHBvc3QtdXBkYXRpbmcgdGFza3MgdmlhIERPTSBBUElzLCBmb3IgZXhhbXBsZSwgZm9jdXNpbmcgYW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGUgdGhpcyBtZXRob2Qgd2lsbCB0cmlnZ2VyIHRoZSBlbGVtZW50IHRvIHVwZGF0ZVxuICAgICAqIGFnYWluIGFmdGVyIHRoaXMgdXBkYXRlIGN5Y2xlIGNvbXBsZXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICAgKi9cbiAgICB1cGRhdGVkKF9jaGFuZ2VkUHJvcGVydGllcykge1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIHdoZW4gdGhlIGVsZW1lbnQgaXMgZmlyc3QgdXBkYXRlZC4gSW1wbGVtZW50IHRvIHBlcmZvcm0gb25lIHRpbWVcbiAgICAgKiB3b3JrIG9uIHRoZSBlbGVtZW50IGFmdGVyIHVwZGF0ZS5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGUgdGhpcyBtZXRob2Qgd2lsbCB0cmlnZ2VyIHRoZSBlbGVtZW50IHRvIHVwZGF0ZVxuICAgICAqIGFnYWluIGFmdGVyIHRoaXMgdXBkYXRlIGN5Y2xlIGNvbXBsZXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICAgKi9cbiAgICBmaXJzdFVwZGF0ZWQoX2NoYW5nZWRQcm9wZXJ0aWVzKSB7XG4gICAgfVxufVxuX2EgPSBmaW5hbGl6ZWQ7XG4vKipcbiAqIE1hcmtzIGNsYXNzIGFzIGhhdmluZyBmaW5pc2hlZCBjcmVhdGluZyBwcm9wZXJ0aWVzLlxuICovXG5VcGRhdGluZ0VsZW1lbnRbX2FdID0gdHJ1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwZGF0aW5nLWVsZW1lbnQuanMubWFwIiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE5IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmVcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0IENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzXG5wYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzbyBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50XG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5leHBvcnQgY29uc3Qgc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzID0gKCdhZG9wdGVkU3R5bGVTaGVldHMnIGluIERvY3VtZW50LnByb3RvdHlwZSkgJiZcbiAgICAoJ3JlcGxhY2UnIGluIENTU1N0eWxlU2hlZXQucHJvdG90eXBlKTtcbmNvbnN0IGNvbnN0cnVjdGlvblRva2VuID0gU3ltYm9sKCk7XG5leHBvcnQgY2xhc3MgQ1NTUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3Rvcihjc3NUZXh0LCBzYWZlVG9rZW4pIHtcbiAgICAgICAgaWYgKHNhZmVUb2tlbiAhPT0gY29uc3RydWN0aW9uVG9rZW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ1NTUmVzdWx0IGlzIG5vdCBjb25zdHJ1Y3RhYmxlLiBVc2UgYHVuc2FmZUNTU2Agb3IgYGNzc2AgaW5zdGVhZC4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNzc1RleHQgPSBjc3NUZXh0O1xuICAgIH1cbiAgICAvLyBOb3RlLCB0aGlzIGlzIGEgZ2V0dGVyIHNvIHRoYXQgaXQncyBsYXp5LiBJbiBwcmFjdGljZSwgdGhpcyBtZWFuc1xuICAgIC8vIHN0eWxlc2hlZXRzIGFyZSBub3QgY3JlYXRlZCB1bnRpbCB0aGUgZmlyc3QgZWxlbWVudCBpbnN0YW5jZSBpcyBtYWRlLlxuICAgIGdldCBzdHlsZVNoZWV0KCkge1xuICAgICAgICBpZiAodGhpcy5fc3R5bGVTaGVldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBOb3RlLCBpZiBgYWRvcHRlZFN0eWxlU2hlZXRzYCBpcyBzdXBwb3J0ZWQgdGhlbiB3ZSBhc3N1bWUgQ1NTU3R5bGVTaGVldFxuICAgICAgICAgICAgLy8gaXMgY29uc3RydWN0YWJsZS5cbiAgICAgICAgICAgIGlmIChzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZVNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZVNoZWV0LnJlcGxhY2VTeW5jKHRoaXMuY3NzVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZVNoZWV0ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fc3R5bGVTaGVldDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNzc1RleHQ7XG4gICAgfVxufVxuLyoqXG4gKiBXcmFwIGEgdmFsdWUgZm9yIGludGVycG9sYXRpb24gaW4gYSBjc3MgdGFnZ2VkIHRlbXBsYXRlIGxpdGVyYWwuXG4gKlxuICogVGhpcyBpcyB1bnNhZmUgYmVjYXVzZSB1bnRydXN0ZWQgQ1NTIHRleHQgY2FuIGJlIHVzZWQgdG8gcGhvbmUgaG9tZVxuICogb3IgZXhmaWx0cmF0ZSBkYXRhIHRvIGFuIGF0dGFja2VyIGNvbnRyb2xsZWQgc2l0ZS4gVGFrZSBjYXJlIHRvIG9ubHkgdXNlXG4gKiB0aGlzIHdpdGggdHJ1c3RlZCBpbnB1dC5cbiAqL1xuZXhwb3J0IGNvbnN0IHVuc2FmZUNTUyA9ICh2YWx1ZSkgPT4ge1xuICAgIHJldHVybiBuZXcgQ1NTUmVzdWx0KFN0cmluZyh2YWx1ZSksIGNvbnN0cnVjdGlvblRva2VuKTtcbn07XG5jb25zdCB0ZXh0RnJvbUNTU1Jlc3VsdCA9ICh2YWx1ZSkgPT4ge1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIENTU1Jlc3VsdCkge1xuICAgICAgICByZXR1cm4gdmFsdWUuY3NzVGV4dDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZhbHVlIHBhc3NlZCB0byAnY3NzJyBmdW5jdGlvbiBtdXN0IGJlIGEgJ2NzcycgZnVuY3Rpb24gcmVzdWx0OiAke3ZhbHVlfS4gVXNlICd1bnNhZmVDU1MnIHRvIHBhc3Mgbm9uLWxpdGVyYWwgdmFsdWVzLCBidXRcbiAgICAgICAgICAgIHRha2UgY2FyZSB0byBlbnN1cmUgcGFnZSBzZWN1cml0eS5gKTtcbiAgICB9XG59O1xuLyoqXG4gKiBUZW1wbGF0ZSB0YWcgd2hpY2ggd2hpY2ggY2FuIGJlIHVzZWQgd2l0aCBMaXRFbGVtZW50J3MgYHN0eWxlYCBwcm9wZXJ0eSB0b1xuICogc2V0IGVsZW1lbnQgc3R5bGVzLiBGb3Igc2VjdXJpdHkgcmVhc29ucywgb25seSBsaXRlcmFsIHN0cmluZyB2YWx1ZXMgbWF5IGJlXG4gKiB1c2VkLiBUbyBpbmNvcnBvcmF0ZSBub24tbGl0ZXJhbCB2YWx1ZXMgYHVuc2FmZUNTU2AgbWF5IGJlIHVzZWQgaW5zaWRlIGFcbiAqIHRlbXBsYXRlIHN0cmluZyBwYXJ0LlxuICovXG5leHBvcnQgY29uc3QgY3NzID0gKHN0cmluZ3MsIC4uLnZhbHVlcykgPT4ge1xuICAgIGNvbnN0IGNzc1RleHQgPSB2YWx1ZXMucmVkdWNlKChhY2MsIHYsIGlkeCkgPT4gYWNjICsgdGV4dEZyb21DU1NSZXN1bHQodikgKyBzdHJpbmdzW2lkeCArIDFdLCBzdHJpbmdzWzBdKTtcbiAgICByZXR1cm4gbmV3IENTU1Jlc3VsdChjc3NUZXh0LCBjb25zdHJ1Y3Rpb25Ub2tlbik7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3NzLXRhZy5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5pbXBvcnQgeyByZW5kZXIgfSBmcm9tICdsaXQtaHRtbC9saWIvc2hhZHktcmVuZGVyLmpzJztcbmltcG9ydCB7IFVwZGF0aW5nRWxlbWVudCB9IGZyb20gJy4vbGliL3VwZGF0aW5nLWVsZW1lbnQuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvdXBkYXRpbmctZWxlbWVudC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2xpYi9kZWNvcmF0b3JzLmpzJztcbmV4cG9ydCB7IGh0bWwsIHN2ZywgVGVtcGxhdGVSZXN1bHQsIFNWR1RlbXBsYXRlUmVzdWx0IH0gZnJvbSAnbGl0LWh0bWwvbGl0LWh0bWwuanMnO1xuaW1wb3J0IHsgc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzIH0gZnJvbSAnLi9saWIvY3NzLXRhZy5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2xpYi9jc3MtdGFnLmpzJztcbi8vIElNUE9SVEFOVDogZG8gbm90IGNoYW5nZSB0aGUgcHJvcGVydHkgbmFtZSBvciB0aGUgYXNzaWdubWVudCBleHByZXNzaW9uLlxuLy8gVGhpcyBsaW5lIHdpbGwgYmUgdXNlZCBpbiByZWdleGVzIHRvIHNlYXJjaCBmb3IgTGl0RWxlbWVudCB1c2FnZS5cbi8vIFRPRE8oanVzdGluZmFnbmFuaSk6IGluamVjdCB2ZXJzaW9uIG51bWJlciBhdCBidWlsZCB0aW1lXG4od2luZG93WydsaXRFbGVtZW50VmVyc2lvbnMnXSB8fCAod2luZG93WydsaXRFbGVtZW50VmVyc2lvbnMnXSA9IFtdKSlcbiAgICAucHVzaCgnMi4zLjEnKTtcbi8qKlxuICogU2VudGluYWwgdmFsdWUgdXNlZCB0byBhdm9pZCBjYWxsaW5nIGxpdC1odG1sJ3MgcmVuZGVyIGZ1bmN0aW9uIHdoZW5cbiAqIHN1YmNsYXNzZXMgZG8gbm90IGltcGxlbWVudCBgcmVuZGVyYFxuICovXG5jb25zdCByZW5kZXJOb3RJbXBsZW1lbnRlZCA9IHt9O1xuZXhwb3J0IGNsYXNzIExpdEVsZW1lbnQgZXh0ZW5kcyBVcGRhdGluZ0VsZW1lbnQge1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgYXJyYXkgb2Ygc3R5bGVzIHRvIGFwcGx5IHRvIHRoZSBlbGVtZW50LlxuICAgICAqIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGludGVncmF0ZSBpbnRvIGEgc3R5bGUgbWFuYWdlbWVudCBzeXN0ZW0uXG4gICAgICpcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRTdHlsZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0eWxlcztcbiAgICB9XG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgc3RhdGljIF9nZXRVbmlxdWVTdHlsZXMoKSB7XG4gICAgICAgIC8vIE9ubHkgZ2F0aGVyIHN0eWxlcyBvbmNlIHBlciBjbGFzc1xuICAgICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfc3R5bGVzJywgdGhpcykpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGFrZSBjYXJlIG5vdCB0byBjYWxsIGB0aGlzLmdldFN0eWxlcygpYCBtdWx0aXBsZSB0aW1lcyBzaW5jZSB0aGlzXG4gICAgICAgIC8vIGdlbmVyYXRlcyBuZXcgQ1NTUmVzdWx0cyBlYWNoIHRpbWUuXG4gICAgICAgIC8vIFRPRE8oc29ydmVsbCk6IFNpbmNlIHdlIGRvIG5vdCBjYWNoZSBDU1NSZXN1bHRzIGJ5IGlucHV0LCBhbnlcbiAgICAgICAgLy8gc2hhcmVkIHN0eWxlcyB3aWxsIGdlbmVyYXRlIG5ldyBzdHlsZXNoZWV0IG9iamVjdHMsIHdoaWNoIGlzIHdhc3RlZnVsLlxuICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSBhZGRyZXNzZWQgd2hlbiBhIGJyb3dzZXIgc2hpcHMgY29uc3RydWN0YWJsZVxuICAgICAgICAvLyBzdHlsZXNoZWV0cy5cbiAgICAgICAgY29uc3QgdXNlclN0eWxlcyA9IHRoaXMuZ2V0U3R5bGVzKCk7XG4gICAgICAgIGlmICh1c2VyU3R5bGVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0eWxlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodXNlclN0eWxlcykpIHtcbiAgICAgICAgICAgIC8vIERlLWR1cGxpY2F0ZSBzdHlsZXMgcHJlc2VydmluZyB0aGUgX2xhc3RfIGluc3RhbmNlIGluIHRoZSBzZXQuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uIHRvIGF2b2lkIGR1cGxpY2F0ZWQgc3R5bGVzIHRoYXQgY2FuXG4gICAgICAgICAgICAvLyBvY2N1ciBlc3BlY2lhbGx5IHdoZW4gY29tcG9zaW5nIHZpYSBzdWJjbGFzc2luZy5cbiAgICAgICAgICAgIC8vIFRoZSBsYXN0IGl0ZW0gaXMga2VwdCB0byB0cnkgdG8gcHJlc2VydmUgdGhlIGNhc2NhZGUgb3JkZXIgd2l0aCB0aGVcbiAgICAgICAgICAgIC8vIGFzc3VtcHRpb24gdGhhdCBpdCdzIG1vc3QgaW1wb3J0YW50IHRoYXQgbGFzdCBhZGRlZCBzdHlsZXMgb3ZlcnJpZGVcbiAgICAgICAgICAgIC8vIHByZXZpb3VzIHN0eWxlcy5cbiAgICAgICAgICAgIGNvbnN0IGFkZFN0eWxlcyA9IChzdHlsZXMsIHNldCkgPT4gc3R5bGVzLnJlZHVjZVJpZ2h0KChzZXQsIHMpID0+IFxuICAgICAgICAgICAgLy8gTm90ZTogT24gSUUgc2V0LmFkZCgpIGRvZXMgbm90IHJldHVybiB0aGUgc2V0XG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KHMpID8gYWRkU3R5bGVzKHMsIHNldCkgOiAoc2V0LmFkZChzKSwgc2V0KSwgc2V0KTtcbiAgICAgICAgICAgIC8vIEFycmF5LmZyb20gZG9lcyBub3Qgd29yayBvbiBTZXQgaW4gSUUsIG90aGVyd2lzZSByZXR1cm5cbiAgICAgICAgICAgIC8vIEFycmF5LmZyb20oYWRkU3R5bGVzKHVzZXJTdHlsZXMsIG5ldyBTZXQ8Q1NTUmVzdWx0PigpKSkucmV2ZXJzZSgpXG4gICAgICAgICAgICBjb25zdCBzZXQgPSBhZGRTdHlsZXModXNlclN0eWxlcywgbmV3IFNldCgpKTtcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlcyA9IFtdO1xuICAgICAgICAgICAgc2V0LmZvckVhY2goKHYpID0+IHN0eWxlcy51bnNoaWZ0KHYpKTtcbiAgICAgICAgICAgIHRoaXMuX3N0eWxlcyA9IHN0eWxlcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3N0eWxlcyA9IFt1c2VyU3R5bGVzXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBlbGVtZW50IGluaXRpYWxpemF0aW9uLiBCeSBkZWZhdWx0IHRoaXMgY2FsbHMgYGNyZWF0ZVJlbmRlclJvb3RgXG4gICAgICogdG8gY3JlYXRlIHRoZSBlbGVtZW50IGByZW5kZXJSb290YCBub2RlIGFuZCBjYXB0dXJlcyBhbnkgcHJlLXNldCB2YWx1ZXMgZm9yXG4gICAgICogcmVnaXN0ZXJlZCBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5fZ2V0VW5pcXVlU3R5bGVzKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUm9vdCA9XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVJlbmRlclJvb3QoKTtcbiAgICAgICAgLy8gTm90ZSwgaWYgcmVuZGVyUm9vdCBpcyBub3QgYSBzaGFkb3dSb290LCBzdHlsZXMgd291bGQvY291bGQgYXBwbHkgdG8gdGhlXG4gICAgICAgIC8vIGVsZW1lbnQncyBnZXRSb290Tm9kZSgpLiBXaGlsZSB0aGlzIGNvdWxkIGJlIGRvbmUsIHdlJ3JlIGNob29zaW5nIG5vdCB0b1xuICAgICAgICAvLyBzdXBwb3J0IHRoaXMgbm93IHNpbmNlIGl0IHdvdWxkIHJlcXVpcmUgZGlmZmVyZW50IGxvZ2ljIGFyb3VuZCBkZS1kdXBpbmcuXG4gICAgICAgIGlmICh3aW5kb3cuU2hhZG93Um9vdCAmJiB0aGlzLnJlbmRlclJvb3QgaW5zdGFuY2VvZiB3aW5kb3cuU2hhZG93Um9vdCkge1xuICAgICAgICAgICAgdGhpcy5hZG9wdFN0eWxlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG5vZGUgaW50byB3aGljaCB0aGUgZWxlbWVudCBzaG91bGQgcmVuZGVyIGFuZCBieSBkZWZhdWx0XG4gICAgICogY3JlYXRlcyBhbmQgcmV0dXJucyBhbiBvcGVuIHNoYWRvd1Jvb3QuIEltcGxlbWVudCB0byBjdXN0b21pemUgd2hlcmUgdGhlXG4gICAgICogZWxlbWVudCdzIERPTSBpcyByZW5kZXJlZC4gRm9yIGV4YW1wbGUsIHRvIHJlbmRlciBpbnRvIHRoZSBlbGVtZW50J3NcbiAgICAgKiBjaGlsZE5vZGVzLCByZXR1cm4gYHRoaXNgLlxuICAgICAqIEByZXR1cm5zIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IFJldHVybnMgYSBub2RlIGludG8gd2hpY2ggdG8gcmVuZGVyLlxuICAgICAqL1xuICAgIGNyZWF0ZVJlbmRlclJvb3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBzdHlsaW5nIHRvIHRoZSBlbGVtZW50IHNoYWRvd1Jvb3QgdXNpbmcgdGhlIGBzdGF0aWMgZ2V0IHN0eWxlc2BcbiAgICAgKiBwcm9wZXJ0eS4gU3R5bGluZyB3aWxsIGFwcGx5IHVzaW5nIGBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0c2Agd2hlcmVcbiAgICAgKiBhdmFpbGFibGUgYW5kIHdpbGwgZmFsbGJhY2sgb3RoZXJ3aXNlLiBXaGVuIFNoYWRvdyBET00gaXMgcG9seWZpbGxlZCxcbiAgICAgKiBTaGFkeUNTUyBzY29wZXMgc3R5bGVzIGFuZCBhZGRzIHRoZW0gdG8gdGhlIGRvY3VtZW50LiBXaGVuIFNoYWRvdyBET01cbiAgICAgKiBpcyBhdmFpbGFibGUgYnV0IGBhZG9wdGVkU3R5bGVTaGVldHNgIGlzIG5vdCwgc3R5bGVzIGFyZSBhcHBlbmRlZCB0byB0aGVcbiAgICAgKiBlbmQgb2YgdGhlIGBzaGFkb3dSb290YCB0byBbbWltaWMgc3BlY1xuICAgICAqIGJlaGF2aW9yXShodHRwczovL3dpY2cuZ2l0aHViLmlvL2NvbnN0cnVjdC1zdHlsZXNoZWV0cy8jdXNpbmctY29uc3RydWN0ZWQtc3R5bGVzaGVldHMpLlxuICAgICAqL1xuICAgIGFkb3B0U3R5bGVzKCkge1xuICAgICAgICBjb25zdCBzdHlsZXMgPSB0aGlzLmNvbnN0cnVjdG9yLl9zdHlsZXM7XG4gICAgICAgIGlmIChzdHlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlcmUgYXJlIHRocmVlIHNlcGFyYXRlIGNhc2VzIGhlcmUgYmFzZWQgb24gU2hhZG93IERPTSBzdXBwb3J0LlxuICAgICAgICAvLyAoMSkgc2hhZG93Um9vdCBwb2x5ZmlsbGVkOiB1c2UgU2hhZHlDU1NcbiAgICAgICAgLy8gKDIpIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzIGF2YWlsYWJsZTogdXNlIGl0LlxuICAgICAgICAvLyAoMykgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgcG9seWZpbGxlZDogYXBwZW5kIHN0eWxlcyBhZnRlclxuICAgICAgICAvLyByZW5kZXJpbmdcbiAgICAgICAgaWYgKHdpbmRvdy5TaGFkeUNTUyAhPT0gdW5kZWZpbmVkICYmICF3aW5kb3cuU2hhZHlDU1MubmF0aXZlU2hhZG93KSB7XG4gICAgICAgICAgICB3aW5kb3cuU2hhZHlDU1MuU2NvcGluZ1NoaW0ucHJlcGFyZUFkb3B0ZWRDc3NUZXh0KHN0eWxlcy5tYXAoKHMpID0+IHMuY3NzVGV4dCksIHRoaXMubG9jYWxOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHMpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUm9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPVxuICAgICAgICAgICAgICAgIHN0eWxlcy5tYXAoKHMpID0+IHMuc3R5bGVTaGVldCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBUaGlzIG11c3QgYmUgZG9uZSBhZnRlciByZW5kZXJpbmcgc28gdGhlIGFjdHVhbCBzdHlsZSBpbnNlcnRpb24gaXMgZG9uZVxuICAgICAgICAgICAgLy8gaW4gYHVwZGF0ZWAuXG4gICAgICAgICAgICB0aGlzLl9uZWVkc1NoaW1BZG9wdGVkU3R5bGVTaGVldHMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICAvLyBOb3RlLCBmaXJzdCB1cGRhdGUvcmVuZGVyIGhhbmRsZXMgc3R5bGVFbGVtZW50IHNvIHdlIG9ubHkgY2FsbCB0aGlzIGlmXG4gICAgICAgIC8vIGNvbm5lY3RlZCBhZnRlciBmaXJzdCB1cGRhdGUuXG4gICAgICAgIGlmICh0aGlzLmhhc1VwZGF0ZWQgJiYgd2luZG93LlNoYWR5Q1NTICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5TaGFkeUNTUy5zdHlsZUVsZW1lbnQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgZWxlbWVudC4gVGhpcyBtZXRob2QgcmVmbGVjdHMgcHJvcGVydHkgdmFsdWVzIHRvIGF0dHJpYnV0ZXNcbiAgICAgKiBhbmQgY2FsbHMgYHJlbmRlcmAgdG8gcmVuZGVyIERPTSB2aWEgbGl0LWh0bWwuIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGVcbiAgICAgKiB0aGlzIG1ldGhvZCB3aWxsICpub3QqIHRyaWdnZXIgYW5vdGhlciB1cGRhdGUuXG4gICAgICogQHBhcmFtIF9jaGFuZ2VkUHJvcGVydGllcyBNYXAgb2YgY2hhbmdlZCBwcm9wZXJ0aWVzIHdpdGggb2xkIHZhbHVlc1xuICAgICAqL1xuICAgIHVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcykge1xuICAgICAgICAvLyBTZXR0aW5nIHByb3BlcnRpZXMgaW4gYHJlbmRlcmAgc2hvdWxkIG5vdCB0cmlnZ2VyIGFuIHVwZGF0ZS4gU2luY2VcbiAgICAgICAgLy8gdXBkYXRlcyBhcmUgYWxsb3dlZCBhZnRlciBzdXBlci51cGRhdGUsIGl0J3MgaW1wb3J0YW50IHRvIGNhbGwgYHJlbmRlcmBcbiAgICAgICAgLy8gYmVmb3JlIHRoYXQuXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlUmVzdWx0ID0gdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgc3VwZXIudXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgICAgLy8gSWYgcmVuZGVyIGlzIG5vdCBpbXBsZW1lbnRlZCBieSB0aGUgY29tcG9uZW50LCBkb24ndCBjYWxsIGxpdC1odG1sIHJlbmRlclxuICAgICAgICBpZiAodGVtcGxhdGVSZXN1bHQgIT09IHJlbmRlck5vdEltcGxlbWVudGVkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgLnJlbmRlcih0ZW1wbGF0ZVJlc3VsdCwgdGhpcy5yZW5kZXJSb290LCB7IHNjb3BlTmFtZTogdGhpcy5sb2NhbE5hbWUsIGV2ZW50Q29udGV4dDogdGhpcyB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXaGVuIG5hdGl2ZSBTaGFkb3cgRE9NIGlzIHVzZWQgYnV0IGFkb3B0ZWRTdHlsZXMgYXJlIG5vdCBzdXBwb3J0ZWQsXG4gICAgICAgIC8vIGluc2VydCBzdHlsaW5nIGFmdGVyIHJlbmRlcmluZyB0byBlbnN1cmUgYWRvcHRlZFN0eWxlcyBoYXZlIGhpZ2hlc3RcbiAgICAgICAgLy8gcHJpb3JpdHkuXG4gICAgICAgIGlmICh0aGlzLl9uZWVkc1NoaW1BZG9wdGVkU3R5bGVTaGVldHMpIHtcbiAgICAgICAgICAgIHRoaXMuX25lZWRzU2hpbUFkb3B0ZWRTdHlsZVNoZWV0cyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5fc3R5bGVzLmZvckVhY2goKHMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBzLmNzc1RleHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJSb290LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZWQgb24gZWFjaCB1cGRhdGUgdG8gcGVyZm9ybSByZW5kZXJpbmcgdGFza3MuIFRoaXMgbWV0aG9kIG1heSByZXR1cm5cbiAgICAgKiBhbnkgdmFsdWUgcmVuZGVyYWJsZSBieSBsaXQtaHRtbCdzIE5vZGVQYXJ0IC0gdHlwaWNhbGx5IGEgVGVtcGxhdGVSZXN1bHQuXG4gICAgICogU2V0dGluZyBwcm9wZXJ0aWVzIGluc2lkZSB0aGlzIG1ldGhvZCB3aWxsICpub3QqIHRyaWdnZXIgdGhlIGVsZW1lbnQgdG9cbiAgICAgKiB1cGRhdGUuXG4gICAgICovXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gcmVuZGVyTm90SW1wbGVtZW50ZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBFbnN1cmUgdGhpcyBjbGFzcyBpcyBtYXJrZWQgYXMgYGZpbmFsaXplZGAgYXMgYW4gb3B0aW1pemF0aW9uIGVuc3VyaW5nXG4gKiBpdCB3aWxsIG5vdCBuZWVkbGVzc2x5IHRyeSB0byBgZmluYWxpemVgLlxuICpcbiAqIE5vdGUgdGhpcyBwcm9wZXJ0eSBuYW1lIGlzIGEgc3RyaW5nIHRvIHByZXZlbnQgYnJlYWtpbmcgQ2xvc3VyZSBKUyBDb21waWxlclxuICogb3B0aW1pemF0aW9ucy4gU2VlIHVwZGF0aW5nLWVsZW1lbnQudHMgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKi9cbkxpdEVsZW1lbnRbJ2ZpbmFsaXplZCddID0gdHJ1ZTtcbi8qKlxuICogUmVuZGVyIG1ldGhvZCB1c2VkIHRvIHJlbmRlciB0aGUgdmFsdWUgdG8gdGhlIGVsZW1lbnQncyBET00uXG4gKiBAcGFyYW0gcmVzdWx0IFRoZSB2YWx1ZSB0byByZW5kZXIuXG4gKiBAcGFyYW0gY29udGFpbmVyIE5vZGUgaW50byB3aGljaCB0byByZW5kZXIuXG4gKiBAcGFyYW0gb3B0aW9ucyBFbGVtZW50IG5hbWUuXG4gKiBAbm9jb2xsYXBzZVxuICovXG5MaXRFbGVtZW50LnJlbmRlciA9IHJlbmRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpdC1lbGVtZW50LmpzLm1hcCIsImltcG9ydCB7IGh0bWwsIExpdEVsZW1lbnQsIGNzcyB9IGZyb20gJ2xpdC1lbGVtZW50JztcbmV4cG9ydCBjbGFzcyBwdnJJY29uIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gaHRtbCBgXG4gICAgICAgIDxzdmcgdmlld0JveD1cIjI1MS4zNiAxLjcyMSA1My44NjMgNTEuMTQyXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuICAgICAgICAgICAgPGc+XG4gICAgICAgICAgICA8Zz5cbiAgICAgICAgICAgICAgICA8cG9seWdvbiAgcG9pbnRzPVwiMjc4LjIsMzcuMiAyNTMsMjIuNiAyNTMsNTEuN1wiIHN0eWxlPVwic3Ryb2tlLW1pdGVybGltaXQ6IDEwO1wiPjwvcG9seWdvbj5cbiAgICAgICAgICAgICAgICA8cG9seWdvbiAgcG9pbnRzPVwiMjc4LjgsMzcuMiAzMDQsNTEuNyAzMDQsMjIuNlwiIHN0eWxlPVwic3Ryb2tlLW1pdGVybGltaXQ6IDEwO1wiPjwvcG9seWdvbj5cbiAgICAgICAgICAgIDwvZz5cbiAgICAgICAgICAgIDxjaXJjbGUgY3g9XCIyNzguOFwiIGN5PVwiMzcuMlwiIHI9XCI5LjZcIiBzdHlsZT1cInN0cm9rZS1taXRlcmxpbWl0OiAxMDtcIj48L2NpcmNsZT5cbiAgICAgICAgICAgIDxyZWN0IHg9XCIyNjYuOFwiIHk9XCIzLjJcIiBjbGFzcz1cInN0MFwiIHdpZHRoPVwiMjMuOVwiIGhlaWdodD1cIjEzLjlcIiBzdHlsZT1cInN0cm9rZS1taXRlcmxpbWl0OiAxMDtcIj48L3JlY3Q+XG4gICAgICAgICAgICA8cmVjdCB4PVwiMjcxLjhcIiB5PVwiMy4yXCIgY2xhc3M9XCJzdDNcIiB3aWR0aD1cIjEzLjlcIiBoZWlnaHQ9XCIxMy45XCIgc3R5bGU9XCJmaWxsOm5vbmU7IHN0cm9rZS1taXRlcmxpbWl0OiAxMDtcIj48L3JlY3Q+XG4gICAgICAgICAgICA8bGluZSB4MT1cIjI3OC44XCIgeTE9XCIyNy42XCIgeDI9XCIyNzguOFwiIHkyPVwiMTAuMVwiIHN0eWxlPVwic3Ryb2tlLW1pdGVybGltaXQ6IDEwO1wiPjwvbGluZT5cbiAgICAgICAgICAgIDxsaW5lIHgxPVwiMjcxLjhcIiB5MT1cIjEwLjFcIiB4Mj1cIjI4NS43XCIgeTI9XCIxMC4xXCIgc3R5bGU9XCJzdHJva2UtbWl0ZXJsaW1pdDogMTA7XCI+PC9saW5lPlxuICAgICAgICAgICAgPC9nPlxuICAgICAgICA8L3N2Zz5cbiAgICAgICAgYDtcbiAgICB9XG59XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJwdnItaWNvblwiLCBwdnJJY29uKTtcbmV4cG9ydCBjbGFzcyBwdmRJY29uIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gaHRtbCBgXG4gICAgICAgIDxzdmcgdmlld0JveD1cIjE0MC4zNyAzLjI2NCA1NC40MDcgNTAuMDU1XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuICAgICAgICAgICAgPGc+XG4gICAgICAgICAgICA8Zz5cbiAgICAgICAgICAgICAgICA8cG9seWdvbiAgcG9pbnRzPVwiMTY3LjEsMzcuMiAxNDEuOSwyMi42IDE0MS45LDUxLjdcIiBzdHlsZT1cInN0cm9rZS1taXRlcmxpbWl0OiAxMDtcIj48L3BvbHlnb24+XG4gICAgICAgICAgICAgICAgPHBvbHlnb24gIHBvaW50cz1cIjE2Ny43LDM3LjIgMTkyLjksNTEuNyAxOTIuOSwyMi42XCIgc3R5bGU9XCJzdHJva2UtbWl0ZXJsaW1pdDogMTA7XCI+PC9wb2x5Z29uPlxuICAgICAgICAgICAgPC9nPlxuICAgICAgICAgICAgPGNpcmNsZSAgY3g9XCIxNjcuN1wiIGN5PVwiMzcuMlwiIHI9XCI5LjZcIiBzdHlsZT1cInN0cm9rZS1taXRlcmxpbWl0OiAxMDtcIj48L2NpcmNsZT5cbiAgICAgICAgICAgIDxsaW5lICB4MT1cIjE2Ny43XCIgeTE9XCIyNy42XCIgeDI9XCIxNjcuN1wiIHkyPVwiMTIuM1wiIHN0eWxlPVwic3Ryb2tlLW1pdGVybGltaXQ6IDEwO1wiPjwvbGluZT5cbiAgICAgICAgICAgIDxwYXRoICBkPVwiTTE3NS40LDEyLjNjMC00LjItMy40LTcuNy03LjctNy43UzE2MCw4LDE2MCwxMi4zSDE3NS40elwiIHN0eWxlPVwic3Ryb2tlLW1pdGVybGltaXQ6IDEwO1wiPjwvcGF0aD5cbiAgICAgICAgICAgIDwvZz5cbiAgICAgICAgPC9zdmc+XG4gICAgICAgIGA7XG4gICAgfVxufVxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwicHZkLWljb25cIiwgcHZkSWNvbik7XG5leHBvcnQgY2xhc3MgVmFsdmVQUiBleHRlbmRzIExpdEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlwiO1xuICAgICAgICB0aGlzLnN5c3RlbSA9IFwiZGVmYXVsdFwiO1xuICAgICAgICB0aGlzLmVuZ2luZSA9IFwiZGVmYXVsdFwiO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB7IHR5cGU6IFN0cmluZyB9LFxuICAgICAgICAgICAgc3lzdGVtOiB7IHR5cGU6IFN0cmluZyB9LFxuICAgICAgICAgICAgZW5naW5lOiB7IHR5cGU6IFN0cmluZyB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IHN0eWxlcygpIHtcbiAgICAgICAgcmV0dXJuIGNzcyBgXG4gICAgICAgICAgICA6aG9zdHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OmZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246Y29sdW1uO1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdntcbiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1JvYm90bycsIHNhbnMtc2VyaWY7XG4gICAgICAgICAgICAgICAgYm9yZGVyIDogc29saWQgMXB4IGdyYXk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC41cmVtO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6MC4zcmVtO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b20gOiAwLjJyZW07XG4gICAgICAgICAgICAgICAgd2lkdGg6MTAwJTtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOmNlbnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdltlcnJde1xuICAgICAgICAgICAgICAgIGNvbG9yIDogcmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBodG1sIGBcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8c3Ryb25nID4ke3RoaXMubmFtZX08L3N0cm9uZz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJvb2wtY29sb3IgbmFtZT1cIiR7dGhpcy5uYW1lfVwiICBlbmdpbmU9XCIke3RoaXMuZW5naW5lfVwiIHN5c3RlbT1cIiR7dGhpcy5zeXN0ZW19XCI+IFxuICAgICAgICAgICAgICAgIDxwdnItaWNvbj48L3B2ci1pY29uPlxuICAgICAgICAgICAgPC9ib29sLWNvbG9yPlxuICAgICAgICBgO1xuICAgIH1cbn1cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcInZhbHZlLXByXCIsIFZhbHZlUFIpO1xuIiwiaW1wb3J0IHtNYW5hZ2VyLEpzb25Qb2xsRW5naW5lLGhtaUVsZW1lbnQsIGZha2VEYXRhRW5naW5lfSBmcm9tICdqYXNobWknXG5pbXBvcnQgJ3ZhbHZlcydcblxuLypsZXQgZW5naW5lID0gbmV3IEpzb25Qb2xsRW5naW5lKFwic3RkXCIse1xuICAgIHJlYWRQcmVmaXggOiBcImFwaS9KU09OL3JlYWRcIixcbiAgICB3cml0ZVByZWZpeDogXCJhcGkvSlNPTi93cml0ZVwiLFxuICAgIHJlYWRJbnRlcnZhbF9tcyA6IDIwMDBcbn0pO1xuKi9cbmxldCBlbmdpbmUgPSBuZXcgZmFrZURhdGFFbmdpbmUoXCJzdGRcIik7XG5cbk1hbmFnZXIuQWRkRW5naW5lKGVuZ2luZSk7XG5NYW5hZ2VyLkluaXQoKTtcblxuIiwiaW1wb3J0IHsgRGF0YUNvbW1zRW5naW5lIH0gZnJvbSAnLi4vRGF0YUNvbW1zRW5naW5lLmpzJztcbmltcG9ydCB7IFZhclJlc3BvbnNlLCBWYXJTdGF0dXNDb2RlcyB9IGZyb20gJy4uL0RhdGFNb2RlbHMvVHlwZXMuanMnO1xuaW1wb3J0IHsgQWN0aW9ucyB9IGZyb20gJy4uL0RhdGFNb2RlbHMvVHlwZXMuanMnO1xuZXhwb3J0IGNsYXNzIGZha2VEYXRhRW5naW5lIGV4dGVuZHMgRGF0YUNvbW1zRW5naW5lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YXJfdHlwZXMgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGFzeW5jIEluaXRpYWxpemUoKSB7XG4gICAgICAgIC8vIHNldEludGVydmFsKHRoaXMuX3VwZGF0ZVZhcmlhYmxlcy5iaW5kKHRoaXMpLCAyMDAwKTtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICAgIH1cbiAgICBfdXBkYXRlVmFyaWFibGVzKCkge1xuICAgICAgICBsZXQgcmVzcCA9IFtdO1xuICAgICAgICB0aGlzLnZhcl90eXBlcy5mb3JFYWNoKCh2YWwsIGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIGxldCB1cGQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApO1xuICAgICAgICAgICAgICAgIHJlc3AucHVzaChuZXcgVmFyUmVzcG9uc2UodHJ1ZSwga2V5LCBcImRlZmF1bHRcIiwgdXBkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocmVzcC5sZW5ndGggIT09IDApXG4gICAgICAgICAgICB0aGlzLlVwZGF0ZVZhcnMocmVzcCwgVmFyU3RhdHVzQ29kZXMuU3Vic2NyaWJlZCwgQWN0aW9ucy5SZWFkKTtcbiAgICB9XG4gICAgYXN5bmMgU3Vic2NyaWJlKHZhcmlhYmxlcykge1xuICAgICAgICBsZXQgcmVzcCA9IFtdO1xuICAgICAgICB2YXJpYWJsZXMuZm9yRWFjaCh2ID0+IHtcbiAgICAgICAgICAgIGxldCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtuYW1lPVwiJHt2Lm5hbWV9XCJdYCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHYubmFtZSAhPT0gXCJzdHJpbmdcIiB8fCB2Lm5hbWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICByZXNwLnB1c2gobmV3IFZhclJlc3BvbnNlKGZhbHNlLCB2Lm5hbWUsIHYuc3lzdGVtKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHZhbCA9IDA7XG4gICAgICAgICAgICBpZiAoZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiYm9vbFwiKSkge1xuICAgICAgICAgICAgICAgIHZhbCA9IChNYXRoLnJhbmRvbSgpID4gMC41KSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhcl90eXBlcy5zZXQodi5uYW1lLCBcImJvb2xcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWwgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApO1xuICAgICAgICAgICAgICAgIHRoaXMudmFyX3R5cGVzLnNldCh2Lm5hbWUsIFwibnVtYmVyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzcC5wdXNoKG5ldyBWYXJSZXNwb25zZSh0cnVlLCB2Lm5hbWUsIHYuc3lzdGVtLCB2YWwpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXNwO1xuICAgIH1cbiAgICBhc3luYyBVbnN1YnNjcmliZSh2YXJpYWJsZXMpIHtcbiAgICAgICAgcmV0dXJuIHZhcmlhYmxlcy5tYXAodiA9PiBuZXcgVmFyUmVzcG9uc2UodHJ1ZSwgdi5uYW1lLCB2LnN5c3RlbSkpO1xuICAgIH1cbiAgICBhc3luYyBXcml0ZSh0YXJnZXRzLCB2YWx1ZXMpIHtcbiAgICAgICAgbGV0IHJlc3AgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXNwLnB1c2gobmV3IFZhclJlc3BvbnNlKHRydWUsIHRhcmdldHNbaV0ubmFtZSwgdGFyZ2V0c1tpXS5zeXN0ZW0sIHZhbHVlc1tpXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwO1xuICAgIH1cbiAgICBhc3luYyBSZWFkKHRhcmdldHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==